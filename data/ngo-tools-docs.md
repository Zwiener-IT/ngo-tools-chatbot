# ngo.tools Platform Dokumentation

Automatisch generiert am: 2026-02-17T18:39:18.508Z  
Anzahl Dokumente: 239

---

## Inhaltsverzeichnis

- **CLUSTER** (3 Dokumente)
- **PAGE** (144 Dokumente)
- **RESOURCE** (47 Dokumente)
- **STANDALONE_PAGE** (45 Dokumente)

---

# CLUSTER

## cluster: News

**Entity:** News  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/News.php`  
**Updated:** 2026-02-17 15:19:49  

# Neuigkeiten

## Übersicht

Der Bereich „Neuigkeiten" dient als übergeordneter Navigationsbereich, unter dem sich weitere Unterseiten befinden.

## Navigation

Der Bereich „Neuigkeiten" befindet sich in der Seitenleiste unter der Menügruppe **Kommunikation**.

---

## cluster: Settings

**Entity:** Settings  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings.php`  
**Updated:** 2026-02-17 15:19:49  

# Einstellungen

## Übersicht

Der Bereich „Einstellungen" fasst verschiedene Konfigurationsseiten innerhalb deines Mandanten-Bereichs zusammen.

## Navigation

Der Bereich „Einstellungen" ist nicht als eigener Menüpunkt in der Seitenleiste sichtbar. Alle Einstellungsseiten werden unter dem gemeinsamen Breadcrumb „Einstellungen" zusammengefasst, sodass du jederzeit erkennst, dass du dich im Einstellungsbereich befindest.

## Zugehörige Einstellungsseiten

Die einzelnen Konfigurationsseiten innerhalb der Einstellungen sind als separate Unterseiten organisiert. Jede Unterseite deckt einen bestimmten Themenbereich ab.

---

## cluster: Knowledge

**Entity:** Knowledge  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Knowledge.php`  
**Updated:** 2026-02-17 15:19:35  

# Wissen

## Übersicht

Der Bereich „Wissen" ist ein Bereich innerhalb deiner Organisation, der Funktionen rund um Artikel, Veranstaltungen und Beratungsangebote bündeln soll. Der Bereich „Wissen" ist derzeit **nicht verfügbar** und kann von dir nicht aufgerufen oder genutzt werden.

## Verfügbarkeit

Der Bereich „Wissen" ist aktuell in der Anwendung ausgeblendet und kann nicht über die Navigation erreicht werden. Sollte der Bereich in Zukunft freigeschaltet werden, findest du ihn in der Navigation deiner Organisation.

---

# PAGE

## page: Newsletter

**Entity:** Newsletter  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/Newsletter.php`  
**Updated:** 2026-02-17 16:01:39  

## Main Page (Newsletter.php)
- Located at `app/Filament/App/Clusters/Settings/Pages/Newsletter.php`
- Part of the `Settings` cluster in the App panel
- Implements both `HasForms` and `HasTable` interfaces
- Navigation group: `Communication` (labeled "Kommunikation")
- Navigation sort: 250

## Blade Template
The template at `resources/views/filament/app/clusters/settings/pages/newsletter.blade.php`:
```blade
<x-filament-panels::page>
    <livewire:newsletter-lists />
    {{ $this->table }}
</x-filament-panels::page>
```
It renders two things:
1. A `<livewire:newsletter-lists />` Livewire component
2. The table from `$this->table` (the EmbeddingType::NewsletterLists table)

## SettingsPage Base Class
- Located at `app/Filament/App/Clusters/Settings/Pages/SettingsPage.php`
- Extends Filament's `SimplePage`
- Part of the `Settings` cluster
- Has a `hasFeature()` check - pages are only visible when their required feature is active
- Uses `HasPageShield` trait for authorization
- Stores form data and handles saving via a `save()` method
- The `mount()` method fills form data from `$this->settings` (but `$settings` is not defined in the base; subclasses likely override or use different data sources)

## RegistersInNavigation Trait
- Located at `app/Filament/App/Traits/RegistersInNavigation.php`
- Has a `$navGroup` property that maps to NavigationGroup enum
- `shouldRegisterNavigation()` checks:
  1. If the nav group's feature is active (`hasFeature()`)
  2. Calls parent's `shouldRegisterNavigation()`
- Navigation group, label, and icon come from the NavigationGroup enum

## NavigationGroup::Communication
- From `vendor/ngo-tools/connector/src/Enums/NavigationGroup.php`
- The Communication case maps to feature `newsletter` (via `getFeature()` method)
- Label: "Kommunikation" (from translation `connector::navigation-groups.communication`)
- Icon: `heroicon-o-megaphone`
- This means the Newsletter settings page is only visible when the Newsletter tool is activated

## MailAddressPicker Component
- Located at `app/Filament/Forms/Components/MailAddressPicker.php`
- Extends Filament's `Select` component
- In `setUp()`, it:
  - Sets options from `MailAddress::getSelectOptions()` (queries mail addresses from the current tenant)
  - Sets `searchable()`
  - Adds a suffix action to create a new mail address (opens a URL to the Mail settings page)
- The select shows available email addresses for the organization

## EmbeddingType::NewsletterLists
- From `app/Enums/EmbeddingType.php`
- `NewsletterLists` is one of many embedding types
- `getTable()` method returns a configured Filament table that shows:
  - **Columns**: `name` (label: "Name") and an `embedding_code` column (label: from `general.html`, which is "HTML") that displays the embedding code with a copy action
  - **Query**: Filters `Embedding` model records where `type` equals `EmbeddingType::NewsletterLists`
  - The table is for displaying newsletter list embeddings (HTML code snippets to embed newsletter signup forms on websites)

## NewsletterLists Livewire Component
- Located at `app/Livewire/NewsletterLists.php`
- This is the main management component for newsletter lists
- **View**: `resources/views/livewire/newsletter-lists.blade.php`
- **Functionality**:
  - Displays all newsletter lists for the current tenant
  - Each list shows: name, description, subscriber count, double opt-in status, confirmation settings
  - Has **Create** action to create new newsletter lists
  - Has **Edit** action on each list
  - Has **Delete** action on each list
  - Uses `HasPageShield`-like authorization through `canManage()` which checks `canConfigureFeature('newsletter')`

### Create/Edit Form Fields:
The form (`getFormSchema()`) includes:
1. **Name** (`name`) - TextInput, required, max 255 chars
2. **Beschreibung** (`description`) - Textarea, nullable, max 500 chars  
3. **Double Opt-In** (`requires_double_opt_in`) - Toggle, default true
4. **Bestätigungsmail** section (visible only when Double Opt-In is enabled):
   - **Betreff** (`confirmation_subject`) - TextInput, required when double opt-in active
   - **Inhalt** (`confirmation_body`) - RichEditor, required when double opt-in active
5. **Willkommensmail** (`send_welcome_mail`) - Toggle
6. **Willkommensmail** section (visible only when send_welcome_mail is enabled):
   - **Betreff** (`welcome_subject`) - TextInput, required when welcome mail active
   - **Inhalt** (`welcome_body`) - RichEditor, required when welcome mail active

### List Display (Blade template):
The `newsletter-lists.blade.php` shows each list as a card with:
- Name
- Description (if present)
- Subscriber count badge ("X Abonnenten")
- Tags for: Double Opt-In status, Willkommensmail status
- Edit and Delete action buttons (only if `canManage()` returns true)
- A "Create" button at the top (only if `canManage()` returns true)

### Authorization:
- `canManage()` checks `canConfigureFeature('newsletter')` - this maps to the "Verwalten" (configure) permission level for the Newsletter tool

## Related Translations
Key translations used:
- `general.newsletter` → "Newsletter"
- `general.newsletter-lists` → "Newsletter-Listen"  
- `general.newsletter-list` → "Newsletter-Liste"
- `general.manage-lists` → "Newsletter-Listen verwalten"
- `general.subscribers` → "Abonnenten"
- `general.email` → "Email-Adresse"
- `general.html` → "HTML"
- `general.name` → "Name"
- `general.description` → "Beschreibung"
- `general.subject` → "Betreff"
- `general.content` → "Inhalt"
- `general.embeddings` → "Einbindung in Webseiten"

## Summary of the Newsletter Settings Page
The page has three main sections:
1. **Newsletter-Listen** (Livewire component) - Manage newsletter lists (create, edit, delete) with configuration for Double Opt-In and Welcome emails
2. **Einbindung in Webseiten** (Embeddings table) - Shows HTML embedding codes for newsletter signup forms that can be embedded on external websites
3. The form with **Email-Adresse** selector appears to be part of the settings page's general configuration (sender email for newsletters), though the save mechanism for this particular field wasn't fully traceable

The page requires the **Newsletter** tool to be activated and uses the **Verwalten** (configure) permission level for management actions.
</result>
</tool_result>

<tool_call>
<tool_name>Read</tool_name>
<parameters>
<file_path>/home/forge/docs.ngo.tools/releases/nextjs/data/repo/app/Livewire/NewsletterLists.php</file_path>
</parameters>
</tool_call>
<tool_result>
<result>
<?php

namespace App\Livewire;

use App\Enums\EmbeddingType;
use App\Models\Embedding;
use App\Models\NewsletterList;
use Filament\Actions\Action;
use Filament\Actions\Concerns\InteractsWithActions;
use Filament\Actions\Contracts\HasActions;
use Filament\Actions\CreateAction;
use Filament\Actions\DeleteAction;
use Filament\Actions\EditAction;
use Filament\Forms\Components\RichEditor;
use Filament\Forms\Components\Section;
use Filament\Forms\Components\Textarea;
use Filament\Forms\Components\TextInput;
use Filament\Forms\Components\Toggle;
use Filament\Forms\Concerns\InteractsWithForms;
use Filament\Forms\Contracts\HasForms;
use Filament\Schemas\Components\Utilities\Get;
use Livewire\Attributes\Computed;
use Livewire\Component;

class NewsletterLists extends Component
{
    use InteractsWithActions;
    use InteractsWithForms;

    #[Computed]
    public function lists()
    {
        return NewsletterList::query()
            ->withCount('subscribers')
            ->get();
    }

    public function createAction(): Action
    {
        return CreateAction::make()
            ->model(NewsletterList::class)
            ->label(__('newsletter.create-list'))
            ->modalHeading(__('newsletter.create-list'))
            ->form($this->getFormSchema())
            ->after(function (NewsletterList $record): void {
                Embedding::create([
                    'embeddable_id' => $record->id,
                    'embeddable_type' => NewsletterList::class,
                    'type' => EmbeddingType::NewsletterLists,
                ]);
            });
    }

    public function editAction(): Action
    {
        return EditAction::make()
            ->record(fn (array $arguments) => NewsletterList::find($arguments['id']))
            ->form($this->getFormSchema())
            ->iconButton()
            ->modalHeading(__('newsletter.edit-list'));
    }

    public function deleteAction(): Action
    {
        return DeleteAction::make()
            ->record(fn (array $arguments) => NewsletterList::find($arguments['id']))
            ->iconButton();
    }

    public function canManage(): bool
    {
        return canConfigureFeature('newsletter');
    }

    public function getFormSchema(): array
    {
        return [
            TextInput::make('name')
                ->label(__('general.name'))
                ->required()
                ->maxLength(255),

            Textarea::make('description')
                ->label(__('general.description'))
                ->maxLength(500),

            Toggle::make('requires_double_opt_in')
                ->label(__('newsletter.double-opt-in'))
                ->default(true)
                ->live(),

            Section::make(__('newsletter.confirmation-mail'))
                ->schema([
                    TextInput::make('confirmation_subject')
                        ->label(__('general.subject'))
                        ->requiredIf('requires_double_opt_in', true),

                    RichEditor::make('confirmation_body')
                        ->label(__('general.content'))
                        ->requiredIf('requires_double_opt_in', true),
                ])
                ->visible(fn (Get $get) => $get('requires_double_opt_in')),

            Toggle::make('send_welcome_mail')
                ->label(__('newsletter.welcome-mail'))
                ->default(false)
                ->live(),

            Section::make(__('newsletter.welcome-mail'))
                ->schema([
                    TextInput::make('welcome_subject')
                        ->label(__('general.subject'))
                        ->requiredIf('send_welcome_mail', true),

                    RichEditor::make('welcome_body')
                        ->label(__('general.content'))
                        ->requiredIf('send_welcome_mail', true),
                ])
                ->visible(fn (Get $get) => $get('send_welcome_mail')),
        ];
    }

    public function render()
    {
        return view('livewire.newsletter-lists');
    }
}
</result>
</tool_call>

<tool_call>
<tool_name>Grep</tool_name>
<parameters>
<pattern>double-opt-in|confirmation-mail|welcome-mail|create-list|edit-list</pattern>
<file_pattern>lang/de/newsletter.php</file_pattern>
</parameters>
</tool_call>
<tool_result>
<result>
lang/de/newsletter.php:6:    'create-list' => 'Newsletter-Liste erstellen',
lang/de/newsletter.php:7:    'edit-list' => 'Newsletter-Liste bearbeiten',
lang/de/newsletter.php:8:    'double-opt-in' => 'Double Opt-In',
lang/de/newsletter.php:9:    'confirmation-mail' => 'Bestätigungsmail',
lang/de/newsletter.php:10:    'welcome-mail' => 'Willkommensmail',
</result>
</tool_call>

<tool_call>
<tool_name>Read</tool_name>
<parameters>
<file_path>/home/forge/docs.ngo.tools/releases/nextjs/data/repo/lang/de/newsletter.php</file_path>
</parameters>
</tool_call>
<tool_result>
<result>
<?php

return [
    'newsletters' => 'Newsletter',
    'newsletter-campaigns' => 'Newsletter-Kampagnen',
    'create-list' => 'Newsletter-Liste erstellen',
    'edit-list' => 'Newsletter-Liste bearbeiten',
    'double-opt-in' => 'Double Opt-In',
    'confirmation-mail' => 'Bestätigungsmail',
    'welcome-mail' => 'Willkommensmail',
    'drip-campaigns' => 'Newsletter-Serien',
];
</result>
</tool_call>

<tool_call>
<tool_name>Read</tool_name>
<parameters>
<file_path>/home/forge/docs.ngo.tools/releases/nextjs/data/repo/resources/views/livewire/newsletter-lists.blade.php</file_path>
</parameters>
</tool_call>
<tool_result>
<result>
<div class="space-y-4">
    <div class="flex items-center justify-between">
        <h2 class="text-lg font-semibold">{{ __('general.newsletter-lists') }}</h2>

        @if($this->canManage())
            <div>
                {{ $this->createAction }}
            </div>
        @endif
    </div>

    <x-filament-actions::modals />

    @if($this->lists->isEmpty())
        <p class="text-sm text-gray-500 dark:text-gray-400 italic">
            {{ __('general.no-results') }}
        </p>
    @else
        <div class="grid gap-4 sm:grid-cols-2">
            @foreach($this->lists as $list)
                <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-700 dark:bg-gray-800">
                    <div class="flex items-start justify-between gap-2">
                        <div>
                            <h3 class="font-medium text-gray-900 dark:text-white">
                                {{ $list->name }}
                            </h3>

                            @if($list->description)
                                <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">
                                    {{ $list->description }}
                                </p>
                            @endif
                        </div>

                        @if($this->canManage())
                            <div class="flex items-center gap-1 shrink-0">
                                {{ ($this->editAction)(['id' => $list->id]) }}
                                {{ ($this->deleteAction)(['id' => $list->id]) }}
                            </div>
                        @endif
                    </div>

                    <div class="mt-3 flex flex-wrap items-center gap-2">
                        <x-filament::badge color="info">
                            {{ $list->subscribers_count }} {{ __('general.subscribers') }}
                        </x-filament::badge>

                        <x-filament::badge :color="$list->requires_double_opt_in ? 'success' : 'gray'">
                            {{ __('newsletter.double-opt-in') }}
                        </x-filament::badge>

                        @if($list->send_welcome_mail)
                            <x-filament::badge color="success">
                                {{ __('newsletter.welcome-mail') }}
                            </x-filament::badge>
                        @endif
                    </div>
                </div>
            @endforeach
        </div>
    @endif
</div>
</result>
</tool_call>

<tool_call>
<tool_name>Read</tool_name>
<parameters>
<file_path>/home/forge/docs.ngo.tools/releases/nextjs/data/repo/app/Enums/EmbeddingType.php</file_path>
<offset>1</offset>
<limit>80</limit>
</parameters>
</tool_call>
<tool_result>
<result>
<?php

namespace App\Enums;

use App\Models\Embedding;
use Filament\Actions\Action;
use Filament\Support\Enums\MaxWidth;
use Filament\Tables\Actions\ViewAction;
use Filament\Tables\Columns\TextColumn;
use Filament\Tables\Table;
use Illuminate\Database\Eloquent\Builder;

enum EmbeddingType: string
{
    case EventRegistration = 'event_registration';
    case NewsletterLists = 'newsletter_lists';
    case DonationForm = 'donation_form';
    case ContactForm = 'contact_form';

    public function label(): string
    {
        return match ($this) {
            self::EventRegistration => __('general.events'),
            self::NewsletterLists => __('general.newsletter-lists'),
            self::DonationForm => __('general.donations'),
            self::ContactForm => __('general.contacts'),
        };
    }

    public function getTable(Table $table): Table
    {
        return $table
            ->heading(__('general.embeddings'))
            ->query(Embedding::query()->where('type', $this))
            ->columns([
                TextColumn::make('embeddable.name')
                    ->label(__('general.name')),
                TextColumn::make('embedding_code')
                    ->label(__('general.html'))
                    ->badge()
                    ->icon('heroicon-o-clipboard')
                    ->copyable()
                    ->limit(40),
            ])
            ->actions([
                ViewAction::make()
                    ->modalContent(fn (Embedding $record) => view('components.embedding-code', ['code' => $record->embedding_code]))
                    ->modalWidth(MaxWidth::FourExtraLarge)
                    ->modalHeading(__('general.embeddings')),
            ])
            ->paginated(false);
    }

    public function getHeaderAction(): Action
    {
        return Action::make($this->value)
            ->label($this->label())
            ->url(match ($this) {
                self::EventRegistration => route('filament.app.events.resources.events.index'),
                self::NewsletterLists => route('filament.app.clusters.settings.pages.newsletter'),
                self::DonationForm => route('filament.app.clusters.settings.pages.donations'),
                self::ContactForm => route('filament.app.clusters.settings.pages.general'),
            });
    }
}
</result>
</tool_call>

Now I have a complete understanding of the Newsletter settings page. Let me write the documentation.

# Newsletter

## Übersicht
Auf dieser Einstellungsseite verwalten Sie Ihre Newsletter-Listen und deren Einbindung in Webseiten. Sie können neue Newsletter-Listen erstellen, bestehende bearbeiten oder löschen sowie die zugehörigen HTML-Einbindungscodes einsehen, um Newsletter-Anmeldeformulare auf externen Webseiten zu integrieren.

Die Seite befindet sich im Einstellungsbereich der Anwendung.

## Navigation
- **Einstellungen** → **Kommunikation** → **Newsletter**
- Menügruppe: Kommunikation (Icon: Megafon)
- Das Tool **Newsletter** muss aktiviert sein, damit diese Seite sichtbar ist.

## Newsletter-Listen

Die Seite zeigt alle vorhandenen Newsletter-Listen als Karten in einem Raster an. Jede Karte enthält:

- **Name** der Liste
- **Beschreibung** (falls vorhanden)
- Anzahl der **Abonnenten** (als Badge)
- Status-Badges für **Double Opt-In** (grün wenn aktiv, grau wenn inaktiv) und **Willkommensmail** (grün, nur sichtbar wenn aktiv)

Sind keine Newsletter-Listen vorhanden, wird der Hinweis „Keine Ergebnisse" angezeigt.

### Newsletter-Liste erstellen

Über die Schaltfläche **Newsletter-Liste erstellen** öffnet sich ein Formular mit folgenden Feldern:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Name der Newsletter-Liste (max. 255 Zeichen) |
| Beschreibung | Textbereich | Nein | Optionale Beschreibung der Liste (max. 500 Zeichen) |
| Double Opt-In | Schalter | Nein | Aktiviert das Double-Opt-In-Verfahren (standardmäßig aktiv) |
| Betreff (Bestätigungsmail) | Textfeld | Bedingt | Betreff der Bestätigungsmail. Nur sichtbar und Pflichtfeld, wenn Double Opt-In aktiviert ist |
| Inhalt (Bestätigungsmail) | Rich-Text-Editor | Bedingt | Inhalt der Bestätigungsmail. Nur sichtbar und Pflichtfeld, wenn Double Opt-In aktiviert ist |
| Willkommensmail | Schalter | Nein | Aktiviert den Versand einer Willkommensmail (standardmäßig deaktiviert) |
| Betreff (Willkommensmail) | Textfeld | Bedingt | Betreff der Willkommensmail. Nur sichtbar und Pflichtfeld, wenn Willkommensmail aktiviert ist |
| Inhalt (Willkommensmail) | Rich-Text-Editor | Bedingt | Inhalt der Willkommensmail. Nur sichtbar und Pflichtfeld, wenn Willkommensmail aktiviert ist |

Beim Erstellen einer Newsletter-Liste wird automatisch ein Einbindungscode für Webseiten generiert.

### Newsletter-Liste bearbeiten

Über das Bearbeiten-Symbol auf einer Listenkarte öffnet sich dasselbe Formular wie beim Erstellen, vorausgefüllt mit den bestehenden Werten.

### Newsletter-Liste löschen

Über das Löschen-Symbol auf einer Listenkarte kann eine Newsletter-Liste entfernt werden. Es erscheint eine Bestätigungsabfrage vor dem Löschen.

## Einbindung in Webseiten

Unterhalb der Newsletter-Listen wird eine Tabelle mit der Überschrift **Einbindung in Webseiten** angezeigt. Sie enthält die HTML-Einbindungscodes für die Newsletter-Anmeldeformulare.

| Spalte | Beschreibung |
|--------|--------------|
| Name | Name der zugehörigen Newsletter-Liste |
| HTML | Der Einbindungscode als Badge mit Kopierfunktion (Klick auf das Clipboard-Symbol kopiert den Code) |

Über die Aktion **Anschauen** kann der vollständige Einbindungscode in einem größeren Modal-Fenster betrachtet werden.

Die Tabelle zeigt alle Einträge ohne Seitenumbruch an.

## Berechtigungen

- Die Schaltflächen zum **Erstellen**, **Bearbeiten** und **Löschen** von Newsletter-Listen sind nur sichtbar, wenn die Berechtigung **Verwalten** für das Tool **Newsletter** vorhanden ist.
- Ohne diese Berechtigung können die Newsletter-Listen und Einbindungscodes nur eingesehen werden.

## Beziehungen

- **Email-Postfächer** (Einstellungen → Kommunikation → Email-Postfächer): Die verfügbaren Absender-Email-Adressen werden aus den konfigurierten Email-Adressen der Organisation geladen.
- **Abonnenten**: Jede Newsletter-Liste zeigt die Anzahl der zugeordneten Abonnenten an.
- **Einbindung in Webseiten**: Für jede Newsletter-Liste wird automatisch ein Einbindungscode erstellt, der auf externen Webseiten verwendet werden kann.

---

## page: Mail

**Entity:** Mail  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/Mail.php`  
**Updated:** 2026-02-17 15:59:39  

# Email-Einstellungen

## Übersicht

Auf der Seite **Email-Einstellungen** konfigurierst du die allgemeinen Email-Einstellungen deiner Organisation. Hier legst du die Absender-Email-Adresse fest, definierst berechtigte Absender und gestaltest die Standard-Anrede sowie Verabschiedung für alle ausgehenden Emails.

Die Seite befindet sich im Bereich **Einstellungen** unter der Gruppe **Allgemein**.

## Formularfelder der Email-Einstellungen

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Email-Adresse | Email-Adresswähler | – | Die Email-Adresse deiner Organisation, die als Absenderadresse für den Versand verwendet wird. |
| Berechtigte Absender | Liste (wiederholbar) | Ja (pro Eintrag) | Liste von Email-Adressen, die berechtigt sind, im Namen deiner Organisation Emails zu versenden. Jeder Eintrag muss eine gültige Email-Adresse sein. Über die Schaltfläche **„Absender hinzufügen"** kannst du weitere Einträge ergänzen. Einzelne Einträge kannst du über das Löschen-Symbol wieder entfernen. |
| Anrede | Textfeld (mehrzeilig) | – | Standard-Anrede, die automatisch in ausgehende Emails eingefügt wird. |
| Verabschiedung | Textfeld (mehrzeilig) | – | Standard-Verabschiedung, die automatisch in ausgehende Emails eingefügt wird. |

## Validierung und Fehlermeldungen der Email-Einstellungen

Beim Speichern der Email-Einstellungen können folgende Validierungsfehler auftreten:

| Fehler | Ursache | Lösung |
|---|---|---|
| Ungültige Email-Adresse bei „Berechtigte Absender" | Eine eingegebene Email-Adresse hat kein gültiges Format (z. B. fehlendes @-Zeichen oder fehlende Domain). | Überprüfe die betroffene Email-Adresse und korrigiere das Format (z. B. `name@beispiel.de`). |
| Leerer Eintrag bei „Berechtigte Absender" | Du hast einen neuen Absender-Eintrag hinzugefügt, aber das Feld leer gelassen. | Trage eine gültige Email-Adresse ein oder entferne den leeren Eintrag über das Löschen-Symbol. |

---

## page: LegalDocuments

**Entity:** LegalDocuments  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/LegalDocuments.php`  
**Updated:** 2026-02-17 15:58:53  

# Rechtliche Dokumente

## Übersicht

Auf der Seite **Rechtliche Dokumente** kannst du rechtliche Dokumente einsehen, herunterladen und genehmigen. Die Seite ist in zwei Bereiche unterteilt: Dokumente, die noch auf deine Genehmigung warten, und bereits genehmigte Dokumente.

## Navigation

Die Seite **Rechtliche Dokumente** findest du im Bereich **Einstellungen**, in der Navigationsgruppe **Allgemein**.

## Aktionen

### Dokument genehmigen

Für Dokumente, die noch auf eine Freigabe warten, steht dir eine Genehmigungsfunktion zur Verfügung. Wenn du ein Dokument genehmigst, wirst du als verantwortliche Person hinterlegt, und die zugehörige Aufgabe wird als abgeschlossen markiert. Bereits genehmigte Dokumente können nicht erneut genehmigt werden.

### Dokument herunterladen

Du kannst jedes angezeigte Dokument als Datei herunterladen.

## Bereiche und Anzeige

Die Seite zeigt zwei getrennte Bereiche:

- **Ausstehende Dokumente**: Hier werden alle Dokumente aufgelistet, die noch auf deine Genehmigung warten.
- **Genehmigte Dokumente**: Hier siehst du alle bereits genehmigten Dokumente. Pro Dokument wird jeweils nur die aktuellste Genehmigung angezeigt.

## Beziehungen zu anderen Bereichen

Die Genehmigung rechtlicher Dokumente ist als Aufgabe im System hinterlegt. Sobald du ein Dokument genehmigst, wird die zugehörige Aufgabe automatisch als abgeschlossen markiert und du wirst als verantwortliche Person eingetragen.

---

## page: General

**Entity:** General  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/General.php`  
**Updated:** 2026-02-17 15:58:15  

# Allgemein

## Übersicht

Auf der Seite **Allgemein** kannst du die grundlegenden Stammdaten deiner Organisation verwalten. Dazu gehören Name, Adresse, Kontaktdaten, Finanzamt-Informationen, Bankverbindung und rechtliche Angaben. Die Seite findest du im Bereich **Einstellungen**.

Änderungen hier wirken sich auf mehrere Stellen aus, da die Stammdaten unter anderem in der Datenschutzerklärung verwendet werden.

## Navigation

Die Seite **Allgemein** befindet sich im Bereich **Einstellungen** unter der Gruppe **Allgemein**.

## Formularfelder

### Name

Auf der Seite **Allgemein** werden im Abschnitt „Name" die grundlegenden Bezeichnungen deiner Organisation erfasst.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name (informell) | Textfeld | Ja | Der informelle Name deines Vereins, z.B. „Fit für die Zukunft". |
| Name (formell) | Textfeld | Ja | Der vollständige, offizielle Name deines Vereins, z.B. „Fit für die Zukunft Deutschland e.V.". |
| Rechtsform | Auswahlfeld | Ja | Die Rechtsform deiner Organisation (z.B. eingetragener Verein, gGmbH). Die Auswahl beeinflusst, ob im Abschnitt „Rechtliches" ein Feld für Vorstandsmitglieder, Geschäftsführer oder ähnliche Personen angezeigt wird – und wie dieses Feld benannt ist. |
| NGO.Tools-URL | Textfeld | Nein | Die URL, unter der deine Organisation bei NGO.Tools erreichbar ist (z.B. „https://fit-fuer-die-zukunft.ngo.tools"). Dieses Feld ist nicht bearbeitbar. Wenn du die URL ändern möchtest, wende dich bitte an den Support. |

### Adresse

Im Abschnitt „Adresse" auf der Seite **Allgemein** hinterlegst du den Sitz deiner Organisation.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Adresszeile 1 | Textfeld | Ja | Die Hauptadresse deiner Organisation (Straße und Hausnummer). |
| Adresszeile 2 | Textfeld | Nein | Ergänzende Adressangaben, z.B. „c/o Nachname". |
| Postleitzahl | Textfeld | Ja | Die Postleitzahl des Standorts. Die Postleitzahl wird außerdem verwendet, um automatisch ein zuständiges Finanzamt im Bereich Spenden zuzuordnen, falls dort noch keines hinterlegt ist. |
| Stadt | Textfeld | Ja | Der Ort des Standorts. |
| Land | Textfeld | Nein | Das Land deiner Organisation. Dieses Feld wird automatisch angezeigt und ist nicht bearbeitbar. |

### Kontaktdaten

Im Abschnitt „Kontaktdaten" auf der Seite **Allgemein** kannst du die Erreichbarkeit deiner Organisation hinterlegen.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| E-Mail | Textfeld | Nein | Die E-Mail-Adresse deiner Organisation. |
| Telefon | Textfeld (Telefonnummer) | Nein | Die Telefonnummer deiner Organisation. |
| Homepage | Textfeld (URL) | Nein | Die Webseite deiner Organisation. Es muss eine gültige URL eingegeben werden (z.B. „https://www.meinverein.de"). |

### Finanzamt

Im Abschnitt „Finanzamt" auf der Seite **Allgemein** kannst du das zuständige Finanzamt und steuerliche Angaben deiner Organisation erfassen.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Finanzamt | Suchbares Auswahlfeld | Nein | Das Finanzamt, das für deinen Verein zuständig ist und bei dem die Anerkennung der Gemeinnützigkeit beantragt wurde. Du kannst den Namen des Finanzamts eintippen, um es in der Liste zu suchen. |
| Steuernummer | Textfeld | Nein | Die Steuernummer steht auf allen Bescheiden deines Finanzamts. Sie hat z.B. die Form „12/345/67890" (unterschiedliche Längen sind je nach Bundesland möglich). |
| Umsatzsteuer-ID | Textfeld | Nein | Gemeinnützige Vereine sind im Normalfall mit ihren Tätigkeiten im ideellen Bereich nicht umsatzsteuerpflichtig – dieses Feld kann dann leer bleiben. Für bestimmte Fälle, z.B. im wirtschaftlichen Geschäftsbetrieb, ist jedoch eine Umsatzsteuer-Identifikationsnummer erforderlich. |

### Vereinskonto

Im Abschnitt „Vereinskonto" auf der Seite **Allgemein** hinterlegst du die Bankverbindung deiner Organisation.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Nein | Der Name der Bank oder des Kontoinhabers. |
| IBAN | Textfeld | Nein | Die IBAN deines Vereinskontos. Es wird geprüft, ob eine gültige IBAN eingegeben wurde. |
| BIC | Textfeld | Nein | Der BIC (Bank Identifier Code) deines Vereinskontos. Es wird geprüft, ob ein gültiger BIC eingegeben wurde. |
| Gläubiger-ID | Textfeld | Nein | Eine Gläubiger-Identifikationsnummer brauchst du nur, wenn dein Verein Lastschriften einziehen möchte. Sie wird bei der Deutschen Bundesbank beantragt. |

### Rechtliches

Im Abschnitt „Rechtliches" auf der Seite **Allgemein** erfasst du die Registrierungsdaten und vertretungsberechtigten Personen deiner Organisation.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Registernummer | Textfeld | Nein | Die Nummer des Eintrags ins öffentliche Register. Vereine werden ins Vereinsregister eingetragen (z.B. „VR 12345"), gGmbHs ins Handelsregister (z.B. „HRB 1234"). |
| Registergericht | Textfeld | Nein | Das Gericht, bei dem der Registereintrag erfolgt ist, z.B. „Amtsgericht Stadtname". |
| Vorstand / Geschäftsführung (abhängig von Rechtsform) | Wiederholungsfeld | Nein | Eine Liste der Vorstandsmitglieder, Geschäftsführer oder vergleichbaren Personen. Dieses Feld ist nur sichtbar, wenn die im Abschnitt „Name" gewählte Rechtsform dies erfordert. Die Bezeichnung des Feldes ändert sich je nach Rechtsform. Für jeden Eintrag kannst du Vorname (Pflicht), Nachname (Pflicht) und Rolle angeben. Die einzelnen Einträge lassen sich ein- und ausklappen. |

## Aktionen

### Speichern

Über die Schaltfläche **Speichern** auf der Seite **Allgemein** werden alle eingegebenen Stammdaten gespeichert. Nach dem Speichern passiert Folgendes:

- Der Cache für die Datenschutzerklärung wird automatisch zurückgesetzt, da die Stammdaten dort verwendet werden.
- Falls im Bereich **Spenden** noch kein Finanzamt hinterlegt ist, wird automatisch ein Finanzamt anhand der eingegebenen Postleitzahl zugeordnet.

Wenn Pflichtfelder nicht ausgefüllt sind oder Eingaben ungültig sind, wird das Formular nicht gespeichert und es werden entsprechende Fehlermeldungen angezeigt (siehe Abschnitt „Validierung & Fehlermeldungen").

## Validierung & Fehlermeldungen

Auf der Seite **Allgemein** gelten folgende Validierungsregeln. Wenn eine Regel verletzt wird, erscheint eine Fehlermeldung am betreffenden Feld:

| Feld | Regel | Was tun bei Fehler? |
|------|-------|---------------------|
| Name (informell) | Pflichtfeld | Gib den informellen Namen deiner Organisation ein. |
| Name (formell) | Pflichtfeld | Gib den vollständigen, offiziellen Namen deiner Organisation ein. |
| Rechtsform | Pflichtfeld | Wähle die Rechtsform deiner Organisation aus. |
| Adresszeile 1 | Pflichtfeld | Gib die Straße und Hausnummer deiner Organisation ein. |
| Postleitzahl | Pflichtfeld | Gib die Postleitzahl des Standorts ein. |
| Stadt | Pflichtfeld | Gib den Ort des Standorts ein. |
| IBAN | Gültiges IBAN-Format | Überprüfe, ob du die IBAN korrekt und vollständig eingegeben hast (z.B. „DE89 3704 0044 0532 0130 00"). |
| BIC | Gültiges BIC-Format | Überprüfe, ob du den BIC korrekt eingegeben hast (z.B. „COBADEFFXXX"). |
| Homepage | Gültiges URL-Format | Gib eine vollständige URL ein, z.B. „https://www.meinverein.de". |
| Vorname (bei Vorstandsmitgliedern) | Pflichtfeld pro Eintrag | Gib den Vornamen der Person ein. |
| Nachname (bei Vorstandsmitgliedern) | Pflichtfeld pro Eintrag | Gib den Nachnamen der Person ein. |

## Beziehungen zu anderen Bereichen

Die auf der Seite **Allgemein** hinterlegten Stammdaten werden an verschiedenen Stellen der Plattform verwendet:

- **Webseite (Datenschutzerklärung)**: Beim Speichern wird der Cache der Datenschutzerklärung automatisch zurückgesetzt.
- **Finanzamt im Bereich Spenden**: Die eingegebene Postleitzahl kann dazu führen, dass im Bereich Spenden automatisch ein Finanzamt zugeordnet wird, sofern dort noch keines hinterlegt ist.
- **Rechtsform und Rechtliches**: Die gewählte Rechtsform bestimmt, ob und in welcher Form der Abschnitt „Rechtliches" vertretungsberechtigte Personen anzeigt.

---

## page: Fonts

**Entity:** Fonts  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/Fonts.php`  
**Updated:** 2026-02-17 15:56:24  

# Schriftarten

## Übersicht

Auf der Einstellungsseite **Schriftarten** legst du fest, welche Schriftarten in deiner Organisation zur Verfügung stehen sollen. Aktivierte Schriftarten können anschließend auf deiner Website und in Newslettern verwendet werden. Schriftarten, die bereits auf einer Website im Einsatz sind, können nicht deaktiviert werden.

## Navigation

Die Seite **Schriftarten** befindet sich im Bereich **Einstellungen** unter der Gruppe **Allgemein**.

## Funktionsweise

Die Seite **Schriftarten** zeigt eine Übersicht aller verfügbaren Schriftarten an, gegliedert nach Kategorien. Über Checkboxen kannst du einzelne Schriftarten aktivieren oder deaktivieren. Die Auswahl wird automatisch gespeichert, sobald du eine Änderung vornimmst – ein zusätzliches Speichern ist nicht nötig.

### Schriftarten-Kategorien

Die Schriftarten auf der Seite **Schriftarten** sind nach Kategorien gruppiert. Nur Schriftarten, die im System aktiv hinterlegt sind, werden zur Auswahl angezeigt.

### Schriftarten aktivieren und deaktivieren

- Setze ein Häkchen bei einer Schriftart, um sie für deine Organisation verfügbar zu machen.
- Entferne das Häkchen, um eine Schriftart zu deaktivieren.
- **Wichtig:** Schriftarten, die aktuell auf einer deiner Websites verwendet werden (z. B. als Textschriftart oder Navigationsschriftart), können nicht deaktiviert werden. Um eine solche Schriftart zu deaktivieren, musst du zuerst auf der betreffenden Website eine andere Schriftart auswählen.

## Beziehungen

- **Website:** Aktivierte Schriftarten auf der Seite **Schriftarten** stehen bei der Gestaltung deiner Website zur Auswahl. Wird eine Schriftart auf einer Website verwendet, ist sie gegen Deaktivierung geschützt.
- **Newsletter:** Aktivierte Schriftarten auf der Seite **Schriftarten** können auch in Newslettern verwendet werden.

## Voraussetzungen

- Das Tool **Website** oder das Tool **Newsletter** muss aktiviert sein, damit die Einstellungsseite **Schriftarten** verfügbar ist.

## Häufige Fragen und Hinweise

- **Eine Schriftart lässt sich nicht deaktivieren:** Die Schriftart wird aktuell auf einer deiner Websites verwendet. Wechsle zuerst auf der betreffenden Website zu einer anderen Schriftart, bevor du sie hier deaktivierst.
- **Eine gewünschte Schriftart wird nicht angezeigt:** Auf der Seite **Schriftarten** werden nur Schriftarten angezeigt, die im System aktiv hinterlegt sind. Wenn eine bestimmte Schriftart fehlt, wende dich an den Support.
- **Änderungen werden nicht übernommen:** Die Auswahl wird automatisch gespeichert. Lade die Seite neu, falls die Änderung nicht sichtbar ist.

---

## page: FinancialEventItemTypes

**Entity:** FinancialEventItemTypes  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/FinancialEventItemTypes.php`  
**Updated:** 2026-02-17 15:55:38  

# Finanzereignis-Typen

## Übersicht

Auf der Einstellungsseite **Finanzereignis-Typen** kannst du die Typen verwalten, die beim Buchen von Finanzereignissen zur Auswahl stehen. Finanzereignis-Typen definieren, welche Art von Einnahme oder Ausgabe gebucht wird – zum Beispiel „Spenden", „Miete" oder „Büromaterial".

Um den Einstieg zu erleichtern, kannst du vorgefertigte Pakete mit passenden Typen aktivieren, sodass du nicht jeden Typ einzeln anlegen musst. Die Reihenfolge der Typen lässt sich per Drag & Drop anpassen.

Je nach eingestellter Gewinnermittlungsart (Einnahmenüberschussrechnung oder Bilanzierung) unterscheiden sich die verfügbaren Felder und Aktionen auf dieser Seite.

## Navigation

Die Finanzereignis-Typen findest du unter **Einstellungen → Finanzen → Finanzereignis-Typen**.

## Formularfelder

Die folgenden Formularfelder werden beim Erstellen und Bearbeiten eines Finanzereignis-Typs angezeigt. Welche Felder sichtbar sind, hängt von der eingestellten Gewinnermittlungsart ab.

### Finanzereignis-Typ erstellen/bearbeiten (Einnahmenüberschussrechnung)

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Bezeichnung des Finanzereignis-Typs, z. B. „Mitgliedsbeiträge" oder „Bürobedarf". |
| Kategorie | Auswahl | Ja | Die Finanzkategorie (z. B. Einnahme, Ausgabe). Kann nicht mehr geändert werden, sobald der Typ bereits bei mindestens einer Buchung verwendet wird. |
| Suchbegriffe | Tags-Eingabe | Nein | Zusätzliche Suchbegriffe, die das Auffinden dieses Typs beim Buchen erleichtern. Die einzelnen Begriffe werden mit Leerzeichen getrennt eingegeben. |

### Finanzereignis-Typ erstellen/bearbeiten (Bilanzierung)

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Bezeichnung des Finanzereignis-Typs. |
| Kategorie | Auswahl | Ja | Die Finanzkategorie. Kann nicht mehr geändert werden, sobald der Typ bereits bei mindestens einer Buchung verwendet wird. |
| Konto | Auswahl | Ja | Das zugehörige Buchungskonto aus dem Kontenrahmen. Dieses Feld ist nur bei der Gewinnermittlungsart Bilanzierung sichtbar. |
| Suchbegriffe | Tags-Eingabe | Nein | Zusätzliche Suchbegriffe, die das Auffinden dieses Typs beim Buchen erleichtern. |

### Konto hinzufügen (Bilanzierung)

Bei der Gewinnermittlungsart **Bilanzierung** steht anstelle von „Finanzereignis-Typ erstellen" die Aktion **Konto hinzufügen** zur Verfügung. Dabei wählst du ein Konto aus dem Kontenrahmen aus, das als neuer Finanzereignis-Typ importiert wird.

## Tabellenansicht

Die Tabelle auf der Seite **Finanzereignis-Typen** zeigt alle angelegten Typen an. Die Reihenfolge kann per Drag & Drop angepasst werden.

### Spalten

| Spalte | Beschreibung | Sichtbarkeit |
|--------|-------------|-------------|
| Kategorie | Die Finanzkategorie des Typs (z. B. Einnahme, Ausgabe) | Nur bei Einnahmenüberschussrechnung sichtbar |
| Bezeichnung | Der Name des Finanzereignis-Typs | Immer sichtbar |
| Konto (Nummer) | Die Kontonummer aus dem Kontenrahmen | Nur bei Bilanzierung, standardmäßig ausgeblendet (über die Spaltenauswahl einblendbar) |
| Bezeichnung im Kontenrahmen | Der Name des Kontos im verwendeten Kontenrahmen | Nur bei Bilanzierung, standardmäßig ausgeblendet (über die Spaltenauswahl einblendbar) |

### Filter

| Filter | Beschreibung |
|--------|-------------|
| Kategorie | Filtert die Tabelle der Finanzereignis-Typen nach einer bestimmten Finanzkategorie (z. B. nur Einnahmen oder nur Ausgaben). |

### Suche

Die Tabelle der Finanzereignis-Typen kann nach Bezeichnung, Kategorie, Kontonummer und Kontobezeichnung durchsucht werden.

### Sortierung

Die Finanzereignis-Typen können per Drag & Drop manuell sortiert werden.

## Aktionen

### Paket hinzufügen

Über die Schaltfläche **Paket hinzufügen** kannst du vorgefertigte Sammlungen von Finanzereignis-Typen aktivieren. Je nach Größe und Arbeitsbereich deiner Organisation stehen verschiedene Pakete zur Verfügung – von einfacher Basisbuchhaltung bis hin zu speziellen Bereichen wie Projektförderung oder Veranstaltungen. So bleibt die Liste übersichtlich und es werden nur die Typen angelegt, die tatsächlich benötigt werden.

### Finanzereignis-Typ erstellen (Einnahmenüberschussrechnung)

Über die Schaltfläche **Finanzereignis-Typ erstellen** legst du einen neuen Typ mit Name, Kategorie und optionalen Suchbegriffen an. Nach dem Speichern erscheint der neue Typ in der Tabelle und steht ab sofort beim Buchen von Finanzereignissen zur Auswahl. Diese Aktion ist nur bei der Gewinnermittlungsart Einnahmenüberschussrechnung verfügbar.

### Konto hinzufügen (Bilanzierung)

Über die Schaltfläche **Konto hinzufügen** importierst du ein Konto aus dem Kontenrahmen als neuen Finanzereignis-Typ. Nach dem Hinzufügen erscheint das Konto als Typ in der Tabelle und steht beim Buchen zur Verfügung. Diese Aktion ist nur bei der Gewinnermittlungsart Bilanzierung verfügbar.

### Bearbeiten

Über die Bearbeiten-Aktion in der Tabellenzeile öffnest du das Bearbeitungsformular für einen bestehenden Finanzereignis-Typ. Du kannst den Namen und die Suchbegriffe ändern. Die Kategorie kann nur geändert werden, solange der Typ noch nicht bei Buchungen verwendet wird. Wird der Typ bereits verwendet, ist das Kategorie-Feld gesperrt und es erscheint ein entsprechender Hinweis.

### Löschen

Über die Löschen-Aktion in der Tabellenzeile kannst du einen Finanzereignis-Typ entfernen. Das Löschen ist nur möglich, wenn der Typ nicht bei bestehenden Finanzereignissen verwendet wird. Wird der Typ noch verwendet, ist die Löschen-Schaltfläche deaktiviert und es erscheint der Hinweis: *„Dieser Finanzereignis-Typ wird verwendet und kann daher nicht gelöscht werden."*

## Voraussetzungen

Das Tool **Buchhaltung** oder **Buchhaltung erweitert** muss aktiviert sein, damit die Einstellungsseite **Finanzereignis-Typen** verfügbar ist.

## Validierung & Fehlermeldungen

Die folgende Tabelle zeigt mögliche Validierungsfehler beim Erstellen oder Bearbeiten von Finanzereignis-Typen sowie deren Ursache und Lösung.

| Regel | Fehlermeldung | Lösung |
|-------|--------------|--------|
| Name ist leer | Das Feld „Name" ist erforderlich. | Gib eine Bezeichnung für den Finanzereignis-Typ ein. |
| Kategorie nicht ausgewählt | Das Feld „Kategorie" ist erforderlich. | Wähle eine Finanzkategorie (z. B. Einnahme oder Ausgabe) aus. |
| Konto nicht ausgewählt (bei Bilanzierung) | Das Feld „Konto" ist erforderlich. | Wähle ein Konto aus dem Kontenrahmen aus. |
| Kategorie ändern bei verwendetem Typ | *„Dieser Finanzereignis-Typ wird verwendet und die Kategorie kann daher nicht geändert werden."* | Die Kategorie kann nicht mehr geändert werden, sobald der Typ bei mindestens einer Buchung verwendet wird. Lege bei Bedarf einen neuen Typ mit der gewünschten Kategorie an. |
| Löschen eines verwendeten Typs | *„Dieser Finanzereignis-Typ wird verwendet und kann daher nicht gelöscht werden."* | Ordne zuerst alle Finanzereignisse, die diesen Typ verwenden, einem anderen Typ zu. Danach kannst du den Typ löschen. |

## Beziehungen

- **Finanzereignisse**: Jedes Finanzereignis wird einem Finanzereignis-Typ zugeordnet. Die hier auf der Seite **Finanzereignis-Typen** angelegten Typen stehen beim Buchen von Finanzereignissen zur Auswahl.
- **Kontenrahmen / Buchungskonten**: Bei der Gewinnermittlungsart Bilanzierung ist jeder Finanzereignis-Typ mit einem Konto aus dem Kontenrahmen verknüpft.
- **Buchhaltung (Einstellungen)**: Die Gewinnermittlungsart (Einnahmenüberschussrechnung oder Bilanzierung) bestimmt, welche Felder und Aktionen auf der Seite **Finanzereignis-Typen** verfügbar sind.

---

## page: Fields

**Entity:** Fields  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/Fields.php`  
**Updated:** 2026-02-17 15:52:46  

# Felder

## Übersicht

Auf der Einstellungsseite **Felder** legst du fest, welche zusätzlichen Felder bei Kontakten angezeigt werden sollen, und definierst Standard-Werte für bestimmte Kontaktfelder. So lässt sich die Kontaktverwaltung an die Bedürfnisse deiner Organisation anpassen.

## Navigation

Die Seite **Felder** befindet sich im Bereich **Einstellungen** unter der Gruppe **Kontakte**.

## Formularfelder

Die Seite **Felder** ist in zwei Bereiche unterteilt: **Anzuzeigende Felder** und **Standard-Werte**.

### Anzuzeigende Felder

In diesem Bereich kannst du per Checkbox festlegen, welche optionalen Felder in der Kontaktverwaltung sichtbar sein sollen.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Rufname | Checkbox | Nein | Zeigt das Feld „Rufname" bei Kontakten an. |
| Sterbedatum | Checkbox | Nein | Zeigt das Feld „Sterbedatum" bei Kontakten an. |
| Sprache | Checkbox | Nein | Zeigt das Feld „Sprache" bei Kontakten an. |
| Umsatzsteuer-ID | Checkbox | Nein | Zeigt das Feld „Umsatzsteuer-ID" bei Kontakten an. |
| Geburtsname | Checkbox | Nein | Zeigt das Feld „Geburtsname" bei Kontakten an. |
| Zweiter Vorname | Checkbox | Nein | Zeigt das Feld „Zweiter Vorname" bei Kontakten an. |

### Standard-Werte

Im Bereich **Standard-Werte** kannst du Vorgabewerte definieren, die automatisch als Fallback verwendet werden, wenn bei einem Kontakt keine individuellen Angaben hinterlegt sind.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Anrede | Textfeld | Nein | Dieser Wert wird in aller Kommunikation genutzt, wenn die Anrede für einen Kontakt nicht gesetzt ist. |

## Speichern

Nachdem du deine Änderungen vorgenommen hast, klicke auf **Speichern**, um die Einstellungen zu übernehmen.

---

## page: ExternalServices

**Entity:** ExternalServices  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/ExternalServices.php`  
**Updated:** 2026-02-17 15:50:45  

# Externe Dienste

## Übersicht

Auf der Seite **Externe Dienste** kannst du als Administrator externe Dienste konfigurieren, die mit NGO.Tools verbunden werden. Dazu gehören **Nextcloud**, **Mindee**, **Ionos AI**, **Twingle** und **ChurchTools**. Für jeden Dienst hinterlegst du die Zugangsdaten und Einstellungen, um die jeweilige Integration zu aktivieren. Die Seite ist in einzelne Abschnitte pro Dienst aufgeteilt, wobei jeder Abschnitt eine kurze Beschreibung des Dienstes sowie einen Link zu den Datenschutz-Informationen enthält.

## Navigation

Die Seite **Externe Dienste** befindet sich unter **Einstellungen** in der Menügruppe **Allgemein**. Die Seite ist nur sichtbar, wenn mindestens einer der externen Dienste für deine Organisation verfügbar ist (siehe Abschnitt „Berechtigungen").

## Formularfelder

Die Seite **Externe Dienste** ist in einzelne Abschnitte pro Dienst aufgeteilt. Je nachdem, welche Tools für deine Organisation aktiviert sind, siehst du nur die relevanten Abschnitte.

### Nextcloud

NGO.Tools kann die Benutzer der verbundenen Nextcloud verwalten und legt dort Dateien wie z. B. Spendenbescheinigungen ab.

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| URL | Textfeld | Die URL deiner Nextcloud-Instanz |
| Benutzername | Textfeld | Der Benutzername für die Nextcloud-Verbindung |
| Passwort | Passwortfeld | Das Passwort für die Nextcloud-Verbindung. Aus Sicherheitsgründen wird ein bereits gespeichertes Passwort nicht angezeigt. Wenn du das Feld leer lässt, bleibt das bestehende Passwort erhalten. |

### Mindee

Mindee wird genutzt, um aus Rechnungen automatisch die Daten auszulesen.

### Ionos AI

Ionos AI wird an verschiedenen Stellen in NGO.Tools genutzt, z. B. beim automatischen Auslesen von Spenden. Über den „Datenschutz"-Link im jeweiligen Abschnitt kannst du Details zur Datenverarbeitung einsehen.

### Twingle

Twingle wird genutzt, um Spendenformulare anzuzeigen und Spendenprojekte zu verwalten.

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| Twingle Access-Code | Textfeld | Der Zugangscode für die Twingle-Integration |

### ChurchTools

Durch die Verbindung mit ChurchTools können verschiedene Funktionen in NGO.Tools auf ChurchTools-Daten zugreifen. Zusätzlich kann die automatische Kontaktsynchronisierung aktiviert werden.

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| URL | Textfeld | Die URL deiner ChurchTools-Instanz |
| Login Token | Passwortfeld | Das Login-Token für ChurchTools. Aus Sicherheitsgründen wird ein bereits gespeichertes Token nicht angezeigt. Wenn du das Feld leer lässt, bleibt das bestehende Token erhalten. |
| Kontakte synchronisieren | Schalter (Toggle) | Wenn aktiviert, werden die Kontakte von ChurchTools automatisch nach NGO.Tools übernommen. |

**Achtung zur Kontaktsynchronisierung:** Wenn du den Schalter „Kontakte synchronisieren" aktivierst, werden die Kontakte in NGO.Tools mit den Daten aus ChurchTools **überschrieben**. Bestehende Kontaktdaten in NGO.Tools, die von den ChurchTools-Daten abweichen, gehen dabei verloren. Stelle sicher, dass du dies beabsichtigst, bevor du die Synchronisierung aktivierst.

## Aktionen

Auf der Seite **Externe Dienste** stehen dir folgende Aktionen zur Verfügung:

- **Speichern**: Übernimmt die eingegebenen Zugangsdaten und Einstellungen für alle angezeigten externen Dienste gleichzeitig. Bereits gespeicherte Passwörter und API-Schlüssel, deren Felder du leer gelassen hast, bleiben unverändert.
- **Datenschutz**: Zu jedem Dienst gibt es einen „Datenschutz"-Link. Dieser öffnet ein Fenster mit detaillierten Datenschutz-Informationen zum jeweiligen Dienst, damit du nachvollziehen kannst, welche Daten übertragen und verarbeitet werden.
- **Datenschutz bei [Dienstname]**: Wo verfügbar, gibt es zusätzlich einen Link zur externen Datenschutzseite des jeweiligen Dienstleisters. Dieser öffnet sich in einem neuen Tab.

## Berechtigungen

Die Seite **Externe Dienste** ist ausschließlich für **Administratoren der Organisation** zugänglich. Wenn du kein Administrator bist, siehst du die Seite nicht in der Navigation und kannst sie nicht aufrufen.

Zusätzlich ist die Seite nur sichtbar, wenn mindestens ein externer Dienst für deine Organisation freigeschaltet ist.

Wenn keines der relevanten Tools aktiviert ist, wird die Seite **Externe Dienste** nicht in der Navigation angezeigt.

## Beziehungen

Die auf der Seite **Externe Dienste** konfigurierten Verbindungen wirken sich auf verschiedene Bereiche in NGO.Tools aus:

- **Nextcloud**: Die hier hinterlegten Zugangsdaten werden für die Benutzerverwaltung in der Nextcloud und die Ablage von Dateien (z. B. Spendenbescheinigungen) verwendet. Auch bei den Veranstaltungstypen kann ein Nextcloud-Pfad für die Dateiablage hinterlegt werden. In der **Benutzerverwaltung** kannst du außerdem festlegen, ob ein Benutzer einen Nextcloud-Zugang erhalten soll – dafür muss hier zuerst die Nextcloud-Verbindung konfiguriert sein.
- **Mindee**: Die Verbindung wird für das automatische Auslesen von Rechnungsdaten genutzt.
- **Ionos AI**: Die Verbindung wird an verschiedenen Stellen genutzt, z. B. beim Auslesen von Spenden.
- **Twingle**: Die Verbindung wird für Spendenformulare und Spendenprojekte genutzt.
- **ChurchTools**: Die Kontaktsynchronisierung beeinflusst die Kontakte im gesamten System. Wenn die Synchronisierung aktiviert ist, werden Kontaktdaten aus ChurchTools übernommen und bestehende Daten in NGO.Tools überschrieben.

## Häufige Fragen

**Was passiert, wenn ich ein Passwort- oder API-Key-Feld leer lasse?**
Wenn du ein Passwort-, Token- oder API-Key-Feld beim Speichern leer lässt, bleibt der zuvor gespeicherte Wert erhalten. Du musst diese sensiblen Daten nicht jedes Mal erneut eingeben.

**Warum sehe ich nicht alle Dienste auf der Seite?**
Es werden nur die Dienste angezeigt, deren zugehörige Tools für deine Organisation aktiviert sind.

**Warum sehe ich die Seite „Externe Dienste" gar nicht?**
Die Seite ist nur für Administratoren sichtbar. Wenn du Administrator bist und die Seite trotzdem nicht siehst, ist möglicherweise keines der relevanten Tools für deine Organisation aktiviert.

---

## page: EventTypes

**Entity:** EventTypes  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/EventTypes.php`  
**Updated:** 2026-02-17 15:48:20  

# Veranstaltungstypen

## Übersicht

Auf der Seite **Veranstaltungstypen** kannst du Veranstaltungstypen anlegen und verwalten. Ein Veranstaltungstyp definiert die Grundkonfiguration für eine wiederkehrende Veranstaltungsart – also zum Beispiel welche Dienste benötigt werden, wer koordiniert, welche Benachrichtigungen versendet werden und ob Anmeldefunktionen oder eine Nextcloud-Dateiablage genutzt werden sollen.

Diese Seite befindet sich im Einstellungsbereich der Anwendung unter der Gruppe **Veranstaltungen**.

**Voraussetzungen:**
- Das Tool **Veranstaltungen** muss aktiviert sein, damit diese Seite sichtbar ist.

## Navigation

Die Seite Veranstaltungstypen ist über die Seitenleiste erreichbar unter **Einstellungen → Veranstaltungen → Veranstaltungstypen**. Wenn du den Menüpunkt nicht siehst, prüfe, ob das Tool **Veranstaltungen** aktiviert ist und ob du über ausreichende Berechtigungen verfügst.

## Tabellenansicht / Listenansicht

Die Übersicht der Veranstaltungstypen zeigt alle angelegten Einträge in einer Tabelle mit folgenden Spalten:

| Spalte | Beschreibung |
|---|---|
| Name | Name des Veranstaltungstyps (durchsuchbar) |
| Koordinatoren | Die diesem Veranstaltungstyp zugeordneten Koordinatoren (durchsuchbar) |
| Verantwortlicher Dienst | Der Dienst, der für die Durchführung von Veranstaltungen dieses Typs verantwortlich ist (durchsuchbar) |
| Dienste | Alle dem Veranstaltungstyp zugeordneten Dienste |
| Fakten | Die dem Veranstaltungstyp zugeordneten Fakten |
| Benachrichtigungen | Konfigurierte Benachrichtigungszeitpunkte vor einer Veranstaltung (z. B. „1 Tag", „7 Tage") |
| Aktualisierungen | Der Zeitpunkt, ab dem Mitwirkende bei Änderungen an einer Veranstaltung informiert werden |

Die Spalten **Name**, **Koordinatoren** und **Verantwortlicher Dienst** sind über die Tabellen-Suchleiste durchsuchbar.

## Formularfelder

Das Formular zum Erstellen und Bearbeiten eines Veranstaltungstyps enthält folgende Felder, aufgeteilt in mehrere Bereiche:

### Grundeinstellungen

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Name | Textfeld | Ja | Der Name des Veranstaltungstyps, z. B. „Gottesdienst" oder „Jugendabend". |

### Dienste

In diesem Bereich legst du fest, welche Dienste für Veranstaltungen dieses Typs relevant sind.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Dienste | Mehrfachauswahl | Nein | Die Dienste, die für Veranstaltungen dieses Typs benötigt werden und koordiniert werden können. |
| Verantwortlicher Dienst | Einfachauswahl (durchsuchbar) | Nein | Dieser Dienst ist verantwortlich für die Durchführung von Veranstaltungen dieses Typs. Du kannst nach dem Dienstnamen suchen, um schneller den richtigen Eintrag zu finden. |
| Planungsfeature nutzen | Checkbox | Nein | Aktiviert das Planungsfeature für Veranstaltungen dieses Typs. |
| Musikfeature nutzen | Checkbox | Nein | Aktiviert das Musikfeature für Veranstaltungen dieses Typs. |

### Koordinatoren

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Koordinatoren | Mehrfachauswahl | Nein | Benutzer, die als Koordinatoren für diesen Veranstaltungstyp zuständig sind. |

### Veröffentlichungs-Management

Dieser Bereich ist nur sichtbar, wenn das Tool **Veröffentlichungs-Management** aktiviert ist.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Veröffentlichungs-Kanäle | Mehrfachauswahl | Nein | Die für diesen Veranstaltungstyp aktivierten Veröffentlichungs-Kanäle. Damit legst du fest, in welchen Kanälen Veröffentlichungs-Anfragen für Veranstaltungen dieses Typs eingeplant werden können. Beispiel: Eine Veröffentlichungs-Anfrage im Kanal „Ansagen" kann für Gottesdienste eingeplant werden. |

### Fakten

Im Bereich Fakten legst du fest, welche Fakten (strukturierte Zusatzinformationen) für Veranstaltungen dieses Typs gepflegt werden können.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Fakten | Mehrfachauswahl | Nein | Die Fakten, die bei Veranstaltungen dieses Typs gepflegt werden können. |
| URL | Textfeld (nur Anzeige) | — | Zeigt die öffentliche URL zur Fakten-Seite dieses Veranstaltungstyps an. Dieses Feld ist nur bei bereits gespeicherten Veranstaltungstypen sichtbar – beim Erstellen eines neuen Veranstaltungstyps wird es nicht angezeigt. Über das Kopier-Symbol neben dem Feld kannst du die URL in die Zwischenablage kopieren. |

### Benachrichtigungen

Im Bereich Benachrichtigungen konfigurierst du, wann und wie Mitwirkende über bevorstehende Veranstaltungen dieses Typs informiert werden.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Benachrichtigungen | Mehrfachauswahl | Nein | Legt fest, zu welchen Zeitpunkten vor einer Veranstaltung die Mitwirkenden informiert werden. Verfügbare Optionen reichen von 1 Stunde bis 28 Tage vor der Veranstaltung. Du kannst mehrere Zeitpunkte auswählen, sodass z. B. sowohl 7 Tage als auch 1 Tag vorher eine Benachrichtigung versendet wird. |
| Aktualisierungen | Einfachauswahl | Nein | Ab diesem Zeitpunkt vor einer Veranstaltung werden die Mitwirkenden bei Änderungen an der Veranstaltung informiert. Die gleichen Zeitoptionen wie bei Benachrichtigungen stehen zur Verfügung. Beispiel: Wenn „7 Tage" gewählt ist, werden Mitwirkende über Änderungen informiert, die innerhalb von 7 Tagen vor der Veranstaltung vorgenommen werden. |
| Informierte | Mehrfachauswahl | Nein | Diese Kontakte erhalten zusätzlich zu den Mitwirkenden die Benachrichtigungen über bevorstehende Veranstaltungen. Die auswählbaren Kontakte stammen aus der Kontaktverwaltung. |
| Informierte Dienste | Mehrfachauswahl | Nein | Wenn parallel zu einer Veranstaltung dieses Typs andere Veranstaltungen stattfinden, erhalten die hier ausgewählten Dienste der Parallelveranstaltungen ebenfalls die Benachrichtigungen. Damit kannst du sicherstellen, dass bei zeitgleichen Veranstaltungen alle relevanten Dienste informiert sind. |

### Anmeldung

Im Bereich Anmeldung konfigurierst du, ob Veranstaltungen dieses Typs eine öffentliche Anmeldeseite haben sollen.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Aktiviert | Checkbox | Nein | Wenn aktiviert, haben Veranstaltungen dieses Typs eine öffentliche Seite, über die sich Teilnehmer anmelden können. |
| Anmeldeformular | Einfachauswahl | Bedingt (Pflicht wenn „Aktiviert" angehakt) | Das Formular, das auf der Anmeldeseite angezeigt wird. Dieses Feld wird nur angezeigt, wenn die Checkbox **Aktiviert** angehakt ist. |

### Nextcloud Dateiablage

Dieser Bereich ist nur sichtbar, wenn das Tool **Nextcloud** aktiviert ist und der externe Dienst Nextcloud unter **Einstellungen → Externe Dienste** verbunden ist.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Aktiviert | Checkbox | Nein | Aktiviert die Nextcloud-Dateiablage für Veranstaltungen dieses Typs. |
| Pfad | Baumansicht | Nein | Der Pfad in der Nextcloud, unter dem Dateien für Veranstaltungen dieses Typs abgelegt werden. Du kannst den Pfad über eine Baumansicht auswählen, die die Ordnerstruktur deiner Nextcloud abbildet. Dieses Feld wird nur angezeigt, wenn die Checkbox **Aktiviert** angehakt ist. |

## Aktionen

### Veranstaltungstyp erstellen

Über die Schaltfläche **Veranstaltungstyp erstellen** oberhalb der Tabelle öffnet sich ein Dialogfenster mit dem vollständigen Formular. Fülle die gewünschten Felder aus und klicke auf **Speichern**. Nach dem Speichern wird der neue Veranstaltungstyp sofort in der Tabelle angezeigt.

### Veranstaltungstyp bearbeiten

Durch Klicken auf einen Eintrag in der Tabelle öffnet sich ein Dialogfenster zum Bearbeiten des Veranstaltungstyps. Das Formular enthält die gleichen Felder wie beim Erstellen. Änderungen werden nach dem Speichern wirksam.

## Validierung & Fehlermeldungen

Beim Speichern eines Veranstaltungstyps können folgende Validierungsfehler auftreten:

| Fehler | Ursache | Lösung |
|---|---|---|
| „Name ist erforderlich" | Das Pflichtfeld **Name** wurde nicht ausgefüllt. | Gib einen Namen für den Veranstaltungstyp ein, z. B. „Gottesdienst". |
| „Anmeldeformular ist erforderlich" | Die Checkbox **Aktiviert** im Bereich Anmeldung ist angehakt, aber es wurde kein Anmeldeformular ausgewählt. | Wähle ein Anmeldeformular aus der Liste aus. |

## Beziehungen zu anderen Bereichen

Die Seite Veranstaltungstypen ist mit mehreren anderen Bereichen der Anwendung verknüpft:

- **Veranstaltungsdienste** (Einstellungen → Veranstaltungen → Veranstaltungsdienste): Hier werden die Dienste verwaltet, die im Bereich „Dienste" des Veranstaltungstyp-Formulars zur Auswahl stehen.
- **Veranstaltungsfakten** (Einstellungen → Veranstaltungen → Veranstaltungsfakten): Hier werden die Fakten verwaltet, die im Bereich „Fakten" des Veranstaltungstyp-Formulars zur Auswahl stehen.
- **Veröffentlichungs-Management** (Einstellungen → Veröffentlichungs-Management): Hier werden die Veröffentlichungs-Kanäle verwaltet, die im entsprechenden Bereich des Formulars zugeordnet werden können. Setzt voraus, dass das Tool **Veröffentlichungs-Management** aktiviert ist.
- **Formulare**: Die im Bereich Anmeldung auswählbaren Formulare werden im Bereich **Formulare** der Anwendung verwaltet.
- **Nextcloud** (Einstellungen → Externe Dienste): Die Dateiablage-Integration setzt eine konfigurierte und verbundene Nextcloud-Verbindung voraus. Das Tool **Nextcloud** muss aktiviert sein.
- **Kontakte**: Die im Bereich „Informierte" auswählbaren Kontakte stammen aus der Kontaktverwaltung der Anwendung.

---

## page: EventTemplates

**Entity:** EventTemplates  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/EventTemplates.php`  
**Updated:** 2026-02-17 15:46:01  

# Veranstaltungsvorlagen

## Übersicht

Veranstaltungsvorlagen ermöglichen es dir, wiederkehrende Veranstaltungen schneller anzulegen. Eine Vorlage enthält vordefinierte Werte wie Name, Typ, Details und benötigte Dienste mit Mindestpersonenanzahl.

Die Verwaltung der Veranstaltungsvorlagen befindet sich im Einstellungsbereich unter der Gruppe **Veranstaltungen**.

**Voraussetzungen:**
- Das Tool **Veranstaltungen** muss aktiviert sein.
- Es muss mindestens ein Veranstaltungstyp unter **Einstellungen → Veranstaltungen → Veranstaltungstypen** angelegt sein, bevor du eine Vorlage erstellen kannst.

## Tabellenansicht

Die Seite „Veranstaltungsvorlagen" zeigt eine Übersichtstabelle aller vorhandenen Vorlagen mit folgenden Spalten:

| Spalte | Beschreibung |
|---|---|
| Name | Der Name der Veranstaltungsvorlage (durchsuchbar) |
| Typ | Der zugeordnete Veranstaltungstyp |
| Veranstaltungsname | Der vordefinierte Name, den eine Veranstaltung beim Anlegen aus dieser Vorlage erhält |

Über das **Suchfeld** oberhalb der Tabelle kannst du Veranstaltungsvorlagen anhand ihres Namens suchen und filtern.

## Formularfelder

Das folgende Formular wird sowohl beim Erstellen als auch beim Bearbeiten einer Veranstaltungsvorlage angezeigt:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Name | Textfeld | Ja | Der Name der Veranstaltungsvorlage, unter dem sie in der Übersichtstabelle angezeigt wird. |
| Typ | Auswahlfeld | Ja | Der Veranstaltungstyp, der mit dieser Vorlage verknüpft wird. Zur Auswahl stehen die unter **Einstellungen → Veranstaltungen → Veranstaltungstypen** angelegten Typen. |
| Veranstaltungsname | Textfeld | Ja | Der Name, den die Veranstaltung automatisch erhält, wenn sie mit dieser Vorlage erstellt wird. |
| Veranstaltungsdetails | Mehrzeiliges Textfeld | Nein | Optionale Details oder Beschreibung, die in die Veranstaltung übernommen werden. |
| Dienste | Zahleneingaben | Nein | Für jeden verfügbaren Veranstaltungsdienst kannst du die Mindestanzahl an benötigten Personen angeben. Welche Dienste angezeigt werden, hängt vom gewählten Veranstaltungstyp ab. |

**Wichtig:** Die Auswahl des **Typs** erfolgt live – sobald du einen anderen Veranstaltungstyp auswählst, ändern sich die verfügbaren Dienste im unteren Bereich des Formulars entsprechend.

### Typische Validierungsfehler

| Fehler | Ursache | Lösung |
|---|---|---|
| „Name ist erforderlich" | Das Feld „Name" wurde leer gelassen. | Trage einen Namen für die Veranstaltungsvorlage ein. |
| „Typ ist erforderlich" | Es wurde kein Veranstaltungstyp ausgewählt. | Wähle einen Veranstaltungstyp aus der Liste aus. Falls keine Typen verfügbar sind, lege zuerst einen unter **Einstellungen → Veranstaltungen → Veranstaltungstypen** an. |
| „Veranstaltungsname ist erforderlich" | Das Feld „Veranstaltungsname" wurde leer gelassen. | Gib einen Veranstaltungsnamen ein, der beim Anlegen einer Veranstaltung aus dieser Vorlage verwendet werden soll. |

## Aktionen

### Neue Veranstaltungsvorlage erstellen

1. Klicke auf die Schaltfläche **Veranstaltungsvorlage erstellen** oberhalb der Tabelle.
2. Ein Dialog öffnet sich mit dem Formular für die Vorlagendaten.
3. Fülle die Pflichtfelder (Name, Typ, Veranstaltungsname) aus und ergänze optional Details und Dienste.
4. Bestätige den Dialog, um die Veranstaltungsvorlage zu speichern.

Nach dem Speichern wird die neue Vorlage in der Übersichtstabelle angezeigt. Die zugeordneten Dienste werden mit der angegebenen Mindestanzahl gespeichert. Dienste mit einer Anzahl von 0 werden nicht gespeichert.

### Veranstaltungsvorlage bearbeiten

1. Klicke auf das **Bearbeiten-Symbol** (Stift-Icon) in der Zeile der gewünschten Veranstaltungsvorlage.
2. Ein Dialog öffnet sich mit den aktuellen Werten der Vorlage.
3. Passe die gewünschten Felder an – alle Felder können geändert werden, einschließlich Typ, Dienste und deren Mindestanzahl.
4. Bestätige den Dialog, um die Änderungen zu speichern.

### Veranstaltungsvorlage löschen

1. Klicke auf das **Löschen-Symbol** (Papierkorb-Icon) in der Zeile der gewünschten Veranstaltungsvorlage.
2. Bestätige den Löschvorgang im angezeigten Bestätigungsdialog.

Die Veranstaltungsvorlage wird entfernt.

## Beziehungen

- **Veranstaltungstypen**: Jede Veranstaltungsvorlage ist genau einem Veranstaltungstyp zugeordnet. Die Veranstaltungstypen verwaltest du unter **Einstellungen → Veranstaltungen → Veranstaltungstypen**. Ohne mindestens einen angelegten Veranstaltungstyp kann keine Vorlage erstellt werden.
- **Veranstaltungsdienste**: Die in einer Veranstaltungsvorlage hinterlegten Dienste stammen aus den unter **Einstellungen → Veranstaltungen → Veranstaltungsdienste** konfigurierten Diensten. Welche Dienste verfügbar sind, wird durch den gewählten Veranstaltungstyp bestimmt. Pro Dienst wird die benötigte Mindestanzahl an Personen gespeichert.

---

## page: EventSoftwareNotifications

**Entity:** EventSoftwareNotifications  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/EventSoftwareNotifications.php`  
**Updated:** 2026-02-17 15:44:46  

# Benachrichtigungen (Veranstaltungssoftware)

## Übersicht

Auf der Einstellungsseite **Benachrichtigungen (Veranstaltungssoftware)** kannst du Benachrichtigungsregeln für Veranstaltungssoftware konfigurieren. Damit legst du fest, welche Informationsempfänger bei bestimmten Veranstaltungstypen und Diensten benachrichtigt werden sollen. Jede Regel verknüpft einen oder mehrere Software-Typen mit Veranstaltungstypen und Diensten.

Wenn noch keine Benachrichtigungsregeln angelegt wurden, ist die Tabelle leer. Du kannst jederzeit über die Schaltfläche in der Tabellenüberschrift eine neue Regel erstellen.

## Navigation

Die Seite **Benachrichtigungen (Veranstaltungssoftware)** findest du im Bereich **Einstellungen** unter der Gruppe **Veranstaltungen**. Das Tool **Veranstaltungen** muss aktiviert sein.

## Tabellenansicht

Die Übersichtstabelle auf der Seite **Benachrichtigungen (Veranstaltungssoftware)** zeigt alle konfigurierten Benachrichtigungsregeln mit folgenden Spalten:

| Spalte | Beschreibung |
|---|---|
| Typ | Die ausgewählten Software-Typen, kommasepariert dargestellt |
| Veranstaltungstypen | Die zugeordneten Veranstaltungstypen (durchsuchbar) |
| Dienste | Die zugeordneten Veranstaltungsdienste (durchsuchbar) |

Die Spalten **Veranstaltungstypen** und **Dienste** sind über das Suchfeld in der Tabelle durchsuchbar.

## Aktionen

### Benachrichtigungsregel erstellen

Über die Schaltfläche in der Tabellenüberschrift kannst du eine neue Benachrichtigungsregel erstellen. Es öffnet sich ein Formular mit den unter **Formularfelder** beschriebenen Feldern.

### Benachrichtigungsregel bearbeiten

Jede bestehende Regel kannst du über die Zeilenaktion bearbeiten. Das Formular enthält dieselben Felder wie beim Erstellen und ist mit den aktuellen Werten der Regel vorausgefüllt.

### Benachrichtigungsregel löschen

Einzelne Regeln kannst du über die Zeilenaktion löschen. Vor dem Löschen wird eine Bestätigung abgefragt.

## Formularfelder

Das Formular zum Erstellen und Bearbeiten von Benachrichtigungsregeln auf der Seite **Benachrichtigungen (Veranstaltungssoftware)** enthält folgende Felder:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Typ | Mehrfachauswahl | Ja (mind. 1) | Auswahl der Software-Typen, für die diese Benachrichtigungsregel gelten soll |
| Veranstaltungstypen | Mehrfachauswahl | Ja (mind. 1) | Auswahl der Veranstaltungstypen, bei denen die Benachrichtigung ausgelöst werden soll |
| Dienst | Mehrfachauswahl | Ja (mind. 1) | Auswahl der Veranstaltungsdienste, die mit dieser Benachrichtigungsregel verknüpft werden sollen |

## Validierung und Fehlermeldungen

Beim Erstellen oder Bearbeiten einer Benachrichtigungsregel gelten folgende Validierungsregeln:

| Fehler | Ursache | Lösung |
|---|---|---|
| Pflichtfeld-Fehler bei „Typ" | Es wurde kein Software-Typ ausgewählt. | Wähle mindestens einen Software-Typ aus der Liste aus. |
| Pflichtfeld-Fehler bei „Veranstaltungstypen" | Es wurde kein Veranstaltungstyp ausgewählt. | Wähle mindestens einen Veranstaltungstyp aus der Liste aus. |
| Pflichtfeld-Fehler bei „Dienst" | Es wurde kein Dienst ausgewählt. | Wähle mindestens einen Dienst aus der Liste aus. |

Solange Pflichtfelder nicht ausgefüllt sind, kann die Regel nicht gespeichert werden. Die betroffenen Felder werden mit einer Fehlermeldung markiert.

## Beziehungen zu anderen Einstellungen

Die auf der Seite **Benachrichtigungen (Veranstaltungssoftware)** auswählbaren Werte stammen aus anderen Einstellungsbereichen:

- **Veranstaltungstypen**: Die hier auswählbaren Veranstaltungstypen werden unter **Einstellungen → Veranstaltungen → Veranstaltungstypen** verwaltet.
- **Veranstaltungsdienste**: Die hier auswählbaren Dienste werden unter **Einstellungen → Veranstaltungen → Veranstaltungsdienste** konfiguriert.

---

## page: EventServices

**Entity:** EventServices  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/EventServices.php`  
**Updated:** 2026-02-17 15:43:43  

# Veranstaltungsdienste

## Übersicht

Auf der Seite **Veranstaltungsdienste** verwaltest du die Dienste, die für die Durchführung von Veranstaltungen benötigt werden. Hier kannst du Dienste wie z. B. „Technik", „Musik" oder „Begrüßung" anlegen, bearbeiten und löschen. Jedem Veranstaltungsdienst können Koordinatoren zugewiesen und verschiedene Eigenschaften wie Teamzugehörigkeit, Überbesetzung oder Benachrichtigungsregeln konfiguriert werden.

## Navigation

Die Seite **Veranstaltungsdienste** befindet sich im Einstellungsbereich unter der Navigationsgruppe **Veranstaltungen**.

## Formularfelder

Das folgende Formular wird sowohl beim Erstellen als auch beim Bearbeiten eines Veranstaltungsdienstes in einem Dialogfenster angezeigt:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Name | Textfeld | Ja | Der Name des Veranstaltungsdienstes (z. B. „Technik", „Begrüßung"). Muss ausgefüllt werden, damit der Dienst gespeichert werden kann. |
| Datei-Uploads erlauben | Checkbox | Nein | Erlaubt das Hochladen von Dateien für diesen Veranstaltungsdienst. Dieses Feld ist nur sichtbar, wenn der externe Dienst **Nextcloud** aktiviert ist. |
| Dienst wird durch Team durchgeführt | Checkbox | Nein | Kennzeichnet, ob dieser Veranstaltungsdienst von einem Team (statt von Einzelpersonen) durchgeführt wird. |
| Beinhaltet Musik | Checkbox | Nein | Kennzeichnet, ob dieser Veranstaltungsdienst Musik beinhaltet. |
| Überbesetzung möglich | Checkbox | Nein | Erlaubt die Einteilung von mehr Personen als eigentlich benötigt. Der Hilfetext lautet: „Einteilung über Bedarf hinaus gestatten". |
| Koordinatoren | Mehrfachauswahl | Nein | Auswahl der Personen, die diesen Veranstaltungsdienst koordinieren. Die verfügbaren Koordinatoren werden aus den Benutzern deiner Organisation geladen. |
| Benachrichtigungen | Mehrfachauswahl | Nein | Legt fest, wann die Koordinatoren benachrichtigt werden, falls noch Einteilungen für diesen Dienst fehlen. Verfügbare Optionen: 1 Tag, 2 Tage, 3 Tage, 4 Tage, 5 Tage, 6 Tage, 7 Tage, 8 Tage, 10 Tage, 14 Tage, 21 Tage, 28 Tage. Du kannst mehrere Zeitpunkte gleichzeitig auswählen. |

## Tabellenansicht

Die Übersicht zeigt alle angelegten Veranstaltungsdienste in einer Tabelle. Wenn noch keine Veranstaltungsdienste angelegt wurden, ist die Tabelle leer und du kannst über die Schaltfläche „Veranstaltungsdienst erstellen" den ersten Dienst anlegen.

| Spalte | Beschreibung |
|---|---|
| Name | Name des Veranstaltungsdienstes. Die Spalte ist sortierbar und durchsuchbar. |
| Koordinatoren | Die zugewiesenen Koordinatoren des Veranstaltungsdienstes. Durchsuchbar. |
| Benachrichtigungen | Die konfigurierten Benachrichtigungszeitpunkte in lesbarer Form (z. B. „7 Tage"). |
| Dienst wird durch Team durchgeführt | Zeigt ein Icon an, wenn der Veranstaltungsdienst als Teamdienst markiert ist. |
| Datei-Uploads erlauben | Zeigt ein Icon an, wenn Datei-Uploads erlaubt sind. Diese Spalte ist nur sichtbar, wenn der externe Dienst **Nextcloud** aktiviert ist. |
| Beinhaltet Musik | Zeigt ein Icon an, wenn der Veranstaltungsdienst Musik beinhaltet. |

Die Tabelle ist standardmäßig alphabetisch nach **Name** sortiert. Du kannst die Sortierung ändern, indem du auf die Spaltenüberschrift **Name** klickst.

## Aktionen

### Veranstaltungsdienst erstellen

Über die Schaltfläche **„Veranstaltungsdienst erstellen"** oberhalb der Tabelle öffnet sich ein Dialogfenster mit dem Formular. Fülle die gewünschten Felder aus und speichere den neuen Veranstaltungsdienst. Nach dem Speichern erscheint der neue Dienst in der Tabellenübersicht.

### Veranstaltungsdienst bearbeiten

Über das Bearbeiten-Symbol in der jeweiligen Zeile öffnet sich ein Dialogfenster mit dem Formular zum Bearbeiten des Veranstaltungsdienstes. Nach dem Speichern werden den zugewiesenen Koordinatoren automatisch die notwendigen Berechtigungen (Rolle) erteilt, damit sie ihre Koordinationsaufgaben wahrnehmen können.

### Veranstaltungsdienst löschen

Über das Löschen-Symbol in der jeweiligen Zeile kannst du einen Veranstaltungsdienst löschen. Vor dem Löschen wird eine Bestätigungsabfrage angezeigt, die du bestätigen musst. Erst nach der Bestätigung wird der Dienst endgültig entfernt.

## Validierung und Fehlermeldungen

Beim Erstellen oder Bearbeiten eines Veranstaltungsdienstes gelten folgende Validierungsregeln:

- **Name ist ein Pflichtfeld**: Wenn du das Feld „Name" leer lässt, erscheint eine Fehlermeldung. **Lösung:** Trage einen Namen für den Veranstaltungsdienst ein und speichere erneut.

Alle anderen Felder sind optional und können leer gelassen oder deaktiviert werden, ohne dass eine Fehlermeldung erscheint.

## Beziehungen zu anderen Bereichen

- **Veranstaltungstypen**: Bei den Veranstaltungstypen legst du fest, welche Veranstaltungsdienste für welchen Veranstaltungstyp benötigt werden. Ein Veranstaltungsdienst muss zuerst hier angelegt werden, bevor er einem Veranstaltungstyp zugewiesen werden kann.
- **Nextcloud**: Die Option „Datei-Uploads erlauben" und die zugehörige Tabellenspalte sind nur verfügbar, wenn der externe Dienst **Nextcloud** aktiviert ist.
- **Benutzer und Koordinatoren**: Die Koordinatoren werden aus den vorhandenen Benutzern deiner Organisation ausgewählt. Nach dem Bearbeiten eines Veranstaltungsdienstes erhalten die zugewiesenen Koordinatoren automatisch die erforderliche Rolle, um ihre Aufgaben wahrnehmen zu können.

---

## page: EventPlans

**Entity:** EventPlans  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/EventPlans.php`  
**Updated:** 2026-02-17 15:42:25  

# Veranstaltungspläne

## Übersicht

Auf der Seite **Veranstaltungspläne** kannst du Pläne erstellen und verwalten, die Veranstaltungen bestimmter Typen und Dienste für einen definierten Zeitraum zusammenfassen. So lassen sich z. B. Übersichten über kommende Gottesdienste oder andere regelmäßige Veranstaltungen erstellen. Jeden Veranstaltungsplan kannst du als Excel-Datei herunterladen oder über eine öffentliche URL mit anderen Personen teilen – etwa mit Mitwirkenden, die so jederzeit den aktuellen Stand abrufen können.

Diese Seite befindet sich im Einstellungsbereich der Anwendung unter der Navigationsgruppe „Veranstaltungen".

**Voraussetzungen:**
- Das Tool **Veranstaltungen** muss aktiviert sein, damit diese Einstellungsseite verfügbar ist.

## Navigation

Die Funktion ist über **Einstellungen → Veranstaltungen → Veranstaltungspläne** erreichbar.

## Formularfelder

Das Formular zum Erstellen und Bearbeiten eines Veranstaltungsplans enthält folgende Felder:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Der Name des Veranstaltungsplans, z. B. „Gottesdienstplan Q1". |
| ist öffentlich | Checkbox | Nein | Legt fest, ob der Veranstaltungsplan über die öffentliche URL für alle zugänglich ist – auch ohne Anmeldung. |
| MA-Zugriff | Checkbox | Nein | Wenn aktiviert, wird der Veranstaltungsplan für einteilbare Personen (Mitarbeiter/Mitwirkende) sichtbar gemacht, sodass diese den Plan direkt einsehen können. Ein Hilfe-Icon zeigt den Hinweis „Verfügbar für einteilbare Personen" an. |
| Zeitraumstyp | Auswahl | Ja | Bestimmt, welchen Zeitraum der Veranstaltungsplan abdeckt. Je nach Auswahl erscheinen zusätzliche Felder (siehe unten). |
| Zeitraum (Monate) | Zahlenfeld | Ja (bedingt) | Anzahl der Monate, die der Plan in die Zukunft abdecken soll (1 bis 120). Wird mit dem Text „Die nächsten … Monate" dargestellt. Dieses Feld ist nur sichtbar, wenn als Zeitraumstyp **„Nächste X Monate"** gewählt ist. |
| von | Datumsfeld | Nein | Startdatum des Zeitraums. Nur sichtbar, wenn als Zeitraumstyp **„Zeitraum (von–bis)"** gewählt ist. |
| bis | Datumsfeld | Nein | Enddatum des Zeitraums. Nur sichtbar, wenn als Zeitraumstyp **„Zeitraum (von–bis)"** gewählt ist. |
| Veranstaltungstypen | Mehrfachauswahl | Ja | Die Veranstaltungstypen, die im Plan berücksichtigt werden sollen. Es muss mindestens ein Typ ausgewählt werden. |
| Dienste | Mehrfachauswahl | Ja | Die Dienste, die im Veranstaltungsplan angezeigt werden sollen. Es muss mindestens ein Dienst ausgewählt werden. |

### Zeitraumstyp – Optionen im Detail

| Option | Beschreibung |
|--------|--------------|
| **Nächste X Monate** | Der Veranstaltungsplan deckt einen rollierenden Zeitraum ab – ab heute die angegebene Anzahl an Monaten in die Zukunft. Das Zusatzfeld „Zeitraum (Monate)" wird eingeblendet. |
| **Zeitraum (von–bis)** | Der Plan zeigt Veranstaltungen in einem festen Zeitraum zwischen einem Start- und Enddatum. Die Zusatzfelder „von" und „bis" werden eingeblendet. |
| **Dieses Jahr** | Der Veranstaltungsplan umfasst automatisch das aktuelle Kalenderjahr. |
| **Nächstes Jahr** | Der Veranstaltungsplan umfasst automatisch das kommende Kalenderjahr. |

## Tabellenansicht / Listenansicht

Die Übersichtstabelle zeigt alle angelegten Veranstaltungspläne. Wenn noch kein Veranstaltungsplan erstellt wurde, ist die Tabelle leer, und du kannst über die Schaltfläche **Veranstaltungsplan erstellen** deinen ersten Plan anlegen.

| Spalte | Beschreibung |
|--------|--------------|
| Name | Name des Veranstaltungsplans (durchsuchbar). |
| ist öffentlich | Zeigt ein Icon an, wenn der Veranstaltungsplan öffentlich zugänglich ist. Ist kein Icon sichtbar, ist der Plan nicht öffentlich. |
| MA-Zugriff | Zeigt ein Icon an, wenn der Plan für einteilbare Personen (Mitarbeiter/Mitwirkende) verfügbar ist. |
| Zeitraum | Zeigt den konfigurierten Zeitraum in lesbarer Form an, z. B. „die nächsten 3 Monate", „von 01.01.2026 bis 31.12.2026", „dieses Jahr (2026)" oder „nächstes Jahr (2027)". |
| Veranstaltungstypen | Die zugeordneten Veranstaltungstypen (durchsuchbar). |
| Dienste | Die zugeordneten Dienste (durchsuchbar). |

Die Tabelle bietet eine Suchfunktion, mit der du nach Name, Veranstaltungstypen und Diensten filtern kannst.

## Aktionen

### Veranstaltungsplan erstellen

Über die Schaltfläche **Veranstaltungsplan erstellen** oberhalb der Tabelle wird ein Dialog zum Anlegen eines neuen Veranstaltungsplans geöffnet. Nach dem Ausfüllen der Pflichtfelder und Bestätigen wird der Plan gespeichert und erscheint in der Tabellenansicht.

### Zeilenaktionen (pro Veranstaltungsplan)

Jeder Veranstaltungsplan in der Tabelle bietet folgende Aktionen:

| Aktion | Beschreibung |
|--------|--------------|
| **URL für Excel-Download kopieren** | Kopiert die öffentliche Download-URL des Veranstaltungsplans in die Zwischenablage. Diese URL kannst du an andere Personen weitergeben, damit diese den Plan jederzeit als Excel-Datei herunterladen können. |
| **Veranstaltungsplan herunterladen** | Lädt den Veranstaltungsplan direkt als Excel-Datei auf deinen Computer herunter. |
| **Download-URL erneuern** | Generiert eine neue Download-URL für den Veranstaltungsplan. Die bisherige URL wird dadurch sofort ungültig – Personen, die den alten Link haben, können den Plan darüber nicht mehr abrufen. Vor der Ausführung erscheint eine Bestätigungsabfrage: *„Der bisherige Link wird anschließend nicht mehr verfügbar sein. Willst du dies wirklich tun?"* |
| **Veranstaltungsplan bearbeiten** | Öffnet einen Dialog zum Bearbeiten der Einstellungen des Veranstaltungsplans (Name, Zeitraum, Typen, Dienste usw.). |
| **Löschen** | Löscht den Veranstaltungsplan dauerhaft. Vor dem Löschen erscheint eine Bestätigungsabfrage. |

## Validierung & Fehlermeldungen

Beim Erstellen oder Bearbeiten eines Veranstaltungsplans gelten folgende Validierungsregeln. Wenn eine Regel nicht erfüllt ist, wird eine Fehlermeldung am entsprechenden Feld angezeigt:

| Feld | Regel | Fehlerbeschreibung | Lösung |
|------|-------|--------------------|--------|
| Name | Pflichtfeld | Der Name darf nicht leer sein. | Gib einen aussagekräftigen Namen für den Veranstaltungsplan ein, z. B. „Gottesdienstplan Sommer". |
| Zeitraumstyp | Pflichtfeld | Es muss ein Zeitraumstyp ausgewählt sein. | Wähle eine der verfügbaren Optionen aus: „Nächste X Monate", „Zeitraum (von–bis)", „Dieses Jahr" oder „Nächstes Jahr". |
| Zeitraum (Monate) | Pflichtfeld bei „Nächste X Monate", Wert zwischen 1 und 120 | Die Monatsanzahl fehlt oder liegt außerhalb des erlaubten Bereichs. | Gib eine Zahl zwischen 1 und 120 ein. |
| Veranstaltungstypen | Mindestens ein Eintrag erforderlich | Es muss mindestens ein Veranstaltungstyp ausgewählt sein. | Wähle mindestens einen Veranstaltungstyp aus der Liste aus. Falls keine Typen zur Auswahl stehen, lege zuerst unter **Einstellungen → Veranstaltungen → Veranstaltungstypen** einen Typ an. |
| Dienste | Mindestens ein Eintrag erforderlich | Es muss mindestens ein Dienst ausgewählt sein. | Wähle mindestens einen Dienst aus der Liste aus. Falls keine Dienste zur Auswahl stehen, lege zuerst unter **Einstellungen → Veranstaltungen → Veranstaltungsdienste** einen Dienst an. |

## Beziehungen zu anderen Bereichen

- **Veranstaltungstypen**: Die im Veranstaltungsplan auswählbaren Veranstaltungstypen werden unter **Einstellungen → Veranstaltungen → Veranstaltungstypen** verwaltet. Wenn dort noch keine Typen angelegt sind, steht im Formular keine Auswahl zur Verfügung.
- **Dienste**: Die im Veranstaltungsplan auswählbaren Dienste werden unter **Einstellungen → Veranstaltungen → Veranstaltungsdienste** konfiguriert. Ohne dort angelegte Dienste kann kein Veranstaltungsplan erstellt werden.
- Das Tool **Veranstaltungen** muss aktiviert sein, damit die Einstellungsseite „Veranstaltungspläne" verfügbar ist.

---

## page: EventFacts

**Entity:** EventFacts  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/EventFacts.php`  
**Updated:** 2026-02-17 15:39:20  

# Veranstaltungsfakten

## Übersicht

Auf der Seite „Veranstaltungsfakten" kannst du zusätzliche Informationen definieren, die bei Veranstaltungen erfasst werden sollen – beispielsweise Zahlen wie die Teilnehmeranzahl oder Auswahllisten wie Wetterbedingungen. Die hier definierten Veranstaltungsfakten können anschließend einzelnen Veranstaltungstypen zugeordnet werden, sodass bei der Pflege einer Veranstaltung die passenden Fakten zur Eingabe bereitstehen.

Die Seite befindet sich im Einstellungsbereich der Anwendung. Das Tool **Veranstaltungen** muss aktiviert sein.

## Navigation

Die Seite „Veranstaltungsfakten" erreichst du über die Seitenleiste im Bereich **Einstellungen**, innerhalb der Gruppe **Veranstaltungen**.

## Tabellenansicht

Die Tabelle auf der Seite „Veranstaltungsfakten" zeigt alle angelegten Veranstaltungsfakten mit folgenden Spalten:

| Spalte | Beschreibung |
|--------|--------------|
| Name | Der Name des Veranstaltungsfakts (z. B. „Teilnehmeranzahl", „Wetter"). Die Tabelle bietet eine Suchfunktion, mit der du nach dem Namen filtern kannst. |
| Typ | Der Typ des Veranstaltungsfakts (z. B. „Liste" oder „Zahl"). |

## Formularfelder

Die folgenden Felder werden beim Erstellen und Bearbeiten eines Veranstaltungsfakts in einem Dialogfenster angezeigt:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Der Name des Veranstaltungsfakts, z. B. „Teilnehmeranzahl" oder „Wetter". |
| Typ | Auswahl | Ja | Der Typ des Veranstaltungsfakts. Bestimmt, welche Art von Wert bei einer Veranstaltung erfasst wird. Das Feld hat keinen leeren Platzhalterwert – es ist immer ein Wert vorausgewählt. |
| Listenelemente | Tags-Eingabe | Nein | Die möglichen Auswahlwerte für diesen Veranstaltungsfakt. Dieses Feld ist nur sichtbar, wenn du als Typ „Liste" gewählt hast. Neue Elemente fügst du hinzu, indem du den gewünschten Wert eingibst und mit der Eingabetaste bestätigst. Bestehende Elemente kannst du per Klick auf das Entfernen-Symbol wieder löschen. |

### Typische Validierungsfehler

- **Name fehlt:** Wenn du keinen Namen eingibst, erscheint eine Fehlermeldung. Trage einen aussagekräftigen Namen ein, um fortzufahren.
- **Typ nicht ausgewählt:** Wenn du keinen Typ auswählst, kann der Veranstaltungsfakt nicht gespeichert werden. Wähle einen passenden Typ aus der Auswahlliste.

## Aktionen

### Veranstaltungsfakt erstellen

Über die Schaltfläche oberhalb der Tabelle kannst du einen neuen Veranstaltungsfakt anlegen. Es öffnet sich ein Dialogfenster mit den oben beschriebenen Formularfeldern. Nach dem Ausfüllen und Bestätigen wird der neue Veranstaltungsfakt in der Tabelle angezeigt und steht anschließend zur Zuordnung in Veranstaltungstypen zur Verfügung.

### Veranstaltungsfakt bearbeiten

Über das Aktionsmenü eines Eintrags in der Tabelle kannst du einen bestehenden Veranstaltungsfakt bearbeiten. Es öffnet sich ein Dialogfenster mit denselben Feldern wie beim Erstellen, vorausgefüllt mit den aktuellen Werten. Änderungen werden nach dem Bestätigen sofort übernommen.

### Veranstaltungsfakt löschen

Über das Aktionsmenü eines Eintrags kannst du einen Veranstaltungsfakt löschen. Vor dem Löschen wird eine Bestätigungsabfrage angezeigt, um ein versehentliches Löschen zu verhindern.

## Beziehungen zu Veranstaltungstypen

Veranstaltungsfakten werden in den **Veranstaltungstypen** verwendet. In der Einstellungsseite für Veranstaltungstypen (ebenfalls im Einstellungsbereich unter **Veranstaltungen**) kannst du festlegen, welche Veranstaltungsfakten für einen bestimmten Veranstaltungstyp gepflegt werden sollen. Erst durch diese Zuordnung erscheinen die Veranstaltungsfakten bei der Anlage oder Bearbeitung einer Veranstaltung des jeweiligen Typs.

---

## page: EventAgendaTemplates

**Entity:** EventAgendaTemplates  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/EventAgendaTemplates.php`  
**Updated:** 2026-02-17 15:38:12  

# Veranstaltungsabläufe

## Übersicht

Auf der Seite „Veranstaltungsabläufe" kannst du Vorlagen für wiederkehrende Veranstaltungsabläufe erstellen und verwalten. Ein Veranstaltungsablauf ist eine wiederverwendbare Vorlage mit einer Abfolge von Programmpunkten, die du beim Planen von Veranstaltungen als Grundlage verwenden kannst. So musst du wiederkehrende Abläufe – etwa für einen Gottesdienst oder eine Abendveranstaltung – nicht jedes Mal neu zusammenstellen.

Diese Seite befindet sich im Einstellungsbereich unter der Navigationsgruppe **Veranstaltungen**.

**Voraussetzungen:**
- Das Tool **Veranstaltungen** muss aktiviert sein.

## Navigation

Die Funktion „Veranstaltungsabläufe" ist über **Einstellungen → Veranstaltungen → Veranstaltungsabläufe** erreichbar. Das Tool **Veranstaltungen** muss aktiviert sein, damit der Menüpunkt sichtbar ist.

## Tabellenansicht / Listenansicht

Die Übersichtstabelle der Veranstaltungsabläufe zeigt alle vorhandenen Ablaufsvorlagen an. Du kannst über das Suchfeld nach dem Namen einer Vorlage suchen.

| Spalte | Beschreibung |
|--------|-------------|
| Name | Der Name der Ablaufsvorlage. Dieses Feld ist durchsuchbar. |

Wenn noch keine Veranstaltungsabläufe angelegt wurden, ist die Tabelle leer. Du kannst dann über die Schaltfläche **Veranstaltungsablaufsvorlage erstellen** deine erste Vorlage anlegen.

## Formularfelder

Beim Erstellen oder Bearbeiten einer Veranstaltungsablaufsvorlage stehen dir folgende Felder zur Verfügung. Das Formular öffnet sich als Dialogfenster.

### Hauptformular

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|-------------|
| Name | Textfeld | Ja | Der Name der Ablaufsvorlage (z. B. „Standardgottesdienst" oder „Abendveranstaltung"). |

### Programmpunkte

Die Programmpunkte werden als wiederholbare Liste innerhalb der Veranstaltungsablaufsvorlage verwaltet. Du kannst beliebig viele Programmpunkte hinzufügen. Jeder Programmpunkt kann per Drag-and-Drop oder mit den Sortier-Schaltflächen neu angeordnet werden. Die einzelnen Einträge sind ein- und ausklappbar, um die Übersichtlichkeit zu verbessern.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|-------------|
| Name | Textfeld | Ja | Die Bezeichnung des Programmpunkts (z. B. „Begrüßung", „Predigt", „Lobpreis"). |
| Dauer | Ganzzahl | Nein | Die geplante Dauer des Programmpunkts in Minuten. |
| Typ | Auswahl | Nein | Der Typ des Programmpunkts. Zur Auswahl stehen „Benutzerdefiniert" und „Musik". |
| Verantwortlicher Dienst | Auswahl | Nein | Der Dienst, der für diesen Programmpunkt verantwortlich ist. Hier werden die unter **Einstellungen → Veranstaltungen → Veranstaltungsdienste** angelegten Dienste zur Auswahl angezeigt. |
| Veröffentlichungskanäle | Mehrfachauswahl | Nein | Du kannst einen oder mehrere Veröffentlichungskanäle zuordnen. Wird diese Vorlage dann bei einer Veranstaltung verwendet, werden der Veranstaltung zugeteilte Veröffentlichungsanfragen der gewählten Kanäle automatisch als Unterpunkte dieses Programmpunkts angelegt. Ein Hilfe-Icon mit Tooltip erklärt diese Funktion direkt im Formular. |

## Aktionen

### Neue Veranstaltungsablaufsvorlage erstellen

Über die Schaltfläche **Veranstaltungsablaufsvorlage erstellen** in der Tabellenkopfzeile öffnet sich ein Dialogfenster. Dort gibst du einen Namen ein und fügst die gewünschten Programmpunkte hinzu. Nach dem Speichern erscheint die neue Vorlage in der Übersichtstabelle.

**Mögliche Validierungsfehler:**
- „Name ist erforderlich" – Du musst einen Namen für die Vorlage eingeben.
- „Name des Programmpunkts ist erforderlich" – Jeder Programmpunkt benötigt eine Bezeichnung.

### Bearbeiten

Über die Bearbeiten-Aktion an einem Tabelleneintrag öffnet sich ein Dialogfenster, in dem du den Namen und die Programmpunkte der bestehenden Veranstaltungsablaufsvorlage anpassen kannst.

### Duplizieren

Über die Duplizieren-Aktion wird eine Kopie der ausgewählten Veranstaltungsablaufsvorlage erstellt. Die Kopie erhält automatisch den Zusatz „Kopie" im Namen und beinhaltet alle Programmpunkte der Originalvorlage. Du kannst die Kopie anschließend unabhängig bearbeiten.

### Löschen

Über die Löschen-Aktion kannst du eine Veranstaltungsablaufsvorlage dauerhaft entfernen. Vor dem Löschen wirst du zur Bestätigung aufgefordert.

## Beziehungen

- **Veranstaltungsdienste**: Die unter **Einstellungen → Veranstaltungen → Veranstaltungsdienste** angelegten Dienste können als verantwortlicher Dienst für einzelne Programmpunkte innerhalb einer Veranstaltungsablaufsvorlage zugewiesen werden.
- **Veröffentlichungskanäle**: Die unter **Einstellungen → Veröffentlichungs-Management** angelegten Kanäle können Programmpunkten einer Veranstaltungsablaufsvorlage zugeordnet werden. Wird die Vorlage bei einer Veranstaltung eingesetzt, werden Veröffentlichungsanfragen der gewählten Kanäle automatisch als Unterpunkte des jeweiligen Programmpunkts angelegt.

## Häufige Fragen

**Kann ich eine Vorlage ohne Programmpunkte erstellen?**
Ja, du kannst eine Veranstaltungsablaufsvorlage nur mit einem Namen anlegen und die Programmpunkte später ergänzen.

**Warum ist die Auswahl „Verantwortlicher Dienst" leer?**
Die Auswahl zeigt die unter **Einstellungen → Veranstaltungen → Veranstaltungsdienste** angelegten Dienste. Wenn dort noch keine Dienste erstellt wurden, bleibt die Auswahl leer. Lege zunächst die benötigten Veranstaltungsdienste an.

---

## page: EmailBlacklist

**Entity:** EmailBlacklist  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/EmailBlacklist.php`  
**Updated:** 2026-02-17 15:36:37  

# E-Mail-Sperrliste

## Übersicht

Die E-Mail-Sperrliste ermöglicht es dir, einzelne E-Mail-Adressen zu sperren, sodass an diese keine Nachrichten mehr versendet werden. Die E-Mail-Adressen werden dabei als sogenannter Hash-Wert gespeichert – das bedeutet, dass die ursprüngliche E-Mail-Adresse nach dem Sperren nicht mehr im Klartext einsehbar ist. Zusätzlich kannst du auf dieser Seite prüfen, ob eine bestimmte E-Mail-Adresse bereits gesperrt ist.

## Navigation

Die E-Mail-Sperrliste findest du im Bereich **Einstellungen** unter der Gruppe **Kontakte**.

**Voraussetzung:** Das Tool **Kontakte** muss aktiviert sein, damit die E-Mail-Sperrliste verfügbar ist.

## Tabellenansicht

Die E-Mail-Sperrliste zeigt alle gesperrten E-Mail-Adressen in einer Tabelle mit folgenden Spalten:

| Spalte | Beschreibung |
|---|---|
| E-Mail-Hash | Ein gekürzter Hash-Wert der gesperrten E-Mail-Adresse (16 Zeichen). Den vollständigen Hash-Wert kannst du sehen, wenn du mit der Maus über den Wert fährst. Da nur der Hash gespeichert wird, ist die ursprüngliche E-Mail-Adresse nicht mehr ablesbar. |
| Grund | Der bei der Sperrung angegebene Grund (falls vorhanden) |
| Hinzugefügt am | Datum und Uhrzeit der Sperrung im Format TT.MM.JJJJ HH:MM |

Die Tabelle ist standardmäßig nach dem Datum absteigend sortiert, sodass die neuesten Einträge zuerst angezeigt werden. Du kannst die Spalte **Hinzugefügt am** anklicken, um die Sortierung zu ändern. Ab mehr als 10 Einträgen wird die Tabelle auf mehrere Seiten aufgeteilt.

Wenn noch keine E-Mail-Adresse gesperrt wurde, ist die Tabelle leer.

## E-Mail-Adresse sperren

Über die Schaltfläche **E-Mail-Adresse sperren** oberhalb der Tabelle kannst du eine neue E-Mail-Adresse zur E-Mail-Sperrliste hinzufügen. Es öffnet sich ein Dialog mit folgenden Feldern:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| E-Mail-Adresse | E-Mail-Eingabefeld | Ja | Die zu sperrende E-Mail-Adresse |
| Grund | Textfeld | Nein | Ein optionaler Grund für die Sperrung |

Nach dem Bestätigen wird die E-Mail-Adresse als Hash gespeichert und erscheint in der Tabelle. Die ursprüngliche E-Mail-Adresse ist danach nicht mehr einsehbar.

## E-Mail-Adresse prüfen

Über die Schaltfläche **E-Mail-Adresse prüfen** (erkennbar am Lupen-Symbol) kannst du überprüfen, ob eine bestimmte E-Mail-Adresse bereits auf der E-Mail-Sperrliste steht. Es öffnet sich ein Dialog mit folgendem Feld:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| E-Mail-Adresse | E-Mail-Eingabefeld | Ja | Die zu prüfende E-Mail-Adresse |

Nach dem Bestätigen erscheint eine Benachrichtigung mit dem Ergebnis:

- **Warnung** (gelb): „Diese E-Mail-Adresse ist gesperrt." – Die Adresse befindet sich auf der E-Mail-Sperrliste.
- **Erfolg** (grün): „Diese E-Mail-Adresse ist nicht gesperrt." – Die Adresse ist nicht gesperrt.

Diese Funktion ist besonders nützlich, da die E-Mail-Adressen in der Tabelle nur als Hash-Werte angezeigt werden und du so nicht direkt erkennen kannst, welche konkrete Adresse gesperrt ist.

## Sperre aufheben

Für jeden Eintrag in der Tabelle der E-Mail-Sperrliste kannst du über das Löschen-Symbol die Sperre aufheben. Vor dem Entfernen wird eine Bestätigungsabfrage angezeigt, um versehentliches Löschen zu verhindern. Nach der Bestätigung wird der Eintrag aus der E-Mail-Sperrliste entfernt.

**Hinweis:** Da die E-Mail-Adresse nur als Hash gespeichert ist, kannst du beim Löschen nicht sehen, welche konkrete Adresse du entsperrst. Nutze daher vorher die Funktion **E-Mail-Adresse prüfen**, um sicherzustellen, dass die richtige Adresse betroffen ist.

## Validierung

Beim Sperren und Prüfen von E-Mail-Adressen gelten folgende Validierungsregeln:

| Situation | Lösung |
|---|---|
| Das Feld „E-Mail-Adresse" ist leer | Gib eine gültige E-Mail-Adresse ein. Das Feld ist ein Pflichtfeld. |
| Ungültiges E-Mail-Format | Überprüfe die Schreibweise und stelle sicher, dass die Adresse ein gültiges E-Mail-Format hat. |

---

## page: Donations

**Entity:** Donations  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/Donations.php`  
**Updated:** 2026-02-17 15:35:20  

# Spendenverwaltung

## Übersicht

Auf der Einstellungsseite **Spendenverwaltung** konfigurierst du alle Grundlagen rund um deine Spendenverwaltung. Dazu gehören Angaben zur Gemeinnützigkeit deiner Organisation, die Einstellungen für Spendenbescheinigungen (inkl. Unterschrift, Design und Versandoptionen) sowie die Zuordnung von PayPal-Gebühren.

Die Seite ist nur sichtbar, wenn das Tool **Spendenverwaltung** aktiviert ist.

## Navigation

- **Seitenleiste → Einstellungen → Spendenverwaltung → Spendenverwaltung**
- **Voraussetzung:** Das Tool **Spendenverwaltung** muss für die Organisation aktiviert sein.

## Formularfelder der Spendenverwaltung

Die Einstellungsseite der Spendenverwaltung ist in mehrere Bereiche unterteilt:

### Bereich: Gemeinnützigkeit

In diesem Bereich hinterlegst du die Angaben zur Gemeinnützigkeit deiner Organisation. Diese Daten fließen in die Spendenbescheinigungen ein.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Art des Bescheids | Auswahl (Radio) | Nein | Wähle zwischen „Freistellungsbescheid" und „Feststellungsbescheid". Ein Hinweis-Icon erklärt den Unterschied: Neu gegründete Vereine erhalten zunächst einen Feststellungsbescheid, später einen Freistellungsbescheid für meist drei Jahre. |
| Datum des Bescheids | Datumsauswahl | Nein | Das Datum des letzten Bescheids vom Finanzamt. Es kann kein Datum in der Zukunft gewählt werden. |
| Veranlagungszeitraum Start | Dropdown | Nein | Das Startjahr des Veranlagungszeitraums. Zur Auswahl stehen die letzten 10 Jahre bis zum aktuellen Jahr. |
| Veranlagungszeitraum Ende | Dropdown | Nein | Das Endjahr des Veranlagungszeitraums. Zur Auswahl stehen die letzten 10 Jahre bis zum aktuellen Jahr. |
| Förderzwecke | Mehrfachauswahl | Nein | Wähle die für deine Organisation zutreffenden Förderzwecke aus der vorgegebenen Liste. Diese Angabe erscheint auf den Spendenbescheinigungen. |
| Eigene Förderzwecke | Tags-Eingabe | Nein | Hier kannst du zusätzliche Förderzwecke eingeben, die nicht in der vorgegebenen Liste enthalten sind. Gib den Förderzweck ein und drücke Enter, um ihn hinzuzufügen. |

### Bereich: Spendenbescheinigungen

In diesem Bereich der Spendenverwaltung legst du fest, wie deine Spendenbescheinigungen aussehen und versendet werden.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Unterschrift | Datei-Upload (Bild) | Nein | Lade ein Bild deiner Unterschrift hoch, das auf den Spendenbescheinigungen erscheinen soll. |
| Unterzeichner | Texteingabe | Nein | Der Name der Person, die die Spendenbescheinigungen unterzeichnet. |
| Versand der Spendenbescheinigungen per Email | Checkbox | Nein | Aktiviere diese Option, wenn du Spendenbescheinigungen per Email versenden möchtest. Hinweis: Der Versand per Email muss beim Finanzamt formlos angemeldet werden. Eine Bestätigung des Finanzamts ist nicht notwendig. |
| Datum der Anzeige beim Finanzamt | Datumsauswahl | Nein | Dieses Feld ist nur sichtbar, wenn „Versand der Spendenbescheinigungen per Email" aktiviert ist. Es wird empfohlen, das Datum der Anzeige beim Finanzamt einzutragen. Ohne dieses Datum wird der entsprechende Hinweis auf den Spendenbescheinigungen weggelassen. Es kann kein Datum in der Zukunft gewählt werden. |
| Absenderadresse unterdrücken | Checkbox | Nein | Aktiviere diese Option, wenn du z. B. eigenes Briefpapier verwendest und die Absenderadresse auf der Spendenbescheinigung nicht angezeigt werden soll. |

### Unterbereich: Design der Spendenbescheinigungen

Innerhalb des Bereichs „Spendenbescheinigungen" der Spendenverwaltung kannst du das Design anpassen. Du kannst entweder die Standardvorlage verwenden oder eigene Kopf- und Fußzeilen-Designs zuweisen. Dazu müssen zuvor entsprechende Kopf-/Fußzeilen-Dokumente im Bereich **Dokumente** angelegt worden sein. Falls noch keine Dokumente vorhanden sind, steht nur die Standardvorlage zur Verfügung.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Kopfzeile | Auswahl (Radio) | Nein | Wähle zwischen „Standardvorlage" und „Eigenes Design". |
| Kopfzeile – Dokumentvorlage | Dokumentenauswahl | Ja (wenn „Eigenes Design" gewählt) | Nur sichtbar, wenn bei der Kopfzeile „Eigenes Design" ausgewählt wurde. Wähle ein zuvor im Bereich **Dokumente** angelegtes Kopf-/Fußzeilen-Dokument aus. |
| Fußzeile | Auswahl (Radio) | Nein | Wähle zwischen „Standardvorlage" und „Eigenes Design". |
| Fußzeile – Dokumentvorlage | Dokumentenauswahl | Ja (wenn „Eigenes Design" gewählt) | Nur sichtbar, wenn bei der Fußzeile „Eigenes Design" ausgewählt wurde. Wähle ein zuvor im Bereich **Dokumente** angelegtes Kopf-/Fußzeilen-Dokument aus. |

### Bereich: PayPal-Gebühren

Dieser Bereich der Spendenverwaltung ist nur sichtbar, wenn das Tool **Buchhaltung** oder **Buchhaltung (erweitert)** aktiviert ist **und** ein PayPal-Konto als Zahlungskonto verbunden ist. Sind diese Voraussetzungen nicht erfüllt, wird der Bereich nicht angezeigt.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Wer trägt die Kosten für PayPal-Gebühren für eingehende Spenden? | Auswahl (Radio) | Ja | PayPal erhebt Gebühren für jede eingehende Spende. Wähle, wie diese gebucht werden sollen: **„Das Projekt, das die Spende empfängt, trägt die Gebühren"** – die Gebühren werden dem empfangenden Projekt zugeordnet. **„Gebühren nicht automatisch mitbuchen"** – die Gebühren werden bei der Spendenerfassung nicht automatisch verbucht und müssen ggf. manuell gebucht werden. |

## Aktionen der Spendenverwaltung

### Vorschau der Spendenbescheinigung

Im Design-Bereich der Spendenbescheinigungen gibt es eine **Vorschau**-Schaltfläche. Wenn du darauf klickst, wird eine Vorschau der Spendenbescheinigung in einem großen Modal-Fenster angezeigt. Die Vorschau kann nur generiert werden, wenn alle notwendigen Einstellungen für Spendenbescheinigungen vollständig ausgefüllt sind. Fehlen Einstellungen, wird keine Vorschau angezeigt.

### Speichern der Spendenverwaltung

Über die **Speichern**-Schaltfläche werden alle Einstellungen der Spendenverwaltung gesichert. Nach dem Speichern passiert Folgendes:

- **Unterschrift:** Wurde das Unterschriftsbild entfernt, wird es auch serverseitig gelöscht. Wurde ein neues Bild hochgeladen, ersetzt es das bisherige.
- **Design-Cache:** Zwischengespeicherte Höhenberechnungen der Spendenbescheinigungen werden zurückgesetzt, damit Änderungen am Design (z. B. neue Kopf- oder Fußzeile) korrekt in zukünftigen Spendenbescheinigungen übernommen werden.

## Beziehungen zu anderen Bereichen

- **Dokumente:** Für eigene Kopf- und Fußzeilen-Designs bei Spendenbescheinigungen müssen zuvor im Bereich **Dokumente** entsprechende Kopf-/Fußzeilen-Dokumente angelegt werden.
- **Zahlungskonten** (Einstellungen): Der PayPal-Gebühren-Bereich in der Spendenverwaltung ist nur sichtbar, wenn ein PayPal-Konto als Zahlungskonto verbunden ist.
- **Allgemeine Einstellungen:** Ergänzende Angaben wie Finanzamt, Steuernummer und Adresse der Organisation werden in den allgemeinen Einstellungen gepflegt und fließen ebenfalls in die Spendenbescheinigungen ein.

## Häufige Fragen zur Spendenverwaltung

**Die Vorschau der Spendenbescheinigung wird nicht angezeigt – was kann ich tun?**
Prüfe, ob alle notwendigen Einstellungen vollständig ausgefüllt sind.

**Ich sehe den Bereich „PayPal-Gebühren" nicht – warum?**
Dieser Bereich wird nur angezeigt, wenn das Tool **Buchhaltung** oder **Buchhaltung (erweitert)** aktiviert ist und ein PayPal-Konto als Zahlungskonto in den Einstellungen verbunden wurde.

**Was ist der Unterschied zwischen Freistellungsbescheid und Feststellungsbescheid?**
Neu gegründete Vereine erhalten zunächst einen Feststellungsbescheid vom Finanzamt. Später, wenn die Gemeinnützigkeit bestätigt wurde, wird ein Freistellungsbescheid erteilt, der in der Regel für drei Jahre gilt.

**Muss ich den E-Mail-Versand beim Finanzamt anmelden?**
Ja, der Versand von Spendenbescheinigungen per Email muss beim Finanzamt formlos angemeldet werden. Eine Bestätigung des Finanzamts ist jedoch nicht erforderlich. Das Datum der Anzeige kannst du anschließend in der Spendenverwaltung eintragen.

---

## page: DonationRoutes

**Entity:** DonationRoutes  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/DonationRoutes.php`  
**Updated:** 2026-02-17 15:33:00  

# Spendeneinbehalt

## Übersicht

Die Seite „Spendeneinbehalt" ermöglicht es dir, Regeln zu definieren, die festlegen, dass ein bestimmter Prozentsatz eingehender Spenden automatisch an ein anderes Projekt weitergeleitet wird. Damit lässt sich beispielsweise einstellen, dass von allen projektbezogenen Spenden 10 % für allgemeine Verwaltungskosten einbehalten werden.

Die Seite befindet sich im Einstellungsbereich unter der Gruppe **Spendenverwaltung**.

**Voraussetzungen:**
- Die Tools **Spendenverwaltung** und **Projekte** müssen aktiviert sein.
- Es müssen mindestens zwei Projekte existieren, damit ein Spendeneinbehalt angelegt werden kann.

## Navigation

Die Funktion „Spendeneinbehalt" ist über die Einstellungen im Bereich **Spendenverwaltung** erreichbar. Der Menüpunkt wird nur angezeigt, wenn die Tools **Spendenverwaltung** und **Projekte** aktiviert sind.

## Tabellenansicht

Die Tabelle auf der Seite „Spendeneinbehalt" zeigt alle konfigurierten Spendeneinbehalte mit folgenden Spalten:

| Spalte | Beschreibung |
|---|---|
| Anwenden auf | Name des Quellprojekts, von dessen Spenden der Einbehalt abgezogen wird. Wenn kein bestimmtes Projekt ausgewählt wurde, wird „Alle eingehenden Spenden" angezeigt. |
| Empfangendes Projekt | Name des Projekts, das die einbehaltenen Beträge erhält. |
| Einbehalt (%) | Der konfigurierte Prozentsatz als Zahl. |
| Notizen | Ergänzende Anmerkungen zur Regel (mehrzeilig möglich). |

Die Einträge können per Drag-and-Drop umsortiert werden. Die Standardsortierung folgt der manuell festgelegten Reihenfolge. Eine Seitennavigation (Paginierung) wird erst ab mehr als 10 Einträgen angezeigt.

Wenn noch keine Spendeneinbehalte konfiguriert sind, wird ein Hinweis angezeigt: „Es sind keine Spendeneinbehalte konfiguriert." zusammen mit einer kurzen Erklärung, was ein Spendeneinbehalt ist und wozu er dient.

## Formularfelder

Die folgenden Felder werden beim Erstellen und Bearbeiten eines Spendeneinbehalts angezeigt:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Anwenden auf | Auswahl (Projekt, durchsuchbar) | Nein | Von welchen Spenden soll der Prozentsatz abgezogen werden? Wähle ein Projekt aus oder lasse das Feld leer, um die Regel auf alle eingehenden Spenden anzuwenden. Das gewählte Projekt darf nicht identisch mit dem empfangenden Projekt sein. |
| Empfangendes Projekt | Auswahl (Projekt, durchsuchbar) | Ja | Welches Projekt soll die einbehaltenen Beträge erhalten? Das gewählte Projekt darf nicht identisch mit dem Feld „Anwenden auf" sein. |
| Einbehalt (%) | Zahl | Ja | Der Prozentsatz, der von den eingehenden Spenden einbehalten und an das empfangende Projekt weitergeleitet wird. |
| Notizen | Text | Nein | Freitextfeld für ergänzende Anmerkungen zur Regel, z. B. warum dieser Einbehalt konfiguriert wurde. |

Die Projektauswahl in beiden Feldern ist durchsuchbar und zeigt alle vorhandenen Projekte an.

## Aktionen

### Spendeneinbehalt erstellen

Über die Schaltfläche in der Tabellenüberschrift kannst du einen neuen Spendeneinbehalt erstellen. Es öffnet sich ein Formular mit den oben beschriebenen Feldern. Nach dem Speichern wird der neue Eintrag in der Tabelle angezeigt.

Die Schaltfläche ist **deaktiviert**, wenn nur ein einziges Projekt existiert. In diesem Fall wird der Hinweis angezeigt: „Ein Spendeneinbehalt kann erst dann angelegt werden, wenn es mehr als ein Projekt gibt."

### Spendeneinbehalt bearbeiten

Jeder Eintrag in der Tabelle kann über die Bearbeiten-Aktion geändert werden. Es öffnet sich ein Modal mit denselben Formularfeldern wie beim Erstellen.

### Spendeneinbehalt löschen

Einzelne Spendeneinbehalte können über die Löschen-Aktion entfernt werden. Vor dem Löschen wird eine Bestätigung angefordert.

### Spendeneinbehalte sortieren

Die Reihenfolge der Einträge kann per Drag-and-Drop angepasst werden.

## Validierung & Fehlermeldungen

Beim Erstellen und Bearbeiten eines Spendeneinbehalts gelten folgende Validierungsregeln:

| Fehlerbedingung | Ursache | Lösung |
|---|---|---|
| „Empfangendes Projekt" ist leer | Das Pflichtfeld „Empfangendes Projekt" wurde nicht ausgefüllt. | Wähle ein Projekt aus, das die einbehaltenen Beträge erhalten soll. |
| „Einbehalt (%)" ist leer oder ungültig | Das Pflichtfeld „Einbehalt (%)" wurde nicht ausgefüllt oder enthält keine gültige Zahl. | Gib einen gültigen Prozentwert ein (z. B. 10). |
| „Anwenden auf" und „Empfangendes Projekt" sind identisch | Quell- und Zielprojekt dürfen nicht dasselbe Projekt sein, da sonst der Einbehalt an dasselbe Projekt zurückfließen würde. | Wähle für „Anwenden auf" und „Empfangendes Projekt" zwei unterschiedliche Projekte aus. |
| Schaltfläche „Erstellen" ist deaktiviert | Es existiert nur ein einziges Projekt. Ein Spendeneinbehalt benötigt mindestens zwei Projekte. | Lege zuerst ein weiteres Projekt in der Projektverwaltung an. |

## Beziehungen zu anderen Bereichen

- **Projekte**: Spendeneinbehalte setzen voraus, dass mindestens zwei Projekte existieren. Die auswählbaren Quell- und Zielprojekte in den Feldern „Anwenden auf" und „Empfangendes Projekt" stammen aus der Projektverwaltung. Das Tool **Projekte** muss aktiviert sein.

---

## page: DonationAccounting

**Entity:** DonationAccounting  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/DonationAccounting.php`  
**Updated:** 2026-02-17 15:31:22  

# Spendenerfassung

## Übersicht

Die Seite „Spendenerfassung" ist eine Einstellungsseite innerhalb der Spendenverwaltung. Hier kannst du festlegen, ob bei der Erfassung von Spenden die Kontaktnummer eines Kontakts angezeigt werden soll.

## Voraussetzungen

- **Das Tool „Spendenverwaltung" muss aktiviert sein**, damit die Einstellungsseite „Spendenerfassung" verfügbar ist.

## Navigation

Die Seite „Spendenerfassung" findest du im Einstellungsbereich unter der Gruppe **Spendenverwaltung**.

## Formularfelder

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Kontaktnummer verwenden | Checkbox | Nein | Legt fest, ob bei der Spendenerfassung die Kontaktnummer angezeigt und verwendet wird. |

## Beziehungen

- **Spendenverwaltung (Einstellungen):** Die Seite „Spendenerfassung" ist Teil der Spendeneinstellungen und ergänzt weitere Einstellungsbereiche unter „Spendenverwaltung", wie z. B. Spendenbescheinigungen, Gemeinnützigkeit oder PayPal-Gebühren.
- **Spendeneinbehalte:** Unter den Einstellungen der Spendenverwaltung können auch Spendeneinbehalte konfiguriert werden. Diese legen fest, welcher Anteil eingehender Spenden an andere Projekte weitergeleitet wird.

---

## page: Domains

**Entity:** Domains  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/Domains.php`  
**Updated:** 2026-02-17 15:30:41  

# Domains

## Übersicht

Auf der Seite „Domains" verwaltest du die Internet-Adressen (Domains) deiner Organisation zentral. Du kannst eine eigene Domain mitbringen, eine neue Domain suchen und registrieren lassen oder zunächst ohne eigene Domain weitermachen. Die eingerichteten Domains werden für verschiedene Zwecke verwendet: den Versand von System-Mails und Newslettern, Email-Postfächer und den Website Builder.

## Navigation

Die Seite „Domains" befindet sich unter **Einstellungen → Allgemein → Domains**.

## Tabellenansicht / Listenansicht

Die Domains-Übersicht zeigt alle eingerichteten Domains deiner Organisation in einer Tabelle mit folgenden Spalten:

| Spalte | Beschreibung |
|---|---|
| **Domain** | Der Domainname. Bei externen Domains (also Domains, die bei einem anderen Provider liegen und per DNS angebunden werden) wird zusätzlich „(extern)" angezeigt. |
| **System-Mails / Newsletter** | Zeigt per Icon an, ob die Domain für den Versand von System-Mails und Newslettern aktiviert ist. Diese Spalte ist immer sichtbar. |
| **Email-Postfächer** | Zeigt an, ob die Domain für Email-Postfächer aktiviert ist. Diese Spalte ist nur sichtbar, wenn das Tool „Email-Postfächer" aktiviert ist. |
| **Newsletter** | Zeigt an, ob die Domain für den Newsletter-Versand aktiviert ist. Diese Spalte ist nur sichtbar, wenn das Tool „Newsletter" aktiviert ist. |
| **Webseite** | Zeigt an, ob die Domain für die Webseite (Website Builder) aktiviert ist. Diese Spalte ist nur sichtbar, wenn das Tool „Webseite" aktiviert ist. |

Die Tabelle ist standardmäßig alphabetisch nach Domain sortiert. Alle Domains werden auf einer Seite angezeigt (keine Seitenumbrüche/Paginierung).

**Leerer Zustand:** Wenn noch keine Domains eingerichtet sind, wird folgender Hinweis angezeigt: *„Hier kannst du deine Domains zentral verwalten. Diese können an verschiedenen Stellen genutzt werden: zum Versand von Systemmails, für den Newsletterversand oder den Website Builder."*

## Domain erstellen

Über den Button **„Domain erstellen"** im Kopfbereich der Domains-Seite startest du einen mehrstufigen Assistenten zur Einrichtung einer neuen Domain.

### Schritt 1: Hast du schon eine Domain?

Im ersten Schritt wirst du gefragt, ob du bereits eine Internet-Adresse besitzt. Es stehen drei Optionen zur Auswahl:

- **„Ich habe bereits eine Adresse"** – Du wirst weitergeleitet, um deine eigene Domain einzubinden.
- **„Ich benötige noch eine Adresse"** – Du wirst weitergeleitet, um eine neue Domain zu suchen und zu registrieren.
- **„Erstmal ohne Domain weitermachen"** – Du wirst weitergeleitet, um zunächst ohne eigene Domain fortzufahren.

> **Hinweis:** Auf dem Demosystem können keine Domains erworben oder vorhandene Domains verwendet werden.

### Schritt 2a: Eigene Domain einbinden

In diesem Schritt gibst du deine bereits vorhandene Domain an. Nach dem Abschließen dieses Schritts musst du bei deinem bisherigen Provider bestimmte DNS-Einstellungen vornehmen, um die Domain mit ngo.tools zu verbinden. Die erforderlichen DNS-Einträge werden dir nach der Einrichtung angezeigt (siehe Abschnitt „DNS-Einstellungen anzeigen").

Nach dem Speichern wird die Domain in der Domains-Tabelle als „(extern)" angezeigt. Die Dienste (System-Mails, Email-Postfächer etc.) werden erst aktiv, wenn alle erforderlichen DNS-Einträge bei deinem Provider korrekt eingerichtet und verifiziert wurden.

### Schritt 2b: Neue Domain suchen und registrieren

In diesem Schritt gibst du eine Wunschadresse ein, und das System prüft automatisch die Verfügbarkeit.

- **Domain verfügbar:** Dir wird angeboten, die Domain zu nutzen. Die Kosten für die Domain sind in deinem Paket enthalten. Beachte jedoch, dass die Domain nach der Registrierung nicht mehr kostenfrei geändert werden kann.
- **Domain nicht verfügbar:** Es werden alternative, verfügbare Domain-Vorschläge angezeigt, aus denen du wählen kannst.

### Schritt 2c: Ohne eigene Domain weitermachen

In diesem Schritt wird deine Webseite unter einer Adresse bereitgestellt, die du anpassen kannst.

## Zeilenaktionen

Für jede Domain in der Domains-Tabelle stehen folgende Aktionen zur Verfügung:

| Aktion | Beschreibung | Sichtbarkeit |
|---|---|---|
| **DNS validieren** | Prüft die DNS-Einstellungen der Domain erneut beim DNS-Provider und aktualisiert den Status der verfügbaren Dienste (System-Mails, Email-Postfächer etc.). Nutze diese Aktion, nachdem du DNS-Einträge bei deinem Provider geändert hast. | Nur bei externen Domains sichtbar. |
| **DNS-Einstellungen anzeigen** | Öffnet ein Fenster mit der Überschrift „DNS-Einstellungen für [Domain]", das die erforderlichen DNS-Einträge zeigt (siehe Abschnitt „DNS-Einstellungen anzeigen"). | Nur bei externen Domains sichtbar. |
| **Löschen** | Entfernt die Domain aus deiner Organisation. | Bei allen Domains sichtbar. |

## DNS-Einstellungen anzeigen

Wenn du bei einer externen Domain auf „DNS-Einstellungen anzeigen" klickst, öffnet sich ein Fenster mit der Überschrift „DNS-Einstellungen für [Domain]".

Die angezeigten DNS-Einträge müssen bei deinem DNS-Provider eingetragen werden.

**Tipp:** Nach dem Eintragen der DNS-Einstellungen bei deinem Provider kann es einige Zeit dauern, bis die Änderungen weltweit übernommen werden. Nutze die Aktion „DNS validieren" in der Domains-Tabelle, um den Status erneut zu prüfen.

## Beziehungen zu anderen Bereichen

Die auf der Domains-Seite eingerichteten Domains werden in verschiedenen Bereichen von ngo.tools verwendet:

- **System-Mails / Newsletter:** Die Verfügbarkeit einer Domain für den Versand von System-Mails und Newslettern. Für diese Funktion muss kein zusätzliches Tool aktiviert werden.
- **Email-Postfächer:** Domains können für Email-Postfächer freigeschaltet werden. Voraussetzung: Das Tool „Email-Postfächer" muss aktiviert sein.
- **Newsletter:** Domains können für den Newsletter-Versand verwendet werden. Voraussetzung: Das Tool „Newsletter" muss aktiviert sein.
- **Webseite:** Domains können für den Website Builder genutzt werden. Voraussetzung: Das Tool „Webseite" muss aktiviert sein.

---

## page: ContactRelations

**Entity:** ContactRelations  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/ContactRelations.php`  
**Updated:** 2026-02-17 15:27:10  

# Beziehungen

## Übersicht

Auf der Einstellungsseite „Beziehungen" kannst du eigene Beziehungstypen zwischen Kontakten definieren. Du legst fest, welche Art von Beziehung zwischen welchen Kontakttypen möglich ist – zum Beispiel „Person ist Pastor von Organisation". Außerdem kannst du einstellen, ob bei einer Ehepartner-Beziehung automatisch ein Kontakt vom Typ „Paar" angelegt werden soll.

Diese Seite befindet sich im Einstellungsbereich unter der Gruppe „Kontakte".

## Navigation

Die Seite „Beziehungen" ist über die Seitenleiste erreichbar unter **Einstellungen → Kontakte → Beziehungen**.

## Berechtigungen

Das Tool **Kontakte** muss aktiviert sein.

## Allgemeine Einstellungen

Auf der Seite „Beziehungen" findest du im oberen Bereich eine allgemeine Einstellung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Bei Ehepartner-Beziehungen einen Kontakt vom Typ „Paar" anlegen | Schalter | Nein | Wenn aktiviert, wird beim Erstellen einer gegenseitigen Beziehung vom Typ „Ehepartner" automatisch ein neuer Kontakt vom Typ „Paar" angelegt. Die beiden Personen werden diesem Paar-Kontakt zugeordnet. Standardmäßig ist diese Option aktiviert. |

## Eigene Beziehungen (wiederholbarer Bereich)

Im Bereich „Eigene Beziehungen" kannst du beliebig viele eigene Beziehungstypen anlegen. Jede Beziehung wird im Stil von „A ist [Beziehungsname] von B" definiert.

Für jede Beziehung gibt es folgende Felder:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Kontakttypen (links) | Checkboxen | Ja (mind. 1) | Legt fest, welche Kontakttypen für die linke Seite der Beziehung („A") in Frage kommen (z. B. Person, Organisation). |
| Beziehungsname (Mitte) | Textfeld | Ja | Der Name der Beziehung, z. B. „Pastor", „Mentor", „Betreuer". Wird in der Formel „A **ist** [Name] **von** B" eingesetzt. |
| Kontakttypen (rechts) | Checkboxen | Ja (mind. 1) | Legt fest, welche Kontakttypen für die rechte Seite der Beziehung („B") in Frage kommen. |

Die Beziehung liest sich dann als Satz: Die ausgewählten Kontakttypen links **ist** [Name] **von** den ausgewählten Kontakttypen rechts.

**Beispiel:** Du wählst links „Person", gibst als Beziehungsname „Pastor" ein und wählst rechts „Organisation". Die Beziehung lautet dann: „Person ist Pastor von Organisation".

### Beziehungen hinzufügen und entfernen

- Klicke auf die Schaltfläche zum Hinzufügen, um eine neue Beziehung anzulegen. Es erscheint eine weitere Zeile mit den oben beschriebenen Feldern.
- Um eine bestehende Beziehung zu entfernen, klicke auf die Entfernen-Schaltfläche neben der jeweiligen Zeile.
- Nach dem Speichern stehen neue Beziehungstypen sofort beim Bearbeiten von Kontakten zur Verfügung.

## Validierung und Fehlermeldungen

Beim Speichern der Beziehungstypen auf der Seite „Beziehungen" prüft das System folgende Regeln:

| Fehler | Ursache | Lösung |
|--------|---------|--------|
| Beziehungsname ist erforderlich | Das Textfeld für den Beziehungsnamen wurde leer gelassen. | Trage einen aussagekräftigen Namen für die Beziehung ein, z. B. „Mentor" oder „Betreuer". |
| Kontakttypen (links) sind erforderlich | Es wurde kein Kontakttyp auf der linken Seite ausgewählt. | Wähle mindestens einen Kontakttyp aus, der für die linke Seite der Beziehung gelten soll. |
| Kontakttypen (rechts) sind erforderlich | Es wurde kein Kontakttyp auf der rechten Seite ausgewählt. | Wähle mindestens einen Kontakttyp aus, der für die rechte Seite der Beziehung gelten soll. |

## Zusammenspiel mit anderen Bereichen

- **Kontakte bearbeiten:** Die hier auf der Seite „Beziehungen" definierten Beziehungstypen stehen beim Bearbeiten von Kontakten zur Verfügung, um Beziehungen zwischen einzelnen Kontakten herzustellen. Nur die Beziehungstypen, die zu den jeweiligen Kontakttypen passen, werden dort angezeigt.
- **Kontakttypen:** Die auswählbaren Kontakttypen (z. B. Person, Organisation, Paar) stammen aus dem `ContactType`-Enum.
- **Automatische Paar-Erstellung:** Die Einstellung zur automatischen Paar-Erstellung bei Ehepartner-Beziehungen wirkt sich direkt auf das Verhalten beim Anlegen von Beziehungen im Kontaktbereich aus. Ist die Option aktiv, wird beim Verknüpfen zweier Personen als Ehepartner automatisch ein neuer Kontakt vom Typ „Paar" erstellt.

---

## page: is

**Entity:** is  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/ConnectedAccounts.php`  
**Updated:** 2026-02-17 15:25:51  

# Zahlungskonten

## Übersicht

Auf der Seite **Zahlungskonten** verwaltest du deine Bankkonten, PayPal-Konten und Handkassen. Du kannst Bankkonten hinzufügen und diese optional mit dem Dienstleister FinAPI verbinden, damit Kontobewegungen automatisch abgerufen werden. Alternativ können Kontoauszüge manuell per CSV-Import hochgeladen werden.

Die Seite befindet sich unter **Einstellungen → Finanzen → Zahlungskonten**.

## Tabellenansicht / Listenansicht

Die Seite **Zahlungskonten** zeigt eine Tabelle aller angelegten Zahlungskonten mit folgenden Spalten:

| Spalte | Beschreibung |
|---|---|
| **Name** | Der Name des Zahlungskontos |
| **IBAN** | Die IBAN des Kontos (formatiert dargestellt) |
| **Typ** | Der Kontotyp (z. B. Bankkonto, PayPal, Handkasse) |
| **Automatischer Import** | Spaltengruppe mit folgenden Unterspalten: |
| — **Aktiviert** | Schalter zum Aktivieren oder Deaktivieren des automatischen Imports. Dieser Schalter ist nur bei Konten mit Bankverbindung sichtbar. |
| — **Ab** | Zeigt das Datum an, ab dem Bankvorgänge importiert wurden. Ein Tooltip liefert detaillierte Informationen zur Anzahl der importierten Transaktionen und eventuelle Lücken. |
| — **Status** | Zeigt als Icon an, ob der letzte automatische Import erfolgreich war. Diese Spalte ist nur bei Konten mit aktiviertem automatischen Import sichtbar. |

Wenn noch keine Zahlungskonten vorhanden sind, wird der Hinweis „Es ist noch kein Konto verbunden." angezeigt.

Die Tabelle ist nicht paginiert – alle Zahlungskonten werden auf einer Seite angezeigt.

## Aktionen

### Bankkonto hinzufügen

Über die Kopfzeilen-Aktionsgruppe auf der Seite **Zahlungskonten** kannst du ein neues Bankkonto hinzufügen. Das Formular enthält folgende Felder:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| **Bank** | Suchfeld (Auswahl) | Ja | Wähle die gewünschte Bank durch Eingabe des Banknamens. Es werden nur Banken angezeigt, die den automatischen Kontozugriff unterstützen. |
| **Kontobewegungen automatisch abrufen** | Checkbox | Nein | Wenn aktiviert, wirst du durch den Prozess geführt, dein Bankkonto über den Dienstleister FinAPI zu verbinden. Wenn nicht aktiviert, müssen Kontobewegungen manuell per CSV-Import hochgeladen werden. |
| **ab** | Datumsfeld | Ja (wenn automatischer Abruf aktiviert) | Das Datum, ab dem Kontobewegungen abgerufen werden sollen. Der Standardwert wird automatisch auf 90 Tage zurück gesetzt oder auf den maximal verfügbaren Zeitraum der gewählten Bank, falls dieser kürzer ist. Dieses Feld ist nur sichtbar, wenn „Kontobewegungen automatisch abrufen" aktiviert ist. |

**Hinweise:**
- Im Demo-System kann nur die „Testbank" hinzugefügt werden. Die Suche nach anderen Banken ist dennoch möglich, um zu prüfen, ob die eigene Bank verfügbar ist.
- Bei Auswahl von PayPal wird ein spezieller Hinweis angezeigt: PayPal stellt nur die letzten 90 Tage und nur begrenzte Informationen bereit (E-Mail-Adresse, Betrag, Datum). Für vollständige Spenderinformationen wird der manuelle CSV-Export von PayPal empfohlen.
- Es wird angezeigt, wie viele Tage die gewählte Bank an Transaktionshistorie zur Verfügung stellt.

**Ablauf der Bankverbindung:**

1. Bank auswählen und Startdatum festlegen.
2. Du wirst zur Webseite deiner Bank weitergeleitet, um die Verbindung zu autorisieren.
3. Nach der Rückkehr wird das Konto verbunden und der erste Import startet automatisch im Hintergrund.

Wenn die Bank mehrere Konten unter einer Verbindung anbietet, wirst du aufgefordert, die gewünschten Konten auszuwählen. Wenn bereits eine Bankverbindung besteht, bei der nicht alle Konten eingebunden wurden, kannst du weitere Konten hinzufügen, ohne erneut zur Bank gehen zu müssen.

Nach dem Hinzufügen erscheint das neue Zahlungskonto in der Tabelle auf der Seite **Zahlungskonten**.

### Handkasse hinzufügen

Über die Kopfzeilen-Aktionsgruppe auf der Seite **Zahlungskonten** kannst du eine Handkasse hinzufügen. Eine Handkasse dient zur Erfassung von Bargeldtransaktionen.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| **Name** | Textfeld | Ja | Der Name der Handkasse. Vorausgefüllt mit „Handkasse". |

Nach dem Speichern erscheint die Handkasse in der Tabelle der Zahlungskonten.

### Verbinden

Für Bankkonten auf der Seite **Zahlungskonten**, die noch nicht mit einem automatischen Import verbunden sind, deren Bank aber den automatischen Kontozugriff unterstützt, steht die Aktion **Verbinden...** zur Verfügung.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| **ab** | Datumsfeld | Ja | Das Datum, ab dem Kontobewegungen abgerufen werden sollen. |

Nach dem Verbinden wirst du zur Webseite deiner Bank weitergeleitet, um die Verbindung zu autorisieren. Anschließend startet der automatische Import im Hintergrund.

### Trennen

Für Zahlungskonten mit aktivem automatischem Import kannst du die Bankverbindung über **Trennen...** trennen. Es wird eine Bestätigungsabfrage angezeigt. Nach dem Trennen werden keine neuen Kontobewegungen mehr automatisch importiert.

### Bearbeiten

Über das Bearbeiten-Symbol in der Tabellenzeile eines Zahlungskontos kannst du folgende Felder ändern:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| **Name** | Textfeld | Ja | Der Name des Zahlungskontos |
| **IBAN** | Textfeld | Nein | Die IBAN (nur sichtbar und bearbeitbar bei Konten vom Typ Bankkonto) |

### Löschen

Über das Löschen-Symbol in der Tabellenzeile kannst du ein Zahlungskonto entfernen. Es erscheint eine Bestätigungsabfrage mit folgendem Hinweis: Wenn das Konto importierte Transaktionen hat, bleiben diese erhalten und werden nicht automatisch gelöscht. Bei einer erneuten Einbindung des gleichen Bankkontos musst du darauf achten, dass keine doppelten Bankvorgänge entstehen.

Nach der Bestätigung wird das Zahlungskonto aus der Tabelle entfernt.

### Kontozugriff entfernen

Wenn bei einer Bankverbindung mit mehreren Konten ein einzelnes Konto entfernt werden soll, kannst du den Zugriff auf dieses Konto separat entfernen, ohne die gesamte Bankverbindung zu löschen. Die übrigen Konten dieser Bankverbindung bleiben weiterhin verbunden und aktiv.

## Validierung und Fehlermeldungen

### Datumsvalidierung beim automatischen Import

Das Startdatum für den automatischen Import auf der Seite **Zahlungskonten** muss innerhalb des von der Bank unterstützten Zeitraums liegen.

| Fehlermeldung | Ursache | Lösung |
|---|---|---|
| „Bitte wähle ein Datum zwischen [frühestes Datum] und [gestriges Datum]." | Das gewählte Datum liegt außerhalb des unterstützten Zeitraums der Bank. | Wähle ein Datum, das innerhalb des angezeigten Zeitraums liegt. |

### Pflichtfeld-Validierung

| Fehlermeldung | Ursache | Lösung |
|---|---|---|
| Pflichtfeld-Hinweis beim Feld **Bank** | Es wurde keine Bank ausgewählt. | Gib einen Banknamen ein und wähle eine Bank aus der Ergebnisliste. |
| Pflichtfeld-Hinweis beim Feld **Name** (Handkasse) | Das Namensfeld wurde geleert. | Gib einen Namen für die Handkasse ein. |
| Pflichtfeld-Hinweis beim Feld **Name** (Bearbeiten) | Das Namensfeld wurde geleert. | Gib einen Namen für das Zahlungskonto ein. |

### Fehlermeldungen bei der Bankverbindung

| Fehlermeldung | Ursache | Lösung |
|---|---|---|
| **Verbindung fehlgeschlagen** | Die eingegebenen Zugangsdaten waren möglicherweise nicht korrekt. | Versuche es erneut mit den korrekten Zugangsdaten deiner Bank. |
| **Keine Konten vorhanden** | Die Zugangsdaten waren korrekt, aber die Bank hat keine Konten zurückgemeldet. Das kann z. B. bei Tagesgeldkonten vorkommen, die nicht immer abfragbar sind. | Nutze den manuellen CSV-Import für dieses Konto. |
| **Bank nicht unterstützt** | Die gewählte Bank bietet keine automatischen Kontozugriffsmöglichkeiten. | Wende dich an den Support, um Alternativen zu besprechen. |
| **Unbekannter Fehler** | Das Konto konnte aus unbekanntem Grund nicht verbunden werden. | Versuche es erneut. Falls das Problem bestehen bleibt, wende dich an den Support. |
| **Kontolimit erreicht** | Es können momentan keine weiteren Zahlungskonten hinzugefügt werden. | Wende dich an den Support. |

### Hinweis zum Import-Status

In der Tabelle der Zahlungskonten zeigt die Spalte **Ab** einen Tooltip mit detaillierten Informationen:
- Wie viele Bankvorgänge automatisch importiert wurden.
- Ob es Lücken zwischen dem gewünschten Startdatum und dem ältesten importierten Bankvorgang gibt.
- Bei größeren Lücken wird der Hinweis angezeigt, dass die Bank nur eine begrenzte Historie bereitstellt und ältere Bankvorgänge manuell per CSV-Import nachgetragen werden sollten.

### GoCardless-Warnung

Bei älteren Zahlungskonten, die über den inzwischen veralteten Anbieter GoCardless verbunden waren und deren automatischer Import deaktiviert ist, wird ein Warnhinweis angezeigt: Es wird empfohlen, ein neues Konto über den aktuellen Anbieter hinzuzufügen und sich anschließend an den Support zu wenden, um die beiden Konten zusammenzuführen.

## Berechtigungen

Die Seite **Zahlungskonten** ist nur verfügbar, wenn das Tool **Buchhaltung** oder das Tool **Buchhaltung erweitert** für die Organisation aktiviert ist.

## Beziehungen

- **Bankvorgänge / Transaktionen**: Über die Seite **Zahlungskonten** importierte Kontobewegungen werden als Transaktionen gespeichert und stehen in der Buchhaltung zur weiteren Verarbeitung und Zuordnung zur Verfügung.
- **Buchhaltung**: Die Zahlungskonten bilden die Grundlage für die Erfassung und Zuordnung von Finanzbewegungen in der Buchhaltung.
- **Einstellungen → Allgemein → Bankverbindung**: Die allgemeinen Bankdaten der Organisation (IBAN, BIC, Bankname) werden separat unter den allgemeinen Einstellungen gepflegt und sind unabhängig von den hier verwalteten Zahlungskonten.
- **Externe Dienste**: Die automatische Verbindung zu den Bankkonten erfolgt über den Dienstleister FinAPI. FinAPI ruft die Kontobewegungen im Hintergrund ab und stellt sie in ngo.tools bereit.

---

## page: Calendars

**Entity:** Calendars  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/Calendars.php`  
**Updated:** 2026-02-17 15:22:50  

# Kalender

## Übersicht

Auf der Seite **Kalender** kannst du die Kalender deiner Organisation verwalten. Jeder Kalender kann mit einer eigenen Farbe versehen, für bestimmte Kontakt-Segmente sichtbar gemacht und optional öffentlich zugänglich gemacht werden.

## Navigation

Die Kalender-Verwaltung findest du im Bereich **Einstellungen** unter der Gruppe **Veranstaltungen**. Das Tool **Veranstaltungen** muss aktiviert sein.

## Tabellenansicht der Kalender

Die Übersicht zeigt alle vorhandenen Kalender deiner Organisation in einer Tabelle mit folgenden Spalten:

| Spalte | Beschreibung |
|---|---|
| Kategorie | Name des Kalenders (durchsuchbar über die Suchfunktion) |
| Farbe | Farbliche Kennzeichnung des Kalenders |
| Sichtbar für | Zeigt die Kontakt-Segmente an, für die dieser Kalender sichtbar ist |
| ist öffentlich | Zeigt an, ob der Kalender öffentlich zugänglich ist |

## Formularfelder beim Bearbeiten eines Kalenders

Beim Bearbeiten eines Kalenders öffnet sich ein Dialogfenster mit folgenden Feldern:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Name | Textfeld | Ja | Der Name des Kalenders. Bei automatisch erzeugten Kalendern (basierend auf Veranstaltungstypen) ist dieses Feld ausgegraut und kann nicht geändert werden. |
| Farbe | Farbauswahl | Nein | Die Farbe, in der der Kalender dargestellt wird. |
| Sichtbar für | Mehrfachauswahl | Nein | Kontakt-Segmente, für die dieser Kalender sichtbar sein soll. Du kannst mehrere Segmente auswählen. |
| ist öffentlich | Checkbox | Nein | Legt fest, ob der Kalender öffentlich zugänglich ist. |

### Validierung beim Speichern eines Kalenders

- **Name ist Pflichtfeld**: Wenn du keinen Namen eingibst, erscheint eine Fehlermeldung.
- **Name bei automatischen Kalendern nicht änderbar**: Bei Kalendern, die automatisch auf Basis eines Veranstaltungstyps erzeugt wurden, ist das Namensfeld gesperrt.

## Aktionen in der Kalender-Tabelle

### URL kopieren

Über das Kopier-Symbol in der Tabellenzeile eines Kalenders kannst du die öffentliche URL des Kalenders in die Zwischenablage kopieren.

### Bearbeiten

Über die Bearbeiten-Aktion in der Tabellenzeile öffnet sich ein Dialogfenster, in dem du die Eigenschaften des Kalenders anpassen kannst (siehe Abschnitt „Formularfelder beim Bearbeiten eines Kalenders").

## Beziehungen zu anderen Bereichen

- **Veranstaltungstypen**: Kalender können automatisch auf Basis von Veranstaltungstypen erzeugt werden. Der Name solcher automatisch erzeugter Kalender wird vom Veranstaltungstyp übernommen und kann im Kalender selbst nicht geändert werden.
- **Segmente**: Über die Zuordnung von Kontakt-Segmenten wird gesteuert, welche Kontakte den jeweiligen Kalender sehen können.

---

## page: ConsultingOffer

**Entity:** ConsultingOffer  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Knowledge/Pages/ConsultingOffer.php`  
**Updated:** 2026-02-17 15:22:16  

# Beratung

## Übersicht
Auf der Seite „Beratung" kannst du Beratungsangebote von Experten durchsuchen und einen passenden Berater finden. Die Experten lassen sich nach Wissenskategorien filtern. Über ein Detailfenster kannst du weitere Informationen zum jeweiligen Experten einsehen.

## Navigation
Die Seite „Beratung" befindet sich unter **Seitenleiste → Wissen → Beratung**. Sie ist die dritte Unterseite im Bereich „Wissen".

## Funktionen

### Experten nach Kategorie filtern
Durch Auswahl einer oder mehrerer Kategorien wird die Expertenliste gefiltert, sodass nur Experten angezeigt werden, die der ausgewählten Kategorie zugeordnet sind. Wenn du keine Kategorie auswählst, werden alle verfügbaren Experten angezeigt.

### Detailansicht eines Experten
Durch Klick auf einen Experten öffnet sich auf der Seite „Beratung" ein Detailfenster. Die Beratung wird per Videocall durchgeführt; die entsprechenden Zugangsinformationen erhältst du im Anschluss.

Du kannst das Detailfenster schließen, um zur Expertenübersicht zurückzukehren.

## Beziehungen
Die Seite „Beratung" gehört zum Bereich **Wissen**, der außerdem folgende Bereiche umfasst:
- **Artikel** – Wissensartikel zum Nachschlagen
- **Veranstaltungen** – Termine und Events

Die auf der Seite „Beratung" angezeigten Experten sind über Wissenskategorien organisiert.

---

## page: Accounting

**Entity:** Accounting  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Settings/Pages/Accounting.php`  
**Updated:** 2026-02-17 15:21:41  

# Buchhaltung

## Übersicht

Auf der Einstellungsseite **Buchhaltung** kannst du die grundlegenden Buchhaltungsparameter deiner Organisation konfigurieren. Hier legst du fest, ob deine Organisation ausschließlich im ideellen Bereich tätig ist, welche Gewinnermittlungsart verwendet wird, ob Umsatzsteuerpflicht besteht und wie die Besteuerung erfolgt. Zusätzlich kannst du Angaben zu deinem Steuerberater hinterlegen.

## Navigation

Die Seite **Buchhaltung** befindet sich im Bereich **Einstellungen** unter der Navigationsgruppe **Finanzen**.

## Formularfelder der Buchhaltung

### Eröffnungssaldo

| Eigenschaft | Wert |
|---|---|
| Typ | Geldbetrag |
| Pflichtfeld | Ja |

Der Eröffnungssaldo ist das Startguthaben deiner Organisation. Dieses Feld ist nur sichtbar, wenn das Tool **Projekte** nicht aktiviert ist. Wenn das Tool **Projekte** aktiviert ist, wird der Eröffnungssaldo direkt im jeweiligen Projekt gepflegt und erscheint nicht auf der Buchhaltungs-Einstellungsseite.

### Nur ideeller Bereich (keine weiteren Tätigkeitsbereiche)

| Eigenschaft | Wert |
|---|---|
| Typ | Checkbox |
| Pflichtfeld | Nein |

Aktiviere diese Option, wenn deine Organisation ausschließlich im ideellen Bereich tätig ist – also keine Vermögensverwaltung, keinen Zweckbetrieb und keinen wirtschaftlichen Geschäftsbetrieb hat. Wenn du diese Checkbox aktivierst, werden die Felder **Umsatzsteuerpflichtig** und **Besteuerungsart** ausgeblendet, da sie in diesem Fall nicht relevant sind.

### Gewinnermittlungsart

| Eigenschaft | Wert |
|---|---|
| Typ | Umschaltflächen |
| Pflichtfeld | Nein |
| Voraussetzung | Das Tool **Erweiterte Buchhaltung** muss aktiviert sein |

Hier wählst du die Gewinnermittlungsart deiner Organisation. Dieses Feld ist nur sichtbar, wenn das Tool **Erweiterte Buchhaltung** aktiviert ist.

**Wichtig beim Wechsel auf Bilanzbuchhaltung:** Beim Umschalten auf Bilanzbuchhaltung prüft das System automatisch, ob allen Finanzereignis-Typen ein Buchungskonto zugeordnet ist. Falls nicht, öffnet sich ein Dialog, in dem du die fehlenden Zuordnungen vornehmen kannst. Solange Zuordnungen fehlen, wird die Gewinnermittlungsart auf Einnahmenüberschussrechnung zurückgesetzt. Weitere Details findest du im Abschnitt [Buchungskonten festlegen](#buchungskonten-festlegen).

### Bisherige Ansicht der Finanzereignisse verwenden

| Eigenschaft | Wert |
|---|---|
| Typ | Checkbox |
| Pflichtfeld | Nein |
| Voraussetzung | Das Tool **Erweiterte Buchhaltung** muss aktiviert sein; Gewinnermittlungsart muss auf Einnahmenüberschussrechnung stehen |

Wenn du diese Option aktivierst, werden Finanzereignisse in der bisherigen Darstellung angezeigt. Dieses Feld ist nur sichtbar, wenn das Tool **Erweiterte Buchhaltung** aktiviert ist und die Gewinnermittlungsart auf **Einnahmenüberschussrechnung** steht.

### Umsatzsteuerpflichtig

| Eigenschaft | Wert |
|---|---|
| Typ | Checkbox |
| Pflichtfeld | Nein |
| Voraussetzung | „Nur ideeller Bereich" darf nicht aktiviert sein |

Aktiviere diese Option, wenn deine Organisation umsatzsteuerpflichtig ist. Umsatzsteuerpflicht entsteht typischerweise, wenn der Verein entgeltliche Leistungen anbietet – zum Beispiel Kurse, Eintrittsgelder, Vermietung von Räumen oder Verkauf von Waren. Dieses Feld wird ausgeblendet, wenn die Checkbox **Nur ideeller Bereich** aktiviert ist.

### Besteuerungsart

| Eigenschaft | Wert |
|---|---|
| Typ | Umschaltflächen |
| Pflichtfeld | Nein |
| Voraussetzung | „Umsatzsteuerpflichtig" muss aktiviert sein; „Nur ideeller Bereich" darf nicht aktiviert sein |

Hier wählst du zwischen zwei Besteuerungsarten:

- **Soll-Versteuerung**: Die Umsatzsteuer entsteht bereits mit Ausführung der Leistung, unabhängig davon, ob die Zahlung schon eingegangen ist.
- **Ist-Versteuerung**: Die Umsatzsteuer entsteht erst bei Zahlung durch den Kunden. Diese Variante erfordert eine Genehmigung durch das Finanzamt.

Dieses Feld ist nur sichtbar, wenn **Umsatzsteuerpflichtig** aktiviert und **Nur ideeller Bereich** nicht aktiviert ist.

### Bekannte Buchungen automatisch bestätigen

| Eigenschaft | Wert |
|---|---|
| Typ | Checkbox |
| Pflichtfeld | Nein |

Wenn du diese Option aktivierst, werden Banktransaktionen automatisch gebucht, sofern sie bis auf das Datum identisch mit einer bereits zuvor bestätigten Transaktion sind.

### Beraternummer

| Eigenschaft | Wert |
|---|---|
| Typ | Textfeld |
| Pflichtfeld | Nein |

Die Beraternummer deines Steuerberaters.

### Mandantennummer

| Eigenschaft | Wert |
|---|---|
| Typ | Textfeld |
| Pflichtfeld | Nein |

Die Mandantennummer, unter der deine Organisation bei deinem Steuerberater geführt wird.

## Aktionen

### Buchungskonten festlegen

Wenn du auf der Seite **Buchhaltung** die Gewinnermittlungsart auf **Bilanzbuchhaltung** wechselst und es Finanzereignis-Typen gibt, denen noch kein Buchungskonto zugeordnet ist, öffnet sich automatisch ein Dialog. In diesem Dialog werden alle betroffenen Finanzereignis-Typen aufgelistet. Für jeden Eintrag kannst du ein Buchungskonto auswählen.

**Wichtig:** Solange Zuordnungen fehlen, wird die Gewinnermittlungsart auf Einnahmenüberschussrechnung zurückgesetzt.

## Beziehungen zu anderen Bereichen

- **Projekte**: Wenn das Tool **Projekte** aktiviert ist, wird der Eröffnungssaldo im jeweiligen Projekt gepflegt und erscheint nicht auf der Buchhaltungs-Einstellungsseite.
- **Finanzereignis-Typen**: Bei Aktivierung der Bilanzbuchhaltung müssen allen Finanzereignis-Typen Buchungskonten zugeordnet sein.

## Häufige Fragen und Probleme

### Warum sehe ich das Feld „Eröffnungssaldo" nicht?

Das Feld **Eröffnungssaldo** wird auf der Buchhaltungs-Einstellungsseite nur angezeigt, wenn das Tool **Projekte** nicht aktiviert ist. Wenn du das Tool **Projekte** nutzt, findest du den Eröffnungssaldo direkt in den Projekteinstellungen.

### Warum sehe ich die Felder zur Umsatzsteuer nicht?

Die Felder **Umsatzsteuerpflichtig** und **Besteuerungsart** sind nur sichtbar, wenn die Checkbox **Nur ideeller Bereich** nicht aktiviert ist. Wenn deine Organisation auch außerhalb des ideellen Bereichs tätig ist, deaktiviere diese Checkbox, um die Umsatzsteuer-Einstellungen anzuzeigen.

### Warum kann ich die Bilanzbuchhaltung nicht aktivieren?

Wenn beim Umschalten auf Bilanzbuchhaltung Finanzereignis-Typen ohne zugeordnetes Buchungskonto existieren, öffnet sich ein Dialog zur Zuordnung. Solange Zuordnungen fehlen, wird die Gewinnermittlungsart auf Einnahmenüberschussrechnung zurückgesetzt.

### Warum sehe ich das Feld „Gewinnermittlungsart" nicht?

Dieses Feld ist nur sichtbar, wenn das Tool **Erweiterte Buchhaltung** aktiviert ist. Prüfe in den Organisationseinstellungen, ob dieses Tool eingeschaltet ist.

---

## page: CreateProject

**Entity:** CreateProject  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Pages/CreateProject.php`  
**Updated:** 2026-02-14 21:02:18  

# Projekt erstellen

## Übersicht
Auf der Seite „Projekt erstellen" kannst du ein neues Projekt anlegen. Projekte dienen zur Strukturierung von Spenden, Finanzereignissen und Zeiterfassung. Du kannst hierarchische Projektstrukturen aufbauen, indem du ein neues Projekt einem bereits bestehenden übergeordneten Projekt zuordnest.

## Navigation
Du erreichst die Seite „Projekt erstellen" über die Projektliste im Bereich **Projekte**. Klicke dort auf die Schaltfläche zum Erstellen eines neuen Projekts.

## Formularfelder auf der Seite „Projekt erstellen"

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Nummer | Textfeld | Nein | Projektnummer zur eindeutigen Kennzeichnung. Wird automatisch vorgeschlagen, kann aber manuell angepasst werden. Muss eindeutig sein. Dieses Feld ist nur sichtbar, wenn in den Einstellungen Projektnummern aktiviert sind. |
| Name | Textfeld | Ja | Name des Projekts. Muss eindeutig sein – es darf kein anderes Projekt mit demselben Namen existieren. |
| Übergeordnetes Projekt | Auswahlfeld | Nein | Ordnet das neue Projekt einem übergeordneten Projekt zu, um eine hierarchische Struktur abzubilden. Nur aktive Projekte (ohne Enddatum) stehen zur Auswahl. Wenn du kein übergeordnetes Projekt auswählst, wird das Projekt als eigenständiges Projekt auf oberster Ebene angelegt. |
| Als Spendenprojekt verwenden | Checkbox | Nein | Wenn aktiviert, steht das Projekt bei der Spendenerfassung zur Auswahl. Diese Option ist standardmäßig aktiviert. Dieses Feld ist nur sichtbar, wenn das Tool **Spenden** aktiviert ist. |
| Zuweisungsbegriffe | Tags-Eingabe | Nein | Begriffe für die automatische Zuordnung von Spenden zu diesem Projekt. Gib einen neuen Begriff ein und drücke Enter, um ihn hinzuzufügen. Dieses Feld ist nur sichtbar, wenn „Als Spendenprojekt verwenden" aktiviert ist und die Tools **Buchhaltung** und **Spenden** aktiviert sind. |
| Startdatum | Datumsfeld | Ja | Startdatum des Projekts. Muss der erste Tag eines Monats sein (z. B. 01.01.2025). Standardmäßig wird der Beginn des ersten Geschäftsjahres vorgeschlagen. Das Startdatum kann nachträglich nicht mehr geändert werden, wenn ein Eröffnungssaldo eingetragen ist. |
| Eröffnungssaldo | Geldbetragsfeld | Ja | Projektguthaben zum Startdatum. Dieses Feld ist nur bearbeitbar, wenn das Startdatum dem Anfang des ersten Geschäftsjahres entspricht. Nur sichtbar, wenn das Tool **Buchhaltung** aktiviert ist. |
| Projektleiter | Mehrfachauswahl | Nein | Auswahl eines oder mehrerer Benutzer als Projektleiter. Die Auswahl ist optional – du kannst Projektleiter auch später zuweisen. |
| In Zeiterfassung verwenden | Checkbox | Nein | Wenn aktiviert, steht das Projekt in der Zeiterfassung zur Auswahl. Dieses Feld ist nur sichtbar, wenn das Tool **Zeiterfassung** aktiviert ist. |

## Berechtigungen für das Erstellen von Projekten
Zum Erstellen eines Projekts benötigst du die Berechtigung **write projects**. Ohne diese Berechtigung ist die Seite „Projekt erstellen" nicht zugänglich.

## Validierung und Fehlermeldungen beim Erstellen eines Projekts

| Fehlermeldung | Ursache | Lösung |
|---------------|---------|--------|
| *Die Nummer ist bereits vergeben.* | Es existiert bereits ein Projekt mit dieser Nummer. | Wähle eine andere, eindeutige Projektnummer. |
| *Das Startdatum muss der erste Tag eines Monats sein.* | Das gewählte Startdatum ist nicht der Monatserste. | Wähle ein Datum, das auf den 1. eines Monats fällt (z. B. 01.03.2025). |
| *Das Startdatum darf nicht früher sein als das Startdatum des übergeordneten Projekts (Datum).* | Das Startdatum liegt vor dem Startdatum des gewählten übergeordneten Projekts. | Wähle ein Startdatum, das gleich oder nach dem Startdatum des übergeordneten Projekts liegt. |
| *Das Startdatum darf nicht vor dem Anfang des ersten Geschäftsjahres (Datum) liegen.* | Das Startdatum liegt vor dem Beginn des ersten Geschäftsjahres. | Wähle ein Startdatum, das auf oder nach dem Beginn des ersten Geschäftsjahres liegt. |
| *Das Startdatum kann nicht geändert werden, wenn das Projekt einen Eröffnungssaldo hat.* | Ein Eröffnungssaldo ist eingetragen, daher ist das Startdatum gesperrt. | Setze zuerst den Eröffnungssaldo auf 0, dann kannst du das Startdatum ändern. |
| *Eröffnungssaldo kann nur für Projekte gesetzt werden, die am Anfang des ersten Geschäftsjahres beginnen.* | Das Startdatum entspricht nicht dem Beginn des ersten Geschäftsjahres. | Setze das Startdatum auf den Beginn des ersten Geschäftsjahres, um den Eröffnungssaldo bearbeiten zu können. |

## Bedingte Sichtbarkeit von Feldern beim Projekt erstellen
Nicht alle Felder sind immer sichtbar. Die Sichtbarkeit hängt von den aktivierten Tools und den gewählten Optionen ab:

- **Nummer**: Nur sichtbar, wenn in den Einstellungen Projektnummern aktiviert sind.
- **Als Spendenprojekt verwenden**: Nur sichtbar, wenn das Tool **Spenden** aktiviert ist.
- **Zuweisungsbegriffe**: Nur sichtbar, wenn „Als Spendenprojekt verwenden" aktiviert ist und die Tools **Buchhaltung** und **Spenden** aktiviert sind.
- **Eröffnungssaldo**: Nur sichtbar, wenn das Tool **Buchhaltung** aktiviert ist. Nur bearbeitbar, wenn das Startdatum dem Beginn des ersten Geschäftsjahres entspricht.
- **In Zeiterfassung verwenden**: Nur sichtbar, wenn das Tool **Zeiterfassung** aktiviert ist.

## Beziehungen eines Projekts
- **Übergeordnetes Projekt**: Ein Projekt kann einem anderen Projekt untergeordnet werden, um hierarchische Strukturen abzubilden. Das übergeordnete Projekt muss aktiv sein (darf kein Enddatum haben).
- **Projektleiter**: Benutzer können als Projektleiter zugewiesen werden, um Verantwortlichkeiten abzubilden.

---

## page: ItemsRelationManager

**Entity:** ItemsRelationManager  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectExternalMoneyTransferResource/RelationManagers/ItemsRelationManager.php`  
**Updated:** 2026-02-14 21:00:50  

# Positionen eines Geldtransfers an Partner

## Übersicht

Auf dieser Seite werden die einzelnen Positionen eines Geldtransfers an einen Partner angezeigt. Jede Position ordnet einem bestimmten Projekt einen Betrag zu, der im Rahmen des Geldtransfers überwiesen wurde. Du kannst hier Positionen hinzufügen, bearbeiten und löschen.

## Navigation

Die Positionsliste ist als Unterbereich auf der Detailseite eines einzelnen Geldtransfers an Partner erreichbar. Du gelangst dorthin, indem du in der Übersicht der Geldtransfers an Partner einen einzelnen Transfer öffnest. Die Positionen werden dann als zugehörige Liste auf der Detailseite angezeigt.

## Tabellenansicht der Positionen

Folgende Spalten werden in der Positionstabelle des Geldtransfers angezeigt:

| Spalte | Beschreibung |
|---|---|
| Projektnummer | Die Nummer des zugeordneten Projekts |
| Projektname | Der Name des zugeordneten Projekts |
| Betrag | Der Betrag der Position, angezeigt in der Währung deiner Organisation |

## Aktionen

### Position hinzufügen

Über die Schaltfläche oberhalb der Positionstabelle kannst du eine neue Position zum Geldtransfer hinzufügen.

### Position bearbeiten

Über das Bearbeiten-Symbol in der jeweiligen Zeile kannst du eine bestehende Position anpassen.

### Position löschen

Über das Löschen-Symbol in der jeweiligen Zeile kannst du eine einzelne Position entfernen.

### Mehrere Positionen löschen

Über die Checkboxen am Anfang jeder Zeile kannst du mehrere Positionen gleichzeitig auswählen. Anschließend kannst du alle ausgewählten Positionen in einem Schritt löschen.

## Beziehungen

- Jede Position eines Geldtransfers an Partner ist einem **Projekt** zugeordnet und zeigt dessen Nummer und Namen an.
- Die Positionen gehören zu einem **Geldtransfer an Partner**, dessen Detailseite die übergeordnete Ansicht darstellt.

---

## page: ViewProjectExternalMoneyTransfer

**Entity:** ViewProjectExternalMoneyTransfer  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectExternalMoneyTransferResource/Pages/ViewProjectExternalMoneyTransfer.php`  
**Updated:** 2026-02-14 20:59:57  

# Geldtransfer an Partner – Detailansicht

## Übersicht

Auf dieser Seite wird ein einzelner Geldtransfer an einen Partner im Detail angezeigt.

## Navigation zur Detailansicht

Die Detailansicht eines Geldtransfers an Partner erreichst du über die Listenansicht „Geldtransfers an Partner", indem du auf einen einzelnen Eintrag klickst. Der Seitentitel zeigt das Erstellungsdatum und den Namen des zugehörigen Kontakts (z. B. „2025-03-15 - Partnerorganisation ABC").

## Positionen des Geldtransfers

Unterhalb der Eckdaten wird auf der Detailansicht des Geldtransfers an Partner eine Tabelle mit den einzelnen Positionen angezeigt (über den ItemsRelationManager).

## Aktionen

Die Detailansicht eines Geldtransfers an Partner ist eine reine Ansichtsseite. Es stehen hier keine Bearbeitungs- oder Löschaktionen zur Verfügung.

## Beziehungen zu anderen Bereichen

- **Geldtransfers an Partner (Listenansicht):** Über die Navigation gelangst du zurück zur Übersicht aller Geldtransfers an Partner.
- **Kontakte:** Jeder Geldtransfer an Partner ist einem Kontakt (Partner) zugeordnet. Der Kontaktname wird im Seitentitel der Detailansicht angezeigt.
- **Projekte:** Die einzelnen Positionen eines Geldtransfers an Partner sind jeweils einem Projekt zugeordnet.

---

## page: ListProjectExternalMoneyTransfers

**Entity:** ListProjectExternalMoneyTransfers  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectExternalMoneyTransferResource/Pages/ListProjectExternalMoneyTransfers.php`  
**Updated:** 2026-02-14 20:58:55  

# Geldtransfers an Partner

## Übersicht

Auf der Seite „Geldtransfers an Partner" siehst du eine Übersicht aller Geldtransfers, die im Rahmen eines Projekts an externe Partner weitergeleitet wurden. Die Liste zeigt, wann welcher Betrag an welchen Partner überwiesen wurde.

Wenn noch keine Geldtransfers an Partner erfasst wurden, wird die Tabelle leer angezeigt.

## Tabellenansicht der Geldtransfers an Partner

Die Tabelle der Geldtransfers an Partner zeigt folgende Spalten:

| Spalte | Beschreibung | Sortierbar | Durchsuchbar |
|--------|-------------|------------|--------------|
| Datum | Das Erstellungsdatum des Geldtransfers | Ja | Nein |
| Kontakt | Der Name des Partners, an den der Transfer ging | Ja | Ja |
| Betrag | Die Summe aller Positionen des Transfers (in der Währung deiner Organisation) | Ja | Ja |

Der Betrag wird rechtsbündig dargestellt und in der jeweiligen Landeswährung deiner Organisation formatiert.

Du kannst die Tabelle über das Suchfeld nach Kontaktname oder Betrag durchsuchen. Über die Spaltenüberschriften kannst du die Liste nach Datum, Kontakt oder Betrag sortieren.

## Aktionen auf der Seite „Geldtransfers an Partner"

- **Anzeigen**: Über das Aktions-Icon in jeder Zeile kannst du die Details eines einzelnen Geldtransfers aufrufen. Nach dem Klick wirst du zur Detailseite weitergeleitet, auf der die einzelnen Positionen des Transfers angezeigt werden.

Es ist derzeit nicht möglich, über diese Seite neue Geldtransfers an Partner zu erstellen.

## Beziehungen der Geldtransfers an Partner

- **Positionen**: Jeder Geldtransfer an Partner besteht aus einzelnen Positionen, die in der Detailansicht in einem eigenen Bereich aufgelistet werden.

---

## page: ItemsRelationManager

**Entity:** ItemsRelationManager  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/NewsletterDripCampaignResource/RelationManagers/ItemsRelationManager.php`  
**Updated:** 2026-02-14 20:58:12  

# Emails einer Newsletter-Serie verwalten

## Übersicht

Auf dieser Seite verwaltest du die einzelnen Emails einer Newsletter-Serie. Du kannst neue Emails hinzufügen, deren Reihenfolge per Drag & Drop ändern, die Wartezeit zwischen den Emails festlegen und den Inhalt jeder Email bearbeiten.

## Navigation

Die Email-Verwaltung ist ein Unterbereich einer Newsletter-Serie. Du erreichst sie über **Kommunikation → Newsletter-Serien** und dann durch Bearbeiten einer bestehenden Serie. Der Reiter **Emails** zeigt die Liste aller Emails dieser Serie. Das Tool **Newsletter-Serien** muss aktiviert sein.

## Tabellenansicht der Emails

Die Tabelle zeigt alle Emails der Newsletter-Serie in der konfigurierten Reihenfolge.

| Spalte | Beschreibung |
|---|---|
| **Wartezeit (Tage)** | Anzahl der Tage, die nach der vorherigen Email gewartet wird, bevor diese Email versendet wird. |
| **Name** | Interner Name der Email. |
| **Betreff** | Die Betreffzeile, die der Empfänger in seinem Postfach sieht. |

**Sortierung:** Die Emails werden standardmäßig nach ihrer Reihenfolge in der Serie sortiert. Du kannst die Reihenfolge per Drag & Drop ändern, indem du eine Zeile an die gewünschte Position ziehst.

## Aktionen für Emails der Newsletter-Serie

### Email erstellen

Über die Schaltfläche oberhalb der Tabelle kannst du eine neue Email zur Newsletter-Serie hinzufügen. Es öffnet sich ein Dialogfenster, in dem du die Grunddaten der Email eingibst. Nach dem Erstellen wird automatisch eine Wartezeit von 3 Tagen gesetzt und du wirst zur Inhaltsbearbeitung der neuen Email weitergeleitet.

### Einstellungen

Über die Aktion **Einstellungen** in jeder Tabellenzeile kannst du Betreff und Wartezeit einer bestehenden Email der Newsletter-Serie anpassen. Es öffnet sich ein Dialogfenster mit folgenden Feldern:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| **Betreff** | Textfeld | Ja | Die Betreffzeile der Email, die der Empfänger sieht. |
| **Wartezeit (Tage)** | Zahlenfeld | Ja | Anzahl der Tage, die nach der vorherigen Email gewartet wird, bevor diese Email versendet wird. |

### Vorschau

Über die Aktion **Vorschau** wird eine Seitenansicht geöffnet, die zeigt, wie die Email für den Empfänger aussehen wird.

### Bearbeiten

Über die Bearbeiten-Aktion gelangst du zur Inhaltsbearbeitung der Email, wo du den eigentlichen Email-Inhalt gestalten kannst.

### Duplizieren

Erstellt eine Kopie der ausgewählten Email innerhalb derselben Newsletter-Serie. Die Kopie erhält den Zusatz „Kopie" im Namen. Bereits erfolgte Versanddaten werden bei der Kopie zurückgesetzt.

### Löschen

Entfernt eine einzelne Email aus der Newsletter-Serie.

### Mehrfachauswahl (Bulk-Aktion)

Über die Mehrfachauswahl in der Tabelle kannst du mehrere Emails gleichzeitig markieren und gemeinsam löschen.

## Beziehungen und verwandte Bereiche

- **Newsletter-Serie:** Die Emails gehören zu einer übergeordneten Newsletter-Serie. Deren Grundeinstellungen (Name, Platzhalter, Links) konfigurierst du auf der Bearbeitungsseite der Serie selbst.
- **Einschreibungen:** Im Reiter **Einschreibungen** derselben Newsletter-Serie siehst du, welche Kontakte in die Serie eingeschrieben sind.
- **Inhaltsbearbeitung:** Über die Bearbeiten-Aktion einer Email gelangst du zur Seite, auf der du den eigentlichen Inhalt der jeweiligen Email der Newsletter-Serie gestaltest.

---

## page: EnrollmentsRelationManager

**Entity:** EnrollmentsRelationManager  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/NewsletterDripCampaignResource/RelationManagers/EnrollmentsRelationManager.php`  
**Updated:** 2026-02-14 20:56:59  

# Einschreibungen

## Übersicht
Auf der Seite „Einschreibungen" verwaltest du die Einschreibungen einer Newsletter-Serie. Du siehst, welche Kontakte aktuell in die Serie eingeschrieben sind, kannst neue Kontakte hinzufügen, den Versand der nächsten Mail auslösen, eine Serie für einzelne Kontakte beenden oder wiederaufnehmen und Einschreibungen löschen.

## Navigation
Die Einschreibungen sind ein Unterbereich einer einzelnen Newsletter-Serie. Navigiere zunächst zu einer Newsletter-Serie und öffne diese zur Bearbeitung. Dort findest du den Bereich „Einschreibungen" als eigenen Tab unterhalb der Grundeinstellungen. Das Tool „Newsletter-Serien" muss aktiviert sein.

## Formularfelder beim Erstellen einer Einschreibung
Wenn du eine neue Einschreibung erstellst, erscheint ein Formular mit folgenden Feldern:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Kontakte | Auswahl (Suchfeld) | Ja | Wähle den Kontakt aus, der in die Newsletter-Serie eingeschrieben werden soll. Du kannst im Feld nach dem gewünschten Kontakt suchen. |
| Zusätzliche Angaben | Schlüssel-Wert-Paare | Nein | Hier kannst du zusätzliche Daten als Schlüssel-Wert-Paare hinterlegen, die z. B. als Platzhalter in den Mails der Serie verwendet werden können. |

## Tabellenansicht der Einschreibungen
Die Tabelle zeigt alle eingeschriebenen Kontakte der Newsletter-Serie mit folgenden Spalten:

| Spalte | Beschreibung |
|---|---|
| Name | Name des eingeschriebenen Kontakts. Das Feld ist durchsuchbar. |
| Email-Adresse | E-Mail-Adresse des eingeschriebenen Kontakts. Ebenfalls durchsuchbar. |
| Gesendete E-Mails | Anzahl der bereits an diesen Kontakt versendeten Mails innerhalb der Newsletter-Serie. |
| Start | Datum und Uhrzeit, wann die Einschreibung erstellt wurde. Du kannst die Tabelle nach dieser Spalte sortieren. |
| Nächste Mail | Datum und Uhrzeit, wann die nächste Mail der Serie an diesen Kontakt versendet wird. |
| Beendet | Zeigt als Symbol an, ob die Serie für diesen Kontakt bereits abgeschlossen ist. |
| Abbruch nach | Falls die Serie für den Kontakt vorzeitig beendet wurde, wird hier der Name der Mail angezeigt, nach der die Serie abgebrochen wurde. |

## Aktionen

### Einschreibung erstellen
Über die Schaltfläche oberhalb der Tabelle kannst du eine neue Einschreibung für die Newsletter-Serie anlegen. Es öffnet sich ein kleines Formular, in dem du einen Kontakt auswählst und optional zusätzliche Angaben hinterlegst.

### Aktionen pro Zeile
Für jede Einschreibung stehen je nach Status folgende Aktionen zur Verfügung:

- **Nächste Mail jetzt senden** (Play-Symbol): Sendet die nächste geplante Mail der Newsletter-Serie sofort an diesen Kontakt, ohne auf den regulären Zeitplan zu warten. Diese Aktion ist nur sichtbar, wenn die Serie für diesen Kontakt noch läuft. Die Aktion erfordert eine Bestätigung.
- **Serie beenden** (Stopp-Symbol): Beendet die Newsletter-Serie für diesen Kontakt vorzeitig. Der Kontakt erhält danach keine weiteren Mails aus dieser Serie. Diese Aktion ist nur sichtbar, wenn die Serie für diesen Kontakt noch läuft. Die Aktion erfordert eine Bestätigung.
- **Serie wiederaufnehmen** (Kreispfeil-Symbol): Nimmt die Newsletter-Serie für einen Kontakt wieder auf, dessen Serie zuvor vorzeitig beendet wurde. Diese Aktion ist nur sichtbar, wenn die Serie für diesen Kontakt vorzeitig beendet wurde. Die Aktion erfordert eine Bestätigung.
- **Löschen**: Entfernt die Einschreibung vollständig aus der Newsletter-Serie.

### Massenaktionen
Über die Massenauswahl kannst du mehrere Einschreibungen gleichzeitig auswählen und löschen.

## Validierung und Fehlermeldungen
Beim Erstellen einer Einschreibung können folgende Validierungsfehler auftreten:

| Fehler | Ursache | Lösung |
|---|---|---|
| Pflichtfeld „Kontakte" nicht ausgefüllt | Du hast keinen Kontakt ausgewählt. | Wähle einen Kontakt über das Suchfeld aus, bevor du die Einschreibung speicherst. |

## Beziehungen zu anderen Bereichen
- Jede Einschreibung gehört zu einer **Newsletter-Serie** und verknüpft diese mit einem **Kontakt**. Um Einschreibungen verwalten zu können, musst du dich also zunächst in der Bearbeitungsansicht einer Newsletter-Serie befinden.
- Innerhalb der Newsletter-Serie gibt es außerdem den Bereich **Emails**, in dem die einzelnen Mails der Serie definiert und verwaltet werden. Die Spalte „Gesendete E-Mails" in der Einschreibungs-Tabelle bezieht sich auf diese dort definierten Mails.
- Die Kontakte, die du bei einer Einschreibung auswählen kannst, stammen aus dem Bereich **Kontakte** deiner Organisation.

---

## page: ListNewsletterDripCampaigns

**Entity:** ListNewsletterDripCampaigns  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/NewsletterDripCampaignResource/Pages/ListNewsletterDripCampaigns.php`  
**Updated:** 2026-02-14 20:55:30  

# Newsletter-Serien

## Übersicht

Auf dieser Seite werden alle Newsletter-Serien aufgelistet. Eine Newsletter-Serie (auch Drip-Kampagne genannt) ermöglicht es, eine Reihe von E-Mails automatisch und zeitversetzt an eingeschriebene Kontakte zu versenden. So kannst du beispielsweise eine Willkommensserie oder einen mehrteiligen Kurs anlegen, bei dem jeder neue Abonnent die E-Mails in der festgelegten Reihenfolge erhält.

Von hier aus kannst du neue Serien erstellen und bestehende bearbeiten.

Die Seite befindet sich im Bereich **Kommunikation**.

## Navigation

Die Newsletter-Serien sind über die Seitenleiste unter der Gruppe **Kommunikation** erreichbar.

## Tabellenansicht der Newsletter-Serien

Die Liste zeigt alle vorhandenen Newsletter-Serien mit folgenden Spalten:

| Spalte | Beschreibung |
|--------|-------------|
| Name | Der interne Name der Newsletter-Serie |

## Aktionen für Newsletter-Serien

### Neue Newsletter-Serie erstellen

Über die Schaltfläche oben rechts kannst du eine neue Newsletter-Serie anlegen. Es öffnet sich ein Dialogfenster mit folgenden Feldern:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|-------------|
| Name | Textfeld | Ja | Der interne Name der Newsletter-Serie. Wähle einen aussagekräftigen Namen, damit du die Serie später leicht wiederfindest (z. B. „Willkommensserie" oder „Spenderkurs 5-teilig"). |
| Platzhalter | Tags-Eingabe | Nein | Platzhalter, die du in den einzelnen E-Mails der Serie als Textbausteine einfügen kannst. Beim Versand werden sie automatisch durch die passenden Daten der einzelnen Abonnenten ersetzt, sodass jeder Empfänger einen personalisierten Newsletter erhält. Gib jeden Platzhalter einzeln ein und bestätige ihn mit der Eingabetaste. |
| Links | Tags-Eingabe | Nein | Link-Platzhalter, die du in den einzelnen E-Mails der Serie als anklickbare Links einfügen kannst. Beim Versand werden sie automatisch durch die passenden Daten der einzelnen Abonnenten ersetzt. Gib jeden Link-Platzhalter einzeln ein und bestätige ihn mit der Eingabetaste. |

Nach dem Speichern wird die neue Newsletter-Serie erstellt und erscheint in der Liste. Du kannst sie anschließend bearbeiten, um die einzelnen E-Mails und Einschreibungen zu konfigurieren.

### Newsletter-Serie bearbeiten

Über das Bearbeiten-Symbol in jeder Zeile gelangst du zur Detailseite der jeweiligen Newsletter-Serie. Dort kannst du den Namen und die Platzhalter anpassen sowie die zugehörigen E-Mails und Einschreibungen verwalten.

### Newsletter-Serien löschen (Massenlöschung)

Über die Massenaktionen kannst du mehrere Newsletter-Serien gleichzeitig auswählen und löschen. Aktiviere dazu die Kontrollkästchen der gewünschten Serien und wähle die Löschaktion.

## Berechtigungen für Newsletter-Serien

Das Tool **Newsletter-Serien** muss aktiviert sein, damit diese Seite zugänglich ist.

## Validierung und Fehlermeldungen bei Newsletter-Serien

Beim Erstellen oder Bearbeiten einer Newsletter-Serie gelten folgende Validierungsregeln:

| Feld | Regel | Fehlermeldung | Lösung |
|------|-------|--------------|--------|
| Name | Pflichtfeld | Der Name muss ausgefüllt werden | Gib einen aussagekräftigen Namen für die Newsletter-Serie ein. |

## Verknüpfte Bereiche einer Newsletter-Serie

Jede Newsletter-Serie enthält zwei verknüpfte Bereiche, die auf der Bearbeitungsseite sichtbar sind:

- **E-Mails** – Die einzelnen E-Mails, die in der Newsletter-Serie zeitversetzt versendet werden. Hier legst du die Inhalte und den zeitlichen Abstand zwischen den einzelnen E-Mails fest.
- **Einschreibungen** – Die Kontakte, die in die Newsletter-Serie eingeschrieben sind und die E-Mails nacheinander in der festgelegten Reihenfolge erhalten.

---

## page: EditNewsletterDripCampaign

**Entity:** EditNewsletterDripCampaign  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/NewsletterDripCampaignResource/Pages/EditNewsletterDripCampaign.php`  
**Updated:** 2026-02-14 20:54:23  

# Newsletter-Serie bearbeiten

## Übersicht
Auf der Seite „Newsletter-Serie bearbeiten" kannst du eine bestehende Newsletter-Serie anpassen. Du kannst den Namen, die Platzhalter und die Links der Serie ändern sowie die Serie löschen.

## Navigation
Seitenleiste → Kommunikation → Newsletter-Serien → gewünschte Serie anklicken

## Formularfelder der Newsletter-Serie

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Der Name der Newsletter-Serie. |
| Platzhalter | Tags-Eingabe | Nein | Platzhalter, die du in den einzelnen E-Mails der Serie als Textbausteine einfügen kannst. Beim Versand werden sie automatisch durch die passenden Daten der jeweiligen Abonnenten ersetzt, sodass jeder Empfänger einen personalisierten Newsletter erhält. Du kannst mehrere Platzhalter hinzufügen, indem du den gewünschten Namen eingibst und mit Enter bestätigst. |
| Links | Tags-Eingabe | Nein | Link-Platzhalter, die du in den einzelnen E-Mails der Serie als anklickbare Links einfügen kannst. Beim Versand werden sie automatisch durch die passenden Daten der jeweiligen Abonnenten ersetzt. Auch hier kannst du mehrere Link-Platzhalter hinzufügen, indem du den gewünschten Namen eingibst und mit Enter bestätigst. |

## Aktionen auf der Seite „Newsletter-Serie bearbeiten"

- **Speichern**: Übernimmt die Änderungen an der Newsletter-Serie.
- **Löschen**: Über die Löschen-Aktion in der Kopfzeile kannst du die Newsletter-Serie entfernen. Vor dem endgültigen Löschen wirst du um Bestätigung gebeten.

## Validierung und Fehlermeldungen bei der Newsletter-Serie

- **Name ist leer**: Das Feld „Name" ist ein Pflichtfeld. Wenn du keinen Namen eingibst, erscheint eine Fehlermeldung.

## Berechtigungen für Newsletter-Serien
Das Tool „Newsletter-Serien" muss für die Organisation aktiviert sein.

## E-Mails der Newsletter-Serie
Unterhalb des Formulars werden die einzelnen E-Mails der Newsletter-Serie verwaltet.

## Einschreibungen der Newsletter-Serie
Im Bereich „Einschreibungen" siehst du, welche Kontakte in die Newsletter-Serie eingeschrieben sind.

---

## page: Content

**Entity:** Content  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/NewsletterDripCampaignResource/Pages/Content.php`  
**Updated:** 2026-02-14 20:53:26  

# Inhalt einer Newsletter-Serie bearbeiten

## Übersicht

Auf dieser Seite kannst du den Inhalt einer einzelnen E-Mail innerhalb einer Newsletter-Serie gestalten. Dir steht dazu ein visueller E-Mail-Editor (Unlayer) zur Verfügung, mit dem du das Layout und den Text der E-Mail per Drag-and-Drop zusammenstellen kannst. Außerdem kannst du aus vorhandenen Vorlagen wählen, um schneller zu einem fertigen Design zu kommen.

## Navigation

Die Seite zum Bearbeiten des E-Mail-Inhalts einer Newsletter-Serie erreichst du über **Kommunikation → Newsletter-Serien**. Wähle dort eine Newsletter-Serie aus und klicke anschließend bei einer der zugehörigen E-Mails auf die Bearbeitung des Inhalts. Die Breadcrumb-Navigation zeigt: **Kommunikation → Newsletter-Serien → [Name der Serie]**.

## Aktionen

Auf der Inhaltsbearbeitungsseite einer Newsletter-Serien-E-Mail stehen dir folgende Aktionen zur Verfügung:

- **Vorlage auswählen**: Beim Öffnen des Editors kannst du eine Vorlage wählen, um mit einem vorgefertigten Design zu starten. Nach der Auswahl einer Vorlage wirst du zurück zur Übersicht der E-Mail in der Newsletter-Serie geleitet.
- **Inhalt bearbeiten**: Über den visuellen Editor kannst du Texte, Bilder, Überschriften und weitere Elemente per Drag-and-Drop einfügen und anpassen.
- **Platzhalter verwenden**: Die Platzhalter und Link-Platzhalter, die in der übergeordneten Newsletter-Serie definiert wurden, können im Editor als personalisierte Variablen eingefügt werden. So wird der Inhalt beim Versand automatisch mit den individuellen Daten der Empfänger befüllt.

## Berechtigungen

Um den Inhalt einer Newsletter-Serien-E-Mail bearbeiten zu können, müssen folgende Voraussetzungen erfüllt sein:

- Das Tool **Newsletter-Serien** muss für deine Organisation aktiviert sein.

## Beziehungen

- Diese Seite zum Bearbeiten des E-Mail-Inhalts gehört zu einer einzelnen E-Mail innerhalb einer **Newsletter-Serie**. Die übergeordnete Serie wird über die Bearbeitungsseite der Newsletter-Serie verwaltet.
- Auf der Bearbeitungsseite der Newsletter-Serie findest du die zugehörigen **E-Mails** (alle E-Mails der Serie) sowie die **Einschreibungen** (Kontakte, die die Serie durchlaufen).
- Die in der Newsletter-Serie definierten **Platzhalter** und **Link-Platzhalter** stehen im E-Mail-Editor als personalisierte Variablen zur Verfügung, um den Inhalt individuell an Empfänger anzupassen.

---

## page: Send

**Entity:** Send  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/NewsletterCampaignResource/Pages/Send.php`  
**Updated:** 2026-02-14 20:52:32  

# Versenden

## Übersicht

Auf der Seite „Versenden" kannst du einen Newsletter an seine Empfänger verschicken. Du siehst eine Zusammenfassung des Newsletters mit Absender, Betreff und Empfängeranzahl. Von hier aus kannst du den Versandzeitpunkt festlegen (sofort oder geplant), eine Vorschau des Newsletters anzeigen, eine Testmail an eine beliebige Adresse schicken und den eigentlichen Versand auslösen. Falls ein Versand bereits geplant ist, kannst du ihn auf dieser Seite auch wieder abbrechen.

## Navigation

Die Seite „Versenden" ist Teil der Detailansicht eines einzelnen Newsletters. Du erreichst sie über die Unternavigation eines Newsletters: **Kommunikation → Newsletter → [Newsletter auswählen] → Versenden**.

## Zusammenfassung des Newsletters

Im oberen Bereich der Seite „Versenden" siehst du eine Übersicht mit den wichtigsten Informationen zum Newsletter:

- **Absender**: E-Mail-Adresse, von der der Newsletter verschickt wird.
- **Betreff**: Die Betreffzeile des Newsletters.
- **Empfänger**: Die Anzahl der Kontakte, die den Newsletter erhalten werden. Diese Zahl berechnet sich aus den Abonnenten der zugeordneten Newsletter-Listen, ggf. eingeschränkt durch zugeordnete Segmente. Die Empfängeranzahl ist verlinkt und führt zur entsprechenden Kontaktliste. Falls der Newsletter bereits versendet wurde, zeigt die Empfängeranzahl die tatsächliche Anzahl versendeter Nachrichten an und verlinkt stattdessen auf die Liste der versendeten Nachrichten.

## Formularfelder

Das Formular „Versandzeit" auf der Seite „Versenden" enthält folgende Felder:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Versandzeit (Jetzt / Später) | Auswahl | Ja | Legt fest, ob der Newsletter sofort oder zu einem späteren Zeitpunkt versendet wird. |
| Datum und Uhrzeit | Datum-/Zeitauswahl | Ja (wenn „Später" gewählt) | Wird nur angezeigt, wenn „Später" ausgewählt wurde. Der gewählte Zeitpunkt muss in der Zukunft liegen. Sekunden können nicht eingestellt werden. |

Wenn ein Versand bereits geplant ist, wird das Formular deaktiviert angezeigt und kann nicht mehr geändert werden. Um die Versandzeit zu ändern, musst du zuerst den geplanten Versand abbrechen.

## Aktionen

### Jetzt versenden / Versand planen

Dieser Button löst den Versand des Newsletters aus. Der Button-Text passt sich dynamisch an die gewählte Versandzeit an:

- **„Jetzt versenden"**: Wird angezeigt, wenn „Jetzt" als Versandzeit gewählt ist. Nach einem Klick erscheint eine Bestätigungsabfrage. Bestätigst du diese, wird der Newsletter sofort an alle Empfänger verschickt.
- **„Versand planen"**: Wird angezeigt, wenn „Später" als Versandzeit gewählt ist. Nach einem Klick erscheint eine Bestätigungsabfrage. Bestätigst du diese, wird der Versand für den gewählten Zeitpunkt eingeplant.

### Vorschau

Mit der Aktion „Vorschau" wird eine Vorschau des Newsletters in einem seitlichen Overlay angezeigt. So kannst du vor dem Versand prüfen, wie der Newsletter für die Empfänger aussehen wird.

### Testmail versenden

Über die Aktion „Testmail versenden" öffnet sich ein kleines Fenster, in dem du eine E-Mail-Adresse eingeben kannst. An diese Adresse wird eine Testversion des Newsletters geschickt. Standardmäßig ist die E-Mail-Adresse deines aktuell angemeldeten Benutzerkontos vorausgefüllt. Du kannst die Adresse aber ändern, um die Testmail an eine andere Person zu schicken.

### Versand abbrechen

Die Aktion „Versand abbrechen" ist nur sichtbar, wenn ein Versand bereits geplant wurde. Mit einem Klick wird der geplante Versand abgebrochen, sofern dieser noch nicht begonnen hat. Nach dem Abbrechen wird das Formular wieder freigegeben und du kannst einen neuen Versandzeitpunkt festlegen.

Falls der Versand in der Zwischenzeit bereits begonnen hat, erscheint eine entsprechende Fehlermeldung (siehe Abschnitt „Validierung & Fehlermeldungen").

## Validierung & Fehlermeldungen

Auf der Seite „Versenden" können folgende Validierungsfehler und Hinweise auftreten:

| Bedingung | Fehlermeldung / Hinweis | Lösung |
|-----------|------------------------|--------|
| Der Newsletter enthält keinen Abmelde-Link (`{UnsubscribeUrl}`) | „Der Newsletter enthält keinen 'Unsubscribe'-Link und kann deshalb nicht versendet werden." Zusätzlich: „Wähle einen Text, erstelle einen Link und wähle als Aktion 'Vom Newsletter abmelden'." | Wechsle auf die Seite „Inhalt" des Newsletters, markiere einen Textabschnitt, erstelle einen Link und wähle als Aktion „Vom Newsletter abmelden". |
| Versandzeit nicht angegeben (bei Auswahl „Später") | „Die Versandzeit muss angegeben werden." | Gib im Datum-/Zeitfeld einen Versandzeitpunkt ein. |
| Der gewählte Versandzeitpunkt liegt in der Vergangenheit | „Die Versandzeit muss in der Zukunft liegen." | Wähle einen Zeitpunkt, der in der Zukunft liegt. |
| Zu viele Empfänger in der Testphase | „In der Testphase kann eine Newsletter-Kampagne maximal X Empfänger haben. Wende dich an unseren Support, um diese Beschränkung aufzuheben." | Kontaktiere den Support, um die Testphase zu beenden und die Empfängerbeschränkung aufheben zu lassen. |
| Ungültige E-Mail-Adressen bei Empfängern | Es erscheint ein Hinweis mit der Liste der betroffenen Kontakte und dem Text: „Wenn du den Versand fortsetzt, werden diese Empfänger den Newsletter nicht erhalten." | Du kannst mit „Versand fortsetzen" trotzdem versenden. Die betroffenen Kontakte erhalten den Newsletter dann nicht. Alternativ kannst du den Versand abbrechen und zuerst die E-Mail-Adressen der betroffenen Kontakte korrigieren. |
| Versand kann nicht mehr abgebrochen werden | „Der Newsletterversand konnte nicht mehr gestoppt werden, da der Versand zwischenzeitlich bereits begonnen hat." | Der Versand läuft bereits und kann nicht mehr rückgängig gemacht werden. |

## Beziehungen zu anderen Bereichen

Die Seite „Versenden" steht im Zusammenhang mit mehreren anderen Bereichen der Newsletter-Verwaltung:

- **Inhalt**: Der Newsletter-Inhalt (Text, Bilder, Abmelde-Link) wird auf der Seite „Inhalt" bearbeitet, die über die Unternavigation des Newsletters erreichbar ist. Vor dem Versenden solltest du sicherstellen, dass der Inhalt vollständig ist und einen Abmelde-Link enthält.
- **Newsletter-Listen**: Der Newsletter wird an die Abonnenten der zugeordneten Newsletter-Listen versendet. Die angezeigte Empfängeranzahl berechnet sich aus den Abonnenten dieser Listen.
- **Segmente**: Falls dem Newsletter Segmente zugeordnet sind, wird der Empfängerkreis entsprechend eingeschränkt. Der Newsletter wird dann nur an Kontakte geschickt, die sowohl eine der zugeordneten Listen abonniert haben als auch in mindestens einem der zugeordneten Segmente enthalten sind.
- **Nachrichten**: Nach dem Versand erscheint in der Unternavigation des Newsletters ein zusätzlicher Punkt „Nachrichten", über den du die einzelnen versendeten Nachrichten einsehen kannst.
- **Kontakte**: Die Empfängeranzahl auf der Seite „Versenden" verlinkt auf die Kontaktliste (gefiltert nach den zugeordneten Listen und Segmenten). Nach dem Versand verlinkt sie stattdessen auf die Liste der versendeten Nachrichten.

---

## page: NewsletterBreadcrumbs

**Entity:** NewsletterBreadcrumbs  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/NewsletterCampaignResource/Pages/NewsletterBreadcrumbs.php`  
**Updated:** 2026-02-14 20:51:01  

# Newsletter-Brotkrümelnavigation

## Übersicht

Die Brotkrümelnavigation (Breadcrumbs) im Newsletter-Bereich zeigt dir den aktuellen Navigationspfad an, damit du jederzeit weißt, wo du dich befindest. Unterhalb der Brotkrümelnavigation wird zusätzlich der Name des aktuell geöffneten Newsletters als Seitentitel angezeigt.

## Navigation

Die Brotkrümelnavigation im Newsletter-Bereich zeigt folgenden Pfad an:

**Kommunikation → Newsletter**

- **Kommunikation**: Oberste Ebene des Bereichs, in dem sich der Newsletter befindet. Dieser Eintrag ist nicht klickbar.
- **Newsletter**: Klickst du auf diesen Breadcrumb, gelangst du direkt zurück zur Newsletter-Übersichtsliste, in der alle vorhandenen Newsletter aufgelistet sind.

## Beziehungen

Die Brotkrümelnavigation wird auf allen Detailseiten eines Newsletters angezeigt – also auf den Reitern **Inhalt**, **Versand** und **Empfänger**. Unabhängig davon, auf welchem Reiter du dich befindest, bleibt der angezeigte Navigationspfad gleich und verlinkt über den Breadcrumb „Newsletter" immer zurück zur Newsletter-Übersichtsseite im Bereich **Kommunikation**.

---

## page: ManageNewsletterCampaigns

**Entity:** ManageNewsletterCampaigns  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/NewsletterCampaignResource/Pages/ManageNewsletterCampaigns.php`  
**Updated:** 2026-02-14 20:50:22  

# Newsletter

## Übersicht
Auf der Newsletter-Übersicht werden alle Newsletter-Kampagnen in einer Listenansicht verwaltet. Du kannst neue Newsletter erstellen, bestehende umbenennen, duplizieren oder löschen sowie deren Versandstatistiken einsehen. Von hier aus gelangst du zur inhaltlichen Bearbeitung und zum Versand der einzelnen Newsletter.

**Voraussetzung:** Das Tool **Newsletter** muss aktiviert sein.

## Navigation
Die Newsletter-Übersicht befindet sich im Bereich **Kommunikation** in der Seitenleiste. Klicke dort auf **Newsletter**, um zur Übersicht aller Newsletter-Kampagnen zu gelangen.

## Neuen Newsletter erstellen
Über die Schaltfläche **Erstellen** oben auf der Newsletter-Übersicht öffnet sich ein Dialog mit folgenden Feldern:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Name | Textfeld | Ja | Interner Name des Newsletters. Dieser dient nur als interne Bezeichnung und taucht nicht öffentlich auf. Der Betreff, den die Empfänger sehen, kann sich davon unterscheiden und wird später bei der Inhaltsbearbeitung festgelegt. |
| Newsletter-Listen | Mehrfachauswahl | Ja | Auswahl der Newsletter-Listen, an die der Newsletter versendet werden soll. Dieses Feld wird nur angezeigt, wenn mehr als eine Newsletter-Liste vorhanden ist. Über den Link „Newsletter-Listen verwalten" gelangst du direkt zu den Einstellungen der Listen. |
| Segmente | Mehrfachauswahl | Nein | Wenn der Newsletter nicht an alle Abonnenten der gewählten Listen geschickt werden soll, kannst du hier die Empfänger einschränken. Der Newsletter wird dann nur an Kontakte verschickt, die in mindestens einem der ausgewählten Segmente enthalten sind. Lässt du dieses Feld leer, erhalten alle Abonnenten der gewählten Listen den Newsletter. |

Unter dem Formular wird der Hinweis angezeigt: *„Alle Einstellungen können zu einem späteren Zeitpunkt noch geändert werden."*

Nach dem Erstellen wirst du direkt zur Inhaltsbearbeitung des neuen Newsletters weitergeleitet.

## Tabellenansicht / Listenansicht
Die Newsletter-Übersicht zeigt alle Newsletter-Kampagnen in einer Tabelle mit folgenden Spalten:

| Spalte | Beschreibung |
|---|---|
| Name | Interner Name des Newsletters |
| Newsletter-Listen | Die zugeordneten Newsletter-Listen, an die der Newsletter versendet wird bzw. wurde |
| Segmente | Die zugeordneten Segmente zur Einschränkung der Empfänger. Wenn keine Segmente gewählt wurden, bleibt diese Spalte leer – der Newsletter geht dann an alle Abonnenten der gewählten Listen. |
| Emails | Anzahl der versendeten E-Mails. Vor dem Versandstart wird hier „-" angezeigt. |
| Link geklickt | Anzahl und Prozentsatz der Empfänger, die mindestens einen Link im Newsletter angeklickt haben. Vor dem Versandstart wird hier „-" angezeigt. |
| Abmeldungen | Anzahl und Prozentsatz der Empfänger, die sich über diesen Newsletter abgemeldet haben. Vor dem Versandstart wird hier „-" angezeigt. |
| Abgewiesen | Anzahl und Prozentsatz der E-Mails, die nicht zugestellt werden konnten (z. B. weil die E-Mail-Adresse nicht mehr existiert). Vor dem Versandstart wird hier „-" angezeigt. |
| Versandzeit | Datum und Uhrzeit des geplanten oder bereits erfolgten Versands. |

**Sortierung:** Standardmäßig werden die neuesten Newsletter zuerst angezeigt. Die Spalte „Versandzeit" ist sortierbar – klicke auf die Spaltenüberschrift, um die Reihenfolge zu ändern.

**Filter:**
- **Newsletter-Listen**: Filtert die Anzeige nach zugeordneten Newsletter-Listen. Du kannst mehrere Listen auswählen, um nur die Newsletter anzuzeigen, die an bestimmte Listen versendet werden.

**Klick auf einen Newsletter** öffnet die Inhaltsbearbeitung des jeweiligen Newsletters.

## Aktionen in der Newsletter-Übersicht

### Zeilenaktionen (pro Newsletter)

| Aktion | Symbol | Beschreibung |
|---|---|---|
| **Empfänger anzeigen** | Briefumschlag-Icon | Zeigt die Liste der Empfänger und deren Zustellstatus an. Diese Aktion ist nur sichtbar, wenn der Versand des Newsletters bereits gestartet wurde. |
| **Umbenennen** | Stift-Icon | Öffnet einen Dialog zum Ändern des internen Newsletter-Namens. Der Name dient nur als interne Bezeichnung und ist für die Empfänger nicht sichtbar. |
| **Duplizieren** | Dokument-Icon | Erstellt eine Kopie des Newsletters. Der Name der Kopie wird automatisch mit dem Zusatz „Kopie" versehen und kann im Dialog angepasst werden. Die Kopie enthält den gleichen Inhalt, aber keine Versandinformationen – du kannst sie also unabhängig vom Original bearbeiten und versenden. |
| **Löschen** | – | Löscht den Newsletter. Vor dem Löschen wirst du um Bestätigung gebeten. |

### Kopfzeilen-Aktionen

| Aktion | Beschreibung |
|---|---|
| **Erstellen** | Öffnet den Dialog zum Erstellen eines neuen Newsletters (siehe Abschnitt „Neuen Newsletter erstellen" oben). |

## Validierung & Fehlermeldungen

Beim Erstellen oder Umbenennen eines Newsletters können folgende Fehlermeldungen auftreten:

| Feld | Fehlermeldung | Ursache | Lösung |
|---|---|---|---|
| Name | „Name ist erforderlich" | Das Namensfeld wurde leer gelassen. | Gib einen internen Namen für den Newsletter ein. |
| Newsletter-Listen | „Newsletter-Listen ist erforderlich" | Es wurde keine Newsletter-Liste ausgewählt (dieses Feld erscheint nur, wenn mehr als eine Liste existiert). | Wähle mindestens eine Newsletter-Liste aus, an die der Newsletter versendet werden soll. |

## Beziehungen zu anderen Bereichen

- **Inhaltsbearbeitung**: Nach dem Erstellen eines Newsletters oder bei Klick auf einen bestehenden Newsletter in der Übersicht gelangst du zur Seite „Inhalt", wo du den Newsletter gestalten kannst.
- **Versand**: Über die Unter-Navigation eines Newsletters gelangst du zur Versand-Seite, auf der du den Versandzeitpunkt festlegst und den Versand auslöst.
- **Empfänger**: Nach dem Versandstart kannst du über das Briefumschlag-Icon in der Newsletter-Übersicht die Empfängerliste mit dem jeweiligen Zustellstatus einsehen.
- **Newsletter-Listen**: Die Listen, an die versendet wird, können in den Newsletter-Einstellungen verwaltet werden. Über den Link „Newsletter-Listen verwalten" im Erstellen-Dialog gelangst du direkt dorthin.
- **Segmente**: Segmente ermöglichen es, innerhalb der gewählten Newsletter-Listen nur bestimmte Empfängergruppen anzusprechen.

---

## page: ManageNewsletterCampaignMessages

**Entity:** ManageNewsletterCampaignMessages  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/NewsletterCampaignResource/Pages/ManageNewsletterCampaignMessages.php`  
**Updated:** 2026-02-14 20:48:35  

# Empfänger eines Newsletters

## Übersicht
Auf der Seite **Empfänger** kannst du einsehen, an wen ein versendeter Newsletter verschickt wurde. Du kannst den Zustellungs- und Interaktionsstatus jedes einzelnen Empfängers nachverfolgen – zum Beispiel, ob die E-Mail zugestellt, geöffnet oder ein Link darin geklickt wurde. Die Empfängerliste ist erst verfügbar, nachdem der Versand des Newsletters gestartet wurde. Wurde der Newsletter noch nicht versendet, wird diese Seite nicht angezeigt.

## Navigation
Die Empfänger-Seite ist Teil der Newsletter-Detailansicht und erscheint als Unternavigationspunkt, sobald der Versand eines Newsletters gestartet wurde. Du erreichst sie über **Kommunikation → Newsletter → [Newsletter auswählen] → Empfänger**.

## Tabellenansicht der Newsletter-Empfänger

Die Empfängerliste wird als Tabelle dargestellt. Wenn noch keine Empfänger vorhanden sind (z. B. weil der Versand gerade erst gestartet wurde und noch keine E-Mails verarbeitet wurden), wird die Tabelle leer angezeigt.

### Spalten

| Spalte | Beschreibung |
|---|---|
| Email-Adresse | Die E-Mail-Adresse des Empfängers (durchsuchbar, sortierbar) |
| Name | Der Name des Empfängers (durchsuchbar, sortierbar) |
| Versandzeit | Zeitpunkt, zu dem der Newsletter an diesen Empfänger versendet wurde (sortierbar, ein-/ausblendbar) |
| Zustellungszeit | Zeitpunkt der erfolgreichen Zustellung beim E-Mail-Anbieter des Empfängers (sortierbar, ein-/ausblendbar) |
| Öffnungszeit | Zeitpunkt, zu dem der Empfänger den Newsletter geöffnet hat (sortierbar, ein-/ausblendbar) |
| Klickzeit | Zeitpunkt, zu dem der Empfänger einen Link im Newsletter geklickt hat (sortierbar, ein-/ausblendbar) |
| Zustellungszeit (doppelt) | Eine zweite Zustellungszeit-Spalte, die standardmäßig ausgeblendet ist (sortierbar, ein-/ausblendbar) |
| Abgewiesen | Zeitpunkt eines Soft-Bounce – die E-Mail konnte vorübergehend nicht zugestellt werden, z. B. weil das Postfach voll war (standardmäßig ausgeblendet, sortierbar, ein-/ausblendbar) |
| Hart abgewiesen | Zeitpunkt eines Hard-Bounce – die E-Mail konnte dauerhaft nicht zugestellt werden, z. B. weil die Adresse nicht existiert. Wenn du mit der Maus über den Wert fährst, wird ein Tooltip mit dem genauen Grund angezeigt (sortierbar, ein-/ausblendbar) |
| Grund | Der Grund für eine fehlgeschlagene Zustellung (durchsuchbar, standardmäßig ausgeblendet, ein-/ausblendbar) |

Alle Datums-/Zeitspalten werden im Format **TT.MM.JJJJ HH:MM** angezeigt.

**Hinweis zu ausgeblendeten Spalten:** Die Spalten „Zustellungszeit" (zweite), „Abgewiesen" und „Grund" sind standardmäßig ausgeblendet. Du kannst sie über die Spaltenauswahl in der Tabelle sichtbar machen.

### Filter der Empfänger-Tabelle

Mit den Filtern kannst du die Empfängerliste gezielt eingrenzen, um z. B. nur Empfänger zu sehen, die den Newsletter geöffnet haben, oder nur solche, bei denen die Zustellung fehlgeschlagen ist.

| Filter | Beschreibung |
|---|---|
| Versandzeit | Filtert nach Empfängern, bei denen eine Versandzeit vorhanden ist oder nicht |
| Zustellungszeit | Filtert nach Empfängern, bei denen eine Zustellungszeit vorhanden ist oder nicht |
| Öffnungszeit | Filtert nach Empfängern, die den Newsletter geöffnet haben oder nicht |
| Klickzeit | Filtert nach Empfängern, die einen Link geklickt haben oder nicht |
| Zustellungszeit (doppelt) | Zweiter Filter für Zustellungszeit |
| Abgewiesen | Filtert nach Empfängern mit oder ohne Soft-Bounce |
| Hart abgewiesen | Filtert nach Empfängern mit oder ohne Hard-Bounce |

Jeder Filter bietet drei Optionen: **Alle anzeigen** (kein Filter aktiv), **nur mit Wert** (nur Empfänger, bei denen ein Zeitpunkt eingetragen ist) oder **nur ohne Wert** (nur Empfänger, bei denen kein Zeitpunkt vorhanden ist).

### Suche in der Empfänger-Tabelle
Du kannst die Empfänger-Tabelle über das Suchfeld nach **E-Mail-Adresse**, **Name** und **Grund** (für fehlgeschlagene Zustellungen) durchsuchen.

## Aktionen auf der Empfänger-Seite

| Aktion | Beschreibung |
|---|---|
| Export | Über die Export-Schaltfläche in der Kopfzeile der Tabelle kannst du die Empfängerdaten exportieren. |

## Berechtigungen für die Newsletter-Empfänger-Seite
- Das Tool **Newsletter** muss aktiviert sein.
- Die Berechtigung **Newsletter anschauen** (`read newsletter`) ist erforderlich, um die Empfängerliste einsehen zu können.

## Beziehungen und Kontext
- Die Empfängerliste gehört zu einem bestimmten **Newsletter**. Sie ist nur verfügbar, wenn der Versand des Newsletters bereits gestartet wurde – bei Newslettern im Entwurfsstatus wird die Empfänger-Seite nicht angezeigt.
- Die Empfänger stammen aus den dem Newsletter zugeordneten **Newsletter-Listen** und **Segmenten**. Welche Listen und Segmente einem Newsletter zugeordnet sind, kannst du in den Newsletter-Einstellungen einsehen.

---

## page: EditActions

**Entity:** EditActions  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/NewsletterCampaignResource/Pages/EditActions.php`  
**Updated:** 2026-02-14 20:47:21  

# Bearbeitungsaktionen im Newsletter

## Übersicht

Die Bearbeitungsaktionen ermöglichen es, zentrale Eigenschaften eines Newsletters direkt auf der Inhaltsseite schnell zu ändern, ohne ein separates Bearbeitungsformular öffnen zu müssen. Über kleine Stift-Icons neben den jeweiligen Feldern können Name, Betreff, Segmente und Newsletter-Listen einzeln bearbeitet werden.

## Navigation

Die Bearbeitungsaktionen sind direkt auf der Inhaltsseite eines Newsletters verfügbar. Sie erscheinen als kleine Stift-Buttons neben den jeweiligen Feldern.

**Pfad:** Seitenleiste → Kommunikation → Newsletter → Newsletter auswählen → Inhaltsseite

**Voraussetzungen:**
- Das Tool **Newsletter** muss aktiviert sein.

## Aktionen

### Name bearbeiten

Über den Stift-Button neben dem Namen des Newsletters öffnet sich ein kleines Dialogfenster, in dem der Name geändert werden kann.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Der Name dient nur als interne Bezeichnung und taucht nicht öffentlich auf. Der Betreff des Newsletters kann sich davon unterscheiden. |

### Betreff bearbeiten

Über den Stift-Button neben dem Betreff des Newsletters öffnet sich ein kleines Dialogfenster, in dem der Betreff geändert werden kann.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Betreff | Textfeld | Ja | Der Betreff, der den Empfängern in ihrem E-Mail-Posteingang angezeigt wird. |

### Empfänger einschränken: Segmente auswählen

Über den Stift-Button neben den Segmenten des Newsletters öffnet sich ein Dialogfenster, in dem du die Empfänger durch Segmente einschränken kannst.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Empfänger einschränken: Segmente auswählen | Mehrfachauswahl | Nein | Wenn du den Newsletter nicht an die komplette Liste schicken möchtest, kannst du hier die Empfänger einschränken. Der Newsletter wird nur an Kontakte verschickt, die in mindestens einem der ausgewählten Segmente sind. |

Dieses Dialogfenster kann nicht durch Klicken außerhalb des Fensters geschlossen werden – es muss über die Schaltfläche „Speichern" bestätigt oder über „Abbrechen" geschlossen werden.

### Senden an: Newsletter-Listen auswählen

Über den Stift-Button neben den Newsletter-Listen öffnet sich ein Dialogfenster, in dem du festlegst, an welche Listen der Newsletter versendet wird.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Senden an: Newsletter-Listen auswählen | Mehrfachauswahl | Ja | Wähle aus, an welche Newsletter-Liste dieser Newsletter versendet werden soll. Du kannst auch mehrere Listen auswählen. Ein Kontakt erhält dann den Newsletter, wenn er mindestens eine der ausgewählten Listen abonniert hat. |

Dieses Dialogfenster kann nicht durch Klicken außerhalb des Fensters geschlossen werden – es muss über die Schaltfläche „Speichern" bestätigt oder über „Abbrechen" geschlossen werden.

## Validierung & Fehlermeldungen

Beim Speichern der Bearbeitungsaktionen im Newsletter können folgende Validierungsfehler auftreten:

| Feld | Fehlermeldung | Ursache | Lösung |
|------|---------------|---------|--------|
| Name | „Name ist ein Pflichtfeld" | Das Namensfeld wurde leer gelassen. | Gib einen internen Namen für den Newsletter ein. |
| Betreff | „Betreff ist ein Pflichtfeld" | Das Betrefffeld wurde leer gelassen. | Gib einen Betreff ein, der den Empfängern im Posteingang angezeigt wird. |
| Newsletter-Listen | „Newsletter-Listen ist ein Pflichtfeld" | Es wurde keine Newsletter-Liste ausgewählt. | Wähle mindestens eine Newsletter-Liste aus, an die der Newsletter versendet werden soll. |
| Segmente | – | Keine Validierung, da Segmente optional sind. | – |

## Beziehungen

- **Newsletter-Listen**: Die im Dialogfenster der Bearbeitungsaktionen auswählbaren Listen werden aus den angelegten Newsletter-Listen deiner Organisation geladen.
- **Segmente**: Die auswählbaren Segmente ermöglichen eine gezielte Einschränkung der Empfänger des Newsletters.
- **Inhaltsseite (Content)**: Die Bearbeitungsaktionen sind in die Inhaltsseite des Newsletters eingebettet und ermöglichen schnelle Änderungen, ohne die Seite verlassen zu müssen.
- **Versandseite (Send)**: Die hier über die Bearbeitungsaktionen gewählten Einstellungen (Listen und Segmente) bestimmen, an wen der Newsletter beim Versand geschickt wird.

---

## page: Content

**Entity:** Content  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/NewsletterCampaignResource/Pages/Content.php`  
**Updated:** 2026-02-14 20:46:07  

# Inhalt (Newsletter-Editor)

## Übersicht

Auf der Seite „Inhalt" gestaltest du den Inhalt eines Newsletters. Du arbeitest hier mit einem visuellen E-Mail-Editor (Unlayer), um Design und Text deines Newsletters zu erstellen. Die Seite ist Teil der Newsletter-Bearbeitung und wird über die Unternavigation eines einzelnen Newsletters erreicht.

## Navigation zur Inhaltsseite

Die Seite „Inhalt" befindet sich in der Unternavigation eines Newsletters. Du erreichst sie über folgenden Weg:

**Seitenleiste → Kommunikation → Newsletter → [Newsletter auswählen] → Inhalt**

„Inhalt" ist der erste Reiter in der Unternavigation eines Newsletters. Weitere Reiter sind „Versenden" sowie „Empfänger" (letzterer wird erst sichtbar, nachdem der Versand gestartet wurde).

## Vorlagen beim ersten Bearbeiten

Wenn du einen Newsletter zum ersten Mal bearbeitest und dieser noch keinen Inhalt hat, wird dir zunächst eine Vorlagenauswahl angezeigt. Sobald du eine Vorlage auswählst, wird die Seite neu geladen und der Editor öffnet sich mit dem gewählten Design. Du kannst auch ohne Vorlage fortfahren.

Nach der Auswahl einer Vorlage (oder dem Start ohne Vorlage) wird die Vorlagenauswahl nicht erneut angezeigt. Der Editor öffnet sich ab dann immer direkt mit dem aktuellen Inhalt des Newsletters.

## Aktionen im Newsletter-Editor

Die folgenden Aktionen stehen dir zur Verfügung, sobald der Newsletter bereits Inhalt hat. Bei einem leeren Newsletter ohne bisherigen Inhalt sind diese Aktionen noch nicht sichtbar.

| Aktion | Beschreibung |
|---|---|
| **Vollbild** | Schaltet den Newsletter-Editor in den Vollbildmodus, damit du mehr Platz zum Bearbeiten hast. |
| **Als PDF herunterladen** | Lädt den aktuellen Newsletter-Inhalt als PDF-Datei herunter. Die Datei wird automatisch mit dem Namen des Newsletters benannt. Diese Aktion findest du im Dreipunkt-Menü (⋯). |

## Automatisches Speichern im Newsletter-Editor

Änderungen am Newsletter-Inhalt werden automatisch gespeichert, sobald du sie im Editor vornimmst. Ein manuelles Speichern ist nicht erforderlich. Der Editor speichert dabei sowohl die Designdaten (JSON) als auch die daraus erzeugte HTML-Version. Du kannst die Seite jederzeit verlassen, ohne dass Änderungen verloren gehen.

## Beziehungen zu anderen Seiten

- **Newsletter-Übersicht**: Von der Newsletter-Liste gelangst du durch Klick auf einen Newsletter direkt zur Inhaltsseite.
- **Versenden**: Nach der Gestaltung des Inhalts wechselst du zum Reiter „Versenden", um den Newsletter an die Empfänger zu schicken.
- **Empfänger**: Nach dem Versand wird ein weiterer Reiter „Empfänger" sichtbar, über den du die einzelnen Empfänger und deren Zustellstatus einsehen kannst.

---

## page: ManageMailAddresses

**Entity:** ManageMailAddresses  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/MailAddressResource/Pages/ManageMailAddresses.php`  
**Updated:** 2026-02-14 20:45:05  

# Email-Adressen

## Übersicht

Auf der Seite **Email-Adressen** kannst du Email-Adressen für die eigenen Domains deiner Organisation verwalten. Du kannst neue Postfächer und Weiterleitungen anlegen, bestehende Adressen bearbeiten, aktivieren oder deaktivieren und löschen. Außerdem kannst du Einladungen mit Zugangsdaten an Nutzer versenden, damit diese ihr Passwort setzen und das Postfach nutzen können.

Wenn noch keine Domain für Email aktiviert ist, wirst du auf der Seite darauf hingewiesen und kannst über die Aktion **Domain anlegen** eine Domain einrichten. Erst danach können Email-Adressen angelegt werden.

## Navigation

Die Seite **Email-Adressen** befindet sich im Bereich **Kommunikation** der Seitenleiste.

## Voraussetzungen

Das Tool **Email-Postfächer** muss für die Organisation aktiviert sein, damit die Seite **Email-Adressen** zugänglich ist. Zusätzlich muss mindestens eine Domain für Email aktiviert sein, bevor Email-Adressen angelegt werden können.

## Formularfelder (Erstellen)

Das Formular zum Anlegen einer neuen Email-Adresse öffnet sich über die Aktion **Erstellen** und enthält folgende Bereiche:

### Bereich: Kosten

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Kosten-Hinweis | Infotext | – | Zeigt an, ob für das neue Postfach Kosten anfallen. Wenn keine freien Postfächer mehr verfügbar sind, wird der monatliche Preis pro Postfach angezeigt (zzgl. 7 % MwSt., erster Monat anteilig). Weiterleitungen sind kostenfrei. Wenn noch freie Postfächer verfügbar sind, wird darauf hingewiesen, dass keine zusätzlichen Kosten entstehen. |

### Bereich: Email-Adresse

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Adresse | Texteingabe | Ja | Der lokale Teil der Email-Adresse (der Teil vor dem @-Zeichen). Muss innerhalb der gewählten Domain eindeutig sein. |
| Domain | Auswahl | – | Die Domain für die Email-Adresse (der Teil nach dem @-Zeichen). Wird automatisch vorausgewählt, wenn nur eine Domain verfügbar ist. Bei nur einer verfügbaren Domain ist das Feld deaktiviert und kann nicht geändert werden. |

### Bereich: Name

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Texteingabe | Nein | Ein optionaler Anzeigename für die Email-Adresse (z. B. „Vorstand" oder „Max Mustermann"). |

### Bereich: Weiterleitung

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Aktiviert | Schalter | Nein | Aktiviert die Weiterleitung. Wenn dieser Schalter aktiv ist, wird kein eigenes Postfach angelegt. Stattdessen werden eingehende Emails an die angegebenen Zieladressen weitergeleitet. |
| Weiterleitung an | Wiederholbare Texteingabe | Ja (wenn Weiterleitung aktiv) | Eine oder mehrere Email-Adressen, an die eingehende Emails weitergeleitet werden sollen. Dieses Feld ist nur sichtbar, wenn die Weiterleitung aktiviert ist. Mindestens eine Zieladresse ist erforderlich. |

### Bereich: Einladung

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Einladung | Texteingabe (Email) | Nein | Eine alternative Email-Adresse, an die ein Link zum Passwort-Setzen geschickt wird. Dieses Feld ist nur sichtbar, wenn die Weiterleitung **nicht** aktiviert ist (also bei einem Postfach). So kann der Nutzer direkt nach dem Anlegen sein Passwort setzen und das Postfach einrichten. Wenn du das Feld leer lässt, kannst du den Link zum Passwort-Setzen auch später über die Listenansicht kopieren oder versenden. |

## Tabellenansicht / Listenansicht

Die Seite **Email-Adressen** zeigt alle angelegten Email-Adressen deiner Organisation in einer Tabelle an.

### Spalten

| Spalte | Beschreibung |
|--------|--------------|
| Typ-Icon | Ein Symbol, das anzeigt, ob es sich um ein Postfach oder eine Weiterleitung handelt. |
| Email-Adresse | Die vollständige Email-Adresse. Du kannst sie per Klick in die Zwischenablage kopieren. |
| Name | Der hinterlegte Anzeigename (sofern vergeben). |
| Weiterleitung an | Die Zieladressen der Weiterleitung. Diese Spalte ist nur bei Weiterleitungen gefüllt, bei Postfächern bleibt sie leer. |
| Aktiviert | Ein Schalter zum Aktivieren oder Deaktivieren der Email-Adresse. Bei Weiterleitungen ist der Schalter deaktiviert – Weiterleitungen können nicht deaktiviert, sondern nur gelöscht werden. |

### Sortierung

- Standardmäßig sind die Email-Adressen alphabetisch nach Email-Adresse sortiert.
- Die Spalten **Email-Adresse** und **Name** sind sortierbar.

### Suche

Du kannst die Liste der Email-Adressen über das Suchfeld durchsuchen. Durchsucht werden die Spalten **Email-Adresse**, **Name** und **Weiterleitung an**.

### Filter

| Filter | Beschreibung |
|--------|--------------|
| Typ | Filtert die Liste nach Postfach oder Weiterleitung. |
| Domain | Filtert nach Domain. Dieser Filter ist nur sichtbar, wenn Email-Adressen auf mehr als einer Domain existieren. Mehrfachauswahl ist möglich. |

## Aktionen

### Kopfzeilen-Aktionen

| Aktion | Beschreibung |
|--------|--------------|
| **Domain anlegen** | Sichtbar, wenn noch keine Domain für Email aktiviert ist. Bevor Email-Adressen angelegt werden können, muss erst eine Domain eingerichtet werden. |
| **Erstellen** | Öffnet das Formular zum Anlegen einer neuen Email-Adresse. Diese Aktion ist nur sichtbar, wenn mindestens eine aktivierte Domain vorhanden ist. Wenn du ein Postfach anlegst und keine freien Plätze mehr verfügbar sind, wird automatisch ein zusätzlicher Platz (Seat) hinzugebucht. |

### Zeilen-Aktionen

| Aktion | Sichtbar für | Beschreibung |
|--------|--------------|--------------|
| **Links kopieren** | Postfächer | Bietet zwei Optionen zum Kopieren in die Zwischenablage: einen Link zur Dokumentation (mit den Einstellungen für Email-Programme wie SMTP, IMAP und Webmail) und einen Link zum Passwort-Setzen. |
| **Infos an Nutzer senden** | Postfächer | Öffnet ein Formular, in dem du eine alternative Email-Adresse angibst. An diese Adresse wird eine Email mit Links zur Dokumentation und zum Passwort-Setzen verschickt. |
| **Weiterleitung bearbeiten** | Weiterleitungen | Öffnet ein Formular, in dem du die Weiterleitungs-Zieladressen ändern kannst. Du kannst bestehende Adressen entfernen oder neue hinzufügen. |
| **Bearbeiten** | Alle | Öffnet ein Formular, in dem du den Anzeigenamen der Email-Adresse ändern kannst. |
| **Löschen** | Alle | Löscht die Email-Adresse nach einer Bestätigung. |

## Validierung & Fehlermeldungen

Beim Anlegen von Email-Adressen können folgende Validierungsfehler auftreten:

| Regel | Fehlermeldung | Ursache | Lösung |
|-------|---------------|---------|--------|
| Email-Adresse bereits vergeben | „Diese Email-Adresse existiert bereits." | Es gibt bereits eine Email-Adresse mit demselben lokalen Teil auf der gewählten Domain. | Wähle einen anderen lokalen Teil (den Teil vor dem @-Zeichen) oder eine andere Domain. |
| Adresse ist Pflichtfeld | Standard-Pflichtfeldmeldung | Das Feld „Adresse" wurde nicht ausgefüllt. | Gib einen lokalen Teil für die Email-Adresse ein. |
| Weiterleitungs-Adresse ungültig | Standard-Email-Validierung | Eine der angegebenen Weiterleitungs-Adressen ist keine gültige Email-Adresse. | Prüfe die eingegebenen Adressen auf Tippfehler und korrektes Format (z. B. name@beispiel.de). |
| Mindestens eine Weiterleitungs-Adresse erforderlich | Pflichtfeldmeldung | Die Weiterleitung ist aktiviert, aber es wurde keine Zieladresse angegeben. | Gib mindestens eine Zieladresse im Feld „Weiterleitung an" ein. |
| Einladungs-Adresse ungültig | Standard-Email-Validierung | Die angegebene Einladungs-Email-Adresse ist keine gültige Email-Adresse. | Prüfe die Einladungs-Adresse auf Tippfehler und korrektes Format. |

## Beziehungen zu anderen Bereichen

- **Domains**: Email-Adressen auf der Seite **Email-Adressen** sind immer einer Domain zugeordnet. Bevor du Email-Adressen anlegen kannst, muss mindestens eine Domain für Email aktiviert sein.
- **Einladungen / Passwort setzen**: Für Postfächer auf der Seite **Email-Adressen** können Einladungslinks generiert und versendet werden. Über diese Links können Nutzer ihr Passwort setzen und anschließend das Postfach in ihrem Email-Programm einrichten.
- **Dokumentation für Email-Programme**: Für jedes Postfach auf der Seite **Email-Adressen** gibt es eine Dokumentationsseite mit den Einstellungen für Email-Programme (SMTP-Server, IMAP-Server, Webmail-Zugang). Der Link zu dieser Dokumentation kann über die Aktion **Links kopieren** oder **Infos an Nutzer senden** weitergegeben werden.
- **Abrechnung**: Wenn keine freien Postfach-Plätze mehr verfügbar sind, wird beim Anlegen eines neuen Postfachs automatisch ein zusätzlicher Platz hinzugebucht. Die Kosten werden im Formular vorab angezeigt.

---

## page: TicketsRelationManager

**Entity:** TicketsRelationManager  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/LotteryResource/RelationManagers/TicketsRelationManager.php`  
**Updated:** 2026-02-14 20:43:06  

# Lose

## Übersicht

In diesem Bereich verwaltest du die einzelnen Lose einer Lotterie. Du siehst alle Lose mit ihren Nummern, Codes, Bestellzuordnungen und Preisinformationen in einer übersichtlichen Tabelle. Außerdem kannst du hier neue Lose erhalten, Offline-Lose zur Ziehung vorsehen und einzelne Lose von der Verlosung ausschließen oder wieder zulassen.

Die Lose-Verwaltung ist ein zentraler Bestandteil der Lotterie-Funktion und ermöglicht dir die vollständige Kontrolle darüber, welche Lose an der Ziehung teilnehmen.

## Navigation

Die Lose werden als Unterbereich auf der Detailseite einer Lotterie angezeigt. Du erreichst sie über **Seitenleiste → Fundraising → Lotterien**, dann eine Lotterie öffnen und den Tab **Lose** auswählen.

## Tabellenansicht der Lose

### Spalten

| Spalte | Beschreibung |
|---|---|
| Losnummer | Die eindeutige Nummer des Loses. Durchsuchbar und sortierbar. |
| Code | Der automatisch generierte Code des Loses. Dient zur eindeutigen Identifikation. |
| Online verfügbar | Zeigt als Icon an, ob das Los online verfügbar ist oder ob es sich um ein Offline-Los handelt. |
| Preis | Die Preisnummer des Loses, also welchen Preis dieses Los gewonnen hat. Diese Spalte ist nur sichtbar, wenn die Ziehung der Lotterie bereits stattgefunden hat. Sortierbar. |
| Bestellung | Die ID der zugehörigen Bestellung, sofern das Los bereits einer Bestellung zugeordnet ist. Sortierbar. |
| Name | Der Name des Bestellers, der das Los erworben hat. Durchsuchbar. |
| E-Mail | Die E-Mail-Adresse des Bestellers. Durchsuchbar. |
| Ausgeschlossen | Zeigt an, ob das Los von der Verlosung ausgeschlossen wurde. Ein rotes X-Symbol bedeutet, dass das Los bei der Ziehung nicht berücksichtigt wird. |

### Vordefinierte Ansichten der Lose-Tabelle

- **Alle** – Zeigt alle Lose der Lotterie an (Standardansicht).
- **Preise** – Zeigt nur Lose an, die bei der Ziehung einen Preis gewonnen haben (also eine zugewiesene Preisnummer besitzen). Diese Ansicht ist nach Preisnummer aufsteigend sortiert.

### Sortierung

Standardmäßig werden die Lose nach Losnummer aufsteigend sortiert. Du kannst die Sortierung über die Spaltenköpfe ändern, sofern die jeweilige Spalte als sortierbar gekennzeichnet ist.

### Suche

Über das Suchfeld kannst du die Lose nach Losnummer, Name oder E-Mail-Adresse des Bestellers durchsuchen.

## Aktionen

### Offline-Lose zur Ziehung vorsehen

Über die Schaltfläche **Offline-Lose zur Ziehung vorsehen** in der Kopfzeile der Lose-Tabelle kannst du einen Bereich von Offline-Losen für die Ziehung vormerken. Diese Funktion ist gedacht für Lose, die außerhalb des Online-Shops verkauft wurden.

**Voraussetzungen:** Diese Aktion ist nur sichtbar, wenn alle folgenden Bedingungen erfüllt sind:
- Es gibt noch verfügbare Offline-Lose, die keiner Bestellung zugeordnet sind.
- Die Lotterie hat den Status „Laufend".
- Du besitzt die Berechtigung, die Lotterie zu bearbeiten.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Ticketnummer von | Ganzzahl | Ja | Startnummer des Losbereichs. Muss innerhalb der vorhandenen Losnummern liegen. |
| Ticketnummer bis | Ganzzahl | Ja | Endnummer des Losbereichs. Muss innerhalb der vorhandenen Losnummern liegen. |
| Name | Text | Ja | Bezeichnung für die Zuordnung (Vorschlag: „Verkaufte Offline-Lose"). |

**Was passiert nach dem Absenden:** Es erscheint zunächst eine Bestätigungsmeldung, die anzeigt, wie viele Offline-Lose im angegebenen Bereich für die Ziehung vorgesehen werden können. Nach der Bestätigung werden die betroffenen Lose einer Pseudo-Bestellung zugeordnet und bei der nächsten Ziehung berücksichtigt.

### Lose erhalten

Über die Schaltfläche **Lose erhalten** in der Kopfzeile der Lose-Tabelle kannst du Lose bestellen, die per E-Mail an den aktuell angemeldeten Benutzer versendet werden.

**Voraussetzungen:** Diese Aktion ist nur sichtbar, wenn alle folgenden Bedingungen erfüllt sind:
- Es gibt noch verfügbare Lose, die keiner Bestellung zugeordnet sind.
- Die Lotterie hat den Status „Laufend".
- Du besitzt die Berechtigung, die Lotterie zu bearbeiten.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Anzahl | Zahl | Ja | Anzahl der gewünschten Lose. Mindestens 1, maximal die Anzahl der aktuell verfügbaren Lose. |
| Name | Text | Ja | Name des Empfängers bzw. Käufers, der den Losen zugeordnet wird. |
| E-Mail | E-Mail | Ja | E-Mail-Adresse, die der Bestellung zugeordnet wird. Hinweis: Die Lose werden unabhängig von dieser E-Mail-Adresse immer an den aktuell angemeldeten Benutzer versendet. |

**Was passiert nach dem Absenden:** Die angeforderten Lose werden einer neuen Bestellung zugeordnet und per E-Mail an den angemeldeten Benutzer gesendet. Die Lose erscheinen anschließend in der Tabelle mit dem eingegebenen Namen und der E-Mail-Adresse.

### Export

Über die Schaltfläche **Export** in der Kopfzeile der Lose-Tabelle kannst du die Lose-Daten als Datei exportieren.

### Lose von Verlosung ausschließen und wieder zulassen (Massenaktionen)

Über die Kontrollkästchen in der Tabelle kannst du mehrere Lose gleichzeitig auswählen und folgende Massenaktionen ausführen:

- **Lose von Verlosung ausschließen** – Markiert die ausgewählten Lose als ausgeschlossen. Diese Lose werden bei der Ziehung nicht berücksichtigt. Vor der Ausführung erscheint eine Sicherheitsabfrage, die du bestätigen musst. Ausgeschlossene Lose werden in der Tabelle mit einem roten X-Symbol in der Spalte „Ausgeschlossen" gekennzeichnet.

- **Lose für Verlosung zulassen** – Hebt die Ausschluss-Markierung für die ausgewählten Lose auf. Die Lose werden wieder bei der nächsten Ziehung berücksichtigt. Auch hier erscheint eine Sicherheitsabfrage zur Bestätigung.

## Validierung & Fehlermeldungen

### Offline-Lose zur Ziehung vorsehen

| Fehlermeldung | Ursache | Lösung |
|---|---|---|
| *„In dem von dir genannten Bereich gibt es keine Offline-Lose, die für die Ziehung vorgesehen werden könnten."* | Im angegebenen Nummernbereich befinden sich keine Offline-Lose, die noch keiner Bestellung zugeordnet sind. | Überprüfe den eingegebenen Nummernbereich und stelle sicher, dass er tatsächlich Offline-Lose enthält, die noch keiner Bestellung zugeordnet sind. Passe ggf. den Bereich an. |

### Lose erhalten

| Fehlermeldung | Ursache | Lösung |
|---|---|---|
| *„Dafür stehen nicht genug Lose zur Verfügung."* | Du hast mehr Lose angefordert, als aktuell verfügbar sind. | Reduziere die Anzahl der angeforderten Lose. Die maximal verfügbare Anzahl wird im Formularfeld angezeigt. |

## Beziehungen

- **Lotterie** – Die Lose gehören zu einer bestimmten Lotterie. Die Verwaltung der Lose erfolgt auf der Detailseite der jeweiligen Lotterie im Tab **Lose**.
- **Bestellungen** – Jedes Los kann einer Bestellung zugeordnet sein. Die Bestellungen werden im Tab **Bestellungen** auf derselben Lotterie-Detailseite verwaltet. Lose, die über „Lose erhalten" oder „Offline-Lose zur Ziehung vorsehen" zugeordnet werden, erhalten automatisch eine Bestellzuordnung.
- **Losnummern-Bereiche** – Die Lose sind in Losnummern-Bereiche eingeteilt, die festlegen, ob ein Los online verfügbar ist oder als Offline-Los gilt. Diese Bereiche werden im Tab **Losnummern-Bereiche** auf der Lotterie-Detailseite verwaltet.

---

## page: RangesRelationManager

**Entity:** RangesRelationManager  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/LotteryResource/RelationManagers/RangesRelationManager.php`  
**Updated:** 2026-02-14 20:41:01  

# Losnummern-Bereiche

## Übersicht

Losnummern-Bereiche legen fest, welche Nummern für die Lose einer Lotterie vergeben werden. Ein Bereich definiert einen Zahlenraum (z. B. 1–500), aus dem Lose entweder fortlaufend oder zufällig erzeugt werden. Du kannst mehrere Bereiche pro Lotterie anlegen, um die Losnummern zu organisieren – etwa einen Bereich für den Vorverkauf und einen für den Online-Verkauf.

Die Gesamtanzahl aller Lose über alle Bereiche hinweg darf die maximale Losanzahl der Lotterie nicht überschreiten.

## Navigation

Die Losnummern-Bereiche findest du als Tab auf der Detailseite einer Lotterie. Navigiere über **Seitenleiste → Fundraising → Lotterien**, öffne die gewünschte Lotterie und wechsle zum Tab **Losnummern-Bereiche**.

## Formularfelder

Das Formular zum Erstellen und Bearbeiten eines Losnummern-Bereichs ist in drei Abschnitte gegliedert.

### Grundeinstellungen

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Ein frei wählbarer Name zur Unterscheidung der Bereiche (z. B. „Vorverkauf" oder „Online-Bereich"). |

### Losnummern

Die Felder in diesem Abschnitt werden nur beim Erstellen festgelegt. Beim späteren Bearbeiten sind sie gesperrt und nicht mehr änderbar, da aus dem Bereich bereits Lose generiert worden sein können.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Typ | Auswahl | Ja | Art der Nummernvergabe: **Fortlaufend** (alle Nummern im Bereich werden als Lose erzeugt) oder **Zufällig** (eine bestimmte Anzahl wird zufällig aus dem Bereich ausgewählt). Standardwert ist „Fortlaufend". |
| von | Zahleneingabe | Ja | Die erste Losnummer des Bereichs. |
| bis | Zahleneingabe | Ja | Die letzte Losnummer des Bereichs. Muss größer als „von" sein. |
| Anzahl | Zahleneingabe | Ja (nur bei Typ „Zufällig") | Die Anzahl der Lose, die aus dem Zahlenbereich zufällig erzeugt werden sollen. Dieses Feld wird nur angezeigt, wenn der Typ auf „Zufällig" gesetzt ist. Die Anzahl darf nicht größer sein als der verfügbare Nummernbereich (Differenz zwischen „von" und „bis"). |

### Verfügbarkeit

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Online verfügbar | Checkbox | Nein | Wenn aktiviert, können die Lose dieses Losnummern-Bereichs auch online bestellt werden. |

## Tabellenansicht / Listenansicht

Die Tabelle zeigt alle Losnummern-Bereiche der aktuellen Lotterie.

| Spalte | Beschreibung |
|--------|--------------|
| Name | Name des Losnummern-Bereichs |
| Typ | Art der Nummernvergabe (Fortlaufend oder Zufällig) |
| von | Erste Losnummer des Bereichs |
| bis | Letzte Losnummer des Bereichs |
| Anzahl | Anzahl der Lose im Bereich |
| Online verfügbar | Zeigt mit einem Symbol an, ob der Losnummern-Bereich für den Online-Verkauf freigegeben ist |

## Aktionen

### Losnummern-Bereich erstellen

Klicke auf den **Erstellen**-Button in der Kopfzeile der Tabelle, um einen neuen Losnummern-Bereich anzulegen. Fülle alle Pflichtfelder aus und bestätige.

### Losnummern-Bereich bearbeiten

Klicke auf das Bearbeiten-Symbol in der Zeile eines Losnummern-Bereichs. Im Bearbeitungsmodus kannst du nur den **Namen** und die Einstellung **Online verfügbar** ändern. Die Losnummern-Einstellungen (Typ, von, bis, Anzahl) sind gesperrt, da diese die bereits generierten Lose betreffen.

### Losnummern-Bereich exportieren

Über den Export-Button in der jeweiligen Zeile kannst du die Daten eines Losnummern-Bereichs als Excel-Datei herunterladen.

## Validierung & Fehlermeldungen

Beim Erstellen eines Losnummern-Bereichs werden die Eingaben geprüft. Folgende Validierungsregeln gelten:

| Regel | Fehlermeldung | Lösung |
|-------|---------------|--------|
| Der Wert „bis" muss größer als „von" sein | Standardmeldung der Validierung | Stelle sicher, dass die letzte Losnummer (bis) größer als die erste (von) ist. |
| Die Gesamtanzahl der Lose in allen Bereichen darf die maximale Losanzahl der Lotterie nicht überschreiten | „Die maximale Anzahl an Losen beträgt [Maximalzahl]. Der angeforderte Bereich umfasst allerdings [Bereichsanzahl] Lose." | Reduziere den Nummernbereich (von/bis) oder die Anzahl, sodass die Summe aller Bereiche innerhalb der maximalen Losanzahl der Lotterie bleibt. Die maximale Losanzahl findest du in den Einstellungen der Lotterie. |
| Bei Typ „Zufällig": Die gewünschte Anzahl darf nicht größer sein als der verfügbare Nummernbereich | „Der angegebene Bereich ([von] - [bis]) enthält nicht die gewünschte Anzahl an Losen ([Anzahl])." | Vergrößere den Nummernbereich (von/bis) oder verringere die gewünschte Anzahl, damit genügend Nummern zur Verfügung stehen. |
| Der neue Bereich darf sich nicht mit einem bestehenden Losnummern-Bereich überschneiden | „Deine Angaben überschneiden sich mit dem Bereich ‚[Name]' ([von] - [bis])." | Passe die Werte „von" und „bis" so an, dass sich der neue Bereich nicht mit dem genannten bestehenden Bereich überschneidet. Prüfe die Tabelle der vorhandenen Bereiche, um freie Nummernbereiche zu finden. |

## Beziehungen

- **Lotterie**: Jeder Losnummern-Bereich gehört zu genau einer Lotterie. Die maximale Losanzahl der Lotterie bestimmt, wie viele Lose insgesamt über alle Losnummern-Bereiche hinweg angelegt werden können.
- **Lose**: Aus den Losnummern-Bereichen werden die einzelnen Lose generiert. Die generierten Lose findest du im Tab **Lose** auf der Detailseite der Lotterie.
- **Bestellungen**: Die Lose aus den Losnummern-Bereichen können über Bestellungen vergeben werden. Bestellungen findest du im Tab **Bestellungen** auf der Detailseite der Lotterie.

---

## page: OrdersRelationManager

**Entity:** OrdersRelationManager  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/LotteryResource/RelationManagers/OrdersRelationManager.php`  
**Updated:** 2026-02-14 20:39:17  

# Bestellungen (Lotterie)

## Übersicht

In der Bestellübersicht einer Lotterie werden alle eingegangenen Bestellungen verwaltet. Hier kannst du Teilnahmen bestätigen, Lose per E-Mail an die Besteller versenden und Bestelldaten als Datei exportieren. Die Bestellübersicht ist als Reiter innerhalb einer einzelnen Lotterie-Detailseite zugänglich.

## Navigation

Die Bestellungen erreichst du über folgenden Weg: **Seitenleiste → Fundraising → Lotterien → eine Lotterie auswählen → Reiter „Bestellungen"**.

## Tabellenansicht der Bestellungen

Die Bestellungen einer Lotterie werden in einer Tabelle mit folgenden Spalten angezeigt:

| Spalte | Beschreibung | Sortierbar | Durchsuchbar |
|---|---|---|---|
| Bestellnummer | Eindeutige Nummer der Bestellung | Ja | Ja |
| Datum | Zeitpunkt, an dem die Bestellung eingegangen ist | Ja | Nein |
| Bestätigt | Zeitpunkt, an dem die Teilnahme bestätigt wurde. Ist die Bestellung noch nicht bestätigt, bleibt dieses Feld leer. | Ja | Nein |
| Name | Name des Bestellers | Ja | Ja |
| Email-Adresse | E-Mail-Adresse des Bestellers | Nein | Nein |
| Angekündigte Spende | Vom Besteller angekündigter Spendenbetrag (in der Währung der Organisation) | Ja | Nein |
| Anzahl Lose | Anzahl der bestellten Lose | Ja | Nein |
| Newsletter-Anmeldungen | Zeigt die Newsletter-Segmente, für die sich der Besteller angemeldet hat. Diese Spalte ist nur sichtbar, wenn der Lotterie mindestens ein Newsletter-Segment zugeordnet ist. | Nein | Ja |

### Filter der Bestellübersicht

| Filter | Beschreibung |
|---|---|
| Bestätigt | Filtert die Bestellungen der Lotterie danach, ob sie bereits bestätigt wurden, noch nicht bestätigt wurden, oder zeigt alle Bestellungen an. |

## Aktionen in der Bestellübersicht

### Zeilenaktionen (pro Bestellung)

Die folgenden Aktionen stehen über ein Aktionsmenü bei jeder einzelnen Bestellung zur Verfügung. Welche Aktionen sichtbar sind, hängt vom Bestätigungsstatus der jeweiligen Bestellung ab:

| Aktion | Beschreibung | Sichtbarkeit |
|---|---|---|
| **Teilnahme bestätigen** | Bestätigt die Teilnahme des Bestellers an der Lotterie. Vor der Ausführung wird ein Bestätigungsdialog angezeigt, den du aktiv bestätigen musst. | Nur sichtbar, wenn die Bestellung **noch nicht** bestätigt wurde. |
| **Lose per Email senden** | Versendet die der Bestellung zugeordneten Lose per E-Mail an den Besteller. Vor dem Versand wird ein Bestätigungsdialog angezeigt. | Nur sichtbar, wenn die Bestellung **bereits bestätigt** wurde. |
| **Download** | Lädt eine CSV-Datei mit den Losnummern dieser Bestellung herunter. | Nur sichtbar, wenn die Bestellung **bereits bestätigt** wurde. |
| **Download mit Code** | Lädt eine CSV-Datei mit den Losnummern inklusive zugehörigem Code dieser Bestellung herunter. | Nur sichtbar, wenn die Bestellung **bereits bestätigt** wurde. |

### Header-Aktionen der Bestellübersicht

| Aktion | Beschreibung |
|---|---|
| **Export** | Exportiert die gesamte Bestellliste der Lotterie als Datei. |

## Typischer Ablauf einer Bestellverwaltung

1. **Bestellung geht ein** – Die Bestellung erscheint in der Tabelle mit leerem Bestätigungsdatum.
2. **Teilnahme bestätigen** – Über die Zeilenaktion „Teilnahme bestätigen" wird die Bestellung bestätigt. Erst danach stehen die Aktionen zum Versand und Download der Lose zur Verfügung.
3. **Lose versenden** – Über „Lose per Email senden" erhält der Besteller seine Losnummern per E-Mail.
4. **Lose exportieren** – Bei Bedarf können die Losnummern über „Download" oder „Download mit Code" als CSV-Datei heruntergeladen werden.

## Beziehungen der Bestellübersicht

- **Lotterie**: Die Bestellungen gehören zu einer bestimmten Lotterie. Die Lotterie-Detailseite enthält neben den Bestellungen auch die Reiter für **Lose** und **Losnummern-Bereiche**.
- **Lose**: Jeder bestätigten Bestellung sind Lose zugeordnet. Diese können über die Aktionen „Download" und „Download mit Code" als CSV-Datei exportiert oder über „Lose per Email senden" an den Besteller versendet werden.
- **Newsletter-Segmente**: Falls der Lotterie Newsletter-Segmente zugeordnet sind, zeigt die Spalte „Newsletter-Anmeldungen" an, für welche Newsletter-Segmente sich der Besteller bei der Bestellung angemeldet hat.

---

## page: ViewLottery

**Entity:** ViewLottery  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/LotteryResource/Pages/ViewLottery.php`  
**Updated:** 2026-02-14 20:37:53  

# Lotterie – Detailansicht

## Übersicht

Auf der Detailseite einer Lotterie siehst du alle wichtigen Informationen auf einen Blick. Du kannst Statistiken einsehen, die Lotterie starten und beenden, eine Auslosung durchführen und die Einbindung in deine Webseite konfigurieren. Außerdem findest du hier die verknüpften Bestellungen, Lose und Losnummernbereiche als Unterbereiche.

## Navigation zur Lotterie-Detailansicht

Die Detailansicht einer Lotterie erreichst du über den Navigationsbereich **Fundraising**. Öffne dort die Lotterien-Liste und klicke auf die gewünschte Lotterie, um zur Detailseite zu gelangen.

## Aktionen auf der Lotterie-Detailseite

Auf der Detailseite der Lotterie stehen in der Kopfzeile mehrere Aktionen zur Verfügung. Welche Aktionen sichtbar sind, hängt vom aktuellen Status der Lotterie ab.

### Statistiken der Lotterie anzeigen

Über die Schaltfläche **Statistiken** öffnet sich ein Dialog mit folgenden Kennzahlen zur Lotterie:

| Kennzahl | Beschreibung |
|---|---|
| Lose insgesamt | Gesamtanzahl der Lose in dieser Lotterie |
| Gültige produzierte Lose | Anzahl der Lose, die nicht ausgeschlossen wurden |
| Verkaufte Lose (online) | Anzahl der online verkauften Lose |
| Verfügbare Lose (online) | Anzahl der noch verfügbaren Lose für den Online-Verkauf |
| Reservierte ("unabgeholte") Lose | Anzahl der Lose, die bestellt, aber noch nicht bestätigt wurden |
| Bestellungen | Gesamtanzahl der Bestellungen |
| Ausgeschlossene Lose | Anzahl der gesperrten bzw. ausgeschlossenen Lose |

### Lotterie bearbeiten

Über die Schaltfläche **Bearbeiten** kannst du die Einstellungen der Lotterie ändern. Diese Schaltfläche ist nur sichtbar, solange noch keine Auslosung stattgefunden hat. Nach einer durchgeführten Auslosung können die Lotterie-Einstellungen nicht mehr verändert werden.

### Einbindung der Lotterie in deine Webseite

Über die Schaltfläche **Einbindung in Webseite** kannst du die Einstellungen bearbeiten, mit denen die Lotterie auf deiner eigenen Webseite dargestellt wird.

### Vorschau der Lotterie

Über die Schaltfläche **Vorschau** öffnet sich eine Vorschau der Lotterie, wie sie auf deiner Webseite dargestellt wird. So kannst du vor der Veröffentlichung prüfen, ob alles korrekt aussieht.

### Lotterie starten

Die Schaltfläche **Lotterie starten** ist nur sichtbar, wenn sich die Lotterie noch in Vorbereitung befindet. Beim Klick wird eine Bestätigung abgefragt, bevor die Lotterie tatsächlich gestartet wird. Nach dem Starten ist die Lotterie aktiv und Lose können verkauft werden.

**Wichtig:** Die Schaltfläche ist deaktiviert (ausgegraut), solange kein Losnummern-Bereich in der Los-Vorlage markiert wurde. Du musst zuerst in der Los-Vorlage einen Losnummern-Bereich definieren, bevor du die Lotterie starten kannst.

### Lotterie beenden

Die Schaltfläche **Lotterie beenden** ist nur sichtbar, wenn die Lotterie aktuell läuft. Beim Klick wird eine Bestätigung abgefragt. Nach dem Beenden können keine weiteren Lose mehr verkauft werden.

### Auslosung der Lotterie durchführen

Über die Schaltfläche **Auslosung durchführen** wird die Verlosung der Lotterie gestartet. Diese Aktion ist nur sichtbar, solange noch keine Auslosung stattgefunden hat. Die Schaltfläche ist deaktiviert (ausgegraut), solange sich die Lotterie noch in Vorbereitung befindet – die Lotterie muss zuerst gestartet worden sein.

Vor der Durchführung wird ein Bestätigungsdialog angezeigt, der folgende Informationen enthält:

- Anzahl der Preise
- Gesamtanzahl der Lose
- Anzahl der ausgegebenen Lose

Nach Bestätigung wird die Auslosung durchgeführt und die Gewinner werden ermittelt.

## Berechtigungen für die Lotterie-Detailseite

Das Tool **Lotterie** muss für deine Organisation aktiviert sein, um auf den Lotterie-Bereich zugreifen zu können.

Die Aktionen **Lotterie starten**, **Lotterie beenden** und **Auslosung durchführen** erfordern die Berechtigung, die Lotterie zu bearbeiten.

## Verknüpfte Bereiche der Lotterie

Auf der Detailseite der Lotterie werden folgende verknüpfte Bereiche als Unterbereiche angezeigt:

- **Bestellungen** – Alle Losbestellungen zu dieser Lotterie.
- **Lose** – Alle einzelnen Lose mit ihren Nummern und Zuordnungen.
- **Losnummernbereiche** – Die definierten Nummernbereiche für die Lose dieser Lotterie.

---

## page: ListLotteries

**Entity:** ListLotteries  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/LotteryResource/Pages/ListLotteries.php`  
**Updated:** 2026-02-14 20:36:40  

# Lotterien – Übersicht

## Übersicht

Auf der Seite „Lotterien" siehst du alle angelegten Lotterien deiner Organisation in einer Listenansicht. Du kannst neue Lotterien erstellen und bestehende Lotterien öffnen, um deren Details einzusehen.

## Navigation zur Lotterien-Übersicht

Die Lotterien-Übersicht findest du im Bereich **Fundraising** in der Seitenleiste. Der Menüpunkt ist nur sichtbar, wenn das Tool **Lotterie** für deine Organisation aktiviert ist.

## Voraussetzungen und Berechtigungen

Um die Lotterien-Übersicht nutzen zu können, gelten folgende Voraussetzungen:

- Das Tool **Lotterie** muss für deine Organisation aktiviert sein.

## Tabellenansicht der Lotterien

Die Übersichtstabelle zeigt alle vorhandenen Lotterien mit folgenden Spalten:

| Spalte | Beschreibung |
|---|---|
| Datum | Das Erstellungsdatum der Lotterie |
| Name | Der Name der Lotterie |
| Anzahl der Lose | Die Gesamtanzahl der verfügbaren Lose in dieser Lotterie |
| Berechtigte Lose | Die Anzahl der Lose, die einer Bestellung zugeordnet sind und somit an der Ziehung teilnehmen |
| Ziehungsdatum | Datum und Uhrzeit, wann die Auslosung durchgeführt wurde. Wurde noch keine Ziehung durchgeführt, bleibt dieses Feld leer |

## Neue Lotterie erstellen

Über den Button **Lotterie erstellen** in der Kopfzeile der Lotterien-Übersicht öffnet sich ein Formular als großes Modal-Fenster. In diesem Formular legst du die Grundeinstellungen für eine neue Lotterie fest. Das Formular ist in zwei Tabs unterteilt.

### Tab „Grundeinstellungen"

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Name der Lotterie | Textfeld | Ja | Der Name deiner Lotterie. Er wird z. B. in E-Mails oder Links angezeigt |
| Spendenseite | Textfeld (URL) | Nein | URL der Spendenseite aus dem Twingle-Projekt. Falls angegeben, muss es sich um eine gültige URL handeln |

### Tab „Verlosung"

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Anzahl der Lose | Zahlenfeld | Ja | Gesamtanzahl der Lose, die für diese Lotterie zur Verfügung stehen |
| Anzahl der Preise | Zahlenfeld | Ja | Gesamtanzahl der Preise, die bei dieser Lotterie verlost werden |
| Maximale Anzahl | Zahlenfeld | Ja | Die maximale Anzahl an Losen, die pro Bestellung bestellt werden können |
| Vorschlag Anzahl | Zahlenfeld | Ja | Die voreingestellte Anzahl an Losen, die bei einer neuen Bestellung vorgeschlagen wird |
| Spendenbetrag | Geldbetragsfeld | Ja | Der vorgeschlagene Spendenbetrag je Los |
| Newsletter | Mehrfachauswahl | Nein | Auswahl, welche Newsletter bei der Losbestellung zum Abonnieren angeboten werden. Dieses Feld ist nur sichtbar, wenn das Tool **Newsletter** für deine Organisation aktiviert ist |

## Lotterie anzeigen

Durch Klick auf eine Zeile in der Lotterien-Tabelle wird die Detailansicht der jeweiligen Lotterie geöffnet. Dort findest du alle Details und Verwaltungsmöglichkeiten zur ausgewählten Lotterie.

## Validierung und Fehlermeldungen beim Erstellen einer Lotterie

Beim Erstellen einer neuen Lotterie werden die eingegebenen Daten überprüft. Folgende Validierungsregeln gelten:

| Feld | Regel |
|---|---|
| Name der Lotterie | Pflichtfeld |
| Anzahl der Lose | Pflichtfeld, muss eine Zahl sein |
| Anzahl der Preise | Pflichtfeld, muss eine Zahl sein |
| Maximale Anzahl | Pflichtfeld, muss eine Zahl sein |
| Vorschlag Anzahl | Pflichtfeld, muss eine Zahl sein |
| Spendenbetrag | Pflichtfeld |
| Spendenseite | Optional, aber falls angegeben: muss eine gültige URL sein |

Solange Validierungsfehler bestehen, wird die Lotterie nicht angelegt. Die betroffenen Felder werden hervorgehoben und die Fehlermeldung wird direkt am jeweiligen Feld angezeigt.

## Verknüpfte Bereiche einer Lotterie

Jede Lotterie hat folgende verknüpfte Bereiche, die in der Detailansicht der jeweiligen Lotterie verfügbar sind:

- **Bestellungen** – Übersicht der eingegangenen Losbestellungen zu dieser Lotterie
- **Lose** – Übersicht aller einzelnen Lose dieser Lotterie
- **Bereiche** – Verwaltung der Losnummern-Bereiche, in die die Lose dieser Lotterie aufgeteilt sind

---

## page: Table

**Entity:** Table  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Traits/Table.php`  
**Updated:** 2026-02-14 20:35:21  

# Kontakte – Tabellenansicht

## Übersicht

Die Kontakte-Tabelle ist die zentrale Listenansicht aller Kontakte deiner Organisation. Hier kannst du Kontakte suchen, filtern, sortieren und direkt in der Tabelle bearbeiten. Außerdem stehen Massenaktionen wie das Zuordnen zu Segmenten oder das Löschen mehrerer Kontakte zur Verfügung.

## Spalten der Kontakte-Tabelle

Die Kontakte-Tabelle zeigt zahlreiche Spalten, die du individuell ein- und ausblenden kannst. Standardmäßig sind nur einige Spalten sichtbar; die übrigen kannst du über die Spaltenauswahl aktivieren.

| Spalte | Standardmäßig sichtbar | Beschreibung |
|---|---|---|
| Kontaktnummer | Nein | Eindeutige Nummer des Kontakts. Durchsuchbar. |
| Typ | Nein | Art des Kontakts (Person, Organisation, Ehepaar). |
| Titel | Nein | Titel des Kontakts (z. B. Dr., Prof.). |
| Name | Ja | Name des Kontakts. Durchsuchbar. Ein Klick auf den Namen öffnet die Kontaktdetailseite. |
| Vorname | Nein | Vorname des Kontakts. Durchsuchbar. |
| Nachname | Nein | Nachname des Kontakts. Durchsuchbar. |
| Mitgliedsnummer | Nein | Mitgliedsnummer des Kontakts. Durchsuchbar. Diese Spalte ist nur verfügbar, wenn das Tool **Mitglieder** aktiviert ist. |
| Rufname | Nein | Rufname des Kontakts. Durchsuchbar. Nur verfügbar, wenn das Feld „Rufname" in den Einstellungen unter **Kontakte → Felder** aktiviert ist. |
| Zweiter Vorname | Nein | Zweiter Vorname des Kontakts. Durchsuchbar. Nur verfügbar, wenn das Feld „Zweiter Vorname" in den Einstellungen unter **Kontakte → Felder** aktiviert ist. |
| Geburtsname | Nein | Geburtsname des Kontakts. Durchsuchbar. Nur verfügbar, wenn das Feld „Geburtsname" in den Einstellungen unter **Kontakte → Felder** aktiviert ist. |
| Anrede | Nein | Anrede des Kontakts. |
| Segmente | Ja | Zugeordnete Segmente (ohne Newsletter-Listen), dargestellt als Tags. Ein Klick auf ein Segment filtert die Kontakte-Tabelle nach diesem Segment. |
| Newsletter-Listen | Nein | Abonnierte Newsletter-Listen des Kontakts. Nur verfügbar, wenn das Tool **Newsletter** aktiviert ist. |
| E-Mail-Adresse | Ja | E-Mail-Adresse des Kontakts. Durchsuchbar. |
| Webseite | Nein | Webseite des Kontakts. Durchsuchbar. Ein Klick öffnet die Webseite in einem neuen Browser-Tab. |
| Geburtstag | Nein | Geburtsdatum des Kontakts. Durchsuchbar. |
| Sterbedatum | Nein | Sterbedatum des Kontakts. Durchsuchbar. Nur verfügbar, wenn das Feld „Sterbedatum" in den Einstellungen unter **Kontakte → Felder** aktiviert ist. |
| Geschlecht | Nein | Geschlecht des Kontakts. |
| Straße und Hausnummer | Kontextabhängig | Adresszeile 1 und 2 der aktiven Adresse. Durchsuchbar. Standardmäßig sichtbar, wenn keine Vorfilter-Ansicht (z. B. Mitglieder-Ansicht) aktiv ist. |
| PLZ | Kontextabhängig | Postleitzahl der aktiven Adresse. Durchsuchbar. Standardmäßig sichtbar, wenn keine Vorfilter-Ansicht aktiv ist. |
| Ort | Kontextabhängig | Ort der aktiven Adresse. Durchsuchbar. |
| Land | Nein | Land der aktiven Adresse. |
| Sprache | Nein | Sprache des Kontakts. Nur verfügbar, wenn das Feld „Sprache" in den Einstellungen unter **Kontakte → Felder** aktiviert ist. |
| Telefonnummern | Nein | Telefonnummern des Kontakts. |
| Postweg gesperrt | Nein | Zeigt an, ob der postalische Kommunikationskanal für diesen Kontakt gesperrt ist. |
| Anmerkungen | Nein | Zeigt die Anzahl der Anmerkungen an. Wenn du mit der Maus darüber fährst, erscheint eine Vorschau der Anmerkungen. Ein Klick öffnet die Anmerkungen-Seite des Kontakts. |
| Mitglieds-Status | Nein | Status der Mitgliedschaft (Aktiv oder Beendet). Nur in der Ansicht **Mitglieder** sichtbar und nur wenn das Tool **Mitglieder** aktiviert ist. |
| Mitglied seit | Nein | Startdatum der aktuellen Mitgliedschaft. Nur in der Ansicht **Mitglieder** sichtbar und nur wenn das Tool **Mitglieder** aktiviert ist. |
| Mitglied bis | Nein | Enddatum der aktuellen Mitgliedschaft. Nur in der Ansicht **Mitglieder** sichtbar und nur wenn das Tool **Mitglieder** aktiviert ist. |
| Spenden | Nein | Summe aller Spenden des Kontakts in der Organisationswährung. |
| Umsatzsteuer-ID | Nein | Umsatzsteuer-ID des Kontakts. Nur verfügbar, wenn das Feld „Umsatzsteuer-ID" in den Einstellungen unter **Kontakte → Felder** aktiviert ist. |
| Erstellt am | Nein | Datum und Uhrzeit, zu der der Kontakt erstellt wurde. |

## Direktbearbeitung in der Kontakte-Tabelle

Wenn die Direktbearbeitung in der Kontakte-Tabelle aktiviert ist, kannst du folgende Felder direkt in der Tabelle bearbeiten, ohne die Kontaktdetailseite öffnen zu müssen:

- **Kontaktnummer**
- **Mitgliedsnummer**
- **Titel**
- **Name**
- **Vorname**
- **Nachname**
- **Rufname**
- **Zweiter Vorname**
- **Geburtsname**
- **Anrede**

Klicke dazu einfach auf den Wert in der entsprechenden Spalte. Das Feld wird editierbar, und du kannst den Wert direkt ändern.

## Sortierung in der Kontakte-Tabelle

Alle Spalten der Kontakte-Tabelle sind sortierbar. Die Standardsortierung erfolgt nach **Name** in aufsteigender Reihenfolge. Klicke auf eine Spaltenüberschrift, um die Sortierrichtung zu ändern.

Bei vielen Spalten werden leere Werte immer am Ende der Liste angezeigt – unabhängig davon, ob du aufsteigend oder absteigend sortierst.

## Suche in der Kontakte-Tabelle

Die Kontakte-Tabelle bietet zwei Suchmöglichkeiten:

- **Globale Suche**: Durchsucht alle durchsuchbaren Spalten gleichzeitig. Gib deinen Suchbegriff in das Suchfeld oberhalb der Tabelle ein.
- **Spaltensuche**: Für die meisten Textspalten (Name, Vorname, Nachname, E-Mail-Adresse, Kontaktnummer, Mitgliedsnummer usw.) gibt es individuelle Suchfelder, mit denen du gezielt in einer einzelnen Spalte suchen kannst.

## Filter in der Kontakte-Tabelle

Mit Filtern kannst du die angezeigten Kontakte in der Tabelle eingrenzen:

| Filter | Beschreibung |
|---|---|
| Mitglieds-Status | Filtert nach Mitgliedschaftsstatus (Aktiv oder Beendet). Nur in der Ansicht **Mitglieder** sichtbar. Standardmäßig auf „Aktiv" voreingestellt. |
| Spender | Zeigt nur Kontakte an, die mindestens eine Spende haben. |
| Einzelpersonen von Paaren ausblenden | Blendet die einzelnen Personen aus, die zu einem Ehepaar gehören, sodass nur das Ehepaar selbst angezeigt wird. Standardmäßig aktiv. Nicht in der Ansicht **Mitglieder** sichtbar. |
| Segmente | Filtert nach einem oder mehreren Segmenten. Du kannst mehrere Segmente gleichzeitig auswählen. |
| Newsletter-Listen | Filtert nach abonnierten Newsletter-Listen. Nur verfügbar, wenn das Tool **Newsletter** aktiviert ist. Du kannst mehrere Listen gleichzeitig auswählen. |
| Geschlecht | Filtert nach Geschlecht. Mehrfachauswahl möglich. |
| Typ | Filtert nach Kontakttyp (Person, Organisation, Ehepaar). Mehrfachauswahl möglich. |
| Postweg gesperrt | Filtert danach, ob der Postweg gesperrt ist (Ja, Nein oder Alle). |

Deine gewählten Filter, Sortierungen und Spaltensuchen werden in deiner Sitzung gespeichert und bleiben beim Seitenwechsel innerhalb der Anwendung erhalten.

## Paginierung der Kontakte-Tabelle

Du kannst die Anzahl der angezeigten Kontakte pro Seite in der Kontakte-Tabelle anpassen. Verfügbare Optionen sind: 5, 10, 25, 50, 100 oder 200 Einträge pro Seite. Die Auswahl findest du unterhalb der Tabelle.

## Aktionen in der Kontakte-Tabelle

### Zeilenaktionen

Für jeden einzelnen Kontakt in der Tabelle stehen dir folgende Aktionen zur Verfügung:

| Aktion | Beschreibung |
|---|---|
| **Kontakt ansehen** | Öffnet die Übersichtsseite des Kontakts mit allen Details. |
| **Kontakt bearbeiten** | Öffnet das Bearbeitungsformular, in dem du die Daten des Kontakts ändern kannst. |

### Kopfzeilen-Aktionen

| Aktion | Beschreibung |
|---|---|
| **Export** | Exportiert die aktuell in der Kontakte-Tabelle angezeigten Kontakte als Excel-Datei. |

### Massenaktionen (Bulk-Aktionen)

Über die Kontrollkästchen links in der Kontakte-Tabelle kannst du mehrere Kontakte gleichzeitig auswählen und dann folgende Aktionen ausführen:

| Aktion | Beschreibung |
|---|---|
| **Zu Segment hinzufügen** | Fügt die ausgewählten Kontakte einem oder mehreren Segmenten hinzu. Nach dem Klick öffnet sich ein Dialog, in dem du das gewünschte Segment auswählen kannst. |
| **Aus Segment entfernen** | Entfernt die ausgewählten Kontakte aus einem oder mehreren Segmenten. Nach dem Klick öffnet sich ein Dialog zur Auswahl des Segments. |
| **Zu Newsletter-Liste hinzufügen** | Fügt die ausgewählten Kontakte einer Newsletter-Liste hinzu. |
| **Löschen** | Löscht die ausgewählten Kontakte. Vor dem Löschen wird ein Bestätigungsdialog angezeigt. Details zum Löschverhalten findest du im nächsten Abschnitt. |

## Kontakte löschen – Hinweise und Sonderfälle

Beim Löschen von Kontakten über die Massenaktion in der Kontakte-Tabelle gelten folgende Regeln:

- **Bestätigungsdialog**: Vor dem endgültigen Löschen erscheint immer ein Bestätigungsdialog. Dieser zeigt dir an, welche Kontakte nicht gelöscht werden können.
- **Ehepaare**: Wenn du ein Ehepaar zum Löschen auswählst, werden automatisch auch die zugehörigen Partner gelöscht (sofern diese ebenfalls löschbar sind). Wenn mindestens ein Partner nicht gelöscht werden kann, wird das gesamte Ehepaar übersprungen.
- **Einzelne Partner eines Ehepaars**: Einzelne Personen, die zu einem Ehepaar gehören, können nicht separat über die Massenaktion gelöscht werden. Wähle stattdessen das Ehepaar selbst zum Löschen aus.
- **Nicht löschbare Kontakte**: Kontakte, die nicht gelöscht werden können, werden im Bestätigungsdialog mit einer Begründung aufgelistet und beim Löschvorgang übersprungen.
- **Große Mengen**: Wenn du 100 oder mehr Kontakte zum Löschen auswählst, wird der Löschvorgang im Hintergrund ausgeführt. Du erhältst eine Benachrichtigung, sobald der Vorgang abgeschlossen ist. Während der Hintergrundverarbeitung kannst du normal weiterarbeiten.

## Berechtigungen für die Kontakte-Tabelle

Um die Kontakte-Tabelle nutzen zu können, müssen folgende Voraussetzungen erfüllt sein:

- Das Tool **Kontakte** muss für den Benutzer aktiviert sein.
- Der Benutzer muss Zugriff auf alle Projekte haben.

## Zusammenhänge und verknüpfte Bereiche

Die Kontakte-Tabelle steht in Verbindung mit verschiedenen anderen Bereichen der Anwendung:

- **Segmente**: Kontakte können Segmenten zugeordnet werden. In der Kontakte-Tabelle kannst du über die Segment-Spalte oder den Segment-Filter gezielt nach Segmenten filtern.
- **Newsletter-Listen**: Kontakte können Newsletter-Listen abonnieren. Diese Funktion ist nur verfügbar, wenn das Tool **Newsletter** aktiviert ist.
- **Mitgliedschaft**: Mitgliedschaftsinformationen wie Status und Zeiträume werden in der Kontakte-Tabelle angezeigt, wenn das Tool **Mitglieder** aktiviert ist. In der Ansicht **Mitglieder** stehen zusätzliche Spalten und Filter zur Verfügung.
- **Spenden**: Die Spalte „Spenden" zeigt die Gesamtsumme aller dem Kontakt zugeordneten Spenden in der Organisationswährung an.
- **Anmerkungen**: Ein Klick auf die Anmerkungsspalte in der Kontakte-Tabelle führt direkt zur Anmerkungen-Seite des jeweiligen Kontakts.
- **Adressen**: Die Adressspalten (Straße, PLZ, Ort, Land) in der Kontakte-Tabelle zeigen immer die als aktiv markierte Adresse des Kontakts an.
- **Kontaktfelder-Einstellungen**: Einige Spalten der Kontakte-Tabelle sind nur sichtbar, wenn das entsprechende Feld in den Einstellungen unter **Kontakte → Felder** aktiviert ist. Dies betrifft: Rufname, Zweiter Vorname, Geburtsname, Sterbedatum, Sprache und Umsatzsteuer-ID.

---

## page: ManagePublicationRequests

**Entity:** ManagePublicationRequests  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/Personal/Resources/PublicationRequestResource/Pages/ManagePublicationRequests.php`  
**Updated:** 2026-02-14 20:13:36  

# Veröffentlichungs-Anfragen

## Übersicht

Auf der Seite **Veröffentlichungs-Anfragen** kannst du eigene Anfragen erstellen und verwalten, um Inhalte über verschiedene Kanäle wie Webseite, Newsletter oder Social Media veröffentlichen zu lassen. Die Seite zeigt ausschließlich deine eigenen Anfragen an – Anfragen anderer Benutzer sind hier nicht sichtbar.

Diese Seite befindet sich im **Persönlichen Bereich** der Anwendung.

## Navigation

Die Funktion **Veröffentlichungs-Anfragen** ist über den persönlichen Bereich unter dem gleichnamigen Menüpunkt erreichbar.

## Voraussetzungen

Damit die Seite **Veröffentlichungs-Anfragen** verfügbar ist, muss das Tool **Veröffentlichungs-Management** für deine Organisation aktiviert sein. Ist das Tool nicht aktiviert, erscheint der Menüpunkt nicht in der Navigation.

## Tabellenansicht / Listenansicht

Die Listenansicht der Veröffentlichungs-Anfragen zeigt folgende Spalten:

| Spalte | Beschreibung |
|--------|--------------|
| Datum | Das Erstellungsdatum der Veröffentlichungs-Anfrage |
| Status | Der aktuelle Bearbeitungsstatus: **Ausstehend**, **Genehmigt** oder **Abgelehnt** |
| Titel | Der Titel der Veröffentlichungs-Anfrage |

Es werden ausschließlich deine eigenen Veröffentlichungs-Anfragen angezeigt. Wenn du noch keine Anfragen erstellt hast, ist die Liste leer.

## Formularfelder

Das Formular zum Erstellen und Bearbeiten von Veröffentlichungs-Anfragen wird in einem großen Dialog angezeigt.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Titel | Textfeld | Ja | Der Titel der Veröffentlichungs-Anfrage |
| Text | Rich-Text-Editor | Ja | Der Inhalt, der veröffentlicht werden soll |
| Anhänge | Datei-Upload | Nein | Dateien, die der Anfrage beigefügt werden sollen (mehrere Dateien möglich) |
| Kanäle – gewünscht | Mehrfachauswahl | Nein | Die Kanäle, über die du die Veröffentlichung wünschst. Die verfügbaren Optionen hängen von den aktivierten Tools ab (siehe unten) |
| Kanäle – genehmigt | Mehrfachauswahl | Nein | Die Kanäle, über die die Anfrage tatsächlich veröffentlicht wird. Dieses Feld ist nur im Verwaltungsbereich sichtbar |
| Start | Datumsauswahl | Nein | Das gewünschte Startdatum, ab dem der Inhalt veröffentlicht werden soll |
| Ende | Datumsauswahl | Nein | Das gewünschte Enddatum, bis zu dem der Inhalt veröffentlicht bleiben soll |

### Feldgruppen

- Die Felder **Kanäle – gewünscht** und **Kanäle – genehmigt** sind in der Gruppe **Veröffentlichungskanäle** zusammengefasst.
- Die Felder **Start** und **Ende** sind in der Gruppe **Veröffentlichungs-Datum** zusammengefasst.

### Verfügbare Kanaloptionen

Welche Kanäle zur Auswahl stehen, hängt davon ab, welche Tools für deine Organisation aktiviert sind:

- **Webseite** – nur sichtbar, wenn das Tool **Webseite** aktiviert ist
- **Newsletter** – nur sichtbar, wenn das Tool **Newsletter** aktiviert ist
- **Social Media** – immer verfügbar

Wenn keines der optionalen Tools aktiviert ist, steht nur **Social Media** als Kanal zur Verfügung.

## Aktionen

### Veröffentlichungs-Anfrage erstellen

Über die Schaltfläche **Veröffentlichungs-Anfrage erstellen** im Seitenkopf kannst du eine neue Anfrage anlegen. Nach dem Ausfüllen und Absenden des Formulars wird die Veröffentlichungs-Anfrage gespeichert. Der Status wird automatisch auf **Ausstehend** gesetzt, und du wirst als zugehöriger Kontakt hinterlegt. Die neue Anfrage erscheint anschließend in deiner Listenansicht.

### Veröffentlichungs-Anfrage bearbeiten

Jede Veröffentlichungs-Anfrage kann über die Bearbeiten-Aktion in der jeweiligen Tabellenzeile geöffnet und geändert werden. Nach dem Speichern werden die Änderungen übernommen.

### Veröffentlichungs-Anfrage löschen

Einzelne Veröffentlichungs-Anfragen können über die Löschen-Aktion in der Tabellenzeile entfernt werden. Zusätzlich kannst du über die Massenauswahl mehrere Veröffentlichungs-Anfragen gleichzeitig auswählen und löschen.

## Validierung & Fehlermeldungen

Beim Erstellen oder Bearbeiten einer Veröffentlichungs-Anfrage gelten folgende Validierungsregeln:

| Feld | Fehlermeldung | Lösung |
|------|---------------|--------|
| Titel | Pflichtfeld – darf nicht leer sein | Gib einen aussagekräftigen Titel für deine Veröffentlichungs-Anfrage ein |
| Text | Pflichtfeld – darf nicht leer sein | Gib den Inhalt ein, der veröffentlicht werden soll |

Das Formular kann erst gespeichert werden, wenn alle Pflichtfelder korrekt ausgefüllt sind.

## Beziehungen

- Jede Veröffentlichungs-Anfrage ist mit deinem **Kontakt** verknüpft. Dadurch wird sichergestellt, dass nur du deine eigenen Anfragen siehst und bearbeitest.
- Im **Verwaltungsbereich** existiert eine übergreifende Übersicht aller Veröffentlichungs-Anfragen (nicht nur der eigenen). Diese ist für Benutzer mit Zugang zum Verwaltungsbereich einsehbar und ermöglicht die Genehmigung oder Ablehnung von Anfragen.

---

## page: ManageEventAssignments

**Entity:** ManageEventAssignments  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/Personal/Resources/EventAssignmentResource/Pages/ManageEventAssignments.php`  
**Updated:** 2026-02-14 20:10:16  

# Diensteinteilungen (Persönlicher Bereich)

## Übersicht

Auf der Seite **Diensteinteilungen** im persönlichen Bereich siehst du alle Dienste, für die du bei Veranstaltungen eingeteilt bist. Die Liste enthält sowohl Einteilungen, die dir direkt zugewiesen wurden, als auch solche, die über deine Teamzugehörigkeit bestehen. Es werden Veranstaltungen ab 10 Tagen in der Vergangenheit angezeigt – ältere Einteilungen sind hier nicht mehr sichtbar.

## Navigation

Die Seite **Diensteinteilungen** befindet sich im **Persönlichen Bereich** der Anwendung.

## Voraussetzungen

Damit die Seite **Diensteinteilungen** verfügbar ist, muss das Tool **Veranstaltungen** für deine Organisation aktiviert sein.

## Tabellenansicht

Die Liste der Diensteinteilungen zeigt folgende Spalten:

| Spalte | Beschreibung | Sortierbar |
|--------|-------------|------------|
| Datum | Datum und Uhrzeit der Veranstaltung | Ja |
| Veranstaltung | Name der Veranstaltung | Ja |
| Dienst | Name des zugewiesenen Dienstes | Ja |

Die Standardsortierung erfolgt nach dem Veranstaltungsdatum. Du kannst die Sortierung ändern, indem du auf die jeweilige Spaltenüberschrift klickst.

## Aktionen

Für jede Diensteinteilung stehen folgende Aktionen zur Verfügung:

| Aktion | Beschreibung |
|--------|-------------|
| **Veranstaltung anzeigen** (Augen-Icon) | Öffnet die öffentliche Seite der Veranstaltung in einem neuen Browser-Tab. |
| **Veranstaltung planen** | Öffnet die Programmplanung der Veranstaltung in einem neuen Browser-Tab. Diese Aktion ist nur sichtbar, wenn du für die Veranstaltung verantwortlich bist **und** die Veranstaltung die Planungsfunktion nutzt. |

## Beziehungen und Hintergrund

- **Veranstaltungen**: Jede Diensteinteilung auf dieser Seite ist mit einer konkreten Veranstaltung verknüpft.
- **Dienste**: Jede Einteilung bezieht sich auf einen bestimmten Dienst innerhalb der Veranstaltung.
- **Teams**: Diensteinteilungen können auch über deine Teamzugehörigkeit (Team-Segmente) entstehen, nicht nur über eine direkte persönliche Zuweisung. Wenn dein Team einem Dienst zugewiesen ist, erscheint dieser ebenfalls in deiner Liste.

---

## page: Forms

**Entity:** Forms  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/WebsiteResource/Pages/Traits/Forms.php`  
**Updated:** 2026-02-14 19:40:13  

# Formulare auf Webseiten-Seiten

## Übersicht

Jede Seite deiner Webseite verfügt über eigene Seiteneinstellungen, in denen du Name, Design, Veröffentlichung und Formulareinstellungen konfigurieren kannst. Wenn eine Seite ein Formular enthält, kannst du hier festlegen, welcher Text nach dem Absenden angezeigt wird und wer per E-Mail über neue Formulareinsendungen benachrichtigt wird. Zusätzlich lassen sich Impressums-Angaben und die Sprachauswahl für mehrsprachige Webseiten verwalten.

## Navigation

Die Seiteneinstellungen erreichst du im Webseiten-Editor, indem du eine einzelne Seite zur Bearbeitung auswählst. Innerhalb der Seiteneinstellungen wechselst du über Tabs zwischen **Grundeinstellungen**, **Design**, **Veröffentlichung** und **Formulare**.

## Sprachauswahl

Wenn deine Webseite mehrsprachig eingerichtet ist, steht dir in den Seiteneinstellungen eine Sprachumschaltung zur Verfügung. Damit kannst du zwischen den konfigurierten Sprachen wechseln (z. B. DE, EN, FR) und die Inhalte der jeweiligen Sprache bearbeiten.

## Ansichtsmodus

In den Seiteneinstellungen kannst du zwischen verschiedenen Ansichtsmodi wechseln:

| Modus | Beschreibung |
|-------|-------------|
| Bearbeiten | Du bearbeitest die Inhalte der Seite direkt. |
| Vorschau | Du siehst eine Vorschau der Seite, wie sie für Besucher aussehen wird – ohne dass Änderungen veröffentlicht werden. |
| Live-Ansicht | Du siehst die aktuell veröffentlichte Version der Seite. Dieser Modus ist nur verfügbar, wenn die Seite bereits veröffentlicht ist. |

Bei bestimmten Spezialseiten (z. B. automatisch generierten Seiten, die nicht editierbar sind) sind Vorschau und Live-Ansicht nicht verfügbar.

## Tab: Grundeinstellungen

In den Grundeinstellungen der Seiteneinstellungen legst du den Namen der Seite fest.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|-------------|
| Name | Textfeld (übersetzbar) | Ja | Der Name der Seite. Bei mehrsprachigen Webseiten kannst du pro Sprache einen eigenen Namen angeben. |

## Tab: Design

Im Design-Tab der Seiteneinstellungen kannst du das Erscheinungsbild der Seite anpassen.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|-------------|
| Transparentes Menü | Checkbox | Nein | Wenn du diese Option aktivierst, wird das obere Navigationsmenü transparent dargestellt und der Seiteninhalt rutscht darunter. |

## Tab: Veröffentlichung

Im Veröffentlichungs-Tab der Seiteneinstellungen steuerst du, ob und wann eine Seite für Besucher sichtbar ist. Dieser Tab ist **nicht** für die Startseite verfügbar, da die Startseite immer veröffentlicht ist.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|-------------|
| Ist veröffentlicht | Schalter | Nein | Legt fest, ob die Seite veröffentlicht ist. Der Schalter zeigt **grün** an, wenn die Seite sofort online ist (kein Veröffentlichungszeitpunkt gesetzt oder Zeitpunkt liegt in der Vergangenheit). Er zeigt **orange** an, wenn ein zukünftiger Veröffentlichungszeitpunkt gesetzt ist. Dieser Schalter ist ebenfalls nicht für die Startseite verfügbar. |
| Veröffentlichung ab | Datum/Uhrzeit | Nein | Dieses Feld erscheint nur, wenn „Ist veröffentlicht" aktiviert ist. Hier kannst du einen Zeitpunkt festlegen, ab dem die Seite online geht. Sekunden werden nicht angezeigt. |

## Tab: Formulare

Der Formulare-Tab in den Seiteneinstellungen ist nur sichtbar, wenn die betreffende Seite ein Formular enthält (erkannt anhand eines `<form`-Tags im Entwurfs-HTML). Hier konfigurierst du, was nach dem Absenden eines Formulars passiert und wer über neue Einsendungen informiert wird.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|-------------|
| Text nach Absenden | Rich-Text-Editor (übersetzbar) | Nein | Der Text, der Besuchern nach dem erfolgreichen Absenden des Formulars angezeigt wird (z. B. eine Dankesnachricht oder Bestätigung). Bei mehrsprachigen Webseiten kannst du pro Sprache einen eigenen Text hinterlegen. |
| Empfänger | Liste von E-Mail-Adressen | Ja (pro Eintrag) | E-Mail-Adressen der Personen, die bei jeder neuen Formulareinsendung per E-Mail benachrichtigt werden. Du kannst mehrere Empfänger hinzufügen. Jede eingetragene E-Mail-Adresse muss ein gültiges Format haben. Die Liste ist nicht umsortierbar. |

**Mögliche Validierungsfehler:**
- **„E-Mail-Adresse ist ungültig"** – Überprüfe, ob die eingetragene E-Mail-Adresse korrekt geschrieben ist (z. B. `name@beispiel.de`).
- **„Empfänger ist erforderlich"** – Jeder Eintrag in der Empfängerliste muss eine E-Mail-Adresse enthalten.

## Impressums-Einstellungen

In den Seiteneinstellungen kannst du Angaben für das Impressum deiner Webseite hinterlegen.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|-------------|
| Verantwortlich im Sinne des Medienstaatsvertrags (MStV) | Textfeld | Nein | Hier trägst du die Person ein, die für die Inhalte der Webseite verantwortlich ist. Diese Person muss vertretungsberechtigt (z. B. Vorstandsmitglied) sein. Gib den vollständigen Namen und die Anschrift an. |

## Beziehungen zu anderen Bereichen

- Die Seiteneinstellungen gehören zur **Webseite** und werden im Webseiten-Editor bearbeitet.
- Formulare auf Seiten erzeugen **Abgeschickte Formulare**, die du im gleichnamigen Bereich einsehen kannst.
- Die Impressums-Einstellungen wirken sich auf die **Impressums-Seite** deiner Webseite aus.
- Der Veröffentlichungs-Tab ist für die **Startseite** nicht verfügbar, da diese immer veröffentlicht bleibt.

---

## page: Actions

**Entity:** Actions  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/WebsiteResource/Pages/Traits/Actions.php`  
**Updated:** 2026-02-14 19:38:39  

# Webseite – Aktionen und Einstellungen

## Übersicht

Die Aktionsleiste der Webseite bietet Zugriff auf die wichtigsten Funktionen: Statistiken einsehen, DNS-Einstellungen prüfen, allgemeine Webseiten-Einstellungen konfigurieren, Vorlagen importieren und eine Vorschau der Seite öffnen. Über diese Aktionen werden das Erscheinungsbild, die Sprachen, das Logo und der Wartungsmodus der Webseite zentral verwaltet.

Die Aktionen befinden sich als Schaltflächen in der Kopfzeile der Webseiten-Bearbeitungsseite. Sie sind sichtbar, wenn du eine bestehende Webseite bearbeitest.

## Statistiken

Über die Schaltfläche **Statistiken** in der Aktionsleiste der Webseite öffnet sich ein seitliches Fenster mit Statistiken zur Webseite. Die Ansicht ist nur lesbar – du kannst hier keine Änderungen vornehmen, sondern dir lediglich einen Überblick über die Nutzungsdaten verschaffen.

## DNS-Einstellungen

Die Schaltfläche **DNS Einstellungen** in der Aktionsleiste der Webseite ist nur sichtbar, wenn eine externe Domain konfiguriert wurde, diese aber noch nicht für die Webseite aktiviert ist. Ein Klick leitet dich zur Domain-Einstellungsseite weiter, auf der du die DNS-Konfiguration vornehmen kannst.

Wenn keine externe Domain hinterlegt ist oder die Domain bereits korrekt aktiviert wurde, wird diese Schaltfläche nicht angezeigt.

## Einstellungen

Über die Schaltfläche **Einstellungen** in der Aktionsleiste der Webseite öffnet sich ein umfangreiches Dialogfenster mit vier Reitern: Grundeinstellungen, Logo, Design und Wartungsmodus. Änderungen in den Einstellungen werden erst durch Klick auf **Speichern** übernommen.

### Reiter „Grundeinstellungen"

Im Reiter „Grundeinstellungen" der Webseiten-Einstellungen legst du die grundlegenden Informationen deiner Webseite fest.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Homepage-Titel | Textfeld | Nein | Der Titel deiner Webseite, der unter anderem im Browser-Tab angezeigt wird. |
| Beschreibung | Textfeld | Nein | Eine kurze Beschreibung deiner Webseite, die z. B. in Suchergebnissen erscheinen kann. |
| Sprachen | Mehrfachauswahl | Ja (mind. 1) | Die verfügbaren Sprachen deiner Webseite (z. B. Deutsch, Englisch, Französisch). Es muss mindestens eine Sprache ausgewählt sein. |

**Mögliche Validierungsfehler:**

- *Mindestens eine Sprache muss ausgewählt sein:* Stelle sicher, dass du mindestens eine Sprache in der Mehrfachauswahl aktiviert hast. Ohne eine ausgewählte Sprache kann die Webseite nicht gespeichert werden.

### Reiter „Logo"

Im Reiter „Logo" der Webseiten-Einstellungen verwaltest du das Favicon und das Hauptlogo deiner Webseite.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Favicon | Bild-Upload | Nein | Das kleine Symbol, das im Browser-Tab neben dem Seitentitel angezeigt wird. Du kannst das Bild nach dem Hochladen mit dem integrierten Bildeditor bearbeiten (z. B. zuschneiden). |
| Logo | Bild-Upload | Nein | Das Hauptlogo deiner Webseite, das z. B. in der Menüleiste angezeigt wird. Auch dieses Bild kann mit dem Bildeditor bearbeitet werden. |
| Größe | Auswahl | Nein | Die maximale Höhe des Logos auf der Webseite. Verfügbare Optionen: Sehr klein, Klein, Standard, Groß, Größer, Sehr groß, Riesig. |

### Reiter „Design"

Im Reiter „Design" der Webseiten-Einstellungen passt du das visuelle Erscheinungsbild deiner Webseite an. Der Reiter ist in mehrere Bereiche unterteilt.

#### Bereich „Allgemein"

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Breite des Inhalts | Textfeld | Ja | Die maximale Breite des Seiteninhalts. Du kannst einen Wert in Pixeln (z. B. „500px") oder in Prozent (z. B. „50%") angeben. |

**Mögliche Validierungsfehler:**

- *Breite des Inhalts ist erforderlich:* Dieses Feld darf nicht leer sein. Trage einen gültigen Wert ein, z. B. „1200px" oder „80%".

#### Bereich „Schrift"

Hier legst du die Schriftart und -stärke für den Fließtext deiner Webseite fest.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Schriftart | Auswahl | Nein | Die Schriftart für den Fließtext. Es wird eine Vorschau der verfügbaren Schriften angezeigt, sodass du das Ergebnis vorab sehen kannst. |
| Schriftstärke | Auswahl | Nein | Die Stärke der Schrift (z. B. Dünn, Leicht, Normal, Fett). Die verfügbaren Optionen hängen von der gewählten Schriftart ab – nicht jede Schriftart unterstützt alle Stärken. |

#### Bereich „Menüleiste"

Hier gestaltest du das Aussehen der Menüleiste deiner Webseite.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Schriftart | Auswahl | Nein | Die Schriftart für die Menüleiste. |
| Schriftstärke | Auswahl | Nein | Die Schriftstärke für die Menüleiste. Die verfügbaren Optionen hängen von der gewählten Schriftart ab. |
| Schriftgröße | Auswahl | Nein | Die Textgröße in der Menüleiste. Optionen: Sehr klein, Klein, Standard, Groß, Größer, Sehr groß, Riesig. |
| Farbe | Farbauswahl | Ja | Die Farbe der Menüleiste. |

**Mögliche Validierungsfehler:**

- *Farbe ist erforderlich:* Wähle eine Farbe für die Menüleiste aus. Dieses Feld ist ein Pflichtfeld.

#### Bereich „Farben"

Hier definierst du das Farbschema deiner Webseite.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Hauptfarbe | Farbauswahl | Ja | Die primäre Farbe deiner Webseite. Wenn du diese änderst, wird das gesamte Farbschema automatisch aktualisiert. |
| Textfarbe | Farbauswahl | Ja | Die Standardfarbe für Texte auf deiner Webseite. |
| Hintergrundfarbe | Farbauswahl | Ja | Die Hintergrundfarbe deiner Webseite. |

**Hinweis:** Die Hauptfarbe beeinflusst das gesamte Farbschema. Wenn du sie änderst, passen sich andere Farbelemente automatisch an.

#### Bereich „Links"

Hier steuerst du, wie Links auf deiner Webseite dargestellt werden.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Farbe | Farbauswahl | Ja | Die Standardfarbe von Links auf deiner Webseite. |
| Hover-Farbe | Farbauswahl | Ja | Die Farbe, die Links annehmen, wenn du mit der Maus darüber fährst. |
| Unterstreichen | Schalter | Nein | Legt fest, ob Links dauerhaft unterstrichen dargestellt werden. |
| Hover-Effekt mit Unterstreichen | Schalter | Nein | Legt fest, ob Links nur beim Darüberfahren mit der Maus unterstrichen werden. |

### Reiter „Wartungsmodus"

Im Reiter „Wartungsmodus" der Webseiten-Einstellungen kannst du deine Webseite vorübergehend für Besucher sperren, z. B. wenn du umfangreiche Änderungen vornimmst.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Aktiviert | Checkbox | Nein | Aktiviert den Wartungsmodus. Wenn aktiv, sehen Besucher nur den Wartungstext statt der normalen Webseite. |
| Text | Rich-Text-Editor | Nein | Der Text, der Besuchern während des Wartungsmodus angezeigt wird. Hier kannst du z. B. erklären, dass die Seite bald wieder verfügbar ist. |

## Vorlage importieren

Über die Schaltfläche **Vorlage importieren...** in der Aktionsleiste der Webseite kannst du eine vorgefertigte Vorlage in deine Webseite laden. Damit lassen sich schnell neue Seiten und Strukturen übernehmen.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Vorlage | Auswahl | Ja | Eine der verfügbaren aktiven Vorlagen. Nach Auswahl wird eine Beschreibung der Vorlage angezeigt, damit du weißt, welche Inhalte enthalten sind. |
| Seitenauswahl | Schalter (pro Seite) | Nein | Nach Auswahl einer Vorlage werden alle enthaltenen Seiten angezeigt, unterteilt in drei Bereiche: **Mit Menüeintrag**, **Ohne Menüeintrag** und **Spezialseiten**. Du kannst jede Seite einzeln ein- oder ausschalten. Unterseiten werden eingerückt dargestellt, damit die Seitenhierarchie erkennbar ist. |

Beim Import werden die ausgewählten Seiten der Vorlage in deine bestehende Webseite übernommen.

**Mögliche Validierungsfehler:**

- *Vorlage ist erforderlich:* Wähle eine Vorlage aus der Liste aus, bevor du den Import startest.

## Vorschau

Die Schaltfläche **Vorschau** in der Aktionsleiste der Webseite öffnet die aktuelle Seite in einem neuen Browserfenster.

## Veröffentlichung

Über die Veröffentlichungs-Aktion kannst du einen Zeitpunkt festlegen, zu dem Änderungen automatisch veröffentlicht werden. Das ist nützlich, wenn du Inhalte vorbereiten und zu einem bestimmten Zeitpunkt live schalten möchtest.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Neue Inhalte automatisch veröffentlichen ab | Datum und Uhrzeit | Nein | Der Zeitpunkt, ab dem die Änderungen auf der Webseite für Besucher sichtbar werden. Der Zeitpunkt muss mindestens 5 Minuten in der Zukunft liegen. |

**Mögliche Validierungsfehler:**

- *Der Zeitpunkt muss mindestens 5 Minuten in der Zukunft liegen:* Wähle einen Zeitpunkt, der mindestens 5 Minuten nach der aktuellen Uhrzeit liegt.

## Beziehungen zu anderen Bereichen

- **Domains**: Die Schaltfläche „DNS-Einstellungen" in der Aktionsleiste der Webseite verlinkt zur Domain-Konfigurationsseite unter den Organisationseinstellungen, wo du die DNS-Einträge für deine externe Domain verwalten kannst.
- **Schriftarten**: Die Design-Einstellungen der Webseite verwenden die Schriftarten, die für deine Organisation verfügbar sind.
- **Vorlagen**: Der Vorlagen-Import der Webseite greift auf zentral verwaltete Webseiten-Vorlagen zu, die von Administratoren bereitgestellt werden.
- **Seiten**: Die Webseite besteht aus einzelnen Seiten, die beim Vorlagen-Import ausgewählt und über die Veröffentlichungs-Funktion zeitgesteuert werden können.

---

## page: ListWebsites

**Entity:** ListWebsites  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/WebsiteResource/Pages/ListWebsites.php`  
**Updated:** 2026-02-14 19:36:01  

# Webseiten

## Übersicht

Die Seite **Webseiten** zeigt eine Übersicht aller Webseiten deiner Organisation. Du kannst hier neue Webseiten erstellen oder bestehende bearbeiten. Je nachdem, wie viele Webseiten vorhanden sind, verhält sich die Seite unterschiedlich (siehe Abschnitt „Besonderes Verhalten").

## Navigation

Die Webseiten-Übersicht findest du in der Seitenleiste im Bereich **Kommunikation** unter dem Eintrag **Webseite** (bzw. **Webseiten**, wenn mehr als eine Webseite vorhanden ist).

## Besonderes Verhalten

Die Seite **Webseiten** passt sich automatisch an die Anzahl vorhandener Webseiten an:

- **Keine Webseite vorhanden**: Du wirst automatisch zur Seite weitergeleitet, auf der du eine neue Webseite erstellen kannst.
- **Genau eine Webseite vorhanden**: Du wirst automatisch zur Bearbeitungsseite dieser Webseite weitergeleitet. Die Listenansicht wird in diesem Fall übersprungen.
- **Mehr als eine Webseite vorhanden**: Die Listenansicht wird angezeigt und du siehst alle Webseiten in einer Tabelle.

## Tabellenansicht / Listenansicht

Die Webseiten-Listenansicht zeigt dir alle vorhandenen Webseiten in einer Tabelle. Sie wird nur angezeigt, wenn mehr als eine Webseite existiert.

| Spalte | Beschreibung |
|--------|-------------|
| Name | Der Name der Webseite |

## Aktionen

Auf der Webseiten-Übersichtsseite stehen dir folgende Aktionen zur Verfügung:

- **Webseite erstellen**: Über die Schaltfläche in der Kopfzeile kannst du eine neue Webseite anlegen.
- **Bearbeiten**: Über das Bearbeiten-Symbol in der jeweiligen Tabellenzeile gelangst du zur Bearbeitungsseite der ausgewählten Webseite.
- **Löschen (Massenaktionen)**: Du kannst über die Checkboxen in der Tabelle mehrere Webseiten auswählen und diese gesammelt löschen.

## Berechtigungen

Um auf die Webseiten-Verwaltung zugreifen zu können, müssen folgende Voraussetzungen erfüllt sein:

- Das Tool **Webseite** muss für deine Organisation aktiviert sein.

Ist das Tool nicht aktiviert, erscheint der Menüpunkt **Webseiten** nicht in der Seitenleiste.

---

## page: EditWebsite

**Entity:** EditWebsite  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/WebsiteResource/Pages/EditWebsite.php`  
**Updated:** 2026-02-14 19:35:22  

# Webseite bearbeiten

## Übersicht

Auf der Seite „Webseite bearbeiten" gestaltest du deine Webseite mit einem visuellen Drag-&-Drop-Editor. Du kannst Seiteninhalte erstellen und anpassen, Seiten verwalten, das Design konfigurieren und Inhalte veröffentlichen. Links findest du eine Seitenleiste zur Navigation zwischen den einzelnen Seiten deiner Webseite, oben eine Kopfleiste mit Einstellungen, Vorschau-Optionen und dem Veröffentlichungsstatus.

## Navigation

- Seitenleiste → **Kommunikation** → **Webseite** (bzw. **Webseiten**, falls mehrere vorhanden)
- In der Listenansicht eine bestehende Webseite anklicken, um in den Editor zu gelangen

## Aufbau des Webseiten-Editors

### Seitenleiste (links)

Die Seitenleiste zeigt die Seitenstruktur deiner Webseite in mehreren Bereichen:

- **Mit Menüeintrag**: Alle Seiten, die in der Navigation deiner Webseite sichtbar sind. Die erste Seite ist immer die Startseite (Home) und kann nicht verschoben werden. Unterseiten können per Drag & Drop umsortiert werden.
- **Ohne Menüeintrag**: Seiten, die existieren, aber nicht im Navigationsmenü der Webseite angezeigt werden. Diese Seiten sind nur über direkte Links erreichbar – zum Beispiel für Landingpages oder interne Informationsseiten.
- **Spezialseiten**: Automatisch generierte Seiten wie **Datenschutz** und **Impressum**, deren Inhalt vom System erstellt wird. Diese Seiten können nicht gelöscht oder umbenannt werden.
- **Footer**: Der Fußbereich deiner Webseite, der auf allen Seiten angezeigt wird.

### Hauptbereich (rechts)

Der visuelle Drag-&-Drop-Editor zum Gestalten der aktuell ausgewählten Seite. Klicke in der Seitenleiste auf eine Seite, um sie im Hauptbereich zu bearbeiten.

## Ansichtsmodi der Webseite

Über eine Umschaltung in der Kopfleiste kannst du zwischen folgenden Modi wechseln:

| Modus | Beschreibung |
|---|---|
| **Bearbeiten** | Der Bearbeitungsmodus mit dem visuellen Drag-&-Drop-Editor. Hier nimmst du Änderungen an Inhalten und Layout vor. |
| **Vorschau** | Zeigt eine Vorschau der aktuellen, noch unveröffentlichten Änderungen. Du siehst hier, wie die Seite nach einer Veröffentlichung aussehen wird. |
| **Live-Ansicht** | Zeigt die Seite so, wie Besucher sie im Internet momentan tatsächlich sehen – also nur bereits veröffentlichte Inhalte. |

## Seitenverwaltung

### Neue Hauptseite anlegen

Im Bereich „Mit Menüeintrag" in der Seitenleiste gibt es ein Eingabefeld, in das du den Namen einer neuen Seite eingeben kannst. Bestätige die Eingabe, um die Seite zu erstellen. Die neue Seite wird sofort angelegt, in der Seitenleiste angezeigt und im Editor zum Bearbeiten geöffnet.

### Neue Unterseite anlegen

Unter jeder bestehenden Hauptseite im Bereich „Mit Menüeintrag" befindet sich ein Eingabefeld „Neue Unterseite". Gib dort den Namen ein und bestätige, um eine Unterseite unter der jeweiligen Hauptseite zu erstellen. Die Unterseite erscheint in der Navigation der Webseite eingerückt unter der übergeordneten Seite.

### Neue nicht im Menü sichtbare Seite anlegen

Im Bereich „Ohne Menüeintrag" in der Seitenleiste kannst du über das Eingabefeld eine neue Seite anlegen, die nicht in der Navigation erscheint. Diese Seiten sind nur über direkte Links erreichbar und eignen sich z. B. für Landingpages.

### Seiten umsortieren

Seiten innerhalb der Bereiche „Mit Menüeintrag" und „Ohne Menüeintrag" können per Drag & Drop umsortiert werden. Ziehe eine Seite an die gewünschte Position. Dabei gelten folgende Regeln:

- Die Startseite (Home) steht immer an erster Stelle und kann nicht verschoben werden.
- Keine andere Seite kann an die erste Position (vor die Startseite) gesetzt werden.
- Seiten im Bereich „Ohne Menüeintrag" können keine Unterseiten haben.
- Seiten, die bereits eigene Unterseiten besitzen, können nicht zu Unterseiten einer anderen Seite gemacht werden.

### Seite löschen

Über das Papierkorb-Symbol neben jeder Seite in der Seitenleiste kann die Seite gelöscht werden. Vor dem Löschen wird eine Bestätigungsabfrage angezeigt. Beim Löschen werden auch alle zugehörigen Unterseiten und deren Inhalte entfernt. Spezialseiten (Datenschutz, Impressum) und die Startseite (Home) können nicht gelöscht werden.

### Seiteneinstellungen bearbeiten

Jede Seite in der Seitenleiste hat ein Zahnrad-Symbol. Klicke darauf, um einen Dialog mit den Seiteneinstellungen zu öffnen. Hier kannst du den Namen, die Sichtbarkeit und weitere Optionen der Seite anpassen.

#### Seiteneinstellungen-Formular

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Name | Texteingabe (mehrsprachig) | Ja | Der Name der Seite, der in der Navigation deiner Webseite angezeigt wird. Muss für jede aktivierte Sprache ausgefüllt werden. |
| Transparentes Menü | Schalter | Nein | Wenn aktiviert, wird das obere Menü transparent dargestellt und der Seiteninhalt beginnt darunter. |
| Vertikalen Abstand zu vorherigem Element vermeiden | Schalter | Nein | Entfernt den Abstand zwischen dem Menü und dem Seiteninhalt, sodass der Inhalt direkt am Menü anschließt. |
| Ist veröffentlicht | Schalter | Nein | Legt fest, ob die Seite für Besucher deiner Webseite sichtbar ist. Wenn deaktiviert, ist die Seite nur im Editor sichtbar. |
| Veröffentlichung ab | Datum/Uhrzeit | Nein | Zeitpunkt, ab dem die Seite automatisch veröffentlicht und für Besucher sichtbar wird. |
| Neue Inhalte automatisch veröffentlichen ab | Datum/Uhrzeit | Nein | Zeitpunkt, ab dem neue Inhaltsänderungen an dieser Seite automatisch live geschaltet werden, ohne dass du manuell veröffentlichen musst. |

## Aktionen in der Kopfleiste

### Webseiten-Einstellungen

Über die Aktionsleiste oben rechts erreichst du verschiedene Einstellungsbereiche für deine Webseite.

#### Adresse

Hier konfigurierst du die Domain, unter der deine Webseite erreichbar ist.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Adresse | Texteingabe | Ja | Die Domain deiner Webseite (bitte ohne „www" eingeben) |

#### Sprachen

Hier legst du fest, in welchen Sprachen deine Webseite verfügbar sein soll. Wenn mehrere Sprachen aktiviert sind, müssen Inhalte für jede Sprache separat gepflegt werden.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Sprachen | Mehrfachauswahl | Ja | Die Sprachen, in denen deine Webseite verfügbar sein soll |

#### Design

Hier stellst du das allgemeine Erscheinungsbild deiner Webseite ein. Änderungen am Design wirken sich auf alle Seiten deiner Webseite aus.

| Feld | Typ | Beschreibung |
|---|---|---|
| Schriftart | Auswahl | Die Schriftart, die auf der gesamten Webseite verwendet wird |
| Hauptfarbe | Farbwähler | Die Primärfarbe deiner Webseite (wird z. B. für Buttons und Hervorhebungen verwendet) |
| Breite des Inhalts | Texteingabe | Maximale Breite des Inhaltsbereichs (z. B. „500px" oder „50%") |
| Textfarbe | Farbwähler | Die Standardfarbe für Texte auf deiner Webseite |
| Hintergrundfarbe | Farbwähler | Die Hintergrundfarbe deiner Webseite |

##### Links-Einstellungen (im Design-Bereich)

Hier passt du das Aussehen von Links auf deiner Webseite an.

| Feld | Typ | Beschreibung |
|---|---|---|
| Farbe | Farbwähler | Farbe der Links auf deiner Webseite |
| Hover-Farbe | Farbwähler | Farbe, die angezeigt wird, wenn die Maus über einen Link bewegt wird |
| Unterstreichen | Schalter | Ob Links standardmäßig unterstrichen dargestellt werden |
| Hover-Effekt mit Unterstreichen | Schalter | Ob Links erst beim Darüberfahren mit der Maus unterstrichen werden |

#### Logo

Hier lädst du das Logo für deine Webseite hoch. Das Logo wird in der Menüleiste deiner Webseite angezeigt.

| Feld | Typ | Beschreibung |
|---|---|---|
| Logo | Bild-Upload | Das Logo, das in der Menüleiste deiner Webseite angezeigt wird. |

#### Menüleiste

Hier passt du das Aussehen der Navigationsleiste deiner Webseite an.

| Feld | Typ | Beschreibung |
|---|---|---|
| Hintergrundfarbe | Farbwähler | Hintergrundfarbe der Menüleiste |
| Textfarbe | Farbwähler | Farbe der Menüeinträge in der Navigationsleiste |

#### Footer

Hier passt du das Aussehen des Fußbereichs deiner Webseite an. Der Footer wird auf allen Seiten unten angezeigt.

| Feld | Typ | Beschreibung |
|---|---|---|
| Hintergrundfarbe | Farbwähler | Hintergrundfarbe des Footers |
| Textfarbe | Farbwähler | Textfarbe im Footer |

#### Impressum-Einstellungen

Über die Impressum-Einstellungen konfigurierst du, welche Angaben im automatisch generierten Impressum deiner Webseite angezeigt werden. Falls erforderliche Organisationseinstellungen (z. B. Adresse, Registergericht, Rechtsform) noch nicht ausgefüllt sind, wird ein Hinweis angezeigt, damit du die fehlenden Daten in den Organisationseinstellungen ergänzen kannst.

| Feld | Typ | Beschreibung |
|---|---|---|
| Verantwortlich im Sinne des Medienstaatsvertrags (MStV) | Auswahl | Person, die im Impressum als inhaltlich Verantwortliche benannt wird. Zur Auswahl stehen nur Personen, die eine aktive Vorstandsmitgliedschaft haben. |

#### Wartungsmodus

Wenn der Wartungsmodus aktiviert ist, wird deine Webseite für Besucher nicht angezeigt. Nutze den Wartungsmodus z. B., wenn du größere Änderungen am Aufbau der Webseite vornimmst und die Webseite vorübergehend offline nehmen möchtest.

#### URL kopieren

Kopiert die Adresse (URL) deiner Webseite in die Zwischenablage, sodass du sie z. B. in eine E-Mail oder Nachricht einfügen kannst.

#### Vorschau-Link

Öffnet eine Vorschau deiner aktuellen Webseite in einem neuen Browserfenster.

## Veröffentlichung von Webseiten-Inhalten

Alle Änderungen am Inhalt deiner Webseite werden automatisch gespeichert, sind aber zunächst nur als Entwurf vorhanden. Damit die Änderungen für Besucher deiner Webseite sichtbar werden, musst du sie veröffentlichen.

- In der Kopfleiste zeigt ein Weltkugel-Symbol den Veröffentlichungsstatus an.
- Wenn es unveröffentlichte Änderungen gibt, wird das Weltkugel-Symbol farblich hervorgehoben. Klicke darauf, um die Änderungen zu veröffentlichen.
- Falls die Seite selbst noch nicht als veröffentlicht markiert war, wird sie beim Veröffentlichen automatisch online gestellt. Du erhältst dann den Hinweis: „Die Inhalte der Seite wurden bereits veröffentlicht. Die Seite selbst war jedoch noch nicht online – das haben wir direkt erledigt, sodass deine Nutzer sie nun sehen können."

## Mehrsprachigkeit der Webseite

Wenn für deine Webseite mehrere Sprachen aktiviert sind (siehe Webseiten-Einstellungen → Sprachen), kannst du über eine Sprachauswahl in der Kopfleiste zwischen den Sprachen wechseln. Die Inhalte werden pro Sprache separat bearbeitet und gespeichert. Jede Sprache hat ihren eigenen Inhaltsbereich – Änderungen in einer Sprache wirken sich nicht auf andere Sprachen aus. Der Seitenname muss für jede aktivierte Sprache angegeben werden.

## Spezialseiten der Webseite

### Datenschutz

Die Datenschutz-Seite deiner Webseite wird automatisch erstellt und gepflegt. Du musst dich um nichts kümmern – die Inhalte werden vom System generiert.

### Impressum

Das Impressum deiner Webseite wird automatisch erstellt. Die angezeigten Daten stammen aus den Organisationseinstellungen. Falls dort wichtige Angaben fehlen (z. B. Adresse, Registergericht, Registernummer, Rechtsform, Steuernummer), wirst du beim Öffnen der Impressum-Einstellungen darauf hingewiesen und kannst die fehlenden Daten direkt in den Organisationseinstellungen ergänzen.

## Berechtigungen

Das Tool **Webseite** muss aktiviert sein, damit der Menüpunkt sichtbar ist.

## Beziehungen zu anderen Bereichen

- **Organisationseinstellungen**: Die Daten für das automatisch generierte Impressum (z. B. Adresse, Registergericht, Registernummer, Rechtsform, Steuernummer) stammen aus den allgemeinen Organisationseinstellungen. Änderungen dort wirken sich auf das Impressum deiner Webseite aus.

---

## page: CreateWebsite

**Entity:** CreateWebsite  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/WebsiteResource/Pages/CreateWebsite.php`  
**Updated:** 2026-02-14 19:26:33  

# Webseite erstellen

## Übersicht

Auf der Seite **Webseite erstellen** legst du eine neue Webseite für deine Organisation an. Du wählst zunächst eine Domain (also die Internetadresse) für deine Webseite aus und entscheidest dann, ob du mit einem leeren Projekt oder mit Beispieldaten starten möchtest.

## Navigation

Die Seite **Webseite erstellen** erreichst du über den Bereich **Webseite** in der Seitenleiste unter der Gruppe **Kommunikation**. Klicke dort auf die Schaltfläche zum Erstellen einer neuen Webseite.

## Ablauf der Erstellung

Die Erstellung einer Webseite erfolgt in zwei Schritten:

### Schritt 1: Domain auswählen

Im ersten Schritt wählst du eine Domain (Internetadresse) für deine neue Webseite aus. Falls du dich noch nicht für eine Domain entscheiden möchtest, kannst du die Domain-Auswahl auch auf später verschieben und zunächst ohne eigene Domain starten.

### Schritt 2: Startvorlage wählen

Nachdem du eine Domain ausgewählt (oder die Auswahl übersprungen) hast, erscheint ein Dialog mit dem Titel **Wie möchtest du starten?** und der Frage: *Möchtest du deine Website auf Basis von Beispieldaten erstellen oder von Neuem beginnen?*

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Startvorlage | Auswahl (Radio) | Ja | Wähle zwischen „Mit einem leeren Projekt starten" oder „Mit Beispieldaten starten". Standardmäßig ist „Mit einem leeren Projekt starten" vorausgewählt. |

- **Mit einem leeren Projekt starten**: Deine Webseite wird ohne Inhalte erstellt. Du kannst anschließend alle Seiten und Inhalte selbst anlegen.
- **Mit Beispieldaten starten**: Deine Webseite wird mit vorbereiteten Beispielinhalten erstellt. Das ist hilfreich, wenn du dir zunächst ansehen möchtest, wie eine fertige Webseite aussieht, und die Inhalte dann nach und nach durch eigene ersetzen willst.

Klicke anschließend auf **Website erstellen**, um die Webseite anzulegen.

## Aktionen

- **Website erstellen**: Legt die neue Webseite mit der gewählten Startvorlage an. Nach erfolgreicher Erstellung wirst du automatisch zur Bearbeitungsseite der neuen Webseite weitergeleitet, wo du sofort mit der Gestaltung beginnen kannst.

## Validierung und Fehlermeldungen

- **Keine Startvorlage ausgewählt**: Du musst eine der beiden Optionen („Mit einem leeren Projekt starten" oder „Mit Beispieldaten starten") auswählen, bevor du auf **Website erstellen** klicken kannst. Wähle eine der beiden Optionen aus, um fortzufahren.

## Berechtigungen

Das Tool **Webseite** muss für deine Organisation aktiviert sein, damit du diese Funktion nutzen kannst.

## Beziehungen

- Nach dem Erstellen wirst du zur **Bearbeitungsseite der Webseite** weitergeleitet, wo du Seiten anlegen, Inhalte bearbeiten und Einstellungen vornehmen kannst.
- Die Webseite wird mit der gewählten **Domain** verknüpft.
- In der **Webseiten-Übersicht** (Listenansicht) werden alle erstellten Webseiten deiner Organisation angezeigt, und du kannst von dort aus jede Webseite öffnen und bearbeiten.

---

## page: ManageWebsiteFormSubmissions

**Entity:** ManageWebsiteFormSubmissions  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/WebsiteFormSubmissionResource/Pages/ManageWebsiteFormSubmissions.php`  
**Updated:** 2026-02-14 19:25:22  

# Abgeschickte Formulare

## Übersicht

Auf der Seite „Abgeschickte Formulare" kannst du alle Formulareinsendungen einsehen, die Besucher über deine Webseite abgeschickt haben. Du siehst auf einen Blick, wann und auf welcher Seite ein Formular ausgefüllt wurde, kannst die eingegangenen Daten im Detail ansehen und nicht mehr benötigte Einträge löschen.

Wenn noch keine Formulareinsendungen eingegangen sind, wird die Tabelle leer angezeigt.

## Navigation

Die Seite „Abgeschickte Formulare" findest du in der Seitenleiste unter der Gruppe **Kommunikation**.

## Tabellenansicht / Listenansicht

Die Liste der abgeschickten Formulare zeigt alle eingegangenen Formulareinsendungen mit folgenden Spalten:

| Spalte | Beschreibung | Sortierbar | Durchsuchbar |
|--------|-------------|------------|--------------|
| Datum/Uhrzeit | Zeitpunkt, zu dem das Formular abgeschickt wurde | Ja | Nein |
| Domain | Name der Webseite (Domain), auf der das Formular abgeschickt wurde | Ja | Ja |
| Webseite | Name der einzelnen Seite innerhalb der Webseite, auf der sich das Formular befindet | Ja | Ja |

Du kannst die Liste über die Suchleiste nach Domain oder Seitenname durchsuchen. Über die Spaltenköpfe „Datum/Uhrzeit", „Domain" und „Webseite" lässt sich die Sortierung ändern.

## Aktionen

### Einzelaktionen für abgeschickte Formulare

- **Anschauen**: Öffnet die Detailansicht einer Formulareinsendung. Dort werden alle vom Besucher ausgefüllten Felder als Schlüssel-Wert-Paare angezeigt – du siehst also genau, welche Angaben der Besucher gemacht hat.
- **Löschen**: Entfernt eine einzelne Formulareinsendung.

### Bulk-Aktionen für abgeschickte Formulare

- **Löschen**: Du kannst mehrere Formulareinsendungen gleichzeitig auswählen und gesammelt löschen.

## Berechtigungen

Damit du die Seite „Abgeschickte Formulare" nutzen kannst, müssen folgende Voraussetzungen erfüllt sein:

- Das Tool **Webseite** muss für deine Organisation aktiviert sein.

## Beziehungen

- Die abgeschickten Formulare sind mit den einzelnen **Seiten** deiner Webseite verknüpft.
- Jede Formulareinsendung ist einer bestimmten **Webseite** (Domain) und einer **Seite** innerhalb dieser Webseite zugeordnet.

---

## page: TimeTracking

**Entity:** TimeTracking  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/UserResource/Pages/TimeTracking.php`  
**Updated:** 2026-02-14 19:24:34  

# Zeiterfassung

## Übersicht

Auf der Seite **Zeiterfassung** kannst du für einen einzelnen Benutzer die Zeiterfassung aktivieren oder deaktivieren. Wenn du die Zeiterfassung für einen Benutzer aktivierst, erhält dieser automatisch die entsprechende Rolle, um seine Arbeitszeiten erfassen zu können. Deaktivierst du die Zeiterfassung, wird diese Rolle wieder entzogen.

Diese Seite befindet sich in der Benutzerverwaltung und ist als Unterseite eines bestimmten Benutzers erreichbar.

## Navigation

Die Zeiterfassung ist ein Tab in der Unternavigation eines Benutzers. Um zur Seite **Zeiterfassung** zu gelangen:

1. Öffne die **Benutzerverwaltung**.
2. Wähle den gewünschten Benutzer aus bzw. klicke auf „Bearbeiten".
3. Wähle in der Unternavigation den Reiter **Zeiterfassung**.

Die Seite ist nur sichtbar, wenn das Tool **Zeiterfassung** für die Organisation aktiviert ist. Ist das Tool nicht aktiviert, wird der Reiter in der Unternavigation nicht angezeigt.

## Formularfelder

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Zeiterfassung | Checkbox | Nein | Aktiviert oder deaktiviert die Zeiterfassung für diesen Benutzer. |

Beim erstmaligen Aufrufen der Seite spiegelt die Checkbox den aktuellen Status wider: Ist die Zeiterfassung für den Benutzer bereits aktiviert, ist die Checkbox angehakt.

## Aktionen

- **Speichern**: Speichert die aktuelle Einstellung der Checkbox. Beim Aktivieren wird dem Benutzer automatisch die Rolle für die Zeiterfassung zugewiesen, beim Deaktivieren wird sie wieder entfernt. Nach dem erfolgreichen Speichern erscheint die Bestätigungsmeldung **„Die Änderungen wurden gespeichert."**

## Berechtigungen

Damit die Seite **Zeiterfassung** in der Benutzer-Unternavigation angezeigt wird, muss das Tool **Zeiterfassung** für die Organisation aktiviert sein. Ist das Tool nicht aktiviert, ist der Reiter nicht sichtbar und die Einstellung kann nicht vorgenommen werden.

## Beziehungen

- **Benutzerverwaltung**: Die Seite **Zeiterfassung** ist eine Unterseite der Benutzerbearbeitung, zusammen mit den Reitern für Grundeinstellungen, Tool-Berechtigungen und Projekt-Berechtigungen.

---

## page: ManageUserPermissions

**Entity:** ManageUserPermissions  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/UserResource/Pages/ManageUserPermissions.php`  
**Updated:** 2026-02-14 19:23:38  

# Tool-Berechtigungen

## Übersicht

Auf der Seite **Tool-Berechtigungen** kannst du festlegen, welche Berechtigungen ein bestimmter Benutzer für die verschiedenen Tools (Marketplace-Apps) deiner Organisation hat. Änderungen an den Berechtigungen werden sofort übernommen – es gibt keinen separaten „Speichern"-Button.

## Navigation

Die Seite **Tool-Berechtigungen** ist über die Benutzerverwaltung erreichbar. Öffne einen Benutzer zur Bearbeitung und wähle dann in der Unter-Navigation den Reiter **Tool-Berechtigungen**.

**Pfad:** Einstellungen → Benutzer → [Benutzername] → Tool-Berechtigungen

Die Unter-Navigation enthält außerdem folgende Reiter:

- **Bearbeiten** – Grundeinstellungen des Benutzers (Name, E-Mail, Administrator-Status)
- **Tool-Berechtigungen** – Berechtigungen des Benutzers für die verschiedenen Tools
- **Projekt-Berechtigungen** – Berechtigungen des Benutzers auf Projekt-Ebene
- **Zeiterfassung** – Zeiterfassung des Benutzers

## Tabellenansicht

Die Seite **Tool-Berechtigungen** zeigt eine Tabelle aller aktiven Tools (Marketplace-Apps) deiner Organisation an. Für jedes Tool kannst du die Berechtigungsstufe des Benutzers individuell einstellen.

| Spalte | Beschreibung |
|--------|-------------|
| Tool-Name | Der Name der Marketplace-App / des Tools |
| Berechtigungsstufe | Umschalter zur Auswahl der Berechtigung für diesen Benutzer |

Die verfügbaren Berechtigungsstufen pro Tool sind:

| Stufe | Bedeutung |
|-------|-----------|
| **Keine** | Der Benutzer hat keinen Zugriff auf dieses Tool. |
| **Anschauen** | Der Benutzer kann die Daten des Tools einsehen, aber nicht verändern. |
| **Bearbeiten** | Der Benutzer kann die Daten des Tools einsehen und verändern. |

Nur Tools, die für deine Organisation aktiviert sind, erscheinen in dieser Liste.

## Aktionen

### Berechtigungsstufe ändern

Über die Umschalter in der Tabelle kannst du für jedes Tool die Berechtigungsstufe eines Benutzers anpassen (Keine / Anschauen / Bearbeiten).

- Die Änderung wird **sofort wirksam** – ein separates Speichern ist nicht nötig. Darauf wird auf der Seite explizit hingewiesen.

## Sonderfälle

- **Benutzer ist Administrator der Organisation:** Benutzer, die als Administrator der Organisation markiert sind, haben automatisch vollen Zugriff auf alle Tools. Die Tool-Berechtigungen müssen für Administratoren nicht einzeln eingestellt werden.
- **Benutzer hat keine Tool-Berechtigungen:** Wenn ein Benutzer für kein Tool freigeschaltet ist, wird in der Benutzerliste und auf der Bearbeiten-Seite ein Warnhinweis angezeigt: *„Dieser Benutzer ist noch für keine Tools freigeschaltet. Bitte unter Tool-Berechtigungen anpassen."*

## Beziehungen

- **Benutzer bearbeiten:** Die Grundeinstellungen des Benutzers (Name, E-Mail, Administrator-Status) werden auf der Seite **Bearbeiten** des Benutzers gepflegt.
- **Projekt-Berechtigungen:** Neben den Tool-Berechtigungen können auf der separaten Seite **Projekt-Berechtigungen** die projektbezogenen Zugriffsrechte des Benutzers verwaltet werden.
- **Marketplace / Toolbox:** Die auf der Seite **Tool-Berechtigungen** angezeigten Tools entsprechen den für die Organisation aktivierten Marketplace-Apps. Nur aktive Tools werden in der Liste angezeigt.
- **Warnhinweise:** Wenn ein Benutzer für kein Tool freigeschaltet ist, wird in der Benutzerliste und auf der Bearbeiten-Seite ein Warnhinweis angezeigt: *„Dieser Benutzer ist noch für keine Tools freigeschaltet. Bitte unter Tool-Berechtigungen anpassen."*

---

## page: ManageProjectPermissions

**Entity:** ManageProjectPermissions  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/UserResource/Pages/ManageProjectPermissions.php`  
**Updated:** 2026-02-14 19:22:28  

# Projekt-Berechtigungen

## Übersicht

Auf der Seite „Projekt-Berechtigungen" legst du fest, auf welche Projekte ein bestimmter Benutzer Zugriff hat. Du kannst entweder den Zugriff auf alle Projekte gewähren oder gezielt einzelne Projekte freigeben. Diese Seite ist Teil der Benutzerverwaltung und nur verfügbar, wenn in den Projekteinstellungen die Option **Berechtigungen verwalten** eingeschaltet wurde.

## Navigation

Die Seite „Projekt-Berechtigungen" erreichst du über die Benutzerverwaltung:

1. Öffne die **Benutzerverwaltung** und wähle einen Benutzer aus.
2. In der Unternavigation des Benutzers findest du die Reiter **Grundeinstellungen**, **Tool-Berechtigungen**, **Projekt-Berechtigungen** und **Zeiterfassung**.
3. Klicke auf **Projekt-Berechtigungen**, um diese Seite zu öffnen.

Der Reiter „Projekt-Berechtigungen" wird nur angezeigt, wenn in den Projekteinstellungen die Option **Berechtigungen verwalten** aktiviert ist.

## Formularfelder

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Zugriff auf alle Projekte | Checkbox | Nein | Wenn aktiviert, hat der Benutzer automatisch Zugriff auf sämtliche Projekte. Die Projektliste darunter wird ausgeblendet. |
| Projekte | Checkbox-Liste | Nein | Liste aller verfügbaren Projekte. Nur sichtbar, wenn „Zugriff auf alle Projekte" **nicht** aktiviert ist. Hier wählst du einzelne Projekte aus, auf die der Benutzer Zugriff erhalten soll. |

### Speichern der Projekt-Berechtigungen

Nachdem du die gewünschten Projekte ausgewählt oder „Zugriff auf alle Projekte" aktiviert hast, klicke auf **Speichern**. Die Änderungen werden sofort wirksam.

Wenn du keine Projekte auswählst und auch „Zugriff auf alle Projekte" nicht aktivierst, hat der Benutzer keinen Zugriff auf Projekte. In der Benutzerliste und auf der Seite „Grundeinstellungen" wird dann ein Warnhinweis angezeigt.

## Voraussetzungen und Berechtigungen

Damit die Seite „Projekt-Berechtigungen" sichtbar und nutzbar ist, muss folgende Bedingung erfüllt sein:

- **Die Option „Berechtigungen verwalten" muss in den Projekteinstellungen eingeschaltet sein.** Ohne diese Option wird der Reiter „Projekt-Berechtigungen" in der Benutzerverwaltung nicht angezeigt.

Zusätzlich muss der jeweilige Benutzer über die **Tool-Berechtigungen** für das Tool „Projekte" freigeschaltet sein, damit die Projekt-Berechtigungen greifen. Ist das nicht der Fall, wird auf der Seite „Projekt-Berechtigungen" folgender Warnhinweis angezeigt:

> *„Der Nutzer ist nicht für das Tool 'Projekte' freigeschaltet."*

In diesem Fall solltest du zuerst auf der Seite **Tool-Berechtigungen** den Zugriff auf das Tool „Projekte" einrichten.

## Warnhinweise

Auf der Seite „Projekt-Berechtigungen" und an anderen Stellen in der Benutzerverwaltung können folgende Warnhinweise erscheinen:

| Warnhinweis | Wo sichtbar | Bedeutung | Lösung |
|-------------|-------------|-----------|--------|
| *„Der Nutzer ist nicht für das Tool 'Projekte' freigeschaltet."* | Seite „Projekt-Berechtigungen" | Der Benutzer hat keinen Zugriff auf das Tool „Projekte". | Gehe zur Seite **Tool-Berechtigungen** und schalte das Tool „Projekte" für den Benutzer frei. |
| Warnsymbol bei fehlenden Projektberechtigungen | Benutzerliste und Seite „Grundeinstellungen" | Der Benutzer ist für das Tool „Projekte" freigeschaltet, hat aber noch keinen Zugriff auf konkrete Projekte. | Klicke auf den Warnhinweis oder wechsle zum Reiter **Projekt-Berechtigungen** und weise dem Benutzer Projekte zu. |

## Beziehungen zu anderen Bereichen

- **Grundeinstellungen (Benutzerverwaltung):** Auf der Bearbeitungsseite eines Benutzers wird ein Warnhinweis angezeigt, wenn der Benutzer noch für keine Projekte freigeschaltet ist. Dieser Hinweis verweist auf die Seite „Projekt-Berechtigungen".
- **Benutzerliste:** In der Übersichtstabelle aller Benutzer wird ein Warnsymbol bei Benutzern angezeigt, die keine Projektberechtigungen haben. Ein Klick darauf führt direkt zur Seite „Projekt-Berechtigungen" des jeweiligen Benutzers.
- **Projekteinstellungen:** Die Option „Berechtigungen verwalten" unter **Einstellungen → Projekte** steuert, ob die Seite „Projekt-Berechtigungen" in der Benutzerverwaltung überhaupt verfügbar ist.
- **Tool-Berechtigungen:** Der Benutzer benötigt zunächst Zugriff auf das Tool „Projekte" über die Seite „Tool-Berechtigungen", damit die Projekt-Berechtigungen greifen. Ohne diese Freischaltung wird auf der Seite „Projekt-Berechtigungen" ein Warnhinweis angezeigt.

---

## page: ListUsers

**Entity:** ListUsers  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/UserResource/Pages/ListUsers.php`  
**Updated:** 2026-02-14 19:21:10  

# Benutzer

## Übersicht

Auf der Seite **Benutzer** kannst du als Administrator alle Benutzer deiner Organisation verwalten. Du siehst eine Übersichtstabelle mit allen angelegten Benutzern und kannst von hier aus neue Benutzer erstellen, Benutzer aus bestehenden Kontakten übernehmen, Einladungen versenden oder zu den Benutzergruppen navigieren.

## Navigation

Die Benutzerverwaltung befindet sich im Bereich **Einstellungen** der Anwendung. Sie ist nicht direkt in der Seitenleiste als eigener Navigationspunkt sichtbar, sondern wird über die Einstellungen aufgerufen.

## Tabellenansicht der Benutzer

### Spalten

| Spalte | Beschreibung |
|---|---|
| **Name** | Name des Benutzers. |
| **Email** | E-Mail-Adresse des Benutzers. |
| **Benutzergruppen** | Zugeordnete Benutzergruppen, dargestellt als farbige Badges. Hat ein Benutzer keine Benutzergruppe, bleibt diese Spalte leer. |
| **Administrator** | Zeigt als Icon an, ob der Benutzer Administrator der Organisation ist. |
| **Administrator in Team** | Zeigt die Teams an, in denen der Benutzer Administrator ist. Diese Spalte ist nur sichtbar, wenn in der Organisation mehr als ein Team existiert. |
| **Nextcloud** | Zeigt an, ob der Benutzer einen Nextcloud-Zugang hat. Diese Spalte ist nur sichtbar, wenn das Tool **Nextcloud** aktiviert ist. |

### Sortierung

Die Benutzertabelle ist standardmäßig alphabetisch nach **Name** sortiert.

### Filter

| Filter | Beschreibung |
|---|---|
| **Administrator** | Filtert die Benutzerliste nach dem Administrator-Status. |

### Warnhinweise in der Benutzertabelle

Oberhalb der Benutzertabelle können Warnhinweise erscheinen, die dich auf mögliche Probleme aufmerksam machen:

- **Benutzer ohne Zugriff auf Projekte**: Wird angezeigt, wenn es Benutzer gibt, die für keine Projekte freigeschaltet sind. Der Hinweis zeigt die Anzahl betroffener Benutzer.
- **Benutzer ohne Zugriff auf Tools**: Wird angezeigt, wenn es Benutzer gibt, die für keine Tools freigeschaltet sind. Der Hinweis zeigt die Anzahl betroffener Benutzer.

Auch in den einzelnen Tabellenzeilen können Warnsymbole (Ausrufezeichen) erscheinen, die darauf hinweisen, dass dem jeweiligen Benutzer Projekt- oder Tool-Berechtigungen fehlen. Ein Klick auf das Warnsymbol führt dich direkt zur entsprechenden Berechtigungsseite des Benutzers, wo du die fehlenden Berechtigungen vergeben kannst.

## Aktionen auf der Benutzerseite

### Aktionen im Tabellenkopf (Header-Aktionen)

| Aktion | Beschreibung |
|---|---|
| **Benutzergruppen** | Öffnet die Verwaltung der Benutzergruppen. |
| **Aus Kontakt übernehmen** | Erstellt einen neuen Benutzer auf Basis eines bestehenden Kontakts. Es öffnet sich ein Dialog, in dem du einen Kontakt auswählen kannst. Es werden nur Kontakte vom Typ **Person** angezeigt, die eine E-Mail-Adresse hinterlegt haben. Nach der Auswahl wird ein neuer Benutzer mit den Daten des Kontakts angelegt. Kontakte ohne E-Mail-Adresse erscheinen nicht in der Auswahl – du musst in diesem Fall zuerst die E-Mail-Adresse beim Kontakt hinterlegen. |
| **Erstellen** | Öffnet das Formular zum Anlegen eines neuen Benutzers. |
| **Export** | Exportiert die aktuelle Benutzerliste als Datei. |

### Aktionen pro Zeile in der Benutzertabelle

| Aktion | Beschreibung |
|---|---|
| **Warnung** (Ausrufezeichen-Symbol) | Wird angezeigt, wenn dem Benutzer Projekt- oder Tool-Berechtigungen fehlen. Ein Klick auf das Symbol führt dich direkt zur Berechtigungsseite des Benutzers, wo du die fehlenden Berechtigungen vergeben kannst. |
| **Einladen** | Sendet eine Einladungs-E-Mail an den Benutzer. |
| **Bearbeiten** | Öffnet die Bearbeitungsseite des Benutzers. |

## Beziehungen der Benutzerseite zu anderen Bereichen

Die Benutzerseite ist eng mit folgenden Bereichen verknüpft:

- **Benutzer bearbeiten**: Über die Bearbeitungsansicht kannst du Grundeinstellungen wie Name, E-Mail und Administrator-Status eines Benutzers ändern.
- **Tool-Berechtigungen**: Hier legst du fest, auf welche Tools ein Benutzer Zugriff hat. Jedes Tool kann pro Benutzer auf eine der vier Berechtigungsstufen gesetzt werden: **Keine**, **Anschauen**, **Bearbeiten** oder **Verwalten**.
- **Projekt-Berechtigungen**: Hier legst du fest, auf welche Projekte ein Benutzer Zugriff hat.
- **Zeiterfassung**: Zeigt die erfassten Zeiten des Benutzers an.
- **Benutzergruppen**: Gruppen, denen Benutzer zugeordnet werden können. Die Verwaltung der Benutzergruppen erreichst du über die gleichnamige Schaltfläche auf der Benutzerseite.
- **Kontakte**: Benutzer können aus bestehenden Kontakten erstellt werden. Dazu nutzt du die Aktion **Aus Kontakt übernehmen**.

## Häufige Fragen und Problemlösungen zur Benutzerverwaltung

| Problem | Ursache | Lösung |
|---|---|---|
| Ein Kontakt erscheint nicht in der Auswahl bei „Aus Kontakt übernehmen" | Der Kontakt ist keine Person (sondern z. B. eine Organisation) oder hat keine E-Mail-Adresse hinterlegt. | Stelle sicher, dass der Kontakt vom Typ **Person** ist und eine gültige E-Mail-Adresse eingetragen hat. |
| Ein Benutzer hat ein Warnsymbol in der Tabelle | Dem Benutzer fehlen Berechtigungen für Projekte oder Tools. | Klicke auf das Warnsymbol und vergib die fehlenden Berechtigungen auf der sich öffnenden Seite. |
| Die Spalte „Nextcloud" wird nicht angezeigt | Das Tool **Nextcloud** ist in der Organisation nicht aktiviert. | Aktiviere das Tool Nextcloud in den Einstellungen, damit die Spalte sichtbar wird. |
| Die Spalte „Administrator in Team" wird nicht angezeigt | Es existiert nur ein Team in der Organisation. | Diese Spalte erscheint erst, wenn mehr als ein Team angelegt ist. |

---

## page: EditUser

**Entity:** EditUser  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/UserResource/Pages/EditUser.php`  
**Updated:** 2026-02-14 19:19:19  

# Grundeinstellungen

## Übersicht

Auf der Seite „Grundeinstellungen" kannst du die grundlegenden Daten eines Benutzers bearbeiten, darunter Name, E-Mail-Adresse, Administratorrechte und weitere Zuordnungen. Außerdem kannst du von hier aus eine Einladung an den Benutzer versenden oder den Benutzer löschen.

## Navigation

Die Seite „Grundeinstellungen" ist über die Benutzerverwaltung erreichbar. Wähle einen Benutzer in der Benutzerliste aus, um die Detailansicht zu öffnen. Dort findest du „Grundeinstellungen" als ersten Unternavigationspunkt. Weitere Unterseiten des Benutzers sind „Tool-Berechtigungen", „Projekt-Berechtigungen" und „Zeiterfassung".

## Formularfelder

Auf der Seite „Grundeinstellungen" stehen dir folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Der vollständige Name des Benutzers. |
| Email | Textfeld | Ja | Die E-Mail-Adresse des Benutzers. Muss eindeutig sein – keine doppelten E-Mail-Adressen erlaubt. |
| Ist Administrator der Organisation | Schalter | Nein | Legt fest, ob der Benutzer Administrator der gesamten Organisation ist. Dieses Feld wird nur beim Bearbeiten eines bestehenden Benutzers angezeigt, nicht beim Erstellen. Der Schalter kann nicht deaktiviert werden, wenn es sich um den letzten verbleibenden Administrator handelt. |
| Hat einen Nextcloud-Zugang | Schalter | Nein | Legt fest, ob der Benutzer einen Zugang zur verbundenen Nextcloud erhält. Dieses Feld ist nur sichtbar, wenn das Tool Nextcloud aktiviert ist. Das Feld ist gesperrt (ausgegraut), wenn die Nextcloud-Konfiguration noch nicht vollständig eingerichtet ist. |
| Benutzergruppen | Mehrfachauswahl | Nein | Zuordnung des Benutzers zu einer oder mehreren Benutzergruppen. |
| Zugeordneter Kontakt | Auswahl (durchsuchbar) | Nein | Verknüpft den Benutzer mit einem bestehenden Kontakt aus der Kontaktverwaltung. Du kannst nach dem Namen des Kontakts suchen. |

## Hinweise und Warnungen im Formular

Auf der Seite „Grundeinstellungen" können je nach Zustand des Benutzers verschiedene Hinweise erscheinen:

- **„Dieser Benutzer hat momentan keinerlei freigeschaltete Funktionen."** – Wird angezeigt, wenn der Benutzer keinem Team zugeordnet ist und kein Administrator ist.
- **„Dieser Benutzer ist noch für keine Tools freigeschaltet."** – Wird angezeigt, wenn der Benutzer kein Administrator ist und keine Tool-Berechtigungen hat. Um dem Benutzer Zugriff auf Tools zu geben, wechsle zur Unterseite „Tool-Berechtigungen".
- **„Dieser Benutzer ist noch für keine Projekte freigeschaltet."** – Wird angezeigt, wenn der Benutzer keine Projekt-Berechtigungen hat. Um dem Benutzer Zugriff auf Projekte zu geben, wechsle zur Unterseite „Projekt-Berechtigungen".
- **„Es muss mindestens ein Administrator vorhanden sein."** – Wird beim Administrator-Schalter angezeigt, wenn der Benutzer der einzige Administrator der Organisation ist. In diesem Fall kann der Schalter nicht deaktiviert werden.
- **„Achtung: du nimmst dir selbst die Administrator-Rechte. Nach dem Speichern wird diese Seite nicht mehr verfügbar sein."** – Wird angezeigt, wenn du deinen eigenen Benutzer bearbeitest und den Administrator-Schalter deaktivierst.

## Aktionen

### Einladen

Über die Aktion „Einladen..." in der Kopfzeile der Seite „Grundeinstellungen" kannst du dem Benutzer eine Einladungs-E-Mail senden. Nach dem Klick erscheint ein Bestätigungsdialog, in dem der Name und die E-Mail-Adresse des Benutzers angezeigt werden. Bestätigst du den Dialog, wird die Einladung versendet.

**Wichtig:** Weise die eingeladene Person darauf hin, auch den Spam-Ordner zu prüfen, falls die E-Mail nicht im Posteingang erscheint.

**Fehlerfall:** Falls die Einladung nicht versendet werden kann, erscheint eine Fehlermeldung. Überprüfe in diesem Fall die hinterlegte E-Mail-Adresse auf Tippfehler oder ungültige Formate und korrigiere sie gegebenenfalls.

### Benutzer löschen

Über die Lösch-Aktion in der Kopfzeile der Seite „Grundeinstellungen" kannst du den Benutzer dauerhaft löschen.

Die Lösch-Aktion ist in bestimmten Fällen gesperrt. Ein Tooltip mit dem Hinweis „Dieser Benutzer kann nicht gelöscht werden. (Mögliche Gründe sind: Ein Benutzer darf sich nicht selbst löschen; der letzte Administrator darf nicht gelöscht werden.)" wird angezeigt, wenn die Löschung nicht möglich ist.

## Validierung und Fehlermeldungen

Beim Speichern der Grundeinstellungen wird das Formular validiert. Folgende Fehler können auftreten:

| Feld | Fehlermeldung | Ursache | Lösung |
|------|---------------|---------|--------|
| Name | Pflichtfeld-Fehler | Das Feld „Name" wurde nicht ausgefüllt. | Trage den vollständigen Namen des Benutzers ein. |
| Email | Pflichtfeld-Fehler | Das Feld „Email" wurde nicht ausgefüllt. | Trage eine E-Mail-Adresse ein. |
| Email | Ungültiges Format | Die eingegebene E-Mail-Adresse hat kein gültiges Format (z. B. fehlendes @-Zeichen). | Korrigiere die E-Mail-Adresse, sodass sie ein gültiges Format hat (z. B. name@beispiel.de). |
| Email | Bereits vergeben | Die E-Mail-Adresse wird bereits von einem anderen Benutzer verwendet. | Verwende eine andere, noch nicht vergebene E-Mail-Adresse. |

## Auswirkungen beim Speichern

Wenn du die Grundeinstellungen speicherst, gelten folgende Auswirkungen:

- **Administrator-Schalter aktiviert:** Der Benutzer erhält Administratorrechte für alle Teams der Organisation.
- **Administrator-Schalter deaktiviert:** Der Benutzer verliert seine Administratorrechte für alle Teams der Organisation.
- **Nextcloud-Zugang:** Wenn das Tool Nextcloud aktiviert ist, wird beim Speichern die Synchronisation des Benutzers mit der verbundenen Nextcloud angestoßen.

## Beziehungen zu anderen Bereichen

Die Seite „Grundeinstellungen" steht in engem Zusammenhang mit folgenden Bereichen:

- **Tool-Berechtigungen:** Über die Unternavigation erreichbar. Dort legst du fest, auf welche Tools der Benutzer Zugriff hat und in welcher Stufe (Keine, Anschauen, Bearbeiten, Verwalten).
- **Projekt-Berechtigungen:** Über die Unternavigation erreichbar. Dort legst du fest, auf welche Projekte der Benutzer Zugriff hat.
- **Zeiterfassung:** Über die Unternavigation erreichbar.
- **Benutzergruppen:** Der Benutzer kann auf der Seite „Grundeinstellungen" Benutzergruppen zugeordnet werden.
- **Kontakte:** Über das Feld „Zugeordneter Kontakt" auf der Seite „Grundeinstellungen" kann der Benutzer mit einem bestehenden Kontakt aus der Kontaktverwaltung verknüpft werden.
- **Nextcloud:** Wenn das Tool Nextcloud aktiviert ist, wird beim Speichern der Grundeinstellungen die Synchronisation des Benutzers mit der Nextcloud angestoßen.

---

## page: CreateUser

**Entity:** CreateUser  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/UserResource/Pages/CreateUser.php`  
**Updated:** 2026-02-14 19:17:24  

# Benutzer erstellen

## Übersicht

Auf der Seite „Benutzer erstellen" kannst du neue Benutzer für deine Organisation anlegen. Nach dem Erstellen erhält der Benutzer noch kein eigenes Passwort und kann sich noch nicht anmelden – er muss separat über die Benutzer-Listenansicht eingeladen werden.

## Formularfelder

Beim Erstellen eines neuen Benutzers stehen dir folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Der vollständige Name des Benutzers (z. B. Vor- und Nachname). |
| E-Mail | Textfeld | Ja | Die E-Mail-Adresse des Benutzers. Muss ein gültiges Format haben und darf nicht bereits von einem anderen Benutzer verwendet werden. |

**Hinweis:** Weitere Einstellungen wie „Ist Administrator der Organisation", „Hat einen Nextcloud-Zugang", „Benutzergruppen" und „Zugeordneter Kontakt" sind beim Erstellen noch nicht verfügbar. Du findest diese Felder erst auf der Bearbeitungsseite.

## Aktionen

- **Erstellen**: Klicke auf „Erstellen", um den neuen Benutzer anzulegen. Der Benutzer kann sich zu diesem Zeitpunkt noch nicht anmelden. Damit er Zugang erhält, musst du auf der Benutzer-Listenansicht die Aktion „Einladen" für diesen Benutzer ausführen. Dadurch wird eine Einladungs-E-Mail an die hinterlegte E-Mail-Adresse versendet, über die der Benutzer sein Passwort setzen und sich anmelden kann.

## Validierung und Fehlermeldungen

Beim Erstellen eines Benutzers können folgende Validierungsfehler auftreten:

| Regel | Fehlermeldung | Ursache und Lösung |
|-------|---------------|---------------------|
| Name ist Pflichtfeld | Das Feld muss ausgefüllt werden. | Du hast keinen Namen eingegeben. Trage den vollständigen Namen des Benutzers ein. |
| E-Mail ist Pflichtfeld | Das Feld muss ausgefüllt werden. | Du hast keine E-Mail-Adresse eingegeben. Trage eine gültige E-Mail-Adresse ein. |
| E-Mail muss gültiges Format haben | Es muss eine gültige E-Mail-Adresse eingegeben werden. | Die eingegebene E-Mail-Adresse hat kein gültiges Format (z. B. fehlendes @-Zeichen). Überprüfe die Adresse und korrigiere sie. |
| E-Mail muss eindeutig sein | Die E-Mail-Adresse wird bereits von einem anderen Benutzer verwendet. | Es existiert bereits ein Benutzer mit dieser E-Mail-Adresse. Verwende eine andere E-Mail-Adresse oder prüfe, ob der Benutzer bereits in der Benutzerliste vorhanden ist. |

## Beziehungen und weiterführende Einstellungen

Nach dem Erstellen eines Benutzers stehen dir auf der Bearbeitungsseite und den zugehörigen Unterseiten weitere Konfigurationsmöglichkeiten zur Verfügung:

- **Bearbeitungsseite**: Hier kannst du zusätzliche Einstellungen wie Administratorrechte für die Organisation, Benutzergruppen-Zuordnungen und den Nextcloud-Zugang konfigurieren.
- **Kontakt-Zuordnung**: Auf der Bearbeitungsseite kannst du dem Benutzer einen bestehenden Kontakt zuordnen, um die Verbindung zwischen Benutzerkonto und Kontaktdatensatz herzustellen.
- **Benutzergruppen**: Du kannst den Benutzer einer oder mehreren Benutzergruppen zuordnen.
- **Tool-Berechtigungen** (Unterseite): Hier legst du fest, auf welche Tools der Benutzer Zugriff hat. Für jedes Tool gibt es vier Berechtigungsstufen: „Keine", „Anschauen", „Bearbeiten" und „Verwalten".
- **Projekt-Berechtigungen** (Unterseite): Hier legst du fest, auf welche Projekte der Benutzer zugreifen darf.

## Häufige Fragen

**Warum kann sich der neue Benutzer nicht anmelden?**
Nach dem Erstellen hat der Benutzer noch kein Passwort und keinen Zugang. Du musst ihn über die Benutzer-Listenansicht einladen (Aktion „Einladen"). Erst nach Erhalt und Bestätigung der Einladungs-E-Mail kann sich der Benutzer anmelden.

**Warum sehe ich beim Erstellen nur Name und E-Mail?**
Beim Erstellen eines Benutzers werden bewusst nur die grundlegenden Pflichtfelder angezeigt. Alle weiteren Einstellungen wie Administratorrechte, Benutzergruppen, Nextcloud-Zugang und Kontakt-Zuordnung findest du auf der Bearbeitungsseite.

---

## page: ManageUserGroups

**Entity:** ManageUserGroups  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/UserGroupResource/Pages/ManageUserGroups.php`  
**Updated:** 2026-02-14 19:16:10  

# Benutzergruppen

## Übersicht

Auf der Seite „Benutzergruppen" kannst du Benutzergruppen für deine Organisation erstellen, bearbeiten und löschen. Benutzergruppen dienen derzeit primär dazu, Gruppen in der Nextcloud zu verwalten. Die Verwaltung erfolgt direkt in einer Listenansicht mit integriertem Formular.

## Navigation

Die Seite „Benutzergruppen" ist nicht direkt in der Seitenleiste sichtbar. Du erreichst sie über die Benutzerverwaltung – dort befindet sich ein Button mit dem Tooltip „Verwalten von Benutzergruppen in der Nextcloud". Ein Klick auf diesen Button öffnet die Seite mit der Übersicht aller vorhandenen Benutzergruppen.

## Formularfelder

Beim Erstellen oder Bearbeiten einer Benutzergruppe stehen dir folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | – | Der Name der Benutzergruppe. |
| In Nextcloud als Gruppe verwenden | Checkbox | – | Legt fest, ob diese Benutzergruppe auch als Gruppe in der verbundenen Nextcloud angelegt wird. Dieses Feld ist nur sichtbar, wenn das Tool Nextcloud aktiviert ist. |

## Tabellenansicht

In der Tabellenansicht der Benutzergruppen werden folgende Spalten angezeigt:

| Spalte | Beschreibung |
|--------|--------------|
| Name | Der Name der Benutzergruppe. Diese Spalte ist durchsuchbar. |
| In Nextcloud als Gruppe verwenden | Zeigt als Icon an, ob die Benutzergruppe in der Nextcloud verwendet wird. Diese Spalte ist nur sichtbar, wenn das Tool Nextcloud aktiviert ist. |

## Aktionen

- **Erstellen**: Über den Button in der Kopfzeile der Tabelle kannst du eine neue Benutzergruppe anlegen. Es öffnet sich ein Formular mit den oben beschriebenen Feldern.
- **Bearbeiten**: Über das Aktionsmenü in der jeweiligen Zeile kannst du eine bestehende Benutzergruppe bearbeiten. Es öffnet sich dasselbe Formular wie beim Erstellen, vorausgefüllt mit den aktuellen Werten.
- **Löschen**: Über das Aktionsmenü in der jeweiligen Zeile kannst du eine einzelne Benutzergruppe löschen.
- **Mehrfachauswahl löschen**: Du kannst mehrere Benutzergruppen über die Checkboxen in der Tabelle auswählen und über die Bulk-Aktion gleichzeitig löschen.

## Berechtigungen

Um die Seite „Benutzergruppen" aufrufen und Benutzergruppen verwalten zu können, musst du Administrator der Organisation sein.

## Beziehungen

- **Benutzerverwaltung**: Die Seite „Benutzergruppen" wird über die Benutzerverwaltung erreicht und steht im Kontext der Benutzerverwaltung.
- **Nextcloud**: Wenn das Tool Nextcloud aktiviert ist, können Benutzergruppen als Nextcloud-Gruppen verwendet werden.

---

## page: SurveyResults

**Entity:** SurveyResults  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/SurveyResource/Pages/SurveyResults.php`  
**Updated:** 2026-02-14 19:15:17  

# Umfrage-Ergebnisse

## Übersicht
Auf der Seite **Umfrage-Ergebnisse** kannst du die gesammelten Antworten und Auswertungen zu einer bestimmten Umfrage einsehen.

## Navigation
Die Umfrage-Ergebnisse erreichst du über die Umfragen-Liste:

**Kommunikation → Umfragen → [Umfrage auswählen] → Ergebnisse**

In der Tabellenansicht der Umfragen findest du bei jeder Umfrage eine Aktion **Ergebnisse**, über die du direkt zur Ergebnisseite der jeweiligen Umfrage gelangst.

## Voraussetzungen
Damit du die Umfrage-Ergebnisse aufrufen kannst, müssen folgende Bedingungen erfüllt sein:

- Das Tool **Umfragen** muss für deine Organisation aktiviert sein.

## Beziehungen
Die Seite **Umfrage-Ergebnisse** ist Teil der **Umfragen**-Verwaltung im Bereich **Kommunikation**. Folgende verwandte Funktionen stehen dir in der Umfragen-Übersicht zur Verfügung:

- **Ergebnisse** – zeigt die gesammelten Antworten zur Umfrage (diese Seite).
- **Vorschau** – öffnet eine Vorschau der Umfrage, wie sie für Teilnehmende aussieht.
- **Abschnitte & Fragen bearbeiten** – ermöglicht das Bearbeiten der Umfragestruktur mit Abschnitten und Fragen.

---

## page: ManageSurveys

**Entity:** ManageSurveys  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/SurveyResource/Pages/ManageSurveys.php`  
**Updated:** 2026-02-14 19:14:42  

# Umfragen

## Übersicht
Auf der Seite **Umfragen** kannst du Umfragen erstellen, bearbeiten und verwalten. Du kannst Umfragen mit mehreren Abschnitten und verschiedenen Fragetypen anlegen, eine Vorschau anzeigen lassen und die Ergebnisse einsehen.

## Navigation
Die Funktion **Umfragen** befindet sich in der Seitenleiste unter der Gruppe **Kommunikation**. Der Menüpunkt heißt **Umfragen**.

## Voraussetzungen
Das Tool **Umfragen** muss für deine Organisation aktiviert sein, damit der Menüpunkt sichtbar und der Bereich zugänglich ist. Ist das Tool nicht aktiviert, erscheint der Eintrag nicht in der Seitenleiste.

## Tabellenansicht / Listenansicht

Die Übersichtsseite der Umfragen zeigt eine Liste aller vorhandenen Umfragen mit folgender Spalte:

| Spalte | Beschreibung |
|--------|--------------|
| Name | Der Name der Umfrage |

## Umfrage erstellen

Über den Button in der Kopfzeile der Umfragen-Übersicht kannst du eine neue Umfrage anlegen. Es wird folgendes Feld abgefragt:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Der Name der Umfrage |

Nach dem Erstellen erscheint die neue Umfrage in der Listenansicht. Anschließend kannst du über die Aktion **Abschnitte & Fragen bearbeiten** die Inhalte der Umfrage aufbauen.

## Umfrage bearbeiten

Über die Bearbeiten-Aktion in der Tabellenzeile kannst du den Namen einer bestehenden Umfrage ändern. Die Änderung wird nach dem Speichern sofort in der Listenansicht übernommen.

## Abschnitte & Fragen bearbeiten

Über die Aktion **Abschnitte & Fragen bearbeiten** in der Tabellenzeile öffnet sich ein Dialog, in dem du die Struktur der Umfrage verwalten kannst. Eine Umfrage besteht aus **Abschnitten**, die jeweils **Fragen** enthalten. In der Vorschau wird jeder Abschnitt als eigener Schritt im Assistenten (Wizard) angezeigt.

### Abschnitte verwalten

Jeder Abschnitt der Umfrage wird als eigener Tab im Dialog angezeigt. Du hast folgende Möglichkeiten:

- **Neuen Abschnitt anlegen:** Klicke auf den Tab mit dem **+**-Symbol. Gib einen **Abschnittsnamen** ein und klicke auf **Abschnitt anlegen**. Der neue Abschnitt erscheint als weiterer Tab.
- **Abschnitt umbenennen:** Klicke auf das Stift-Symbol am jeweiligen Tab, um den Namen des Abschnitts zu ändern.
- **Reihenfolge ändern:** Über die Pfeil-Symbole kannst du Abschnitte nach links oder rechts verschieben und so die Reihenfolge anpassen.
- **Abschnitt löschen:** Klicke auf das Papierkorb-Symbol am Tab. Es erscheint eine Bestätigungsabfrage, bevor der Abschnitt endgültig gelöscht wird.

### Fragen verwalten

Innerhalb jedes Abschnitts kannst du Fragen hinzufügen, bearbeiten und löschen. Die Fragen sind ein- und ausklappbar, um die Übersichtlichkeit zu verbessern. Beim Löschen einer Frage wird eine Bestätigungsabfrage angezeigt.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Titel | Textfeld | Ja | Der Titel bzw. die Fragestellung der Frage |
| Typ | Auswahl | Ja | Der Fragetyp – z. B. „Text" (Freitext-Antwort) oder „Radio" (Auswahl aus vorgegebenen Optionen) |
| Optionen | Tags-Eingabe | Nein | Antwortmöglichkeiten – dieses Feld wird nur angezeigt, wenn der Typ „Radio" gewählt ist. Neue Optionen kannst du über das Eingabefeld „Neue Option" hinzufügen. |

## Vorschau

Über die Aktion **Vorschau** in der Tabellenzeile wird die Umfrage als Assistent (Wizard) angezeigt. So kannst du sehen, wie die Umfrage für Teilnehmer aussieht. Jeder Abschnitt der Umfrage wird dabei als eigener Schritt dargestellt, durch den du dich durchklicken kannst.

## Ergebnisse

Über die Aktion **Ergebnisse** in der Tabellenzeile gelangst du zur Ergebnisansicht der jeweiligen Umfrage. Dort kannst du die eingegangenen Antworten einsehen und auswerten.

## Umfrage löschen

Über die Löschen-Aktion in der Tabellenzeile kannst du eine Umfrage entfernen. Vor dem Löschen wird eine Bestätigungsabfrage angezeigt.

## Validierung & Fehlermeldungen

Beim Arbeiten mit Umfragen können folgende Validierungsfehler auftreten:

| Feld | Fehlermeldung | Ursache | Lösung |
|------|---------------|---------|--------|
| Name (Umfrage) | Pflichtfeld-Fehler | Das Feld „Name" wurde beim Erstellen oder Bearbeiten einer Umfrage leer gelassen. | Gib einen Namen für die Umfrage ein. |
| Titel (Frage) | Pflichtfeld-Fehler | Das Feld „Titel" wurde beim Anlegen oder Bearbeiten einer Frage leer gelassen. | Gib einen Titel bzw. eine Fragestellung ein. |
| Typ (Frage) | Pflichtfeld-Fehler | Es wurde kein Fragetyp ausgewählt. | Wähle einen Fragetyp aus (z. B. „Text" oder „Radio"). |

## Beziehungen

- **Ergebnisse:** Zu jeder Umfrage gibt es eine eigene Ergebnisseite, auf der die eingegangenen Antworten ausgewertet werden können. Die Ergebnisse sind über die Aktion **Ergebnisse** in der Umfragen-Listenansicht erreichbar.
- **Abschnitte und Fragen:** Umfragen bestehen aus Abschnitten, die wiederum Fragen enthalten. Diese hierarchische Struktur wird über die Aktion **Abschnitte & Fragen bearbeiten** gepflegt.

---

## page: ManageSongs

**Entity:** ManageSongs  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/SongResource/Pages/ManageSongs.php`  
**Updated:** 2026-02-14 19:13:10  

# Lieder (Songverwaltung)

## Übersicht

Auf der Seite **Lieder** kannst du alle Lieder deiner Organisation verwalten. Du kannst Lieder über die CCLI SongSelect-Suche hinzufügen, sie in einer übersichtlichen Listenansicht einsehen und als Excel-Datei exportieren. Zusätzlich kannst du zu jedem Lied Variationen mit Leadsheets hinterlegen.

## Navigation

Die Liederverwaltung findest du im Bereich **Sonstiges** in der Seitenleiste.

## Tabellenansicht der Lieder

Die Tabelle auf der Seite **Lieder** zeigt alle gespeicherten Lieder deiner Organisation.

| Spalte | Beschreibung | Sortierbar | Durchsuchbar |
|---|---|---|---|
| Titel | Der Titel des Liedes | Ja | Ja |
| CCLI Song Nummer | Die CCLI-Nummer des Liedes, verlinkt zur CCLI SongSelect-Seite (öffnet in einem neuen Tab) | Ja | Ja |
| Autoren | Die Autoren bzw. Komponisten des Liedes | Nein | Ja |
| Einsätze | Anzahl, wie oft das Lied in Programmpunkten von Veranstaltungen verwendet wurde | Ja | Nein |

Die Standardsortierung erfolgt alphabetisch nach **Titel**.

## Lied hinzufügen

Über den Button **Lied hinzufügen** oberhalb der Tabelle öffnet sich ein Dialogfenster mit einem Suchfeld. Dort kannst du nach Liedern in der CCLI SongSelect-Datenbank suchen.

**So funktioniert es:**

1. Gib einen Suchbegriff (z. B. Liedtitel oder Autor) in das Suchfeld ein.
2. Die Suchergebnisse zeigen den Liedtitel, die CCLI-Nummer und die Autoren an.
3. Wähle das gewünschte Lied aus den Ergebnissen aus.
4. Das Lied wird mit Titel, CCLI-Nummer und Autoren in deiner Liederbibliothek gespeichert.

**Hinweis:** Wenn ein Lied mit derselben CCLI-Nummer bereits existiert, wird kein Duplikat erstellt. Das bestehende Lied bleibt unverändert.

## Export der Lied-Einsätze

Über den Button **Export** oberhalb der Tabelle auf der Seite **Lieder** wird eine Excel-Datei (`songs.xlsx`) heruntergeladen. Diese Datei listet alle Einsätze von Liedern in Veranstaltungen auf und eignet sich z. B. für die CCLI-Meldung.

Die Excel-Datei enthält folgende Spalten:

| Spalte | Beschreibung |
|---|---|
| Veranstaltung | Name der Veranstaltung, in der das Lied verwendet wurde |
| Datum | Datum der Veranstaltung |
| Titel | Titel des Liedes |

Die Einträge sind nach Veranstaltungsdatum sortiert.

## Lied bearbeiten – Variationen verwalten

Über das Bearbeiten-Symbol in der jeweiligen Tabellenzeile auf der Seite **Lieder** öffnet sich ein Dialogfenster, in dem du Variationen eines Liedes verwalten kannst.

Für jede Variation stehen folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Titel | Textfeld | Ja | Bezeichnung der Variation |
| Leadsheet | Datei-Upload | Nein | Leadsheet-Datei zur Variation hochladen |

Du kannst beliebig viele Variationen hinzufügen oder bestehende Variationen entfernen.

## Berechtigungen

Damit du die Seite **Lieder** aufrufen und nutzen kannst, müssen folgende Voraussetzungen erfüllt sein:

- Das Tool **Musik** muss für deine Organisation aktiviert sein. Ist das Tool nicht aktiviert, erscheint der Menüpunkt **Lieder** nicht in der Seitenleiste.

## Beziehungen zu anderen Bereichen

- **Veranstaltungen**: Lieder können als Programmpunkte in Veranstaltungen eingesetzt werden. Die Spalte „Einsätze" in der Liedertabelle zeigt an, wie oft ein Lied in Veranstaltungen verwendet wurde.
- **Autoren**: Jedem Lied können mehrere Autoren zugeordnet sein. Diese werden bei der Suche über CCLI SongSelect automatisch übernommen.
- **Variationen**: Zu jedem Lied auf der Seite **Lieder** können mehrere Variationen mit zugehörigen Leadsheets hinterlegt werden.

---

## page: ManageSentMails

**Entity:** ManageSentMails  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/SentMailResource/Pages/ManageSentMails.php`  
**Updated:** 2026-02-14 19:11:50  

# Verschickte Emails

## Übersicht

Auf der Seite „Verschickte Emails" kannst du alle von der Plattform versendeten Emails einsehen. Du siehst auf einen Blick, wann eine Email gesendet wurde, von wem sie stammt, an wen sie ging und welchen Betreff sie hat. Noch ungelesene Emails werden fett hervorgehoben.

## Tabellenansicht der verschickten Emails

Die Liste der verschickten Emails aktualisiert sich automatisch alle 2 Sekunden, sodass neu versendete Emails zeitnah erscheinen, ohne dass du die Seite manuell neu laden musst.

| Spalte | Beschreibung |
|---|---|
| Versandzeit | Datum und Uhrzeit, wann die Email versendet wurde |
| von | Absender der Email (durchsuchbar) |
| an | Empfänger der Email (durchsuchbar) |
| Betreff | Betreff der Email (durchsuchbar) |

**Sortierung:** Standardmäßig werden die neuesten verschickten Emails zuerst angezeigt (sortiert nach Versandzeit, absteigend).

**Suche:** Du kannst die Liste der verschickten Emails nach Absender, Empfänger und Betreff durchsuchen.

**Ungelesene Emails** werden in der Liste **fett** dargestellt, damit du sie auf den ersten Blick erkennst.

## Email-Vorschau anzeigen

Über das Augen-Symbol in jeder Zeile der verschickten Emails kannst du eine Vorschau der jeweiligen Email öffnen. Die Vorschau wird als seitliches Overlay (Slide-Over) angezeigt und enthält den Betreff als Überschrift sowie den vollständigen Inhalt der Email.

## Berechtigungen für verschickte Emails

Die Seite „Verschickte Emails" ist nur für Organisations-Administratoren zugänglich. In der Demo-Umgebung ist die Seite für alle Benutzer sichtbar.

---

## page: to

**Entity:** to  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ReceiptResource/Pages/ManageReceipts.php`  
**Updated:** 2026-02-14 19:11:04  

# Belege

## Übersicht

Auf der Seite **Belege** kannst du Belege (z. B. Rechnungen, Quittungen) hochladen, verwalten und Finanzereignissen zuordnen. Alle hochgeladenen Belege werden in einer Tabellenansicht dargestellt. Du kannst direkt aus einem Beleg heraus ein neues Finanzereignis erstellen.

## Navigation

Die Seite **Belege** findest du in der Seitenleiste unter der Menügruppe **Finanzen**.

## Tabellenansicht / Listenansicht

Die Belege-Tabelle zeigt alle hochgeladenen Belege mit folgenden Spalten:

### Spalten

| Spalte | Beschreibung |
|---|---|
| Datum | Zeitpunkt, an dem der Beleg hochgeladen wurde. |
| Dateiname | Name der hochgeladenen Datei. Bei langen Namen wird der Text abgekürzt – den vollständigen Namen siehst du als Tooltip, wenn du mit der Maus darüberfährst. |
| Größe | Dateigröße in lesbarem Format (z. B. „1,2 MB"). |
| Finanzereignis | Zeigt das zugeordnete Finanzereignis an. Bei genau einem zugeordneten Finanzereignis wird dessen Beschreibung angezeigt und ist anklickbar – ein Klick führt dich direkt zum Finanzereignis. Bei mehreren zugeordneten Finanzereignissen öffnet ein Klick ein Dialogfenster mit der Liste aller zugeordneten Finanzereignisse. Ist noch kein Finanzereignis zugeordnet, bleibt die Spalte leer. |
| Mehrfach verwendbar | Ein Schalter (Ein/Aus), der angibt, ob der Beleg für mehrere Finanzereignisse verwendet werden darf. Diesen Schalter kannst du nur ändern, wenn du die Berechtigung **Buchhaltung schreiben** hast. |

### Sortierung

Die Belege-Tabelle ist standardmäßig nach **Datum** sortiert (neueste zuerst). Zusätzlich kannst du nach **Dateiname** und **Größe** sortieren, indem du auf die jeweilige Spaltenüberschrift klickst.

### Suche

Du kannst die Belege-Tabelle nach dem **Dateinamen** durchsuchen. Gib dazu einen Suchbegriff in das Suchfeld oberhalb der Tabelle ein.

### Filter

Die Belege-Tabelle bietet folgende Filter:

| Filter | Beschreibung |
|---|---|
| Ungenutzt | Zeigt nur Belege an, die noch keinem Finanzereignis zugeordnet sind. |
| Mehrfach verwendet | Zeigt nur Belege an, die mehr als einem Finanzereignis zugeordnet sind. |
| Mehrfach verwendbar | Dreistufiger Filter (Ja / Nein / Alle), um Belege nach dem Status „Mehrfach verwendbar" zu filtern. |

Wenn Filter aktiv sind, wird in der Tabellenüberschrift der Hinweis „Belege (entsprechend Filter)" angezeigt, damit du erkennst, dass nicht alle Belege dargestellt werden.

## Aktionen

### Beleg hochladen (Header-Aktion)

Über die Schaltfläche oben rechts auf der Belege-Seite kannst du einen neuen Beleg hochladen. Nach dem Hochladen wird der Beleg automatisch ausgewertet (geparst) und du erhältst die Erfolgsmeldung „Der Beleg wurde hochgeladen."

Diese Schaltfläche ist nur sichtbar, wenn du die Berechtigung **Buchhaltung schreiben** hast.

### Zeilenaktionen

Für jeden Beleg in der Tabelle stehen dir folgende Aktionen zur Verfügung:

| Aktion | Beschreibung |
|---|---|
| **Zuordnen** | Erstellt ein neues Finanzereignis auf Basis dieses Belegs. Diese Aktion ist nur sichtbar, wenn der Beleg entweder noch keinem Finanzereignis zugeordnet ist oder als „Mehrfach verwendbar" markiert wurde. Voraussetzung: Berechtigung **Buchhaltung schreiben**. |
| **Beleg ansehen** | Öffnet eine Vorschau des Belegs. |
| **Beleg löschen** | Löscht den Beleg. Diese Aktion ist nur möglich, wenn der Beleg keinem Finanzereignis zugeordnet ist. |

### Massenaktionen

Du kannst mehrere Belege gleichzeitig auswählen und löschen. Dabei gilt:

- Die Auswahl ist auf die aktuelle Seite der Tabelle beschränkt.
- Nur Belege, die keinem Finanzereignis zugeordnet sind, können ausgewählt werden. Belege mit zugeordneten Finanzereignissen sind von der Auswahl ausgeschlossen.

## Leere Tabelle und Filterhinweise

Wenn noch keine Belege hochgeladen wurden, wird je nach Berechtigung ein unterschiedlicher Hinweis angezeigt:

- **Ohne Berechtigung Buchhaltung schreiben:** „Es sind noch keine Belege hochgeladen."
- **Mit Berechtigung Buchhaltung schreiben:** „Es sind noch keine Belege hochgeladen. Lade einen Beleg hoch, um ihn hier anzuzeigen."

Wenn Belege vorhanden sind, aber die aktiven Filter keine Ergebnisse liefern, erscheint folgender Hinweis: „Es sind keine Belege vorhanden, die den Filterkriterien entsprechen. Entferne die Filter, um alle Belege anzuzeigen."

## Berechtigungen

Für die Belege-Seite gelten folgende Berechtigungsregeln:

- **Zugriff auf die Seite:** Das Tool **Buchhaltung** oder **Erweiterte Buchhaltung** muss aktiviert sein. Zusätzlich muss der Benutzer Zugriff auf alle Projekte haben.
- **Belege hochladen, zuordnen und den Schalter „Mehrfach verwendbar" ändern:** Die Berechtigung **Buchhaltung schreiben** ist erforderlich.
- Ohne die Berechtigung **Buchhaltung schreiben** ist die Upload-Schaltfläche nicht sichtbar und die Aktion „Zuordnen" ist nicht verfügbar.

## Beziehungen zu anderen Bereichen

- **Finanzereignisse:** Belege können einem oder mehreren Finanzereignissen zugeordnet werden. Die Spalte „Finanzereignis" in der Belege-Tabelle verlinkt direkt auf das zugehörige Finanzereignis. Damit ein Beleg mehreren Finanzereignissen zugeordnet werden kann, muss der Schalter „Mehrfach verwendbar" aktiviert sein.
- **Bankvorgänge:** Über die Aktion „Zuordnen" kannst du aus einem Beleg heraus ein Finanzereignis erstellen, das wiederum mit einem Bankvorgang verknüpft werden kann.

---

## page: ManagePublicationRequests

**Entity:** ManagePublicationRequests  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/PublicationRequestResource/Pages/ManagePublicationRequests.php`  
**Updated:** 2026-02-14 19:09:30  

# Veröffentlichungs-Anfragen verwalten

## Übersicht

Auf der Seite „Veröffentlichungs-Anfragen verwalten" kannst du Veröffentlichungs-Anfragen erstellen, einsehen, bearbeiten und löschen. Eine Veröffentlichungs-Anfrage beschreibt einen Inhalt, der über bestimmte Kanäle (z. B. Website, Newsletter) zu einem gewünschten Datum veröffentlicht werden soll. Die Seite bietet sowohl eine Listenansicht aller Anfragen als auch die Möglichkeit, neue Anfragen direkt über ein Formular anzulegen.

## Navigation

Die Seite „Veröffentlichungs-Anfragen verwalten" findest du im Mandanten-Bereich unter der Menügruppe **Kommunikation**.

## Voraussetzungen

Um die Seite „Veröffentlichungs-Anfragen verwalten" nutzen zu können, muss das Tool **Veröffentlichungs-Management** für deine Organisation aktiviert sein. Ist das Tool nicht aktiviert, wird der Menüpunkt nicht angezeigt.

## Formularfelder

Beim Erstellen oder Bearbeiten einer Veröffentlichungs-Anfrage stehen folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Anfrager | Auswahlfeld (durchsuchbar) | Nein | Die Person, die die Veröffentlichung anfragt. Wird aus den vorhandenen Kontakten ausgewählt. Du kannst den Namen eintippen, um die Liste zu filtern. |
| Titel | Textfeld | Ja | Der Titel der Veröffentlichungs-Anfrage. |
| Status | Auswahlfeld | Nein | Der aktuelle Bearbeitungsstatus der Anfrage. |
| Veröffentlichungs-Datum | Wiederholbare Datumsfelder | Nein | Ein oder mehrere Daten, an denen die Veröffentlichung erfolgen soll. Über den Hinzufügen-Button kannst du weitere Daten ergänzen. Einzelne Datumseinträge lassen sich auch wieder entfernen. |
| Kanäle – gewünscht | Checkbox-Liste | Nein | Die Kanäle, in denen die Anfrage veröffentlicht werden soll. Die verfügbaren Kanäle werden aus den hinterlegten Veröffentlichungskanälen geladen. Ein Hinweis-Icon erklärt: „Die Kanäle, in denen die Anfrage veröffentlicht werden soll." |
| Kanäle – genehmigt | Checkbox-Liste | Nein | Die Kanäle, in denen die Anfrage tatsächlich veröffentlicht werden wird. Ein Hinweis-Icon erklärt: „Die Kanäle, in denen die Anfrage veröffentlicht werden wird." |
| Beschreibung | Rich-Text-Editor | Nein | Eine ausführliche Beschreibung des zu veröffentlichenden Inhalts. Dieses Feld nimmt die volle Breite des Formulars ein (zwei Spalten). |
| Anhänge | Datei-Upload | Nein | Dateien, die zur Anfrage hochgeladen werden können (z. B. Bilder, Dokumente). Es können mehrere Dateien gleichzeitig hochgeladen werden. |

### Validierung und mögliche Fehlermeldungen

- **„Titel ist erforderlich"**: Das Feld „Titel" darf nicht leer sein. Gib einen aussagekräftigen Titel für die Veröffentlichungs-Anfrage ein.
- Falls keine Veröffentlichungskanäle hinterlegt sind, werden die Checkbox-Listen für „Kanäle – gewünscht" und „Kanäle – genehmigt" leer angezeigt. Wende dich in diesem Fall an eine Person mit Verwaltungsrechten, damit Veröffentlichungskanäle konfiguriert werden.

## Tabellenansicht / Listenansicht

Die Listenansicht der Veröffentlichungs-Anfragen zeigt alle vorhandenen Anfragen in einer Tabelle. Wenn keine Anfragen vorhanden sind, wird eine leere Liste angezeigt.

### Angezeigte Spalten

| Spalte | Beschreibung | Sortierbar | Durchsuchbar |
|--------|-------------|------------|--------------|
| Datum | Das Erstellungsdatum der Veröffentlichungs-Anfrage | Ja | Nein |
| Anfrager | Der Name des anfragenden Kontakts | Ja | Ja |
| Status | Der aktuelle Bearbeitungsstatus der Anfrage | Ja | Nein |
| Kanäle – angefragt | Die gewünschten Veröffentlichungskanäle | Nein | Nein |
| Kanäle – genehmigt | Die genehmigten Veröffentlichungskanäle | Nein | Nein |
| Titel | Der Titel der Veröffentlichungs-Anfrage | Ja | Ja |

### Standardsortierung

Die Liste der Veröffentlichungs-Anfragen ist standardmäßig nach Datum absteigend sortiert, sodass die neuesten Anfragen zuerst angezeigt werden. Du kannst die Sortierung ändern, indem du auf eine sortierbare Spaltenüberschrift klickst.

### Suche

Du kannst die Liste der Veröffentlichungs-Anfragen über die Suchleiste durchsuchen. Die Suche berücksichtigt die Spalten **Anfrager** und **Titel**.

### Filter

| Filter | Typ | Beschreibung |
|--------|-----|--------------|
| Status | Mehrfachauswahl | Filtert die Veröffentlichungs-Anfragen nach dem Bearbeitungsstatus. Standardmäßig sind die Status „Offen", „In Kanälen" und „In Bearbeitung" vorausgewählt. Du kannst die Vorauswahl anpassen, um z. B. auch abgeschlossene Anfragen anzuzeigen. |
| Anfrager | Mehrfachauswahl (durchsuchbar) | Filtert die Veröffentlichungs-Anfragen nach dem anfragenden Kontakt. Alle Kontakte werden zur Auswahl vorgeladen. Du kannst nach Namen suchen, um schneller den gewünschten Kontakt zu finden. |

## Aktionen

### Veröffentlichungs-Anfrage erstellen

Über den Erstellen-Button in der Kopfzeile der Listenansicht kannst du eine neue Veröffentlichungs-Anfrage anlegen. Es öffnet sich ein breites Formular-Fenster mit dem Titel „Veröffentlichungs-Anfrage erstellen". Fülle die Pflichtfelder aus und klicke auf Speichern. Nach dem Speichern wird das Formular geschlossen und die neue Anfrage erscheint in der Listenansicht.

### Veröffentlichungs-Anfrage bearbeiten

Jede Veröffentlichungs-Anfrage in der Liste kann über die Bearbeiten-Aktion in der jeweiligen Zeile geöffnet werden. Das Formular wird in einem breiten Fenster angezeigt, in dem du alle Felder anpassen kannst. Nach dem Speichern werden die Anhänge automatisch mit den verknüpften Veranstaltungen synchronisiert – das bedeutet, dass Änderungen an den Anhängen auch in den zugehörigen Veranstaltungen übernommen werden.

### Veröffentlichungs-Anfrage löschen

Einzelne Veröffentlichungs-Anfragen können über die Löschen-Aktion in der jeweiligen Zeile entfernt werden.

### Mehrfachauswahl (Bulk-Aktionen)

Über die Mehrfachauswahl in der Listenansicht kannst du mehrere Veröffentlichungs-Anfragen gleichzeitig auswählen und gesammelt löschen.

## Berechtigungen

Um die Seite „Veröffentlichungs-Anfragen verwalten" nutzen zu können, muss das Tool **Veröffentlichungs-Management** für deine Organisation aktiviert sein. Ist das Tool nicht aktiviert, ist der Menüpunkt nicht sichtbar.

## Beziehungen zu anderen Bereichen

- **Kontakte**: Jede Veröffentlichungs-Anfrage ist einem Kontakt (dem Anfrager) zugeordnet. Der Kontakt muss bereits im System vorhanden sein, damit er als Anfrager ausgewählt werden kann.
- **Veröffentlichungskanäle**: Die Veröffentlichungs-Anfragen beziehen sich auf konfigurierte Veröffentlichungskanäle, die als gewünschte und genehmigte Kanäle ausgewählt werden können. Sind keine Kanäle konfiguriert, bleiben die entsprechenden Checkbox-Listen leer.
- **Veranstaltungen**: Beim Bearbeiten einer Veröffentlichungs-Anfrage werden Anhänge automatisch mit verknüpften Veranstaltungen synchronisiert. Änderungen an den Anhängen werden also auch in den zugehörigen Veranstaltungen sichtbar.

---

## page: and

**Entity:** and  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Widgets/ProjectMonthlyFinancialOverviewTable.php`  
**Updated:** 2026-02-14 19:07:33  

# Monatlicher Finanz-Überblick (Projekt)

## Übersicht

Der monatliche Finanz-Überblick zeigt dir eine tabellarische Zusammenfassung aller Einnahmen und Ausgaben eines bestimmten Projekts, aufgeschlüsselt nach Monaten. Die Tabelle enthält für jeden Monat im gewählten Zeitraum eine Spalte mit den jeweiligen Beträgen sowie eine Gesamtsumme. Zusätzlich werden in der Fußzeile die monatlichen Kontostände (Guthaben) des Projekts angezeigt, einschließlich eines Eröffnungssaldos und des aktuellen bzw. letzten Saldos. Die Finanzwerte beinhalten dabei auch alle Unterprojekte des angezeigten Projekts.

Wenn für das Projekt keine Finanzereignisse vorhanden sind, wird das Widget auf der Projekt-Übersichtsseite nicht angezeigt.

## Navigation

Der monatliche Finanz-Überblick befindet sich auf der Detailseite eines Projekts und wird als Widget auf der Projekt-Übersichtsseite angezeigt.

- Seitenleiste → **Projekte** → ein Projekt auswählen → Reiter **Übersicht**

## Tabellenansicht

### Spalten des monatlichen Finanz-Überblicks

Die Tabelle des monatlichen Finanz-Überblicks zeigt folgende Spalten:

| Spalte | Beschreibung |
|--------|-------------|
| **Kategorie** | Die Finanzkategorie (z. B. Einnahme, Ausgabe) |
| *(Leere Spalte)* | Platzhalter für den Eröffnungssaldo in der Fußzeile |
| **Monatsspalten** (z. B. Jan 2025, Feb 2025, …) | Summe der Einnahmen bzw. Ausgaben für den jeweiligen Monat. Negative Beträge werden rot dargestellt, Nullbeträge grau. |
| **Gesamt** | Gesamtsumme aller Monate im gewählten Zeitraum |

### Fußzeile

In der Fußzeile des monatlichen Finanz-Überblicks werden die Kontostände angezeigt:

- **Eröffnungssaldo**: Der Kontostand zum Startdatum des gewählten Zeitraums (z. B. „01.01.2025").
- **Monatliche Kontostände**: Das Guthaben jeweils zum Monatsende für jeden angezeigten Monat.
- **Aktueller Stand bzw. Schlusssaldo**: Bei laufenden Zeiträumen steht hier „aktuell", bei vergangenen Zeiträumen wird das Enddatum angezeigt.

### Summenzeile (Gewinn/Verlust)

Unterhalb der Einnahmen- und Ausgabenzeilen wird im monatlichen Finanz-Überblick für jede Monatsspalte und die Gesamtspalte eine Summe berechnet. Diese wird als **Gewinn** (positiver Betrag) oder **Verlust** (negativer Betrag) beschriftet.

### Zeitraum

Der angezeigte Zeitraum des monatlichen Finanz-Überblicks wird über den Zeitraum-Wähler gesteuert, der oberhalb der Tabelle eingeblendet wird. Wenn du den Zeitraum änderst, aktualisiert sich die Tabelle automatisch mit den entsprechenden Monaten und Beträgen.

### Verlinkungen

Die Beträge im monatlichen Finanz-Überblick sind interaktiv:

- **Monatsbetrag in einer Kategorie-Zeile**: Ein Klick öffnet die gefilterte Liste der Finanzereignisse des Projekts, eingeschränkt auf die gewählte Kategorie und den jeweiligen Monat. Nullbeträge sind nicht verlinkt.
- **Gesamtbetrag einer Kategorie**: Ein Klick öffnet die gefilterte Liste der Finanzereignisse für die gewählte Kategorie über den gesamten Zeitraum.
- **Summenzeile (Gewinn/Verlust)**: Ein Klick führt zur Liste aller Finanzereignisse des Projekts für den entsprechenden Zeitraum.

Nach dem Klick wirst du zur Finanzereignis-Übersicht des Projekts weitergeleitet, wobei die passenden Filter (Kategorie, Zeitraum) bereits voreingestellt sind.

## Berechtigungen

Damit du den monatlichen Finanz-Überblick auf der Projektseite sehen kannst, müssen folgende Voraussetzungen erfüllt sein:

- Das Tool **Buchhaltung** muss aktiviert sein.
- Es müssen Finanzereignisse in der Organisation vorhanden sein, damit das Widget angezeigt wird.

## Beziehungen

Der monatliche Finanz-Überblick steht in Verbindung mit folgenden Bereichen:

- **Finanzereignisse**: Die Tabelle basiert auf den gebuchten Finanzereignissen (Positionen) des Projekts und seiner Unterprojekte. Über die Verlinkungen in der Tabelle gelangst du direkt zu den zugehörigen Finanzereignissen.
- **Monatliche Kontostände**: Die Salden in der Fußzeile stammen aus den berechneten monatlichen Kontostands-Daten des Projekts.
- **Unterprojekte**: Alle Finanzwerte im monatlichen Finanz-Überblick beinhalten auch die Daten sämtlicher Unterprojekte des angezeigten Projekts.
- **Projekt-Übersichtsseite**: Das Widget ist Teil der Projekt-Detailansicht und wird neben weiteren Widgets angezeigt.

---

## page: ProjectLatestEventsTable

**Entity:** ProjectLatestEventsTable  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Widgets/ProjectLatestEventsTable.php`  
**Updated:** 2026-02-14 19:06:08  

# Finanzereignisse der letzten 30 Tage

## Übersicht

Das Widget „Finanzereignisse der letzten 30 Tage" zeigt eine kompakte Übersicht der jüngsten finanziellen Aktivitäten eines Projekts. So erhältst du einen schnellen Überblick, ohne die vollständige Finanzereignis-Liste öffnen zu müssen.

Das Widget wird nur bei aktiven Projekten angezeigt. Bei Projekten, deren Enddatum in der Vergangenheit liegt (beendete Projekte), ist das Widget ausgeblendet.

## Navigation

Das Widget „Finanzereignisse der letzten 30 Tage" befindet sich auf der Übersichtsseite eines einzelnen Projekts. Um dorthin zu gelangen:

1. Öffne in der Seitenleiste **Projekte**.
2. Wähle das gewünschte Projekt aus.
3. Wechsle zum Reiter **Übersicht**.

Das Widget erscheint als Tabelle mit der Überschrift **„Finanzereignisse der letzten 30 Tage"** unterhalb anderer Projekt-Widgets auf dieser Seite.

## Tabellenansicht

Die Tabelle im Widget „Finanzereignisse der letzten 30 Tage" zeigt folgende Spalten:

| Spalte | Beschreibung |
|---|---|
| **Datum** | Das Zahlungsdatum des Finanzereignisses. Sortierbar. |
| **Beschreibung** | Die Beschreibung des Finanzereignisses, gekürzt auf maximal 45 Zeichen. Durchsuchbar. |
| **Typ** | Der Typ des Finanzereignisses. |
| **Betrag** | Der Gesamtbetrag in der jeweiligen Währung. Negative Beträge werden rot dargestellt. Sortierbar. Rechtsbündig ausgerichtet. |

**Standardsortierung:** Die Tabelle ist nach Datum absteigend sortiert – die neuesten Ereignisse erscheinen zuerst.

**Suche:** Du kannst die Tabelle über das Suchfeld nach der Beschreibung durchsuchen, um bestimmte Finanzereignisse schnell zu finden.

**Leerer Zustand:** Wenn in den letzten 30 Tagen keine Finanzereignisse für dieses Projekt vorhanden sind, wird die Meldung **„Keine Finanzereignisse"** angezeigt.

## Berechtigungen

Damit das Widget „Finanzereignisse der letzten 30 Tage" auf der Projektübersicht angezeigt wird, müssen folgende Voraussetzungen erfüllt sein:

- Das Tool **Buchhaltung** muss aktiviert sein.
- Es müssen Finanzereignisse in der Organisation vorhanden sein.
- Das Projekt darf nicht beendet sein (das Enddatum darf nicht in der Vergangenheit liegen).

Wenn eine dieser Voraussetzungen nicht erfüllt ist, wird das Widget nicht angezeigt.

## Beziehungen zu anderen Bereichen

- Das Widget „Finanzereignisse der letzten 30 Tage" gehört zur **Projektübersicht** und zeigt eine gefilterte Auswahl der Finanzereignisse, die dem jeweiligen Projekt zugeordnet sind.
- Die vollständige Liste aller Finanzereignisse eines Projekts – auch solche, die älter als 30 Tage sind – findest du über den Reiter **Finanzereignisse** auf der Projektseite.
- Die angezeigten Daten berücksichtigen die Projektzuordnung der Finanzereignisse. Es werden nur Ereignisse angezeigt, die diesem Projekt zugeordnet sind und deren Zahlungsdatum innerhalb der letzten 30 Tage liegt.

---

## page: and

**Entity:** and  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Widgets/ProjectFinancesPerMonthChart.php`  
**Updated:** 2026-02-14 19:04:59  

# Einnahmen / Ausgaben (Projekt)

## Übersicht
Das Diagramm „Einnahmen / Ausgaben" zeigt die monatlichen Einnahmen und Ausgaben eines einzelnen Projekts als Liniendiagramm über einen wählbaren Zeitraum. Monate, in denen noch nicht alle Bankvorgänge zugeordnet wurden, werden als gestrichelte Linie dargestellt, damit du sofort erkennst, wo die Daten noch unvollständig sind.

## Navigation
Das Diagramm „Einnahmen / Ausgaben" wird auf der Übersichtsseite eines Projekts angezeigt. Du erreichst es über **Projekte → [Projektname] → Übersicht**.

## Diagramm-Details
Das Diagramm „Einnahmen / Ausgaben" stellt die Finanzdaten des Projekts wie folgt dar:

- **Typ:** Liniendiagramm
- **Y-Achse:** Beträge in Euro (€)
- **X-Achse:** Monate im gewählten Zeitraum
- **Durchgezogene Linie** (Legende: „Alle Bankvorgänge zugeordnet"): Monate, in denen alle Bankvorgänge vollständig zugeordnet sind.
- **Gestrichelte Linie** (Legende: „Daten unvollständig"): Monate, in denen noch nicht alle Bankvorgänge zugeordnet wurden. Die gestrichelte Linie beginnt nahtlos am letzten vollständigen Monat.

Den angezeigten Zeitraum kannst du über die Zeitraum-Auswahl ändern. Das Diagramm aktualisiert sich automatisch, wenn du einen neuen Zeitraum wählst.

## Sonderfälle
- **Alle Bankvorgänge zugeordnet:** Wenn in allen Monaten des gewählten Zeitraums sämtliche Bankvorgänge zugeordnet sind, wird ausschließlich eine durchgezogene Linie dargestellt.
- **Kein Monat vollständig zugeordnet:** Wenn in keinem Monat alle Bankvorgänge zugeordnet sind, wird ausschließlich eine gestrichelte Linie dargestellt.

## Voraussetzungen
- Das Tool **Buchhaltung** muss aktiviert sein.
- Es müssen Finanzereignisse vorhanden sein, damit das Diagramm angezeigt wird.

## Beziehungen
- Das Diagramm „Einnahmen / Ausgaben" zeigt die Finanzdaten des jeweiligen Projekts. Es steht in engem Zusammenhang mit dem **Monatlichen Finanz-Überblick** und dem **Ausführlichen monatlichen Finanz-Überblick** des Projekts.
- Ein ähnliches Diagramm ohne Projektbezug existiert in der allgemeinen Finanzübersicht unter dem Titel **Einnahmen / Ausgaben**.
- Die Unterscheidung zwischen vollständigen und unvollständigen Daten basiert darauf, ob alle Bankvorgänge einem Finanzereignis zugeordnet wurden.

---

## page: and

**Entity:** and  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Widgets/ProjectDonationsPerMonthChart.php`  
**Updated:** 2026-02-14 19:04:10  

# Spenden pro Monat (Projektansicht)

## Übersicht

Das Diagramm „Spenden pro Monat" zeigt die monatlichen Spendeneingänge für ein bestimmtes Projekt als Liniendiagramm an. Die Beträge werden in Euro dargestellt. Monate, in denen noch nicht alle Bankvorgänge zugeordnet wurden, werden mit einer gestrichelten Linie dargestellt – so erkennst du auf einen Blick, wo die Daten noch unvollständig sind.

## Navigation

Das Diagramm „Spenden pro Monat" wird als Widget auf der Übersichtsseite eines einzelnen Projekts angezeigt. Um dorthin zu gelangen:

**Projekte → gewünschtes Projekt auswählen → Übersicht**

Das Diagramm erscheint nur, wenn das Tool **Spenden** aktiviert ist und Spenden im System vorhanden sind.

## Diagramm

Das Liniendiagramm „Spenden pro Monat" zeigt zwei Arten von Daten:

| Linientyp | Bezeichnung | Bedeutung |
|---|---|---|
| Durchgezogene Linie | Alle Bankvorgänge zugeordnet | Monate, in denen sämtliche Bankvorgänge zugeordnet wurden – die Daten sind vollständig. |
| Gestrichelte Linie | Daten unvollständig | Monate, in denen noch nicht alle Bankvorgänge zugeordnet wurden – die angezeigten Werte können sich noch ändern. |

- Die **Y-Achse** zeigt die Spendenbeträge in Euro (€).
- Die **X-Achse** zeigt die Monate im gewählten Zeitraum.
- Den angezeigten **Zeitraum** kannst du über den Zeitraum-Wähler anpassen.

Wenn du den Zeitraum änderst, aktualisiert sich das Diagramm automatisch mit den Daten des neu gewählten Zeitraums.

## Voraussetzungen

Damit das Diagramm „Spenden pro Monat" auf der Projektübersicht angezeigt wird, müssen folgende Bedingungen erfüllt sein:

- Das Tool **Spenden** muss aktiviert sein.
- Es müssen Spenden im System vorhanden sein.

## Beziehungen

- Das Diagramm „Spenden pro Monat" bezieht sich ausschließlich auf die Spenden des jeweiligen Projekts – es werden nur Finanzereignisse vom Typ „Spende" berücksichtigt.
- Die Unterscheidung zwischen vollständigen und unvollständigen Daten (durchgezogene vs. gestrichelte Linie) basiert darauf, ob alle Bankvorgänge des jeweiligen Monats zugeordnet wurden. Solange noch nicht zugeordnete Zahlungsvorgänge auf dem Bankkonto existieren, wird der betroffene Monat als unvollständig dargestellt.
- Eine ähnliche Darstellung ohne Projektbezug – also über alle Projekte hinweg – findest du im übergreifenden Finanzbereich unter „Spenden pro Monat".

## Häufige Fragen

**Das Diagramm wird nicht angezeigt – woran liegt das?**
Prüfe, ob das Tool **Spenden** aktiviert ist und ob tatsächlich Spenden erfasst wurden. Ohne erfasste Spenden wird das Diagramm nicht eingeblendet.

**Warum ist die Linie in manchen Monaten gestrichelt?**
Eine gestrichelte Linie bedeutet, dass in diesem Monat noch nicht alle Bankvorgänge zugeordnet wurden. Der angezeigte Wert kann sich noch ändern, sobald die offenen Bankvorgänge zugeordnet werden.

**Die Werte im Diagramm stimmen nicht mit meinen Erwartungen überein – was kann ich tun?**
Prüfe, ob alle Bankvorgänge dem richtigen Projekt zugeordnet sind. Unvollständig zugeordnete Monate erkennst du an der gestrichelten Linie. Ordne offene Bankvorgänge zu, damit die Werte vollständig sind.

---

## page: and

**Entity:** and  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Widgets/ProjectDetailedMonthlyFinancialOverviewTable.php`  
**Updated:** 2026-02-14 19:03:06  

# Ausführlicher monatlicher Finanz-Überblick (Projekt)

## Übersicht

Der ausführliche monatliche Finanz-Überblick zeigt dir für ein einzelnes Projekt die Summen aller Finanzereignis-Typen aufgeschlüsselt nach Monaten. So erkennst du auf einen Blick, welche Einnahmen und Ausgaben in welchem Monat für das Projekt angefallen sind. Die Beträge sind anklickbar und führen dich direkt zu den zugehörigen Finanzereignissen. Die Tabelle berücksichtigt dabei automatisch auch alle Finanzereignisse von Unterprojekten des aktuellen Projekts.

## Navigation

Den ausführlichen monatlichen Finanz-Überblick findest du auf der Projekt-Übersichtsseite. Du erreichst ihn über **Projekte → [Projektname auswählen] → Übersicht**. Die Tabelle erscheint als eines von mehreren Widgets auf dieser Seite unterhalb der Überschrift **„Ausführlicher monatlicher Finanz-Überblick"**.

Wenn das Tool Buchhaltung nicht aktiviert ist oder keine Finanzereignisse vorhanden sind, wird das Widget nicht angezeigt.

## Tabellenansicht

Die Tabelle des ausführlichen monatlichen Finanz-Überblicks zeigt pro Zeile einen Finanzereignis-Typ und pro Spalte einen Monat des gewählten Zeitraums.

### Spalten

| Spalte | Beschreibung |
|---|---|
| **Typ** | Der Name des Finanzereignis-Typs (z. B. Spenden, Mitgliedsbeiträge, Personalkosten). Die Reihenfolge entspricht der in den Finanzereignis-Typen festgelegten Sortierung. Die Spalte ist sortierbar. |
| **Monatsspalten** (z. B. Jan 2025, Feb 2025, …) | Die Summe aller Finanzereignisse dieses Typs im jeweiligen Monat, angezeigt in Euro. |
| **Betrag** | Die Gesamtsumme über alle angezeigten Monate hinweg für den jeweiligen Typ. Diese Spalte ist sortierbar. |

### Farbkodierung

Der ausführliche monatliche Finanz-Überblick verwendet folgende Farbkodierung, damit du Einnahmen und Ausgaben schnell unterscheiden kannst:

- **Negative Beträge** (z. B. Ausgaben) werden in **Rot** dargestellt.
- **Null-Beträge** werden in **Grau** dargestellt (in den Monatsspalten).
- **Positive Beträge** (z. B. Einnahmen) werden in **Schwarz** dargestellt.

### Summenzeile

Am unteren Rand der Tabelle des ausführlichen monatlichen Finanz-Überblicks wird eine Summenzeile angezeigt. Sie enthält die Gesamtsumme aller Finanzereignis-Typen pro Monat sowie die Gesamtsumme über den gesamten Zeitraum.

### Verlinkung und Klickverhalten

Im ausführlichen monatlichen Finanz-Überblick sind die Beträge anklickbar. Ein Klick öffnet die gefilterte Liste der Finanzereignisse:

- **Monatsbetrag pro Typ**: Klickst du auf einen Betrag in einer Monatsspalte (sofern er nicht null ist), öffnet sich die Finanzereignis-Liste des Projekts – gefiltert auf den jeweiligen Finanzereignis-Typ und den entsprechenden Monat.
- **Summenzeile pro Monat**: Ein Klick auf die Monatssumme in der Summenzeile zeigt dir alle Finanzereignisse des Projekts für den jeweiligen Monat, unabhängig vom Typ.
- **Gesamtbetrag pro Typ**: Ein Klick auf den Gesamtbetrag in der Spalte „Betrag" zeigt dir alle Finanzereignisse dieses Typs über den gesamten angezeigten Zeitraum.
- **Null-Beträge** (0,00 €) in den Monatsspalten sind nicht anklickbar, da keine zugehörigen Finanzereignisse vorhanden sind.

### Zeitraum

Der im ausführlichen monatlichen Finanz-Überblick angezeigte Zeitraum wird über den Zeitraum-Wähler auf der Projekt-Übersichtsseite gesteuert. Wenn du den Zeitraum änderst, aktualisiert sich die Tabelle automatisch und zeigt die Monate und Beträge des neuen Zeitraums an.

### Paginierung

Die Tabelle des ausführlichen monatlichen Finanz-Überblicks zeigt alle Finanzereignis-Typen ohne Paginierung an. Es werden alle Typen auf einer Seite dargestellt, unabhängig von deren Anzahl.

## Berechtigungen

Damit der ausführliche monatliche Finanz-Überblick auf der Projekt-Übersichtsseite angezeigt wird, müssen folgende Voraussetzungen erfüllt sein:

- Das **Tool Buchhaltung** muss aktiviert sein.
- Es müssen Finanzereignisse vorhanden sein, damit das Widget angezeigt wird.

## Beziehungen zu anderen Bereichen

Der ausführliche monatliche Finanz-Überblick steht in Verbindung mit folgenden Bereichen:

- **Finanzereignisse**: Die Tabelle aggregiert Daten aus den Finanzereignissen des Projekts und seiner Unterprojekte. Ein Klick auf einen Betrag führt zur gefilterten Finanzereignis-Liste.
- **Finanzereignis-Typen**: Die Zeilen der Tabelle entsprechen den konfigurierten Finanzereignis-Typen. Die Reihenfolge der Zeilen richtet sich nach der in den Finanzereignis-Typen festgelegten Sortierung.
- **Unterprojekte**: Die Tabelle berücksichtigt automatisch auch alle Finanzereignisse von Unterprojekten des aktuellen Projekts. Du musst Unterprojekte nicht separat aufrufen.
- **Zeitraum-Wähler**: Der angezeigte Zeitraum wird über den Zeitraum-Wähler auf der Projekt-Übersichtsseite gesteuert und beeinflusst, welche Monate in der Tabelle erscheinen.

---

## page: ProjectDatesHint

**Entity:** ProjectDatesHint  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Widgets/ProjectDatesHint.php`  
**Updated:** 2026-02-14 19:01:32  

# Projekt-Datumshinweis

## Übersicht

Der Projekt-Datumshinweis ist ein Informations-Widget auf der Projekt-Übersichtsseite. Es zeigt dir kontextbezogene Hinweise zum Start- und Enddatum eines Projekts an. Je nach Situation erfährst du, ob ein Projekt bereits beendet wurde, wann es gestartet ist oder in welchem Zeitraum es aktiv war. Der angezeigte Hinweis passt sich automatisch an den aktuell gewählten Zeitraum an.

## Navigation

Den Projekt-Datumshinweis findest du auf der Übersichtsseite eines einzelnen Projekts:

**Seitenleiste → Projekte → ein Projekt auswählen → Übersicht**

Das Widget erscheint dort automatisch, sofern ein relevanter Hinweis zum Projektdatum vorliegt. Wenn kein Hinweis zutrifft, wird das Widget vollständig ausgeblendet und nimmt keinen Platz auf der Seite ein.

## Angezeigte Hinweise

Der Projekt-Datumshinweis zeigt je nach Situation einen der folgenden Hinweise an:

| Situation | Hinweistext |
|---|---|
| Das Projekt wurde erst nach dem Beginn des gewählten Zeitraums gestartet | „Das Projekt wurde am [Datum] begonnen." |
| Das Projekt ist beendet und nicht mehr aktiv | „Dieses Projekt wurde am [Datum] beendet." |
| Beides trifft zu (Start liegt nach dem Beginn des gewählten Zeitraums und das Projekt ist beendet) | „Das Projekt lief vom [Startdatum] - [Enddatum]" |

Alle Datumsangaben werden im Format TT.MM.JJJJ dargestellt (z. B. 15.03.2025).

Wenn du den Zeitraum über den Zeitraum-Wähler änderst, wird der Projekt-Datumshinweis automatisch neu berechnet und aktualisiert. Es ist kein manuelles Neuladen der Seite notwendig.

Wenn weder Start- noch Enddatum für den gewählten Zeitraum relevant sind, wird kein Hinweis angezeigt und das Widget ist nicht sichtbar.

## Sichtbarkeit und Voraussetzungen

Der Projekt-Datumshinweis wird nur angezeigt, wenn beide folgenden Bedingungen erfüllt sind:

- Das Tool **Buchhaltung** muss für die Organisation aktiviert sein.
- Es muss ein relevanter Datumshinweis vorliegen (mindestens eine der oben beschriebenen Situationen trifft zu).

Wenn das Tool Buchhaltung nicht aktiviert ist, wird das Widget nicht angezeigt.

## Beziehungen zu anderen Bereichen

- Der Projekt-Datumshinweis gehört zur **Projekt**-Übersichtsseite und wird dort zusammen mit weiteren Widgets wie dem Projekt-Guthaben und der monatlichen Finanzübersicht dargestellt.
- Das Widget reagiert auf den **Zeitraum-Wähler**: Wenn du den angezeigten Zeitraum änderst, wird der Projekt-Datumshinweis automatisch neu berechnet und der angezeigte Text passt sich entsprechend an.
- Die angezeigten Datumswerte (Startdatum, Enddatum) stammen aus den Projekteinstellungen. Wenn du diese Daten ändern möchtest, kannst du dies in der Bearbeitungsansicht des Projekts tun.

---

## page: and

**Entity:** and  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Widgets/ProjectBalancesPerMonthChart.php`  
**Updated:** 2026-02-14 19:00:32  

# Projektguthaben (Diagramm)

## Übersicht

Das Diagramm „Projektguthaben" zeigt den Verlauf des Guthabens eines Projekts über die Zeit, jeweils zum Ende eines Monats. Die Darstellung unterscheidet zwischen Monaten, in denen alle Bankvorgänge vollständig zugeordnet sind (durchgezogene Linie), und Monaten, in denen die Daten noch unvollständig sind (gestrichelte Linie). So erkennst du auf einen Blick, wie sich das Guthaben deines Projekts entwickelt hat und ab wann die Zahlen möglicherweise noch nicht endgültig sind.

## Voraussetzungen

- Das Tool **Buchhaltung** muss aktiviert sein.
- Es müssen Finanzereignisse im System vorhanden sein, damit das Diagramm angezeigt wird. Sind keine Finanzereignisse vorhanden, wird das Diagramm nicht dargestellt.

## Diagramm-Details

Das Diagramm „Projektguthaben" stellt die monatliche Entwicklung des Guthabens als Liniendiagramm dar:

| Eigenschaft | Beschreibung |
|---|---|
| **Diagrammtyp** | Liniendiagramm |
| **X-Achse** | Monate (im Format JJJJ-MM) |
| **Y-Achse** | Guthaben in Euro (€) |
| **Durchgezogene Linie** | Monate, in denen alle Bankvorgänge zugeordnet sind – die Daten sind vollständig und verlässlich. Legende: „Alle Bankvorgänge zugeordnet" |
| **Gestrichelte Linie** | Monate, in denen die Daten unvollständig sind – es gibt noch nicht zugeordnete Bankvorgänge. Legende: „Daten unvollständig" |
| **Zeitraum** | Wird über den Zeitraum-Wähler auf der Seite gesteuert. Das Diagramm aktualisiert sich automatisch, wenn du den Zeitraum änderst. |

## Darstellung der Datenqualität

Das Diagramm „Projektguthaben" macht automatisch sichtbar, ab welchem Monat die Finanzdaten möglicherweise noch nicht vollständig sind:

- **Alle Bankvorgänge zugeordnet (durchgezogene Linie)**: Bis zu diesem Monat sind alle Bankvorgänge einem Finanzereignis zugeordnet. Die angezeigten Guthaben sind verlässlich.
- **Daten unvollständig (gestrichelte Linie)**: Ab diesem Monat gibt es noch nicht zugeordnete Bankvorgänge. Die angezeigten Guthaben können sich noch ändern, sobald alle Vorgänge zugeordnet sind.

Der Übergang zwischen durchgezogener und gestrichelter Linie ist nahtlos – der letzte vollständige Datenpunkt wird auch als erster Punkt der gestrichelten Linie angezeigt, um eine durchgehende Darstellung zu gewährleisten.

Wenn alle Bankvorgänge im gesamten Zeitraum zugeordnet sind, wird das Diagramm ausschließlich mit einer durchgezogenen Linie dargestellt. Umgekehrt erscheint die Linie vollständig gestrichelt, wenn im gesamten Zeitraum noch nicht zugeordnete Bankvorgänge existieren.

## Zeitraum ändern

Der im Diagramm „Projektguthaben" angezeigte Zeitraum wird über den Zeitraum-Wähler auf der Projektübersichtsseite gesteuert. Wenn du den Zeitraum dort änderst, aktualisiert sich das Diagramm automatisch und zeigt nur die Monate innerhalb des gewählten Zeitraums an.

## Beziehungen

- **Projekte**: Das Diagramm „Projektguthaben" zeigt die Daten für das aktuell ausgewählte Projekt.
- **Finanzereignisse**: Die Guthaben basieren auf den monatlichen Abschluss-Salden.
- **Bankvorgänge**: Die Unterscheidung zwischen vollständigen und unvollständigen Daten basiert darauf, ob alle Bankvorgänge zugeordnet wurden.
- **Zeitraum-Wähler**: Der angezeigte Zeitraum wird durch den Zeitraum-Wähler auf der Projektübersichtsseite bestimmt.

## Häufige Fragen und Hinweise

- **Das Diagramm wird nicht angezeigt**: Stelle sicher, dass das Tool **Buchhaltung** aktiviert ist und dass Finanzereignisse vorhanden sind. Ohne Finanzereignisse gibt es keine Daten, die im Diagramm dargestellt werden können.
- **Die gesamte Linie ist gestrichelt**: Es gibt in jedem Monat des angezeigten Zeitraums noch nicht zugeordnete Bankvorgänge. Ordne die offenen Bankvorgänge zu, damit die Daten als vollständig gelten.
- **Die Guthaben-Werte ändern sich**: Solange die Linie gestrichelt dargestellt wird, können sich die Werte noch ändern. Erst wenn alle Bankvorgänge zugeordnet sind und die Linie durchgezogen erscheint, sind die Zahlen endgültig.

---

## page: ProjectBalance

**Entity:** ProjectBalance  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Widgets/ProjectBalance.php`  
**Updated:** 2026-02-14 18:58:26  

# Projektguthaben

## Übersicht

Das Projektguthaben zeigt dir den aktuellen Kontostand eines Projekts als Statistik-Widget an. Es wird auf der Projektdetailseite dargestellt und gibt dir einen schnellen Überblick über das verfügbare Guthaben des jeweiligen Projekts. Das Projektguthaben ist Teil der Projektübersicht und erscheint dort zusammen mit weiteren Finanz-Widgets.

## Navigation

Das Projektguthaben-Widget wird automatisch auf der Übersichtsseite eines einzelnen Projekts angezeigt. Du navigierst dorthin über **Projekte → [Projektname] → Übersicht**. Eine separate Seite oder ein eigener Menüpunkt existiert nicht – das Widget ist direkt in die Projektübersicht eingebettet.

## Anzeige

- Das Projektguthaben wird als einzelne Statistik-Karte mit dem Label **„Guthaben"** angezeigt. Der aktuelle Kontostand des Projekts wird als formatierter Geldbetrag dargestellt.
- Das Widget aktualisiert sich automatisch, wenn eine interne Umbuchung erstellt wird. Du musst die Seite nicht manuell neu laden, um den aktuellen Stand zu sehen.

## Sichtbarkeitsbedingungen

Das Projektguthaben-Widget wird nur angezeigt, wenn alle folgenden Bedingungen erfüllt sind:

- Das Tool **Buchhaltung** muss für die Organisation aktiviert sein.
- Das Projekt darf **nicht beendet** sein. Sobald ein Enddatum gesetzt ist und das Projekt nicht mehr aktiv ist, wird das Projektguthaben-Widget ausgeblendet.

Wenn das Widget nicht sichtbar ist, überprüfe, ob das Tool **Buchhaltung** aktiviert ist und ob das Projekt noch als aktiv gilt.

## Berechtigungen

Damit du das Projektguthaben sehen kannst, muss das Tool **Buchhaltung** für deine Organisation aktiviert sein.

## Beziehungen

Das Projektguthaben-Widget gehört zur Projektdetailansicht und wird zusammen mit anderen Projekt-Widgets dargestellt, wie etwa der monatlichen Finanzübersicht und den letzten Finanzereignissen. Das Projektguthaben reagiert auf das Erstellen von internen Umbuchungen und aktualisiert den angezeigten Betrag entsprechend.

## Häufige Fragen und Problemlösungen

- **Das Projektguthaben-Widget wird nicht angezeigt:** Stelle sicher, dass das Tool **Buchhaltung** für deine Organisation aktiviert ist und dass das Projekt nicht bereits beendet wurde.
- **Der angezeigte Betrag scheint nicht aktuell zu sein:** Das Projektguthaben aktualisiert sich automatisch nach internen Umbuchungen. Wenn du Buchungen über andere Wege vorgenommen hast, lade die Seite einmal neu, um den aktuellen Stand zu sehen.

---

## page: InternalOutgoingMoneyTransfersRelationManager

**Entity:** InternalOutgoingMoneyTransfersRelationManager  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/RelationManagers/InternalOutgoingMoneyTransfersRelationManager.php`  
**Updated:** 2026-02-14 18:57:36  

# Ausgleiche – ausgehend

## Übersicht

Auf der Seite „Ausgleiche – ausgehend" siehst du alle ausgehenden internen Geldtransfers eines Projekts. Damit lässt sich nachvollziehen, welche Beträge von diesem Projekt an andere Projekte innerhalb deiner Organisation übertragen wurden.

## Tabellenansicht

Die Tabelle „Ausgleiche – ausgehend" zeigt folgende Spalten:

| Spalte | Beschreibung | Sortierbar | Durchsuchbar |
|---|---|---|---|
| Erstellt am | Datum, an dem der ausgehende Ausgleich erstellt wurde | Ja | Nein |
| Projektnummer (Zielprojekt) | Die Nummer des Projekts, an das der Betrag überwiesen wurde | Ja | Ja |
| Projektname (Zielprojekt) | Der Name des Projekts, an das der Betrag überwiesen wurde | Ja | Ja |
| Betrag | Der überwiesene Betrag in der Währung der Organisation (rechtsbündig dargestellt) | Ja | Nein |

### Suche und Sortierung

Du kannst die Tabelle der ausgehenden Ausgleiche nach **Projektnummer** und **Projektname** des Zielprojekts durchsuchen. Alle Spalten lassen sich durch Klick auf die Spaltenüberschrift sortieren, sodass du Einträge z. B. nach Datum oder Betrag ordnen kannst.

## Beziehungen

- Jeder ausgehende Ausgleich verweist auf ein **Zielprojekt**, an das der Betrag geflossen ist. Die Projektnummer und der Projektname des Zielprojekts werden direkt in der Tabelle angezeigt.
- Das Gegenstück zu „Ausgleiche – ausgehend" ist die Ansicht **Ausgleiche – eingehend**, die auf der Projektdetailseite des jeweiligen Zielprojekts die empfangenen Ausgleiche zeigt.
- Die Ansicht „Ausgleiche – ausgehend" gehört zur **Projekt**-Ressource.

---

## page: InternalIncomingMoneyTransfersRelationManager

**Entity:** InternalIncomingMoneyTransfersRelationManager  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/RelationManagers/InternalIncomingMoneyTransfersRelationManager.php`  
**Updated:** 2026-02-14 18:56:52  

# Ausgleiche – eingehend

## Übersicht

Der Bereich „Ausgleiche – eingehend" zeigt alle eingehenden Ausgleichsbuchungen eines Projekts. Damit kannst du nachvollziehen, welche Beträge von anderen Projekten auf das aktuelle Projekt übertragen wurden.

> **Hinweis:** Die Ausgleiche sind aktuell deaktiviert und werden nicht in der Benutzeroberfläche angezeigt.

## Tabellenansicht

Die Tabelle der eingehenden Ausgleiche zeigt dir alle Beträge, die von anderen Projekten auf das aktuelle Projekt übertragen wurden. Folgende Spalten stehen zur Verfügung:

| Spalte | Beschreibung | Sortierbar | Durchsuchbar |
|---|---|---|---|
| Erstellt am | Datum, an dem der Ausgleich erstellt wurde | Ja | Nein |
| Projektnummer (Quellprojekt) | Die Nummer des Projekts, von dem der Betrag stammt | Ja | Ja |
| Projektname (Quellprojekt) | Der Name des Projekts, von dem der Betrag stammt | Ja | Ja |
| Betrag | Der übertragene Betrag in der Währung deiner Organisation | Ja | Nein |

Der Betrag wird rechtsbündig angezeigt.

## Beziehungen

- **Quellprojekt:** Jeder eingehende Ausgleich verweist auf das Projekt, von dem der Betrag überwiesen wurde. Über die Projektnummer oder den Projektnamen kannst du das Quellprojekt identifizieren.
- **Ausgleiche – ausgehend:** Das Gegenstück zu den eingehenden Ausgleichen. Dort siehst du Beträge, die vom aktuellen Projekt an andere Projekte übertragen wurden.

---

## page: ExternalMoneyTransferItemsRelationManager

**Entity:** ExternalMoneyTransferItemsRelationManager  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/RelationManagers/ExternalMoneyTransferItemsRelationManager.php`  
**Updated:** 2026-02-14 18:56:01  

# Geldtransfers an Partner

## Übersicht

Im Bereich „Geldtransfers an Partner" siehst du alle Geldtransfers, die im Rahmen eines bestimmten Projekts an externe Partner geleistet wurden. Du kannst hier nachvollziehen, wann welche Beträge an welche Kontakte überwiesen wurden.

> **Hinweis:** Der Bereich „Geldtransfers an Partner" ist im aktuellen Stand der Anwendung deaktiviert und wird auf der Projekt-Detailseite nicht angezeigt.

## Tabellenansicht

Die Tabelle „Geldtransfers an Partner" zeigt alle Geldtransfers, die für das aktuell geöffnete Projekt erfasst wurden. Wenn noch keine Geldtransfers vorhanden sind, wird die Tabelle leer angezeigt.

Folgende Spalten werden in der Tabelle angezeigt:

| Spalte | Beschreibung | Sortierbar | Durchsuchbar |
|--------|-------------|------------|--------------|
| Erstellt am | Datum, an dem der Geldtransfer erfasst wurde (Datumsformat) | Ja | Nein |
| Kontaktname | Name des Kontakts (Partners), an den der Geldtransfer ging | Ja | Ja |
| Betrag | Überwiesener Betrag in der Währung deiner Organisation (rechtsbündig dargestellt) | Ja | Nein |

Du kannst die Tabelle nach jeder sortierbaren Spalte sortieren, indem du auf die jeweilige Spaltenüberschrift klickst. Über das Suchfeld kannst du nach dem Kontaktnamen suchen, um bestimmte Geldtransfers schnell zu finden.

## Beziehungen

- **Projekt:** Jeder Geldtransfer an Partner ist einem bestimmten Projekt zugeordnet. Die Anzeige erfolgt immer im Kontext der Projekt-Detailseite – du siehst also nur die Geldtransfers, die zu dem gerade geöffneten Projekt gehören.
- **Kontakt:** Jeder Geldtransfer ist mit einem Kontakt (Partner) verknüpft. Der Name dieses Kontakts wird in der Spalte „Kontaktname" angezeigt.

---

## page: ProjectBreadcrumbs

**Entity:** ProjectBreadcrumbs  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Pages/ProjectBreadcrumbs.php`  
**Updated:** 2026-02-14 18:55:24  

# Projekt-Breadcrumbs (Navigation)

## Übersicht

Die Projekt-Breadcrumbs zeigen dir den hierarchischen Navigationspfad innerhalb der Projektstruktur an. Sie erscheinen automatisch am oberen Rand jeder Projekt-Detailseite und ermöglichen dir eine schnelle Navigation zurück zur Projektliste oder zu übergeordneten Projekten in der Projekthierarchie.

## Aufbau der Breadcrumb-Kette

Die Projekt-Breadcrumbs bestehen aus folgenden Ebenen, die den vollständigen Pfad zum aktuellen Projekt abbilden:

1. **Projekte** – Der erste Eintrag ist immer ein Link zurück zur Projektliste. Ein Klick darauf bringt dich zur Übersicht aller Projekte.
2. **Übergeordnete Projekte** – Falls das aktuelle Projekt ein Unterprojekt ist, werden alle übergeordneten Projekte in der Reihenfolge von der obersten Ebene bis zum direkten Elternprojekt angezeigt. Jedes übergeordnete Projekt ist als Link klickbar und führt dich zur jeweiligen Projektübersicht. Bei mehreren Verschachtelungsebenen (z. B. Hauptprojekt → Teilprojekt → Unterprojekt) werden alle Zwischenebenen dargestellt.

## Sonderfälle bei den Projekt-Breadcrumbs

- **Projekt ohne übergeordnetes Projekt:** Wenn das aktuelle Projekt auf der obersten Ebene liegt und kein Elternprojekt hat, zeigen die Breadcrumbs nur „Projekte" als Link an. Es erscheinen keine Zwischenebenen.
- **Tief verschachtelte Projekte:** Bei Projekten mit mehreren übergeordneten Ebenen werden alle Ebenen vollständig in den Breadcrumbs dargestellt, sodass du jede Stufe der Hierarchie direkt ansteuern kannst.

## Wo die Projekt-Breadcrumbs erscheinen

Die Projekt-Breadcrumbs werden auf Unterseiten eines Projekts angezeigt, die den `ProjectBreadcrumbs`-Trait verwenden. Du musst die Breadcrumbs nicht manuell aktivieren – sie erscheinen automatisch, wenn du dich auf einer entsprechenden Projektseite befindest.

## Beziehungen zu anderen Bereichen

- **Projektliste:** Der erste Breadcrumb-Eintrag „Projekte" führt dich immer zurück zur vollständigen Liste aller Projekte.
- **Übergeordnete Projekte:** Die Breadcrumbs bilden die gesamte Projekthierarchie ab. Ein Klick auf ein übergeordnetes Projekt öffnet dessen Übersichtsseite.

---

## page: Overview

**Entity:** Overview  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Pages/Overview.php`  
**Updated:** 2026-02-14 18:54:39  

# Übersicht

## Übersicht

Die Projektübersicht zeigt alle wichtigen Informationen zu einem einzelnen Projekt auf einen Blick. Hier siehst du den aktuellen Kontostand des Projekts, eine monatliche Finanzübersicht, die letzten Finanzereignisse, die Spendenentwicklung sowie verschiedene Diagramme zur finanziellen Entwicklung. Die Projektübersicht dient als zentrale Anlaufstelle, um den Status und die finanzielle Lage eines Projekts schnell zu erfassen.

## Navigation

Die Projektübersicht erreichst du über **Projekte** in der Seitenleiste. In der Projektliste klickst du auf ein Projekt, um dessen Übersicht zu öffnen. Innerhalb eines Projekts ist „Übersicht" der erste Reiter in der Unternavigation und wird standardmäßig angezeigt.

Je nach aktivierten Tools stehen in der Unternavigation weitere Reiter zur Verfügung:
- **Spenden** und **Spender** – sichtbar, wenn das Tool „Spenden" aktiviert ist
- **Finanzereignisse** – sichtbar, wenn das Tool „Buchhaltung" aktiviert ist

## Widgets

Die Projektübersicht zeigt folgende Informationsbereiche (Widgets) an:

| Widget | Beschreibung |
|---|---|
| Projektdaten-Hinweis | Zeigt Hinweise zum Start- und Enddatum des Projekts an. |
| Guthaben | Zeigt den aktuellen Kontostand des Projekts an. |
| Monatliche Finanzübersicht | Tabellarische Übersicht der monatlichen Einnahmen und Ausgaben des Projekts. |
| Letzte Finanzereignisse | Liste der zuletzt gebuchten Finanzereignisse des Projekts. |
| Spenden pro Monat (Diagramm) | Grafische Darstellung der Spendenentwicklung des Projekts über die Monate hinweg. |
| Finanzen pro Monat (Diagramm) | Grafische Darstellung der gesamten Finanzbewegungen des Projekts pro Monat. |
| Guthaben pro Monat (Diagramm) | Grafische Darstellung der Guthabenentwicklung des Projekts über die Monate hinweg. |
| Detaillierte monatliche Finanzübersicht | Aufgeschlüsselte tabellarische Übersicht der Finanzen des Projekts pro Monat mit detaillierter Auflistung der einzelnen Kategorien. |

## Aktionen

| Aktion | Beschreibung |
|---|---|
| **Bearbeiten** | Öffnet das Bearbeitungsformular des Projekts, in dem du Projektdaten wie Name, Zeitraum und Zuordnungen ändern kannst. Diese Schaltfläche ist nur sichtbar, wenn du die entsprechende Berechtigung besitzt. |

## Berechtigungen

- Das Tool **Projekte** muss aktiviert sein, um auf die Projektübersicht zugreifen zu können.

## Beziehungen

Die Projektübersicht ist mit folgenden Bereichen verknüpft:

- **Spenden**: Über den Reiter „Spenden" in der Unternavigation kannst du die dem Projekt zugeordneten Spenden einsehen. Voraussetzung: Das Tool „Spenden" muss aktiviert sein.
- **Spender**: Über den Reiter „Spender" werden die Spender angezeigt, die für dieses Projekt gespendet haben. Voraussetzung: Das Tool „Spenden" muss aktiviert sein.
- **Finanzereignisse**: Über den Reiter „Finanzereignisse" werden die Buchungen des Projekts angezeigt. Voraussetzung: Das Tool „Buchhaltung" muss aktiviert sein.

---

## page: MoneyTransfers

**Entity:** MoneyTransfers  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Pages/MoneyTransfers.php`  
**Updated:** 2026-02-14 18:53:36  

# Geldtransfer

## Übersicht

Die Seite „Geldtransfer" zeigt eine Übersicht der Spenden, die einem bestimmten Projekt zugeordnet sind. Hier kannst du Datum, Kontakt und Betrag der einzelnen Spenden einsehen.

Die Seite „Geldtransfer" befindet sich im Projektbereich und ist über die Unternavigation eines einzelnen Projekts erreichbar.

> **Hinweis:** Die Seite „Geldtransfer" ist aktuell deaktiviert und steht dir noch nicht zur Verfügung. Sie befindet sich in Entwicklung.

## Navigation

Die Seite „Geldtransfer" ist Teil der Unternavigation innerhalb eines Projekts. Du erreichst sie über **Projekte → [Projektname] → Geldtransfer**.

Aktuell ist die Seite jedoch nicht in der Navigation sichtbar, da sie noch nicht freigeschaltet ist.

## Tabellenansicht

Die Tabelle auf der Seite „Geldtransfer" zeigt die dem Projekt zugeordneten Spenden mit folgenden Spalten:

| Spalte | Beschreibung |
|--------|-------------|
| Datum | Das Datum der Spende. Die Spalte ist sortierbar. |
| Kontakt | Der Name des zugehörigen Kontakts. Die Spalte ist sortierbar und durchsuchbar. Ein Klick auf den Kontaktnamen öffnet die Kontaktübersicht. |
| Betrag | Der Spendenbetrag in der Währung deiner Organisation. Die Spalte ist sortierbar und rechtsbündig dargestellt. Am Ende der Spalte wird eine Summe aller angezeigten Beträge angezeigt. |

**Standardsortierung:** Die Tabelle ist nach Datum sortiert, die neuesten Einträge erscheinen zuerst.

## Berechtigungen

Damit die Seite „Geldtransfer" grundsätzlich verfügbar ist, müssen folgende Voraussetzungen erfüllt sein:

- Das Tool **Spenden** muss für deine Organisation aktiviert sein.

## Beziehungen zu anderen Bereichen

- **Projekte:** Die Seite „Geldtransfer" gehört zur Detailansicht eines einzelnen Projekts und zeigt nur die Spenden an, die diesem Projekt zugewiesen sind.
- **Kontakte:** Jede angezeigte Spende ist einem Kontakt zugeordnet. Ein Klick auf den Kontaktnamen in der Spalte „Kontakt" öffnet die Kontaktübersicht.
- **Spenden:** Die Tabelle zeigt ausschließlich Spenden an, die dem aktuell geöffneten Projekt zugewiesen sind.

---

## page: ListProjects

**Entity:** ListProjects  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Pages/ListProjects.php`  
**Updated:** 2026-02-14 18:52:46  

# Projekte

## Übersicht

Die Seite „Projekte" zeigt alle Projekte deiner Organisation in einer hierarchischen Listenansicht. Du kannst hier Projekte einsehen, neue Projekte anlegen und die finanzielle Übersicht pro Projekt verfolgen – inklusive Einnahmen, Ausgaben und Guthaben über einen frei wählbaren Zeitraum.

Das Tool „Projekte" muss für deine Organisation aktiviert sein, damit der Menüpunkt sichtbar ist.

## Tabellenansicht der Projekte

Die Projekte werden hierarchisch dargestellt – Unterprojekte sind unter ihrem übergeordneten Projekt eingerückt. Folgende Spalten stehen in der Projektliste zur Verfügung:

| Spalte | Standardmäßig sichtbar | Sortierbar | Durchsuchbar | Beschreibung |
|---|---|---|---|---|
| Nummer | Ja (nur wenn Projektnummern in den Einstellungen aktiviert sind) | Ja | Ja | Die Projektnummer |
| Name | Ja | Ja | Ja | Der Name des Projekts, hierarchisch eingerückt bei Unterprojekten |
| Übergeordnetes Projekt | Nein (ausgeblendet) | Ja | Ja | Name des übergeordneten Projekts (leer bei Hauptprojekten) |
| Startdatum | Nein (ausgeblendet) | Ja | Nein | Datum, an dem das Projekt begonnen wurde |
| Enddatum | Nein (ausgeblendet) | Ja | Nein | Datum, an dem das Projekt beendet wurde |
| Zeiterfassung | Nein (ausgeblendet) | Nein | Nein | Zeigt an, ob das Projekt in der Zeiterfassung verwendet wird (nur sichtbar, wenn das Tool „Zeiterfassung" aktiviert ist) |
| Spendenprojekt? | Nein (ausgeblendet) | Nein | Nein | Zeigt an, ob das Projekt als Spendenprojekt markiert ist (nur sichtbar, wenn das Tool „Spenden" aktiviert ist) |
| Zuweisungsbegriffe | Nein (ausgeblendet) | Nein | Ja | Begriffe für die automatische Zuordnung von Spenden zu diesem Projekt |
| Guthaben (Startdatum) | Ja | Ja | Nein | Eröffnungssaldo des Projekts zum Beginn des gewählten Zeitraums |
| Einnahme | Ja | Ja | Nein | Summe der Einnahmen des Projekts im gewählten Zeitraum |
| Ausgabe | Ja | Ja | Nein | Summe der Ausgaben des Projekts im gewählten Zeitraum |
| Guthaben (Enddatum bzw. „aktuell") | Ja | Ja | Nein | Schlusssaldo des Projekts zum Ende des gewählten Zeitraums |

Die Standardsortierung der Projektliste entspricht der hierarchischen Baumstruktur der Projekte. Die Finanzspalten (Guthaben, Einnahme, Ausgabe) zeigen am Ende der Tabelle eine Summenzeile an. Negative Beträge werden rot dargestellt.

Ausgeblendete Spalten kannst du über die Spaltenauswahl in der Tabelle ein- und ausblenden.

### Zeitraum-Wähler in der Projektliste

Der angezeigte Zeitraum für die Finanzspalten kann über einen Zeitraum-Wähler oberhalb der Projektliste angepasst werden. Wenn du den Zeitraum änderst, werden die Spalten „Guthaben (Startdatum)", „Einnahme", „Ausgabe" und „Guthaben (Enddatum)" entsprechend neu berechnet und angezeigt.

### Suche in der Projektliste

Du kannst die Projektliste über das Suchfeld durchsuchen. Durchsuchbar sind die Spalten Name, Nummer, Übergeordnetes Projekt und Zuweisungsbegriffe. Die Suche filtert die angezeigte Liste entsprechend deiner Eingabe.

## Aktionen in der Projektliste

### Projekt erstellen

Über die Schaltfläche „Projekt erstellen" in der Kopfzeile der Projektliste kannst du ein neues Projekt anlegen. Diese Schaltfläche ist nur sichtbar, wenn du die Berechtigung „write projects" besitzt.

### Projekt ansehen

Jedes Projekt in der Liste hat eine Aktion „Projekt ansehen". Wenn du darauf klickst, gelangst du zur Übersichtsseite des jeweiligen Projekts mit detaillierten Informationen.

## Berechtigungen für die Projektliste

- Die gesamte Projektliste ist nur zugänglich, wenn das Tool „Projekte" für deine Organisation aktiviert ist.
- Die Schaltfläche „Projekt erstellen" ist nur sichtbar, wenn du die Berechtigung „write projects" besitzt.
- Die Spalte „Zeiterfassung" ist nur sichtbar, wenn das Tool „Zeiterfassung" für deine Organisation aktiviert ist.
- Die Spalte „Spendenprojekt?" ist nur sichtbar, wenn das Tool „Spenden" für deine Organisation aktiviert ist.

## Unterseiten eines Projekts

Von der Projektliste aus gelangst du über „Projekt ansehen" zu folgenden Unterseiten eines Projekts:

- **Übersicht** – Allgemeine Projektinformationen mit Guthaben, Datumsangaben und Finanzübersichten des Projekts.
- **Spenden** – Liste der dem Projekt zugeordneten Spenden. Diese Unterseite ist nur verfügbar, wenn das Tool „Spenden" aktiviert ist.
- **Spender** – Liste der Spender, die für dieses Projekt gespendet haben. Diese Unterseite ist nur verfügbar, wenn das Tool „Spenden" aktiviert ist.
- **Finanzereignisse** – Finanzielle Vorgänge (Buchungen) des Projekts. Diese Unterseite ist nur verfügbar, wenn das Tool „Buchhaltung" aktiviert ist.

---

## page: Events

**Entity:** Events  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Pages/Events.php`  
**Updated:** 2026-02-14 18:51:16  

# Finanzereignisse (Projektansicht)

## Übersicht

Auf der Seite **Finanzereignisse** innerhalb eines Projekts siehst du alle Finanzereignisse, die diesem Projekt (und seinen Unterprojekten) zugeordnet sind. Du kannst die Liste nach Kategorie, Typ und Datum filtern, um gezielt nach bestimmten Buchungen zu suchen. Die Tabelle zeigt dir auf einen Blick Datum, Kontakt, Beschreibung, Typ, Kategorie, Betrag und optional das zugehörige Bankkonto.

## Navigation

Die Seite **Finanzereignisse** erreichst du über die Projektansicht. Öffne ein Projekt und wähle in der Unternavigation den Reiter **Finanzereignisse**. Der Reiter ist nur sichtbar, wenn das Tool **Buchhaltung** für deine Organisation aktiviert ist.

Die Projektdetail-Navigation enthält neben **Finanzereignisse** auch die Reiter **Übersicht**, **Spenden** und **Spender**.

## Tabellenansicht

Die Tabelle der Finanzereignisse zeigt alle dem Projekt zugeordneten Buchungen an – einschließlich der Finanzereignisse von Unterprojekten. Standardmäßig ist die Tabelle nach **Datum** absteigend sortiert, sodass die neuesten Einträge zuerst erscheinen.

### Spalten

| Spalte | Beschreibung | Sortierbar | Suchbar | Standardmäßig sichtbar |
|---|---|---|---|---|
| Datum | Zahlungsdatum des Finanzereignisses | Ja | Nein | Ja |
| Kontakt | Name des zugeordneten Kontakts | Nein | Nein | Ja |
| Beschreibung | Beschreibungstext des Finanzereignisses. Bei langen Texten wird der Text gekürzt – den vollständigen Text siehst du als Tooltip, wenn du mit der Maus darüberfährst. | Nein | Ja | Ja |
| Typ | Typ des Finanzereignisses (z. B. Spende, Mitgliedsbeitrag) | Nein | Nein | Ja |
| Kategorie | Finanzkategorie (z. B. Einnahme, Ausgabe) | Nein | Nein | Ja |
| Konto | Name des verbundenen Bankkontos. Diese Spalte wird nur angezeigt, wenn deine Organisation mehr als ein Bankkonto eingerichtet hat. | Nein | Nein | Nein (standardmäßig ausgeblendet, bedingt sichtbar) |
| Projekt | Zugehöriges Projekt als Badge. Diese Spalte wird nur angezeigt, wenn das aktuelle Projekt Unterprojekte hat – so erkennst du, welchem (Unter-)Projekt ein Finanzereignis zugeordnet ist. | Nein | Nein | Nein (standardmäßig ausgeblendet, bedingt sichtbar) |
| Betrag | Betrag in der Währung deiner Organisation. Negative Beträge (z. B. Ausgaben) werden rot dargestellt. Am Ende der Tabelle wird die Summe aller angezeigten Beträge angezeigt. | Ja | Nein | Ja |

### Filter

Die Finanzereignisse-Tabelle bietet dir drei Filtermöglichkeiten, um die Ansicht einzuschränken:

| Filter | Beschreibung |
|---|---|
| Kategorie | Filtert nach der Finanzkategorie (z. B. Einnahme, Ausgabe). Es kann jeweils nur eine Kategorie ausgewählt werden (Einfachauswahl). |
| Typ | Filtert nach dem Typ des Finanzereignisses (z. B. Spende, Mitgliedsbeitrag). Mehrfachauswahl ist möglich – du kannst also mehrere Typen gleichzeitig anzeigen lassen. |
| Datum | Filtert nach einem Datumsbereich des Zahlungsdatums. So kannst du z. B. alle Finanzereignisse eines bestimmten Monats oder Jahres anzeigen. |

Die aktiven Filter werden in der URL gespeichert. Dadurch kannst du gefilterte Ansichten als Link mit anderen teilen oder als Lesezeichen speichern. Auch wenn du von der Projektübersicht direkt zu einer gefilterten Ansicht springst, bleiben die Filter erhalten.

### Suche

Über das Suchfeld kannst du die Finanzereignisse nach der **Beschreibung** durchsuchen. Die Suche filtert die Tabelle in Echtzeit, sodass nur noch passende Einträge angezeigt werden.

### Summenanzeige

Am Ende der Tabelle wird die **Summe aller angezeigten Beträge** dargestellt. Wenn du Filter verwendest, bezieht sich die Summe nur auf die gefilterten Finanzereignisse – so kannst du schnell sehen, wie hoch z. B. die Einnahmen in einem bestimmten Zeitraum waren.

## Berechtigungen

Um die Finanzereignisse in der Projektansicht sehen zu können, muss das Tool **Buchhaltung** für deine Organisation aktiviert sein.

Ist das Tool **Buchhaltung** nicht aktiviert, wird der Reiter **Finanzereignisse** in der Projektnavigation nicht angezeigt.

## Beziehungen zu anderen Bereichen

Die Seite **Finanzereignisse** in der Projektansicht steht in Verbindung mit mehreren anderen Bereichen der Plattform:

- **Projekt**: Die Finanzereignisse werden im Kontext eines bestimmten Projekts angezeigt. Dabei werden auch Finanzereignisse von Unterprojekten mit einbezogen.
- **Kontakt**: Jedes Finanzereignis kann einem Kontakt zugeordnet sein. Der Name des Kontakts wird in der Spalte „Kontakt" angezeigt.
- **Typ und Kategorie**: Jedes Finanzereignis hat einen Typ (z. B. Spende, Mitgliedsbeitrag), der wiederum einer übergeordneten Kategorie (z. B. Einnahme, Ausgabe) zugeordnet ist.
- **Bankkonto**: Wenn deine Organisation mehrere Bankkonten eingerichtet hat, wird das zugehörige Konto in einer zusätzlichen Spalte angezeigt.

---

## page: EditProject

**Entity:** EditProject  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Pages/EditProject.php`  
**Updated:** 2026-02-14 18:49:41  

# Projekt bearbeiten

## Übersicht

Auf der Seite „Projekt bearbeiten" kannst du die Daten eines bestehenden Projekts anpassen. Neben den Projektdaten stehen dir Aktionen zum Beenden, Reaktivieren und Löschen eines Projekts zur Verfügung. Projekte, die bereits beendet wurden (d. h. ein Enddatum haben), können nicht mehr bearbeitet werden – die Formularfelder sind dann deaktiviert und es wird ein Hinweis angezeigt: „Dieses Projekt wurde am [Datum] beendet."

## Navigation

Die Seite „Projekt bearbeiten" erreichst du über die Projektliste: **Projekte → Projekt auswählen → Bearbeiten**. Innerhalb eines Projekts gibt es eine Unternavigation mit den Reitern Übersicht, Spenden, Spender und Finanzereignisse, je nachdem welche Tools aktiviert sind.

## Formularfelder

Auf der Seite „Projekt bearbeiten" stehen dir folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Nummer | Textfeld | Nein | Projektnummer. Nur sichtbar, wenn in den Einstellungen Projektnummern aktiviert sind. Muss innerhalb der Organisation eindeutig sein. Bei beendeten Projekten deaktiviert. |
| Name | Textfeld | Ja | Name des Projekts. Muss innerhalb der Organisation eindeutig sein. Bei beendeten Projekten deaktiviert. |
| Übergeordnetes Projekt | Auswahlliste | Nein | Auswahl eines übergeordneten Projekts. Es können nur aktive Projekte (ohne Enddatum) ausgewählt werden. Bei beendeten Projekten deaktiviert. Wenn du ein übergeordnetes Projekt zuweist, wird das aktuelle Projekt zum Unterprojekt. |
| Als Spendenprojekt verwenden | Checkbox | Nein | Wenn aktiviert, steht das Projekt bei der Spendenerfassung zur Auswahl. Nur sichtbar, wenn das Tool Spenden aktiviert ist. Bei beendeten Projekten deaktiviert. |
| Zuweisungsbegriffe | Tags-Eingabe | Nein | Begriffe für die automatische Zuordnung von Spenden zu diesem Projekt. Gib einen neuen Begriff ein und bestätige ihn mit Enter. Nur sichtbar, wenn „Als Spendenprojekt verwenden" aktiviert ist und die Tools Buchhaltung sowie Spenden aktiviert sind. Bei beendeten Projekten deaktiviert. |
| Startdatum | Datumsauswahl | Ja | Startdatum des Projekts. Es muss der erste Tag eines Monats sein. Das Feld wird deaktiviert, wenn das Projekt einen Eröffnungssaldo hat oder bereits beendet ist. Das Startdatum darf nicht vor dem Anfang des ersten Geschäftsjahres liegen. Bei Unterprojekten darf es nicht früher sein als das Startdatum des übergeordneten Projekts. |
| Eröffnungssaldo | Geldbetrag | Ja | Projektguthaben zum Startdatum. Nur bearbeitbar, wenn das Startdatum dem Anfang des ersten Geschäftsjahres entspricht. Nur sichtbar, wenn das Tool Buchhaltung aktiviert ist. Bei beendeten Projekten deaktiviert. |
| Projektleiter | Mehrfachauswahl | Nein | Ein oder mehrere Benutzer können als Projektleiter zugewiesen werden. |
| In Zeiterfassung verwenden | Checkbox | Nein | Wenn aktiviert, steht das Projekt in der Zeiterfassung zur Auswahl. Nur sichtbar, wenn das Tool Zeiterfassung aktiviert ist. Bei beendeten Projekten deaktiviert. |

## Aktionen

Auf der Seite „Projekt bearbeiten" stehen dir im Aktionsmenü (oben rechts) verschiedene Aktionen zur Verfügung, abhängig vom Status des Projekts.

### Projekt beenden

Über das Aktionsmenü kannst du ein aktives Projekt beenden. Es öffnet sich ein Dialog mit einem Datumsfeld für das Enddatum. Das Enddatum ist standardmäßig auf heute gesetzt. Das früheste wählbare Datum ist das Startdatum des Projekts, das späteste ist heute. Nach Bestätigung wird das Projekt beendet: Alle Formularfelder werden deaktiviert und das Projekt kann nicht mehr bearbeitet werden.

**Voraussetzungen zum Beenden:**
- Das Projekt darf keine aktiven Unterprojekte haben.
- Der Saldo des Projekts muss 0 sein.
- Das Enddatum muss heute oder in der Vergangenheit liegen.
- Es dürfen keine Finanzereignisse nach dem gewählten Enddatum existieren.

Sind eine oder mehrere Voraussetzungen nicht erfüllt, wird die Aktion deaktiviert und die konkreten Gründe werden als Tooltip angezeigt. Dabei werden in der Tooltip-Vorprüfung nur die Bedingungen „aktive Unterprojekte" und „Saldo nicht null" berücksichtigt.

### Projekt reaktivieren

Wurde ein Projekt beendet, erscheint im Aktionsmenü statt „Projekt beenden" die Option „Projekt reaktivieren". Nach Bestätigung wird das Enddatum entfernt und das Projekt ist wieder aktiv. Alle Formularfelder sind dann wieder bearbeitbar und der Hinweis zum Enddatum verschwindet.

### Projekt löschen

Im Aktionsmenü steht die Option „Projekt löschen" zur Verfügung. Ist das Löschen nicht möglich, wird der Button deaktiviert und die Gründe werden als Tooltip angezeigt.

## Berechtigungen

Zum Bearbeiten eines Projekts benötigst du die Berechtigung **„write projects"**. Ohne diese Berechtigung ist die Seite nicht zugänglich.

## Validierung & Fehlermeldungen

Beim Speichern oder beim Beenden eines Projekts können folgende Fehlermeldungen auftreten:

| Fehlermeldung | Ursache | Lösung |
|---------------|---------|--------|
| „Das Startdatum muss der erste Tag eines Monats sein." | Das gewählte Startdatum ist nicht der Monatserste. | Wähle einen Monatsersten als Startdatum (z. B. 01.03.2025). |
| „Das Startdatum darf nicht früher sein als das Startdatum des übergeordneten Projekts ([Datum])." | Das Startdatum liegt vor dem Startdatum des übergeordneten Projekts. | Wähle ein Startdatum, das gleich dem oder nach dem Startdatum des übergeordneten Projekts liegt. |
| „Das Startdatum darf nicht vor dem Anfang des ersten Geschäftsjahres ([Datum]) liegen." | Das Startdatum liegt vor dem ersten Geschäftsjahr der Organisation. | Wähle ein späteres Startdatum, das nicht vor dem Beginn des ersten Geschäftsjahres liegt. |
| „Das Startdatum kann nicht geändert werden, wenn das Projekt einen Eröffnungssaldo hat." | Es wurde ein Eröffnungssaldo eingetragen, der das Startdatum fixiert. | Setze zuerst den Eröffnungssaldo auf 0, dann kannst du das Startdatum ändern. |
| „Dieses Projekt kann nicht beendet werden, da es aktive Unterprojekte hat: [Projekte]." | Es existieren noch aktive Unterprojekte, die zuerst beendet werden müssen. | Beende zuerst die genannten Unterprojekte, bevor du das übergeordnete Projekt beendest. |
| „Dieses Projekt kann nicht beendet werden, da der Saldo nicht null ist. Aktueller Saldo: [Betrag]" | Der Projektsaldo ist nicht ausgeglichen. | Bringe den Saldo durch entsprechende Buchungen auf 0. |
| „Das Enddatum muss in der Vergangenheit oder heute liegen." | Ein zukünftiges Enddatum wurde gewählt. | Wähle ein Datum, das heute oder in der Vergangenheit liegt. |
| „Dieses Projekt kann nicht beendet werden, da es Finanzereignisse nach dem gewählten Enddatum hat." | Es gibt Finanzereignisse, die nach dem gewählten Enddatum liegen. | Wähle ein späteres Enddatum, das nach allen vorhandenen Finanzereignissen liegt, oder passe die betroffenen Finanzereignisse an. |

## Beziehungen zu anderen Bereichen

Die Seite „Projekt bearbeiten" steht in Verbindung mit verschiedenen anderen Bereichen der Plattform:

- **Übergeordnetes Projekt**: Projekte können hierarchisch organisiert werden. Du kannst einem Projekt ein übergeordnetes Projekt zuordnen, wodurch es zum Unterprojekt wird. Das Startdatum eines Unterprojekts darf nicht vor dem Startdatum des übergeordneten Projekts liegen.
- **Unterprojekte**: Beim Beenden eines Projekts wird geprüft, ob noch aktive Unterprojekte existieren. Diese müssen zuerst beendet werden.
- **Spenden**: Projekte können als Spendenprojekte konfiguriert werden, damit sie bei der Spendenerfassung zur Auswahl stehen. Voraussetzung: Das Tool Spenden muss aktiviert sein.
- **Finanzereignisse**: Beim Beenden eines Projekts wird geprüft, ob Finanzereignisse nach dem gewählten Enddatum existieren.
- **Projektleiter**: Benutzer können als Projektleiter zugewiesen werden, um Verantwortlichkeiten abzubilden.
- **Zeiterfassung**: Projekte können für die Zeiterfassung markiert werden, damit sie dort zur Auswahl stehen. Voraussetzung: Das Tool Zeiterfassung muss aktiviert sein.

---

## page: Donors

**Entity:** Donors  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Pages/Donors.php`  
**Updated:** 2026-02-14 18:47:29  

# Spender

## Übersicht

Auf der Seite **Spender** siehst du alle Spender eines bestimmten Projekts mit der Anzahl und dem Gesamtbetrag ihrer Spenden. Du kannst den Zeitraum frei wählen und die Kontaktdaten (E-Mail-Adresse und Anschrift) der Spender direkt in der Tabelle bearbeiten.

Die Seite befindet sich im Projektbereich und ist über die Unternavigation eines einzelnen Projekts erreichbar. Wenn für den gewählten Zeitraum keine Spenden vorliegen, wird die Tabelle leer angezeigt.

## Navigation zur Spender-Seite

Öffne ein Projekt und wähle in der Unternavigation den Reiter **Spender**. Dieser Reiter ist nur sichtbar, wenn die Tools **Spenden** und **Kontakte** aktiviert sind. Sind eines oder beide Tools nicht aktiviert, erscheint der Reiter nicht in der Navigation.

## Tabellenansicht der Spender

Die Tabelle trägt die Überschrift **Spender** und zeigt alle Kontakte an, die im gewählten Zeitraum Spenden für dieses Projekt (einschließlich Unterprojekte) getätigt haben.

### Spalten der Spender-Tabelle

| Spalte | Beschreibung | Sortierbar | Suchbar | Standardmäßig sichtbar |
|---|---|---|---|---|
| Nummer | Kontaktnummer des Spenders | Ja | Ja | Ja |
| Name | Name des Spenders (verlinkt zur Kontakt-Übersicht). In der Zusammenfassungszeile wird die Anzahl der Spender angezeigt. | Ja | Ja | Ja |
| Email-Adresse | E-Mail-Adresse des Spenders, direkt in der Tabelle bearbeitbar | Nein | Ja | Ja |
| Adresszeile 1 | Erste Adresszeile, direkt in der Tabelle bearbeitbar | Nein | Ja | Ja |
| Adresszeile 2 | Zweite Adresszeile, direkt in der Tabelle bearbeitbar | Nein | Ja | Nein (ausgeblendet) |
| PLZ | Postleitzahl, direkt in der Tabelle bearbeitbar | Ja | Ja | Ja |
| Ort | Ort, direkt in der Tabelle bearbeitbar | Ja | Ja | Ja |
| Land | Land als Auswahlliste, direkt in der Tabelle bearbeitbar | Ja | Nein | Nein (ausgeblendet) |
| Projekt | Zeigt die Projekte an, für die der Spender gespendet hat. Diese Spalte ist nur sichtbar, wenn das aktuelle Projekt Unterprojekte hat. | Nein | Nein | Nein (ausgeblendet) |
| Anzahl Spenden | Anzahl der Spenden des Spenders im gewählten Zeitraum. In der Zusammenfassungszeile wird die Gesamtanzahl aller Spenden angezeigt. | Ja | Nein | Ja |
| Gesamtbetrag | Summe aller Spenden des Spenders im gewählten Zeitraum, als Geldbetrag formatiert. Negative Beträge werden rot dargestellt. In der Zusammenfassungszeile wird der Gesamtbetrag aller Spenden angezeigt. | Ja | Nein | Ja |

### Zeitraumfilter auf der Spender-Seite

Über den Zeitraum-Wähler oberhalb der Tabelle kannst du den betrachteten Zeitraum einstellen. Wenn du den Zeitraum änderst, wird die Tabelle automatisch aktualisiert und zeigt nur die Spender an, die im neuen Zeitraum Spenden getätigt haben.

### Spalten ein- und ausblenden

Über das Spalten-Menü oberhalb der Tabelle kannst du einzelne Spalten der Spender-Tabelle ein- und ausblenden. Standardmäßig ausgeblendete Spalten (Adresszeile 2, Land, Projekt) kannst du bei Bedarf einblenden.

## Aktionen auf der Spender-Seite

### Direktbearbeitung der Kontaktdaten in der Tabelle

Die Felder **Email-Adresse**, **Adresszeile 1**, **Adresszeile 2**, **PLZ**, **Ort** und **Land** können direkt in der Tabellenzeile bearbeitet werden. Änderungen werden sofort gespeichert. Wenn für einen Kontakt noch keine Adresse hinterlegt ist, wird beim ersten Bearbeiten eines Adressfeldes automatisch eine neue Adresse angelegt.

Die Direktbearbeitung ist nur möglich, wenn du die Berechtigung **write contacts** hast. Ohne diese Berechtigung werden die Felder schreibgeschützt angezeigt und können nicht verändert werden.

### Kontakt öffnen

Durch Klick auf den Namen eines Spenders gelangst du zur Kontakt-Übersicht des jeweiligen Spenders. Dort findest du alle weiteren Details und Informationen zum Kontakt.

## Berechtigungen für die Spender-Seite

- Die Tools **Spenden** und **Kontakte** müssen aktiviert sein, damit die Spender-Seite zugänglich ist und der Reiter in der Projektnavigation angezeigt wird.
- Die Direktbearbeitung der Kontaktdaten (E-Mail-Adresse und Adressfelder) in der Tabelle erfordert die Berechtigung **write contacts**. Ohne diese Berechtigung sind die Felder sichtbar, aber schreibgeschützt.

## Beziehungen der Spender-Seite zu anderen Bereichen

- **Kontakte**: Jeder Spender ist ein Kontakt. Der Name in der Tabelle verlinkt auf die Kontakt-Übersicht, wo du alle Details zum jeweiligen Kontakt findest.
- **Spenden**: Die Spender-Tabelle zeigt Spendendaten (Anzahl und Beträge) aus den Finanzereignissen des Projekts. Die angezeigten Werte hängen vom gewählten Zeitraum ab.
- **Projekte**: Die Spenderdaten beziehen sich auf das aktuelle Projekt einschließlich aller Unterprojekte. Die Spalte **Projekt** zeigt bei Projekten mit Unterprojekten an, für welche konkreten Projekte gespendet wurde.

---

## page: Donations

**Entity:** Donations  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource/Pages/Donations.php`  
**Updated:** 2026-02-14 18:45:57  

# Spenden (Projektansicht)

## Übersicht

Diese Seite zeigt alle Spenden, die einem bestimmten Projekt zugeordnet sind. Du kannst hier die Spendenliste einsehen, nach Datum filtern, Spenden durchsuchen und festlegen, ob für einzelne Spenden eine Spendenbescheinigung erstellt werden soll.

Die Seite ist Teil der Projektdetails und wird als Unternavigationspunkt innerhalb eines Projekts angezeigt. Wenn das Projekt Unterprojekte hat, werden deren Spenden ebenfalls in dieser Tabelle mit aufgeführt.

## Navigation

Die Spendenübersicht in der Projektansicht erreichst du über die Unternavigation eines Projekts: **Projekte → [Projektname] → Spenden**.

Sie erscheint als Tab in der Detailansicht eines Projekts, neben weiteren Reitern wie „Übersicht", „Spender" und „Finanzereignisse".

**Voraussetzung:** Das Tool **Spenden** muss für deine Organisation aktiviert sein, damit dieser Tab sichtbar ist.

## Tabellenansicht der Spenden

Die Tabelle trägt die Überschrift **„Spenden"** und zeigt folgende Spalten:

| Spalte | Beschreibung | Sortierbar | Durchsuchbar | Ein-/Ausblendbar |
|---|---|---|---|---|
| Datum | Zahlungsdatum der Spende | Ja | Nein | Nein |
| Kontaktname | Name des Spenders bzw. der Spenderin | Nein | Nein | Nein |
| Beschreibung | Beschreibungstext der Spende. Lange Texte werden abgeschnitten; den vollständigen Text siehst du als Tooltip, wenn du mit der Maus darüberfährst. | Nein | Ja | Ja |
| Konto | Name des Bankkontos, über das die Spende eingegangen ist. Diese Spalte ist nur sichtbar, wenn deine Organisation mehr als ein Bankkonto hat. | Nein | Nein | Ja (standardmäßig ausgeblendet) |
| Projekt | Zugeordnetes (Unter-)Projekt, dargestellt als Badge. Diese Spalte ist nur sichtbar, wenn das aktuelle Projekt Unterprojekte hat. | Nein | Nein | Ja (standardmäßig ausgeblendet) |
| Bescheinigung | Schalter, ob für diese Spende eine Spendenbescheinigung erstellt werden soll | Nein | Nein | Ja |
| Betrag | Spendenbetrag in der Währung deiner Organisation. Negative Beträge werden rot dargestellt. Am Ende der Tabelle wird die Summe aller aktuell angezeigten Beträge angezeigt. | Ja | Nein | Nein |

**Standardsortierung:** Nach Datum, neueste Spenden zuerst.

**Suche:** Über das Suchfeld kannst du die Spendenliste nach Beschreibungstexten durchsuchen. Die Tabelle zeigt dann nur noch Spenden an, deren Beschreibung den Suchbegriff enthält.

### Filter der Spendentabelle

| Filter | Beschreibung |
|---|---|
| Datum | Datumsbereichsfilter, mit dem du die Spenden auf einen bestimmten Zeitraum einschränken kannst. Wähle ein Start- und/oder Enddatum, um nur Spenden innerhalb dieses Zeitraums anzuzeigen. |

## Aktionen

### Bescheinigung umschalten

Über den Schalter in der Spalte **Bescheinigung** kannst du für jede einzelne Spende festlegen, ob sie bei einer späteren Erstellung von Spendenbescheinigungen berücksichtigt werden soll. Der Schalter wirkt sich nicht sofort auf eine Bescheinigung aus – er markiert die Spende lediglich für die spätere Verarbeitung.

**Berechtigung:** Du benötigst die Berechtigung **„write donations"**, um den Schalter umstellen zu können. Ohne diese Berechtigung ist der Schalter sichtbar, aber deaktiviert und kann nicht verändert werden.

## Berechtigungen für die Spenden-Projektansicht

| Aktion | Erforderliche Berechtigung |
|---|---|
| Seite aufrufen und Spenden einsehen | Das Tool **Spenden** muss aktiviert sein |
| Bescheinigung-Schalter umstellen | Berechtigung **„write donations"** |

Wenn du nicht über die nötige Berechtigung verfügst, wird der Tab „Spenden" in der Projektnavigation nicht angezeigt oder interaktive Elemente wie der Bescheinigung-Schalter sind deaktiviert.

## Beziehungen zu anderen Bereichen

- **Projekt:** Die Spenden werden im Kontext eines bestimmten Projekts angezeigt. Hat das Projekt Unterprojekte, werden deren Spenden automatisch mit einbezogen und in der Tabelle aufgelistet. Über die Spalte „Projekt" erkennst du, welchem (Unter-)Projekt eine Spende zugeordnet ist.
- **Spender (Donors):** Über den Reiter „Spender" in der gleichen Projektansicht kannst du die zugehörigen Spenderkontakte einsehen. Der Kontaktname in der Spendentabelle zeigt an, von wem die jeweilige Spende stammt.
- **Finanzereignisse:** Jede Spende ist mit einem Finanzereignis verknüpft. Diese findest du im Reiter „Finanzereignisse" des gleichen Projekts.
- **Spendenbescheinigungen:** Der Bescheinigung-Schalter in der Spendentabelle steuert, ob die Spende bei einer späteren Erstellung von Spendenbescheinigungen berücksichtigt wird.
- **Bankkonten:** Die Spalte „Konto" zeigt das Bankkonto an, über das die Spende eingegangen ist. Diese Spalte erscheint nur, wenn deine Organisation mehrere Bankkonten eingerichtet hat.

---

## page: EditLottery

**Entity:** EditLottery  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/LotteryResource/Pages/EditLottery.php`  
**Updated:** 2026-02-14 18:39:16  

# Lotterie bearbeiten

## Übersicht

Auf der Seite „Lotterie bearbeiten" kannst du eine bestehende Lotterie anpassen. Du kannst alle Einstellungen der Lotterie verändern — von den Grundeinstellungen über die Verlosungsdetails bis hin zu den Textbausteinen und E-Mail-Vorlagen. Der Seitentitel zeigt den Namen der aktuellen Lotterie an.

Die Bearbeitungsseite ist in mehrere Tabs unterteilt: **Grundeinstellungen**, **Verlosung** und **Textbausteine**.

## Formularfelder

### Tab: Grundeinstellungen

Im Tab „Grundeinstellungen" legst du die grundlegenden Daten der Lotterie fest.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name der Lotterie | Textfeld | Ja | Name der Lotterie. Wird z. B. in E-Mails oder Links verwendet. |
| Spendenseite | Textfeld (URL) | Nein | URL der Spendenseite aus dem Twingle-Projekt. Muss eine gültige URL sein. |
| Mail-Adresse | Mail-Adress-Auswahl | Nein | Absender-E-Mail-Adresse für die Lotterie-Mails. Dieses Feld ist nur beim Bearbeiten sichtbar (nicht beim Erstellen). |
| Los-Vorlage | Datei-Upload | Nein | PDF-Vorlage, in die die Losnummern eingetragen werden. Es können ausschließlich PDF-Dateien hochgeladen werden. Dieses Feld ist nur beim Bearbeiten sichtbar. Nach dem Hochladen kannst du über die Aktion **„Losnummern-Bereich auswählen"** den Bereich markieren, in dem die Losnummern auf dem Los erscheinen sollen. Falls der Bereich noch nicht markiert wurde, wird ein Hinweis angezeigt. |

### Tab: Verlosung

Im Tab „Verlosung" der Lotterie legst du fest, wie viele Lose und Preise es gibt und wie die Bestellung abläuft.

**Bereich: Lose**

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Anzahl der Lose | Zahlenfeld | Ja | Gesamtanzahl der verfügbaren Lose für diese Lotterie. |
| Anzahl der Preise | Zahlenfeld | Ja | Gesamtanzahl der Preise, die bei der Verlosung vergeben werden. |

**Bereich: Losbestellungen**

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Maximale Anzahl | Zahlenfeld | Ja | Maximale Anzahl an Losen, die ein Besteller pro Bestellung kaufen kann. |
| Vorschlag Anzahl | Zahlenfeld | Ja | Voreingestellte Anzahl an Losen, die dem Besteller auf der Bestellseite vorgeschlagen wird. |
| Spendenbetrag | Geldbetrag | Ja | Vorgeschlagener Spendenbetrag pro Los, der dem Besteller angezeigt wird. |
| Newsletter | Mehrfachauswahl | Nein | Auswahl der Newsletter, die bei der Losbestellung zum Abonnieren angeboten werden. Dieses Feld ist nur sichtbar, wenn das Tool **Newsletter** für die Organisation aktiviert ist. |

### Tab: Textbausteine

Im Tab „Textbausteine" der Lotterie passt du alle Texte an, die den Teilnehmern auf der Verlosungsseite, der Bestätigungsseite und in E-Mails angezeigt werden. Dieser Tab ist nur beim Bearbeiten einer bestehenden Lotterie sichtbar.

Die Textbausteine sind in weitere Unter-Tabs aufgeteilt:

#### Unter-Tab: Allgemein

Hier definierst du Texte der Lotterie für besondere Zustände, z. B. wenn die Lotterie noch nicht gestartet oder bereits beendet wurde.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Lotterie noch nicht gestartet | Rich-Text-Editor | Nein | Text, der Besuchern angezeigt wird, wenn die Lotterie noch nicht gestartet wurde. |
| Lotterie bereits abgeschlossen | Rich-Text-Editor | Nein | Text, der Besuchern angezeigt wird, wenn die Lotterie bereits beendet wurde. |
| Keine Lose (mehr) verfügbar | Rich-Text-Editor | Nein | Text, der angezeigt wird, wenn alle Lose der Lotterie vergeben sind und keine mehr zur Verfügung stehen. |

#### Unter-Tab: Verlosungsseite

Hier bearbeitest du die Texte, die auf der Verlosungsseite der Lotterie erscheinen.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Intro | Rich-Text-Editor | Nein | Einleitungstext, der auf der Verlosungsseite unterhalb der Losanzahl erscheint. |
| Einleitung Spendenbetrag | Rich-Text-Editor | Nein | Text, der vor dem Eingabefeld für den Spendenbetrag angezeigt wird. |
| Newsletter | Rich-Text-Editor | Nein | Text, der oberhalb der Newsletter-Auswahl auf der Verlosungsseite erscheint. |

#### Unter-Tab: Spendenseite

Hier bearbeitest du den Text, der auf der Spendenseite der Lotterie angezeigt wird.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Spendenseite Intro | Rich-Text-Editor | Nein | Text, der oberhalb des Spendenformulars auf der Spendenseite der Lotterie erscheint. |

#### Unter-Tab: Bestätigungsseite

Hier definierst du die Texte, die den Teilnehmern der Lotterie nach dem Klick auf den Bestätigungslink in der E-Mail angezeigt werden.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Bestätigung erfolgreich | Rich-Text-Editor | Nein | Text, der angezeigt wird, wenn die Bestätigung der E-Mail-Adresse erfolgreich war und die Lose zugewiesen wurden. |
| Keine Lose mehr verfügbar | Rich-Text-Editor | Nein | Text, der angezeigt wird, wenn zum Zeitpunkt der Bestätigung keine Lose mehr verfügbar sind. Das kann passieren, wenn zwischen Bestellung und Bestätigung alle Lose vergeben wurden. |
| Bestätigung fehlgeschlagen | Rich-Text-Editor | Nein | Text, der angezeigt wird, wenn die Bestätigung fehlgeschlagen ist, z. B. weil der Bestätigungslink ungültig oder abgelaufen ist. |

#### Unter-Tab: E-Mails

Hier bearbeitest du die E-Mail-Vorlagen der Lotterie. Auf der linken Seite werden die verfügbaren Platzhalter angezeigt, die du in den E-Mail-Texten verwenden kannst:

| Platzhalter | Beschreibung |
|-------------|--------------|
| `{lottery}` | Name der Lotterie |
| `{clientName}` | Name des Bestellers |
| `{clientEmail}` | E-Mail-Adresse des Bestellers |
| `{ticketNumbers}` | Losnummern des Bestellers (kommagetrennt) |
| `{organizationName}` | Name deines Vereins |
| `{confirmButton}` | Button zum Bestätigen der E-Mail-Adresse (nur in der Opt-In-E-Mail relevant) |

**E-Mail: Opt-In-E-Mail**

Diese E-Mail wird nach der Losbestellung verschickt, damit der Besteller seine E-Mail-Adresse bestätigt. Erst nach erfolgreicher Bestätigung werden die Lose zugewiesen.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Betreff | Textfeld | Nein | Betreff der Bestätigungs-E-Mail. |
| Text | Rich-Text-Editor | Nein | Inhalt der Bestätigungs-E-Mail. Verwende den Platzhalter `{confirmButton}`, um den Bestätigungsbutton an der gewünschten Stelle einzufügen. |
| Text des Bestätigungs-Buttons | Textfeld | Nein | Beschriftung des Buttons in der Bestätigungs-E-Mail. |

**E-Mail: E-Mail mit Losen**

Diese E-Mail wird nach erfolgreicher Bestätigung der E-Mail-Adresse verschickt und enthält die zugewiesenen Losnummern.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Betreff | Textfeld | Nein | Betreff der E-Mail mit den Losnummern. |
| Text | Rich-Text-Editor | Nein | Inhalt der E-Mail, die dem Besteller seine Losnummern mitteilt. Verwende den Platzhalter `{ticketNumbers}`, um die Losnummern einzufügen. |

## Aktionen

Auf der Seite „Lotterie bearbeiten" stehen folgende Aktionen zur Verfügung:

| Aktion | Beschreibung |
|--------|--------------|
| **Löschen** | Löscht die Lotterie. Diese Aktion ist nur verfügbar, wenn noch keine Bestellungen für die Lotterie vorliegen. Sobald mindestens eine Bestellung existiert, wird die Löschen-Schaltfläche ausgeblendet. Vor dem Löschen musst du die Aktion bestätigen. |
| **Losnummern-Bereich auswählen** | Öffnet ein Overlay, in dem du den Bereich für die Losnummern in der PDF-Vorlage markieren kannst. Diese Aktion ist nur verfügbar, wenn eine Los-Vorlage hochgeladen wurde. Der markierte Bereich legt fest, an welcher Stelle auf dem Los die Losnummer gedruckt wird. |

## Berechtigungen

Um die Seite „Lotterie bearbeiten" nutzen zu können, müssen folgende Voraussetzungen erfüllt sein:

- Das Tool **Lotterie** muss für die Organisation aktiviert sein, damit der Bereich in der Seitenleiste sichtbar ist.

## Häufige Fragen

**Warum kann ich die Lotterie nicht löschen?**
Die Löschen-Schaltfläche wird ausgeblendet, sobald mindestens eine Bestellung für die Lotterie vorliegt. Bereits bestellte Lose und zugehörige Daten sind dadurch geschützt.

**Warum sehe ich den Tab „Textbausteine" nicht?**
Der Tab „Textbausteine" ist nur beim Bearbeiten einer bestehenden Lotterie sichtbar. Beim Erstellen einer neuen Lotterie wird er nicht angezeigt — speichere die Lotterie zuerst und öffne sie dann erneut zur Bearbeitung.

**Warum sehe ich das Feld „Newsletter" nicht?**
Das Feld „Newsletter" im Tab „Verlosung" wird nur angezeigt, wenn das Tool **Newsletter** für deine Organisation aktiviert ist.

**Was passiert, wenn zwischen Bestellung und Bestätigung alle Lose vergeben werden?**
Wenn ein Besteller seine E-Mail-Adresse bestätigt, aber zwischenzeitlich alle Lose vergeben wurden, wird ihm der unter „Bestätigungsseite → Keine Lose mehr verfügbar" hinterlegte Text angezeigt. Die Bestellung kann dann nicht mehr abgeschlossen werden.

---

## page: CreateLottery

**Entity:** CreateLottery  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/LotteryResource/Pages/CreateLottery.php`  
**Updated:** 2026-02-14 18:36:40  

# Lotterie erstellen

## Übersicht

Auf der Seite „Lotterie erstellen" legst du eine neue Lotterie an. Dabei definierst du die grundlegenden Einstellungen wie Name, Anzahl der Lose und Preise sowie Bestelloptionen. Lotterien werden im Bereich **Fundraising** verwaltet.

## Formularfelder beim Erstellen einer Lotterie

Das Formular zum Erstellen einer Lotterie ist in Tabs unterteilt. Beim Erstellen stehen dir die Tabs **Grundeinstellungen** und **Verlosung** zur Verfügung. Der Tab **Textbausteine** wird erst beim späteren Bearbeiten einer bestehenden Lotterie sichtbar.

### Tab: Grundeinstellungen

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name der Lotterie | Textfeld | Ja | Der Name der Lotterie. Wird unter anderem in E-Mails und Links angezeigt. |
| Spendenseite | Textfeld (URL) | Nein | URL der Spendenseite aus dem Twingle-Projekt. Falls angegeben, muss es sich um eine gültige URL handeln. |

**Hinweis:** Die Felder **Mail-Adresse** und **Los-Vorlage** sind beim Erstellen noch nicht sichtbar. Sie erscheinen erst, wenn du die Lotterie nachträglich bearbeitest.

- **Mail-Adresse**: Absender-Adresse für E-Mails, die im Rahmen der Lotterie versendet werden.
- **Los-Vorlage**: PDF-Vorlage, in die die Losnummern eingetragen werden. Nach dem Hochladen kannst du über die Aktion „Losnummern-Bereich auswählen" den Bereich auf der PDF-Seite markieren, in dem die Losnummern platziert werden sollen.

### Tab: Verlosung

#### Bereich: Lose

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Anzahl der Lose | Zahlenfeld | Ja | Die Gesamtanzahl der verfügbaren Lose für diese Lotterie. |
| Anzahl der Preise | Zahlenfeld | Ja | Die Gesamtanzahl der Preise, die bei dieser Lotterie verlost werden. |

#### Bereich: Losbestellungen

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Maximale Anzahl | Zahlenfeld | Ja | Die maximale Anzahl an Losen, die pro einzelner Bestellung bestellt werden können. |
| Vorschlag Anzahl | Zahlenfeld | Ja | Die voreingestellte Anzahl an Losen, die beim Bestellen als Vorschlag angezeigt wird. |
| Spendenbetrag | Geldbetrag | Ja | Der vorgeschlagene Spendenbetrag pro Los. |
| Newsletter | Mehrfachauswahl | Nein | Auswahl der Newsletter, die Bestellende beim Loskauf abonnieren können. Dieses Feld ist nur sichtbar, wenn das Tool **Newsletter** für deine Organisation aktiviert ist. |

### Tab: Textbausteine

Der Tab „Textbausteine" ist beim Erstellen einer neuen Lotterie **nicht sichtbar**. Er wird erst beim Bearbeiten einer bestehenden Lotterie angezeigt und ermöglicht dir, Texte für die Lotterie-Kommunikation anzupassen.

## Berechtigungen für die Lotterie-Erstellung

Um eine Lotterie erstellen zu können, muss das Tool **Lotterie** für deine Organisation aktiviert sein.

## Verknüpfte Bereiche nach dem Erstellen einer Lotterie

Nach dem erfolgreichen Erstellen einer Lotterie stehen dir folgende verknüpfte Bereiche zur Verfügung:

- **Bestellungen** – Übersicht der eingegangenen Losbestellungen zu dieser Lotterie.
- **Lose** – Übersicht aller Lose dieser Lotterie und deren Zuordnung zu Bestellungen.
- **Bereiche** – Verwaltung der Losnummern-Bereiche für diese Lotterie.

---

## page: ManageFundingApplications

**Entity:** ManageFundingApplications  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FundingApplicationResource/Pages/ManageFundingApplications.php`  
**Updated:** 2026-02-14 18:35:10  

# Förderanträge

## Übersicht
Auf der Seite „Förderanträge" kannst du die Förderanträge deiner Organisation verwalten. Du kannst neue Förderanträge anlegen, bestehende bearbeiten oder löschen und dir einen Überblick über den Status und die Beträge aller Förderanträge verschaffen.

## Navigation
Die Seite „Förderanträge" findest du in der Seitenleiste unter der Menügruppe **Finanzen**.

## Formularfelder für Förderanträge

Beim Erstellen oder Bearbeiten eines Förderantrags stehen dir folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Bezeichnung | Textfeld | Ja | Name oder Titel des Förderantrags (max. 255 Zeichen) |
| Fördermittelgeber | Auswahlfeld mit Suche | Nein | Kontakt vom Typ „Organisation", der als Fördermittelgeber zugeordnet wird. Du kannst bereits vorhandene Kontakte durchsuchen und auswählen. |
| Zeitraum Beginn | Datumsfeld | Nein | Startdatum des Förderzeitraums |
| Zeitraum Ende | Datumsfeld | Nein | Enddatum des Förderzeitraums |
| Status | Auswahlfeld | Ja | Status des Förderantrags. Beim Anlegen wird standardmäßig „Entwurf" vorausgewählt. |
| Betrag | Geldbetragsfeld | Ja | Beantragte Fördersumme |
| Bezahlter Betrag | Geldbetragsfeld | Ja | Bereits ausgezahlter Betrag. Der Standardwert ist 0. |

## Tabellenansicht der Förderanträge

### Spalten
Die Tabelle auf der Seite „Förderanträge" zeigt folgende Spalten:

- **Bezeichnung** – Name des Förderantrags (durchsuchbar, sortierbar)
- **Fördermittelgeber** – Name des zugeordneten Kontakts (durchsuchbar, sortierbar)
- **Zeitraum Beginn** – Startdatum des Förderzeitraums im Datumsformat (sortierbar)
- **Zeitraum Ende** – Enddatum des Förderzeitraums im Datumsformat (sortierbar)
- **Status** – Aktueller Status als farbiges Badge (sortierbar)
- **Betrag** – Beantragte Fördersumme als Währungsbetrag (sortierbar, mit Summenzeile am Tabellenende)
- **Bezahlter Betrag** – Bereits ausgezahlter Betrag als Währungsbetrag (sortierbar, mit Summenzeile am Tabellenende)

### Suche und Sortierung
Du kannst die Tabelle über das Suchfeld nach **Bezeichnung** und **Fördermittelgeber** durchsuchen. Alle Spalten lassen sich durch Klick auf die Spaltenüberschrift sortieren.

### Filter
- **Status** – Filtert die Förderanträge nach einem oder mehreren Status-Werten. Es ist eine Mehrfachauswahl möglich. Der Filter wird über ein Modal-Fenster geöffnet.

### Summen
Am Ende der Tabelle werden die Gesamtsummen für die Spalten **Betrag** und **Bezahlter Betrag** angezeigt.

## Aktionen für Förderanträge

- **Förderantrag erstellen** – Über die Schaltfläche oben rechts auf der Seite „Förderanträge" kannst du einen neuen Förderantrag anlegen. Es öffnet sich ein Formular mit den oben beschriebenen Feldern.
- **Bearbeiten** – Über das Bearbeiten-Symbol in der jeweiligen Tabellenzeile kannst du einen bestehenden Förderantrag ändern.
- **Löschen** – Über das Löschen-Symbol in der jeweiligen Tabellenzeile kannst du einen einzelnen Förderantrag löschen.
- **Mehrere löschen** – Du kannst mehrere Förderanträge über die Checkboxen auswählen und über die Sammelaktion gleichzeitig löschen.

## Berechtigungen für Förderanträge

Damit der Menüpunkt „Förderanträge" sichtbar und zugänglich ist, muss das Tool **Budgets** für deine Organisation aktiviert sein.

## Validierung und Fehlermeldungen bei Förderanträgen

Beim Speichern eines Förderantrags werden die folgenden Regeln geprüft:

| Feld | Regel |
|------|-------|
| Bezeichnung | Pflichtfeld |
| Bezeichnung | Maximal 255 Zeichen |
| Status | Pflichtfeld |
| Betrag | Pflichtfeld |
| Bezahlter Betrag | Pflichtfeld |

## Beziehungen der Förderanträge zu anderen Bereichen

- **Kontakte** – Der Fördermittelgeber eines Förderantrags wird aus den vorhandenen Kontakten vom Typ „Organisation" ausgewählt. Nur Kontakte vom Typ „Organisation" stehen als Fördermittelgeber zur Auswahl.
- **Budgets** – Förderanträge gehören zum Tool **Budgets**.

---

## page: ListForms

**Entity:** ListForms  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FormResource/ListForms.php`  
**Updated:** 2026-02-14 18:33:33  

# Formulare – Übersicht

## Übersicht
Auf der Seite „Formulare – Übersicht" siehst du alle erstellten Formulare in einer Listenansicht. Du kannst neue Formulare erstellen, bestehende Formulare ansehen, bearbeiten oder löschen.

## Navigation
Die Formularübersicht findest du im Bereich **Kommunikation** in der Seitenleiste. Voraussetzung ist, dass das Tool **Formulare** für deine Organisation aktiviert ist.

## Tabellenansicht / Listenansicht
Die Formularübersicht zeigt alle Formulare in einer Tabelle an. Durch Klick auf einen Eintrag gelangst du zur Detailansicht des jeweiligen Formulars.

## Aktionen in der Formularübersicht

### Neues Formular erstellen
Über die Schaltfläche **Erstellen** in der Kopfzeile der Formularübersicht kannst du ein neues Formular anlegen. Das Erstellungsformular öffnet sich als seitliches Overlay. Fülle die Pflichtfelder aus und speichere das Formular. Nach erfolgreicher Erstellung wirst du automatisch zum Formular-Builder weitergeleitet, in dem du die einzelnen Felder des Formulars gestalten kannst.

### Einzelaktionen pro Formular
Über das Aktionsmenü jedes Eintrags in der Formularübersicht stehen folgende Optionen zur Verfügung:

- **Anzeigen** – Öffnet die Detailansicht des Formulars.
- **Bearbeiten** – Öffnet das Bearbeitungsformular in einem breiten Modal-Fenster, in dem du die Einstellungen des Formulars anpassen kannst.
- **Löschen** – Löscht das Formular.

### Massenaktionen in der Formularübersicht
Du kannst mehrere Formulare gleichzeitig auswählen. Anschließend steht dir die Massenaktion **Löschen** zur Verfügung, um alle ausgewählten Formulare auf einmal zu entfernen.

## Formularfelder beim Erstellen und Bearbeiten

Das Formular zum Erstellen und Bearbeiten eines Formulars ist in Tabs organisiert. Neben den Standardfeldern stehen je nach Konfiguration deiner Organisation weitere Tabs zur Verfügung:

### Tab „Persönliche Seite"
Dieser Tab ist nur sichtbar, wenn die Einstellung „Persönliche Seite" in deiner Organisation aktiviert ist.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Aktiv | Checkbox | Nein | Aktiviert die persönliche Seite für dieses Formular. |

### Tab „Workflows"
Dieser Tab ist nur sichtbar, wenn das Tool **Workflows** für deine Organisation aktiviert ist.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Workflows | Mehrfachauswahl | Nein | Wähle einen oder mehrere Workflows aus, die nach dem Absenden des Formulars automatisch ausgelöst werden sollen. |

## Berechtigungen für die Formularübersicht
Um die Formularübersicht nutzen zu können, muss folgende Voraussetzung erfüllt sein:

- Das Tool **Formulare** muss für deine Organisation aktiviert sein.

## Beziehungen und verknüpfte Bereiche
- **Workflows**: Formulare können mit Workflows verknüpft werden. Nach dem Absenden eines Formulars werden die zugeordneten Workflows automatisch ausgelöst. Das Tool **Workflows** muss dafür aktiviert sein.
- **Formular-Builder**: Nach dem Erstellen eines neuen Formulars wirst du automatisch zum Formular-Builder weitergeleitet. Dort gestaltest du die einzelnen Felder und den Aufbau des Formulars.
- **Persönliche Seite**: Formulare können optional mit einer persönlichen Seite verknüpft werden, sofern diese Funktion in deiner Organisation aktiviert ist.

---

## page: ManageFixedAssets

**Entity:** ManageFixedAssets  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FixedAssetResource/Pages/ManageFixedAssets.php`  
**Updated:** 2026-02-14 18:32:31  

# Anlagenverwaltung

## Übersicht

Die Anlagenverwaltung ermöglicht es dir, Anlagegüter deiner Organisation zu erfassen, zu verwalten und deren Abschreibungen nachzuverfolgen. Du kannst bestehende Anlagegüter hinzufügen, einsehen, bearbeiten und löschen. Die Seite zeigt eine Übersicht aller erfassten Anlagegüter mit ihren wichtigsten Kennzahlen wie Inventarnummer, Anschaffungsbetrag und Restwert.

## Navigation

Die Anlagenverwaltung findest du in der Seitenleiste im Bereich **Finanzen**.

## Tabellenansicht der Anlagenverwaltung

Die Tabelle der Anlagenverwaltung zeigt folgende Spalten:

| Spalte | Beschreibung |
|---|---|
| Inventarnummer | Eindeutige Nummer des Anlageguts |
| Bezeichnung | Name bzw. Beschreibung des Anlageguts |
| Abschreibungsart | Art der Abschreibung (z. B. Linear, Degressiv, Sofort, Sammelposten) |
| Anschaffungsdatum | Datum, an dem das Anlagegut gekauft wurde |
| Anschaffungsbetrag (netto) | Der ursprüngliche Netto-Kaufpreis |
| Restwert | Der aktuell verbleibende Buchwert nach bisherigen Abschreibungen |

### Filter in der Anlagenverwaltung

- **Anschaffungsdatum**: Du kannst die Tabelle nach einem oder mehreren Anschaffungsdaten filtern (Mehrfachauswahl möglich).

## Aktionen in der Anlagenverwaltung

### Bestehendes Anlagegut hinzufügen (Header-Aktion)

Über die Schaltfläche oben rechts kannst du ein bereits vorhandenes Anlagegut in die Anlagenverwaltung übernehmen. Diese Funktion ist gedacht für Anlagegüter, die bisher in einem anderen System (z. B. Excel oder einer anderen Buchhaltungssoftware) verwaltet wurden und nun in der Anlagenverwaltung von ngo.tools erfasst werden sollen.

Nach dem Klick öffnet sich ein Formular mit den im Abschnitt „Formularfelder" beschriebenen Feldern.

### Anschauen

Zeigt eine Detailansicht des ausgewählten Anlageguts an.

### Bearbeiten

Ermöglicht das Ändern der **Bezeichnung** eines bestehenden Anlageguts. Andere Felder wie Anschaffungsbetrag oder Abschreibungsdauer können nachträglich nicht geändert werden.

### Löschen

Ein einzelnes Anlagegut kann über das Aktionsmenü in der jeweiligen Tabellenzeile gelöscht werden.

### Massenlöschung

Du kannst mehrere Anlagegüter gleichzeitig auswählen und über die erscheinende Sammelaktion löschen.

## Formularfelder – Bestehendes Anlagegut hinzufügen

Beim Hinzufügen eines bestehenden Anlageguts in die Anlagenverwaltung stehen folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Inventarnummer | Textfeld | Ja | Eindeutige Nummer des Anlageguts. Wird automatisch vorausgefüllt, kann aber manuell angepasst werden. |
| Bezeichnung | Textfeld | Ja | Name oder Beschreibung des Anlageguts (z. B. „Laptop Dell XPS 15" oder „Büroschreibtisch"). |
| Anschaffungsdatum | Datumsfeld | Ja | Das Datum, an dem die Organisation das Anlagegut ursprünglich gekauft hat. |
| Anschaffungsbetrag (netto) | Geldbetragsfeld | Ja | Der Nettobetrag, den die Organisation ursprünglich für das Anlagegut bezahlt hat. |
| Übernahmedatum | Datumsfeld | Ja | Das Datum, zu dem das Anlagegut in die Anlagenverwaltung von ngo.tools übernommen wird. |
| Übernahmebetrag (netto) | Geldbetragsfeld | Ja | Der Buchwert bei Übernahme aus dem Vorsystem. Entspricht in der Regel den Nettoanschaffungskosten abzüglich aller bisherigen Abschreibungen, die bereits im Vorsystem gebucht wurden. |
| Anschaffungskonto | Kontoauswahl | Ja | Das Konto, auf dem das Anlagegut gebucht wird. Es werden nur Anlagekonten zur Auswahl angeboten. Die Wahl des Kontos beeinflusst die Vorschläge für Abschreibungskonto und Abschreibungsdauer. |
| Anlagegut wird abgeschrieben | Schalter | Nein | Manche Anlagegüter (z. B. Grundstücke, Wertpapiere) verlieren nicht an Wert und werden daher nicht abgeschrieben. Mit diesem Schalter kannst du laufende Abschreibungsbuchungen deaktivieren. Dieses Feld ist nur bei linearer oder degressiver Abschreibung verfügbar. |
| Abschreibungskonto | Kontoauswahl | Ja | Das Konto, auf das die Abschreibungen gebucht werden. Wird automatisch basierend auf dem gewählten Anschaffungskonto vorgeschlagen. Nur bei linearer oder degressiver Abschreibung bearbeitbar. |
| Abschreibungsdauer (in Monaten) | Zahlenfeld | Ja | Die gewöhnliche Nutzungsdauer des Anlageguts in Monaten (in der Regel laut AfA-Tabelle). Die verbleibende Abschreibungsdauer wird automatisch anhand des Übernahmedatums berechnet. Der Wert wird automatisch basierend auf dem Anschaffungskonto vorgeschlagen. Nur bei linearer oder degressiver Abschreibung bearbeitbar. |
| Abschreibungsmodus | Auswahl (Radio) | Ja | Wahl zwischen den verfügbaren Abschreibungsmodi. Die verfügbaren Optionen hängen vom Anschaffungsbetrag ab. Dieses Feld wird nur angezeigt, wenn mehr als ein Modus verfügbar ist. |
| Degressive Abschreibung Prozent | Zahlenfeld | Ja | Prozentualer Abschreibungssatz. Nur sichtbar, wenn der Abschreibungsmodus auf „Degressiv" steht. |
| Sphäre | Auswahl | Ja | Ordnet das Anlagegut einer Sphäre zu. |
| Projekt | Auswahl | Ja | Ordnet das Anlagegut einem Projekt zu. Dieses Feld ist nur sichtbar, wenn das Tool Projekte aktiviert ist. |
| Erinnerungswert | Schalter | Nein | Wenn aktiviert, bleibt das Anlagegut nach vollständiger Abschreibung mit einem Buchwert von 1 € im Anlagevermögen. Nur sichtbar bei linearer oder degressiver Abschreibung. |

### Abhängigkeiten zwischen Feldern in der Anlagenverwaltung

Die Felder im Formular beeinflussen sich gegenseitig:

- Der **Anschaffungsbetrag** bestimmt die verfügbaren **Abschreibungsmodi**.
- Die Felder **Anlagegut wird abgeschrieben**, **Abschreibungskonto** und **Abschreibungsdauer** sind nur bei linearer oder degressiver Abschreibung bearbeitbar. Bei Sofortabschreibung oder Sammelposten werden diese Felder deaktiviert.
- Das Feld **Erinnerungswert** ist nur sichtbar bei linearer oder degressiver Abschreibung.
- Das Feld **Degressive Abschreibung Prozent** ist nur sichtbar, wenn als Abschreibungsmodus „Degressiv" gewählt ist.
- Die Wahl des **Anschaffungskontos** beeinflusst automatisch die Vorschläge für **Abschreibungskonto** und **Abschreibungsdauer**.
- Das Feld **Projekt** ist nur sichtbar, wenn das Tool Projekte aktiviert ist.

## Berechtigungen für die Anlagenverwaltung

Das Tool **Erweiterte Buchhaltung** muss aktiviert sein, damit die Anlagenverwaltung verfügbar ist.

## Beziehungen der Anlagenverwaltung zu anderen Bereichen

Die Anlagenverwaltung ist mit mehreren anderen Bereichen von ngo.tools verknüpft:

- **Finanzereignisse**: Beim Buchen eines Finanzereignisses auf ein Anlagekonto kannst du direkt ein neues Anlagegut erfassen, ohne den Umweg über die Anlagenverwaltung nehmen zu müssen.
- **Projekte**: Anlagegüter können Projekten zugeordnet werden (nur wenn das Tool Projekte aktiviert ist).
- **Sphären**: Jedes Anlagegut wird einer Sphäre zugeordnet.

---

## page: InteractWithReceipts

**Entity:** InteractWithReceipts  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FinancialEventResource/Traits/InteractWithReceipts.php`  
**Updated:** 2026-02-14 18:30:02  

# Beleg (Belegverwaltung bei Finanzereignissen)

## Übersicht

Die Belegverwaltung ermöglicht es dir, beim Erstellen oder Bearbeiten eines Finanzereignisses Belege zuzuordnen. Der aktive Beleg wird automatisch geparst. Beim Erstellen eines Finanzereignisses versucht das System, anhand der Belegdaten Bankvorgang und Lieferant vorauszufüllen. Die Belegverwaltung ist kein eigenständiger Bereich, sondern direkt in die Erstellungs- und Bearbeitungsseiten von Finanzereignissen eingebettet.

## Navigation

Die Belegverwaltung ist kein eigenständiger Menüpunkt. Du findest sie als Bestandteil der Seiten **Finanzereignis erstellen** und **Finanzereignis bearbeiten** im Bereich **Finanzen → Finanzereignisse**.

## Formularfelder

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Beleg | Platzhalter (zeigt die ReceiptManager-Komponente) | Nein | Hier werden die dem Finanzereignis zugeordneten Belege angezeigt. Der zuletzt ausgewählte Beleg gilt als aktiver Beleg und wird automatisch geparst. |

Da das Feld nicht als Pflichtfeld gekennzeichnet ist, kannst du ein Finanzereignis auch ohne Beleg erstellen oder speichern.

## Aktionen

### Beleg auswerten (automatische Erkennung)

Wenn Belege aktualisiert werden (über das Event `receipts-updated`), wird der aktive Beleg automatisch geparst. Beim **Erstellen** eines Finanzereignisses werden aus dem aktiven Beleg automatisch Informationen erkannt und in die entsprechenden Formularfelder übernommen. Dazu gehören insbesondere:

- **Bankvorgang**: Das System versucht, den passenden Bankvorgang anhand der Belegdaten zuzuordnen.
- **Lieferant**: Der Lieferant wird aus den Belegdaten erkannt und vorausgefüllt.

Diese automatische Zuordnung von Bankvorgang und Lieferant erfolgt nur beim Erstellen, nicht beim Bearbeiten eines Finanzereignisses.

Wenn das System keine passenden Daten erkennen kann, bleiben die entsprechenden Felder leer und du kannst sie manuell ausfüllen.

### Belege hinzufügen oder entfernen

Wenn sich die Belegzuordnung ändert, wird der aktive Beleg automatisch geparst und beim Erstellen für die automatische Auswertung herangezogen.

## Beziehungen

- **Finanzereignisse**: Belege werden direkt einem Finanzereignis zugeordnet. Die Belegverwaltung ist in die Seiten „Finanzereignis erstellen" und „Finanzereignis bearbeiten" integriert.
- **Belege (Finanzen → Belege)**: Nicht zugeordnete oder mehrfach verwendbare Belege kannst du über den separaten Bereich **Finanzen → Belege** verwalten und bei neuen Finanzereignissen wiederverwenden.
- **Bankvorgänge**: Beim Erstellen eines Finanzereignisses versucht das System, anhand der Belegdaten automatisch den passenden Bankvorgang zuzuordnen.
- **Lieferanten**: Ebenso wird beim Erstellen versucht, den passenden Lieferanten anhand der Belegdaten automatisch zu erkennen.

## Häufige Fragen und Hinweise

### Was passiert, wenn die automatische Erkennung keine Daten findet?

Wenn das System aus einem Beleg keine Informationen extrahieren kann, bleiben die Felder für Bankvorgang und Lieferant leer. Du kannst diese Felder dann manuell ausfüllen. Das Finanzereignis kann trotzdem gespeichert werden.

### Kann ich ein Finanzereignis ohne Beleg erstellen?

Ja. Das Belegfeld ist kein Pflichtfeld. Du kannst ein Finanzereignis auch ohne zugeordneten Beleg erstellen und Belege bei Bedarf nachträglich über die Bearbeitungsseite hinzufügen.

### Was passiert, wenn ich mehrere Belege zuordne?

Du kannst einem Finanzereignis mehrere Belege zuordnen. Der zuletzt als aktiv markierte Beleg wird für die automatische Auswertung (Parsen) verwendet.

---

## page: ViewFinancialEvent

**Entity:** ViewFinancialEvent  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FinancialEventResource/Pages/ViewFinancialEvent.php`  
**Updated:** 2026-02-14 18:28:45  

# Finanzereignis ansehen

## Übersicht

Auf der Seite „Finanzereignis ansehen" kannst du ein einzelnes Finanzereignis im Detail betrachten. Du siehst den zugehörigen Beleg, die Ausgabendetails mit allen Positionen, den zugeordneten Lieferanten sowie verknüpfte Bankvorgänge. Die Seite dient ausschließlich der Ansicht – alle Felder sind nicht bearbeitbar. Wenn du Änderungen vornehmen möchtest, nutze die Aktion „Bearbeiten".

## Navigation

Du erreichst die Detailansicht eines Finanzereignisses, indem du in der Seitenleiste unter **Finanzen** die Liste der Finanzereignisse öffnest und dort auf ein einzelnes Finanzereignis klickst. Die Detailseite öffnet sich daraufhin mit allen verfügbaren Informationen zum gewählten Finanzereignis.

## Seitenaufbau und Felder

Die Seite „Finanzereignis ansehen" ist in mehrere Abschnitte unterteilt. Alle Felder dienen nur der Ansicht und können hier nicht bearbeitet werden.

### Abschnitt „Beleg"

| Feld | Typ | Beschreibung |
|------|-----|-------------|
| Beleg | Vorschau | Zeigt den hochgeladenen Beleg als eingebettete Vorschau an. Der Dateiname des Belegs wird in der Abschnittsüberschrift angezeigt. Wenn kein Beleg hinterlegt ist, wird dieser Abschnitt ohne Vorschau angezeigt. |

### Abschnitt „Ausgabe"

| Feld | Typ | Beschreibung |
|------|-----|-------------|
| Beschreibung | Textfeld | Die Beschreibung des Finanzereignisses. |
| Betrag | Geldbetragsfeld | Der Gesamtbetrag des Finanzereignisses. |
| Datum | Datumsfeld | Das Zahlungsdatum des Finanzereignisses. |
| Positionen | Wiederholungsgruppe | Liste der einzelnen Positionen des Finanzereignisses. Jede Position wird mit ihrer Beschreibung und dem Betrag als einklappbares Element angezeigt. |

Jede **Position** enthält folgende Felder. Einige Felder sind nur sichtbar, wenn bestimmte Organisationseinstellungen aktiv sind:

| Feld | Typ | Beschreibung |
|------|-----|-------------|
| Beschreibung | Textfeld | Die Beschreibung der einzelnen Position. |
| Bereich | Auswahl | Der Bereich (Sphäre), dem die Position zugeordnet ist. Dieses Feld ist nur sichtbar, wenn deine Organisation mehr als einen Bereich nutzt. |
| Typ | Auswahl (durchsuchbar) | Der Finanzereignistyp der Position. Die verfügbaren Typen werden in den Einstellungen unter Finanzereignistypen verwaltet. |
| Projekt | Projektauswahl | Das der Position zugeordnete Projekt. |
| Lieferdatum | Datumsfeld | Das Lieferdatum der Position. Nur sichtbar, wenn deine Organisation die Soll-Versteuerung nutzt. |
| Zahlungsdatum | Datumsfeld | Das Zahlungsdatum der Position. Nur sichtbar, wenn deine Organisation die Soll-Versteuerung nutzt. |
| Betrag | Geldbetragsfeld | Der Betrag der einzelnen Position. |
| Enthaltene Steuer | Geldbetragsfeld | Der in der Position enthaltene Steuerbetrag. Nur sichtbar, wenn deine Organisation umsatzsteuerpflichtig ist. |
| Steuersatz | Auswahl | Der angewendete Steuersatz. Mögliche Werte: 0 %, 7 %, 19 %. Nur sichtbar, wenn deine Organisation umsatzsteuerpflichtig ist. |

### Abschnitt „Lieferant"

| Feld | Typ | Beschreibung |
|------|-----|-------------|
| Lieferant | Auswahl | Der dem Finanzereignis zugeordnete Kontakt als Lieferant. Zeigt den Namen und die Adresse des Lieferanten an. |

### Abschnitt „Bankvorgänge"

Am unteren Rand der Seite „Finanzereignis ansehen" werden die mit dem Finanzereignis verknüpften Bankvorgang-Einzelvorgänge aufgelistet, sofern vorhanden.

## Aktionen

| Aktion | Beschreibung |
|--------|-------------|
| Bearbeiten | Öffnet das Finanzereignis im Bearbeitungsmodus, in dem du alle Felder ändern kannst. Diese Aktion ist nur sichtbar, wenn du die Berechtigung **„write accounting"** besitzt. |

## Berechtigungen

- **Finanzereignis ansehen**: Um die Detailseite eines Finanzereignisses aufrufen zu können, musst du Zugriff auf alle Projekte haben, und die Legacy-Buchhaltung muss verwendet werden.
- **Finanzereignis bearbeiten**: Die Schaltfläche „Bearbeiten" ist nur sichtbar, wenn du die Berechtigung **„write accounting"** besitzt.

## Beziehungen

- **Belege**: Ein Finanzereignis kann einen zugehörigen Beleg haben, der auf der Seite „Finanzereignis ansehen" als Vorschau angezeigt wird.
- **Positionen**: Ein Finanzereignis kann mehrere Positionen enthalten. Jede Position ist einem Finanzereignistyp, einem Projekt und – je nach Organisationseinstellungen – einem Bereich zugeordnet.
- **Lieferant/Kontakt**: Dem Finanzereignis kann ein Kontakt als Lieferant zugeordnet sein. Der Lieferant wird mit Name und Adresse angezeigt.
- **Bankvorgänge**: Verknüpfte Bankvorgang-Einzelvorgänge werden im Abschnitt „Bankvorgänge" am unteren Rand der Detailseite aufgelistet.
- **Finanzereignistypen**: Die Typen, die den einzelnen Positionen zugewiesen werden können, werden über die Einstellungen für Finanzereignistypen verwaltet.

## Sonderfälle und Hinweise

- **Bedingte Felder in Positionen**: Felder wie „Bereich", „Lieferdatum", „Zahlungsdatum", „Enthaltene Steuer" und „Steuersatz" werden nur angezeigt, wenn die entsprechenden Organisationseinstellungen (mehrere Bereiche, Soll-Versteuerung, Umsatzsteuerpflicht) aktiviert sind. Wenn diese Einstellungen nicht aktiv sind, fehlen diese Felder in der Ansicht – das ist kein Fehler.

---

## page: ListFinancialEvents

**Entity:** ListFinancialEvents  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FinancialEventResource/Pages/ListFinancialEvents.php`  
**Updated:** 2026-02-14 18:27:11  

# Finanzereignisse

## Übersicht

Auf der Seite **Finanzereignisse** siehst du alle gebuchten Finanzereignisse deiner Organisation in einer Tabellenansicht. Du kannst Finanzereignisse erstellen, filtern, durchsuchen, sortieren und im Detail ansehen. Die Seite dient als zentrale Übersicht über alle finanziellen Vorgänge wie Einnahmen und Ausgaben.

## Navigation

Die Seite **Finanzereignisse** findest du im Bereich **Finanzen** in der Seitenleiste des Mandanten-Bereichs.

## Tabellenansicht der Finanzereignisse

### Spalten

| Spalte | Beschreibung | Standardmäßig sichtbar | Sortierbar |
|---|---|---|---|
| Datum | Das Zahlungsdatum des Finanzereignisses | Ja | Ja |
| Kategorie | Die Finanzkategorie (z. B. Einnahme oder Ausgabe) | Nein (über Spaltenauswahl einblendbar) | Ja |
| Konto | Das zugehörige Bankkonto. Diese Spalte wird nur angezeigt, wenn deine Organisation mehr als ein Bankkonto hat. | Nein (über Spaltenauswahl einblendbar) | Ja |
| Name | Der Name des zugeordneten Kontakts. Ein Klick auf den Namen öffnet direkt die Kontaktübersicht. | Ja (ein-/ausblendbar) | Ja |
| Beschreibung | Die Beschreibung des Finanzereignisses. Lange Texte werden gekürzt dargestellt – den vollständigen Text siehst du, wenn du mit der Maus darüber fährst (Tooltip). | Ja (ein-/ausblendbar) | Ja |
| Projekt | Das zugeordnete Projekt. Diese Spalte ist nur sichtbar, wenn das Tool **Projekte** aktiviert ist. | Ja (ein-/ausblendbar) | Nein |
| Bereich | Der Bereich bzw. die Sphäre des Finanzereignisses. Diese Spalte ist nur sichtbar, wenn deine Organisation mehr als einen Bereich nutzt. | Nein (über Spaltenauswahl einblendbar) | Nein |
| Typ | Der Finanzereignistyp (z. B. Spende, Mitgliedsbeitrag), dargestellt als farbiger Badge | Ja (ein-/ausblendbar) | Nein |
| Betrag | Der Gesamtbetrag in Euro. Negative Beträge (Ausgaben) werden rot dargestellt. Am Ende der Tabelle wird die Summe aller angezeigten Beträge angezeigt. | Ja | Ja |

Die Standardsortierung ist nach **Datum absteigend** (neueste Finanzereignisse zuerst).

**Hinweis zur Tabellenüberschrift:** Wenn Filter aktiv sind und Finanzereignisse existieren, ändert sich die Tabellenüberschrift zu **„Finanzereignisse (entsprechend Filter)"**. Damit wird deutlich gemacht, dass sich die angezeigte Summe am Tabellenende nur auf die gefilterten Einträge bezieht und nicht auf alle Finanzereignisse.

### Durchsuchbare Felder

Du kannst die Tabelle der Finanzereignisse über das Suchfeld nach folgenden Feldern durchsuchen:

- **Name** des zugeordneten Kontakts
- **Beschreibung** des Finanzereignisses
- **Betrag** – bei der Betragssuche werden Sonderzeichen wie Komma, Punkt, Leerzeichen und €-Zeichen automatisch entfernt. Du kannst also z. B. „14,53 €" oder „1453" eingeben, um einen Betrag von 14,53 € zu finden.

### Filter

Die Finanzereignisse können über verschiedene Filter eingeschränkt werden:

| Filter | Typ | Beschreibung |
|---|---|---|
| Ohne Beleg | Checkbox | Zeigt nur Finanzereignisse an, denen kein Beleg zugeordnet ist. |
| Konto | Mehrfachauswahl | Filtert nach Bankkonto. Nur sichtbar, wenn deine Organisation mehr als ein Bankkonto hat. Enthält auch die Option **„[Konto unbekannt / gelöscht]"**, falls Bankvorgänge existieren, deren Bankkonto nicht zugeordnet werden kann. |
| Kategorie | Einfachauswahl | Filtert nach Finanzkategorie (z. B. Einnahme oder Ausgabe) |
| Bereich | Mehrfachauswahl | Filtert nach Bereich bzw. Sphäre. Nur sichtbar, wenn deine Organisation mehr als einen Bereich nutzt. |
| Typ | Mehrfachauswahl (durchsuchbar) | Filtert nach Finanzereignistyp (z. B. Spende, Mitgliedsbeitrag). Du kannst im Dropdown nach dem gewünschten Typ suchen. |
| Projekt | Mehrfachauswahl | Filtert nach Projekt (inklusive Unterprojekte). Nur sichtbar, wenn das Tool **Projekte** aktiviert ist. |
| Datum | Datumsbereich | Filtert Finanzereignisse nach dem Zahlungsdatum innerhalb eines wählbaren Zeitraums. |

**Wichtiger Hinweis zum Filterverhalten bei Projekt, Typ und Bereich:** Wenn du nach **Projekt**, **Typ** oder **Bereich** filterst, wechselt die Ansicht intern auf die Positionsebene. Das bedeutet, dass einzelne Positionen eines Finanzereignisses angezeigt werden, nicht das gesamte Finanzereignis als Ganzes. Ein Finanzereignis mit mehreren Positionen kann daher mehrfach in der Tabelle erscheinen – einmal pro passender Position. In diesem Modus ist die Massenaktion **Löschen** nicht verfügbar, da keine ganzen Finanzereignisse ausgewählt werden können.

### Klick auf Tabellenzeile

- **Klick auf die Spalte „Name":** Öffnet direkt die Kontaktübersicht des zugehörigen Kontakts.
- **Klick auf alle anderen Spalten** (Datum, Konto, Beschreibung, Projekt, Bereich, Typ, Betrag): Öffnet ein Modal-Fenster (Dialogfenster) mit den Details des Finanzereignisses.

## Aktionen auf der Seite Finanzereignisse

### Kopfzeilen-Aktionen

Diese Aktionen findest du im oberen Bereich der Seite. Sie sind nur sichtbar, wenn du die Berechtigung **„Bearbeiten"** für das Tool **Buchhaltung** hast und bereits Bankvorgänge importiert wurden.

| Aktion | Beschreibung |
|---|---|
| **Finanzereignis erstellen** | Öffnet das Formular zum Erstellen eines neuen Finanzereignisses. |
| **Beleg hochladen** | Ermöglicht das Hochladen eines Belegs. Der hochgeladene Beleg wird automatisch ausgewertet, und du wirst anschließend zur Erstellung eines neuen Finanzereignisses weitergeleitet, bei dem die erkannten Daten bereits vorausgefüllt sind. |
| **Weitere Aktionen → Umbuchung erstellen** | Erstellt eine interne Umbuchung zwischen zwei verbundenen Bankkonten deiner Organisation. Diese Aktion findest du im Menü „Weitere Aktionen". |

### Zeilen-Aktionen

Jede Zeile in der Tabelle der Finanzereignisse bietet folgende Aktionen:

| Aktion | Beschreibung |
|---|---|
| **Beleg anzeigen** | Zeigt den zugehörigen Beleg in einem Modal-Fenster an. Diese Aktion ist nur sichtbar, wenn dem Finanzereignis ein Beleg zugeordnet ist. |
| **Finanzereignis ansehen** | Öffnet die Detailansicht des Finanzereignisses. |
| **Finanzereignis bearbeiten** | Öffnet die Bearbeitungsansicht, in der du das Finanzereignis ändern kannst. Nur sichtbar mit der Berechtigung **„Bearbeiten"** für das Tool **Buchhaltung**. |

### Massenaktionen

Über die Checkboxen in der Tabelle kannst du mehrere Finanzereignisse auswählen und folgende Massenaktionen ausführen:

| Aktion | Beschreibung |
|---|---|
| **Löschen** | Löscht die ausgewählten Finanzereignisse. Diese Massenaktion ist nicht verfügbar, wenn nach Projekt, Typ oder Bereich gefiltert wird, da in diesem Fall einzelne Positionen angezeigt werden. Sie ist zudem nur sichtbar mit der Berechtigung **„Bearbeiten"** für das Tool **Buchhaltung**. |

## Berechtigungen für Finanzereignisse

- **Seite aufrufen:** Die Seite Finanzereignisse ist nur zugänglich, wenn du Zugriff auf alle Projekte hast.
- **Kopfzeilen-Aktionen (Finanzereignis erstellen, Beleg hochladen, Umbuchung erstellen):** Du benötigst die Berechtigung **„Bearbeiten"** für das Tool **Buchhaltung**. Zusätzlich müssen bereits Bankvorgänge importiert worden sein.
- **Finanzereignis bearbeiten:** Du benötigst die Berechtigung **„Bearbeiten"** für das Tool **Buchhaltung**.
- **Finanzereignisse löschen (Massenaktion):** Du benötigst die Berechtigung **„Bearbeiten"** für das Tool **Buchhaltung**.

Wenn du keine ausreichende Berechtigung hast, werden die entsprechenden Aktionen (Buttons, Menüeinträge) nicht angezeigt.

## Leere Zustände auf der Seite Finanzereignisse

Je nach Situation zeigt die Seite Finanzereignisse unterschiedliche Hinweise an, wenn keine Einträge vorhanden sind:

- **Keine Bankvorgänge vorhanden:** „Es sind noch keine Bankvorgänge vorhanden. Importiere zuerst Bankvorgänge, damit du sie danach buchen kannst." Es wird ein Button **Bankvorgänge** angezeigt, der dich zur Bankvorgänge-Seite führt.
- **Keine Finanzereignisse gebucht (mit Bearbeitungsrecht):** „Es sind noch keine Finanzereignisse gebucht. Fange an, indem du oben rechts auf ‚Finanzereignis erstellen' klickst oder einen Beleg hochlädst."
- **Keine Finanzereignisse gebucht (ohne Bearbeitungsrecht):** „Es sind noch keine Finanzereignisse gebucht. Das kannst du auch nicht selbst tun, weil du keine Bearbeitungs-Rechte für die Buchhaltung hast."
- **Filter aktiv, aber keine Treffer:** „Es sind keine Finanzereignisse vorhanden, die den Filterkriterien entsprechen. Entferne die Filter, um alle Finanzereignisse anzuzeigen."

## Beziehungen und Zusammenhänge der Finanzereignisse

Finanzereignisse stehen in Beziehung zu verschiedenen anderen Bereichen der Plattform:

- **Bankvorgänge:** Finanzereignisse basieren auf importierten Bankvorgängen. Ohne Bankvorgänge können keine Finanzereignisse erstellt werden.
- **Kontakte:** Jedem Finanzereignis kann ein Kontakt zugeordnet werden. Der Name in der Tabelle der Finanzereignisse verlinkt direkt zur Kontaktübersicht.
- **Belege:** Finanzereignissen können Belege (Rechnungen, Quittungen etc.) zugeordnet werden. Beim Hochladen eines Belegs über die Kopfzeilen-Aktion wird dieser automatisch ausgewertet und die erkannten Daten für die Erstellung eines neuen Finanzereignisses vorausgefüllt.
- **Projekte:** Einzelne Positionen eines Finanzereignisses können Projekten zugeordnet werden. Diese Zuordnung ist nur möglich, wenn das Tool **Projekte** aktiviert ist.
- **Bankkonten:** Finanzereignisse sind über ihre Bankvorgänge mit Bankkonten verknüpft. Die Spalte „Konto" in der Tabelle zeigt das jeweilige Bankkonto an.
- **Finanzereignistypen:** Jede Position eines Finanzereignisses hat einen Typ (z. B. Spende, Mitgliedsbeitrag, Fördergeld). Die verfügbaren Typen können in den Einstellungen der Organisation konfiguriert werden.
- **Bereiche/Sphären:** Finanzereignisse können einem Bereich (z. B. ideeller Bereich, Zweckbetrieb, wirtschaftlicher Geschäftsbetrieb) zugeordnet werden. Bereiche sind nur relevant, wenn deine Organisation mehr als einen Bereich nutzt.

---

## page: EditFinancialEvent

**Entity:** EditFinancialEvent  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FinancialEventResource/Pages/EditFinancialEvent.php`  
**Updated:** 2026-02-14 18:24:15  

# Finanzereignis bearbeiten

## Übersicht

Auf der Seite „Finanzereignis bearbeiten" kannst du ein bestehendes Finanzereignis anpassen. Du kannst die Positionen ändern, einen Beleg hochladen oder austauschen, einen Lieferanten bzw. Spender zuordnen und die Beschreibung aktualisieren. Bei Spenden wird zusätzlich sichergestellt, dass ein Kontakt (Spender) zugeordnet ist.

Die Seite ist nur verfügbar, wenn du die Berechtigung **„write accounting"** besitzt. Außerdem musst du Zugriff auf alle Projekte haben.

## Navigation

So gelangst du zur Bearbeitungsseite eines Finanzereignisses:

1. Öffne in der Seitenleiste **Finanzen → Finanzereignisse**.
2. Klicke auf das gewünschte Finanzereignis in der Liste.
3. Klicke auf **Bearbeiten**.

## Formularfelder des Finanzereignisses

Das Formular zum Bearbeiten eines Finanzereignisses ist in mehrere Bereiche aufgeteilt: Beleg, allgemeine Angaben, Positionen, Lieferant und Bankvorgang.

### Bereich „Beleg"

Im Bereich „Beleg" kannst du den zugehörigen Beleg einsehen und verwalten.

### Bereich „Allgemeine Angaben"

Hier werden die übergeordneten Daten des Finanzereignisses angezeigt.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Beschreibung | Textfeld | Ja | Gesamtbeschreibung des Finanzereignisses (maximal 255 Zeichen). Dieses Feld wird nur angezeigt, wenn das Finanzereignis mehr als eine Position hat. Bei nur einer Position wird die Beschreibung automatisch von der Position übernommen. |
| Betrag | Geldbetrag | – | Gesamtbetrag des Finanzereignisses. Dieses Feld ist deaktiviert und wird automatisch berechnet. |
| Datum | Datumsauswahl | – | Zahlungsdatum des Finanzereignisses. Dieses Feld ist deaktiviert und kann auf der Bearbeitungsseite nicht geändert werden. |

### Positionen des Finanzereignisses (Repeater)

Ein Finanzereignis besteht aus einer oder mehreren Positionen. Jede Position kann ein- und ausgeklappt werden, um die Übersichtlichkeit zu verbessern. Neue Positionen können über die Schaltfläche unter dem Repeater hinzugefügt werden.

**Sonderfall Umbuchungen:** Bei Finanzereignissen vom Typ „Umbuchung" können keine Positionen hinzugefügt, gelöscht oder dupliziert werden.

Jede Position enthält folgende Felder:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Beschreibung | Textfeld | Ja | Beschreibung der einzelnen Position (maximal 255 Zeichen). |
| Bereich | Auswahl | Ja | Bereich/Sphäre der Buchung. Dieses Feld wird nur angezeigt, wenn deine Organisation mehrere Bereiche nutzt. Bei Spenden und Umbuchungen ist dieses Feld deaktiviert und kann nicht geändert werden. |
| Typ | Auswahl (durchsuchbar) | Ja | Finanzereignistyp der Position (z. B. Büromaterial, Reisekosten). Die verfügbaren Typen können in den Einstellungen unter den Finanzereignistypen verwaltet werden. Bei Spenden und Umbuchungen ist dieses Feld deaktiviert. |
| Projekt | Projektauswahl | Ja | Zuordnung zu einem Projekt. Es werden nur Projekte angezeigt, die zum Zahlungsdatum des Finanzereignisses aktiv sind. Bei Umbuchungen ist dieses Feld deaktiviert. |
| Lieferdatum | Datumsauswahl | Ja | Datum der Lieferung bzw. Leistungserbringung. Dieses Feld ist nur sichtbar, wenn deine Organisation die Soll-Versteuerung (Bilanzierung) nutzt. |
| Zahlungsdatum | Datumsauswahl | Ja | Datum der Zahlung. Dieses Feld ist nur sichtbar, wenn deine Organisation die Soll-Versteuerung (Bilanzierung) nutzt. |
| Betrag | Geldbetrag | Ja | Betrag der einzelnen Position. Bei Umbuchungen ist dieses Feld deaktiviert. |
| Enthaltene Steuer | Geldbetrag | Ja | Höhe der enthaltenen Umsatzsteuer. Dieses Feld ist nur sichtbar, wenn deine Organisation umsatzsteuerpflichtig ist. |
| Steuersatz | Auswahl | Ja | Auswahl des Steuersatzes (0 %, 7 % oder 19 %). Dieses Feld ist nur sichtbar, wenn deine Organisation umsatzsteuerpflichtig ist. |

### Bereich „Lieferant" des Finanzereignisses

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Lieferant | Auswahl (durchsuchbar) | Nein (Ja bei Spenden) | Auswahl eines bestehenden Kontakts als Lieferant bzw. Spender. Du kannst den Namen eintippen, um in der Liste zu suchen. Bei Spenden ist die Zuordnung eines Kontakts (Spender) verpflichtend. |

### Bereich „Bankvorgang" des Finanzereignisses

Am unteren Rand der Bearbeitungsseite wird der zugehörige Bankvorgang angezeigt, sofern einer vorhanden ist.

Wenn kein Bankvorgang verknüpft ist, wird der Hinweis „Kein zugehöriger Bankvorgang gefunden" angezeigt.

Dieser Bereich ist rein informativ und kann auf der Bearbeitungsseite nicht verändert werden.

## Aktionen auf der Bearbeitungsseite des Finanzereignisses

### Speichern

Klicke auf **Speichern**, um die Änderungen am Finanzereignis zu übernehmen. Vor dem Speichern werden folgende Prüfungen durchgeführt:

- Die Summe aller Positionsbeträge muss mit dem Gesamtbetrag des Finanzereignisses übereinstimmen.
- Bei Spenden muss ein Kontakt (Spender) zugeordnet sein.
- Alle Pflichtfelder müssen ausgefüllt sein.

Wenn das Finanzereignis nur eine Position hat, wird die Gesamtbeschreibung automatisch von der Beschreibung dieser Position übernommen.

### Spender ändern (nur bei Spenden)

Wenn du bei einem Finanzereignis vom Typ „Spende" den zugeordneten Kontakt (Spender) änderst, erscheint ein Bestätigungsdialog mit der Überschrift „Spender wirklich ändern?" und dem Hinweis „Bitte überprüfen: Ist die Beschreibung des Finanzereignisses korrekt? Soll der Spender jetzt geändert werden?". Erst nach Bestätigung wird die Änderung übernommen.

### Finanzereignis löschen

Über die Schaltfläche **Löschen** kannst du das Finanzereignis entfernen.

Nach dem Löschen wirst du automatisch zur vorherigen Seite weitergeleitet (z. B. zur gefilterten Liste) oder zur Übersicht aller Finanzereignisse. Die Weiterleitung zur vorherigen Seite erfolgt nicht, wenn die vorherige Seite die Ansichtsseite des gelöschten Finanzereignisses war.

## Berechtigungen für die Bearbeitung von Finanzereignissen

- Du benötigst die Berechtigung **„write accounting"**.
- Zusätzlich musst du Zugriff auf alle Projekte haben.

## Validierung und Fehlermeldungen beim Bearbeiten eines Finanzereignisses

| Ursache | Fehlermeldung | Lösung |
|---------|---------------|--------|
| Bei einer einzelnen Position: Der Betrag der Position stimmt nicht mit dem Gesamtbetrag überein | „Die Beträge müssen übereinstimmen." | Passe den Betrag der Position an, sodass er dem Gesamtbetrag des Finanzereignisses entspricht. |
| Bei mehreren Positionen: Die Summe der Positionsbeträge stimmt nicht mit dem Gesamtbetrag überein | „Die Summe der Beträge der Positionen stimmt nicht mit dem Gesamtbetrag überein." | Passe die Beträge der einzelnen Positionen an, sodass deren Summe dem Gesamtbetrag des Finanzereignisses entspricht. |
| Bei einer Spende ist kein Kontakt (Spender) zugeordnet | „Einer Spende muss immer ein Kontakt zugeordnet sein." | Wähle im Feld „Lieferant" einen bestehenden Kontakt als Spender aus. |
| Ein Pflichtfeld ist nicht ausgefüllt | Standard-Validierungsmeldung (z. B. „Dieses Feld ist erforderlich.") | Fülle das markierte Pflichtfeld aus. |
| Die Beschreibung überschreitet 255 Zeichen | Standard-Validierungsmeldung zur maximalen Zeichenlänge | Kürze die Beschreibung auf maximal 255 Zeichen. |

## Beziehungen des Finanzereignisses zu anderen Bereichen

- **Positionen**: Jedes Finanzereignis besteht aus einer oder mehreren Positionen. Jede Position ist einem Typ, einem Projekt und (sofern mehrere vorhanden) einem Bereich zugeordnet.
- **Belege**: Ein Finanzereignis kann einem Beleg zugeordnet sein. Belege können unter **Finanzen → Belege** verwaltet und auch für mehrere Finanzereignisse wiederverwendet werden.
- **Lieferant/Kontakt**: Über das Lieferanten-Feld kann ein bestehender Kontakt zugeordnet werden. Bei Spenden ist dies verpflichtend – der Kontakt gilt dann als Spender.
- **Bankvorgänge**: Das Finanzereignis kann mit Bankvorgängen verknüpft sein. Diese werden im unteren Bereich der Bearbeitungsseite angezeigt.
- **Finanzereignistypen**: Die verfügbaren Typen für Positionen können in den Einstellungen unter den Finanzereignistypen verwaltet werden.

---

## page: CreateFinancialEvent

**Entity:** CreateFinancialEvent  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FinancialEventResource/Pages/CreateFinancialEvent.php`  
**Updated:** 2026-02-14 18:21:09  

# Finanzereignis erstellen

## Übersicht

Auf der Seite „Finanzereignis erstellen" kannst du neue Finanzereignisse (Ausgaben oder Einnahmen) erfassen und buchen. Dabei wird ein Bankvorgang mit einer oder mehreren Positionen verknüpft, optional ein Lieferant zugeordnet und ein Beleg angehängt. Die Seite unterstützt die automatische Erkennung von Belegen, Bankzuordnungen und Kontaktvorschlägen.

Diese Seite befindet sich im Bereich **Finanzen** der Anwendung. Um sie nutzen zu können, benötigst du die Berechtigung **„write accounting"**.

## Navigation

Du erreichst die Seite „Finanzereignis erstellen" auf mehreren Wegen:

- **Seitenleiste → Finanzen → Finanzereignisse** → Button **„Finanzereignis erstellen"** oben rechts
- Über den **Beleg-Upload**: Wenn du einen Beleg auf der Finanzereignis-Übersicht hochlädst oder aus der Belegverwaltung heraus „Finanzereignis erstellen" wählst, wirst du auf diese Seite weitergeleitet.
- Über die **Bankvorgänge**: Bei einem noch nicht zugeordneten Bankvorgang kannst du auf „Zuordnen" klicken und gelangst mit vorausgefülltem Bankvorgang auf diese Seite.

## Formularfelder

Das Formular auf der Seite „Finanzereignis erstellen" ist in drei Spalten aufgeteilt: Beleg (links), Finanzereignis-Details (Mitte) und Lieferant (rechts).

### Beleg (linke Spalte)

Du kannst einen Beleg vor dem Erstellen des Finanzereignisses hochladen. Wenn die automatische Beleganalyse (Mindee) in den Einstellungen unter „Externe Dienste" aktiviert ist, werden Daten wie Betrag, Lieferantenname und Adresse automatisch aus dem Beleg ausgelesen und in die Formularfelder übernommen. Ist kein Beleg vorhanden oder die Beleganalyse nicht aktiviert, füllst du die Felder manuell aus.

### Finanzereignis-Details (mittlere Spalte)

Die Überschrift der mittleren Spalte passt sich dynamisch an: Bei negativen Beträgen wird der Kategorie-Name für Ausgaben angezeigt, bei positiven der für Einnahmen. Wenn kein Bankvorgang ausgewählt ist, wird „Finanzereignis" als Überschrift angezeigt.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|-------------|
| Beschreibung | Textfeld | Ja (nur bei mehreren Positionen) | Übergeordnete Beschreibung des Finanzereignisses. Dieses Feld wird nur angezeigt, wenn mehr als eine Position vorhanden ist. Maximal 255 Zeichen. |
| Positionen | Wiederholungsgruppe | Ja | Eine oder mehrere Positionen des Finanzereignisses. Jede Position enthält eigene Felder (siehe Abschnitt „Felder je Position"). Positionen können dupliziert werden. |
| Bankvorgang | Auswahlfeld (durchsuchbar) | Ja | Der zugehörige Bankvorgang. Es werden nur noch nicht zugeordnete Bankvorgänge angezeigt – bei Ausgaben alle nicht zugeordneten, bei Einnahmen nur solche, die als „Keine Spende" markiert sind. Wenn du über einen Bankvorgang auf diese Seite gelangt bist, ist das Feld vorausgefüllt und gesperrt. Die Suche funktioniert nach Name, Verwendungszweck, Betrag und Datum. Falls keine nicht zugeordneten Bankvorgänge vorhanden sind, ist die Auswahlliste leer. |

### Felder je Position

Jede Position innerhalb eines Finanzereignisses enthält folgende Felder:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|-------------|
| Beschreibung | Textfeld | Ja | Beschreibung dieser einzelnen Position. Maximal 255 Zeichen. |
| Bereich | Auswahlfeld | Ja | Der Bereich (Sphäre) der Position. Dieses Feld ist nur sichtbar, wenn deine Organisation mehr als einen Bereich verwendet. |
| Typ | Auswahlfeld (durchsuchbar) | Ja | Der Finanzereignistyp (z. B. Büromaterial, Miete). Neben dem Feld wird ein Link zu den Typ-Einstellungen angezeigt. Spezialtypen wie Spenden oder interne Umbuchungen stehen hier nicht zur Verfügung – diese werden an anderer Stelle erfasst. |
| Projekt | Auswahlfeld | Ja | Das zugehörige Projekt. Es werden nur Projekte angezeigt, die zum Buchungsdatum des ausgewählten Bankvorgangs aktiv sind. |
| Lieferdatum | Datumsfeld | Ja | Nur sichtbar, wenn deine Organisation die Soll-Versteuerung nutzt. |
| Zahlungsdatum | Datumsfeld | Ja | Nur sichtbar, wenn deine Organisation die Soll-Versteuerung nutzt. |
| Betrag | Geldbetragsfeld | Ja | Der Betrag dieser Position. Bei nur einer Position muss dieser exakt dem Betrag des Bankvorgangs entsprechen. Bei mehreren Positionen muss die Summe aller Positionsbeträge dem Betrag des Bankvorgangs entsprechen. |
| Enthaltene Steuer | Geldbetragsfeld | Ja | Die in diesem Betrag enthaltene Steuer. Nur sichtbar, wenn deine Organisation umsatzsteuerpflichtig ist. |
| Steuersatz | Auswahlfeld | Ja | Auswahl zwischen 0 %, 7 % und 19 %. Nur sichtbar, wenn deine Organisation umsatzsteuerpflichtig ist. |

### Lieferant (rechte Spalte)

Im Bereich „Lieferant" auf der Seite „Finanzereignis erstellen" ordnest du dem Finanzereignis optional einen Lieferanten zu:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|-------------|
| Lieferant (Auswahl) | Radiobuttons | Ja | Drei Optionen: **Kein Lieferant**, **Neuen Kontakt anlegen** oder **Vorhandenen verwenden**. Die Option „Vorhandenen verwenden" ist nur sichtbar, wenn bereits Kontakte in deiner Organisation existieren. |
| Lieferant (Kontakt) | Auswahlfeld (durchsuchbar) | Ja (wenn „Vorhandenen verwenden") | Auswahl eines bestehenden Kontakts als Lieferant. Die Kontakte werden nach Ähnlichkeit zum Namen im Bankvorgang sortiert. Nur sichtbar bei Auswahl „Vorhandenen verwenden". |
| Name | Textfeld | Ja (wenn „Neuen Kontakt anlegen") | Name des neuen Kontakts. Nur sichtbar bei Auswahl „Neuen Kontakt anlegen". |
| Adresszeile 1 | Textfeld | Nein | Erste Zeile der Adresse. Nur sichtbar bei Auswahl „Neuen Kontakt anlegen". |
| Adresszeile 2 | Textfeld | Nein | Zweite Zeile der Adresse. Nur sichtbar bei Auswahl „Neuen Kontakt anlegen". |
| PLZ | Textfeld | Nein | Postleitzahl. Nur sichtbar bei Auswahl „Neuen Kontakt anlegen". |
| Ort | Textfeld | Nein | Ortsname. Nur sichtbar bei Auswahl „Neuen Kontakt anlegen". |
| Land | Auswahlfeld (durchsuchbar) | Nein | Land des Kontakts. Nur sichtbar bei Auswahl „Neuen Kontakt anlegen". |

Wenn der Kontakt bereits anhand der IBAN oder Kontonummer des Bankvorgangs eindeutig zugeordnet werden konnte, wird der Hinweis „Der Kontakt ist bereits bekannt und konnte eindeutig zugeordnet werden" angezeigt. In diesem Fall ist der Kontakt automatisch vorausgewählt.

## Aktionen

Auf der Seite „Finanzereignis erstellen" stehen dir folgende Aktionen zur Verfügung:

- **Erstellen**: Speichert das Finanzereignis mit allen Positionen und verknüpft es mit dem ausgewählten Bankvorgang. Danach wirst du zur vorherigen Seite zurückgeleitet (z. B. zur Liste der ungebuchten Ausgaben oder zum Dashboard).
- **Erstellen & Weiteres erstellen**: Speichert das Finanzereignis und setzt das Formular anschließend für ein neues Finanzereignis zurück, sodass du direkt das nächste buchen kannst. Der vorherige Beleg und Bankvorgang werden nicht übernommen.
- **Position hinzufügen**: Fügt dem Finanzereignis eine weitere Position hinzu. Sobald mehr als eine Position vorhanden ist, erscheint das übergeordnete Beschreibungsfeld. Die Beträge aller Positionen müssen in Summe dem Betrag des Bankvorgangs entsprechen.
- **Position duplizieren**: Erstellt eine Kopie einer bestehenden Position mit allen Feldwerten. Du kannst die Werte der duplizierten Position anschließend anpassen.

## Berechtigungen

Um die Seite „Finanzereignis erstellen" aufrufen und Finanzereignisse erstellen zu können, benötigst du die Berechtigung **„write accounting"**.

## Validierung & Fehlermeldungen

Beim Erstellen eines Finanzereignisses können folgende Validierungsfehler und Hinweise auftreten:

| Fehlermeldung | Ursache | Lösung |
|---------------|---------|--------|
| „Bitte den Bankvorgang auswählen." | Es wurde kein Bankvorgang ausgewählt. | Wähle einen Bankvorgang im Feld „Bankvorgang" aus. Falls die Liste leer ist, wurden alle Bankvorgänge bereits zugeordnet. |
| „Der Bankvorgang wurde bereits zugeordnet. Wähle eine andere Transaktion oder bearbeite das bereits erstellte Finanzereignis." | Der gewählte Bankvorgang ist bereits einem anderen Finanzereignis zugeordnet. | Wähle einen anderen, noch nicht zugeordneten Bankvorgang oder bearbeite das bestehende Finanzereignis. |
| „Der Betrag des Finanzereignisses stimmt nicht mit dem Betrag der Transaktion überein." | Bei einer einzelnen Position weicht der eingegebene Betrag vom Betrag des Bankvorgangs ab. | Passe den Betrag der Position so an, dass er exakt dem Betrag des Bankvorgangs entspricht. |
| „Die Summe der Beträge der Positionen stimmt nicht mit dem Betrag der Transaktion überein." | Bei mehreren Positionen stimmt die Summe aller Positionsbeträge nicht mit dem Betrag des Bankvorgangs überein. | Passe die Beträge der einzelnen Positionen so an, dass ihre Summe exakt dem Betrag des Bankvorgangs entspricht. |
| „Falsche Beleg-Zuordnung?" (Warnung) | Die automatische Beleganalyse hat einen Betrag auf dem Beleg erkannt, der nicht zum ausgewählten Bankvorgang passt. | Prüfe, ob der richtige Beleg dem richtigen Bankvorgang zugeordnet wurde. Gegebenenfalls einen anderen Beleg hochladen oder einen anderen Bankvorgang auswählen. |
| „Diese Einnahme wurde als ‚Keine Spende' markiert." (Hinweis) | Der ausgewählte Bankvorgang wurde zuvor als „Keine Spende" gekennzeichnet. | Falls es sich doch um eine Spende handelt, kannst du über den angezeigten Link zur Spendenerfassung wechseln. Dafür benötigst du die entsprechende Berechtigung. |

Wenn ein bereits zugeordneter Bankvorgang über die URL aufgerufen wird, erfolgt eine automatische Weiterleitung zum bestehenden Finanzereignis. Dabei wird der Hinweis „Der Bankvorgang wurde bereits zugeordnet. Du wurdest zum zugehörigen Finanzereignis weitergeleitet." angezeigt.

## Automatische Erkennung & Vorausfüllung

Die Seite „Finanzereignis erstellen" unterstützt mehrere automatische Erkennungs- und Vorausfüllungsmechanismen:

- **Beleg-Analyse**: Wenn du einen Beleg hochlädst und die automatische Beleganalyse (Mindee) in den Einstellungen unter „Externe Dienste" aktiviert ist, werden Lieferantenname, Adresse und Betrag automatisch aus dem Beleg ausgelesen und in die entsprechenden Formularfelder eingetragen. Falls die Beleganalyse nicht aktiviert ist, musst du alle Felder manuell ausfüllen.
- **Bankvorgang-Zuordnung**: Wenn ein Beleg ausgelesen wurde und kein Bankvorgang vorausgewählt ist, versucht das System automatisch, einen passenden Bankvorgang anhand von Betrag und Datum zu finden. Wird ein passender Bankvorgang gefunden, wird dieser im Feld „Bankvorgang" vorausgewählt.
- **Kontakt-Vorschläge**: Die Kontaktliste wird nach Ähnlichkeit zum Namen im Bankvorgang sortiert. Wird ein Kontakt mit hoher Übereinstimmung gefunden, wird dieser automatisch vorausgewählt und die Option „Vorhandenen verwenden" aktiviert. Bei eindeutiger Zuordnung über die IBAN oder Kontonummer erscheint zusätzlich der Hinweis zur automatischen Erkennung.
- **Typ-, Bereichs- und Projektvorschläge**: Wenn ein bekannter Kontakt automatisch zugeordnet wurde, werden der zuletzt bei diesem Kontakt verwendete Finanzereignistyp, der Bereich und das zuletzt verwendete Projekt automatisch in die entsprechenden Felder der ersten Position eingetragen.

## Beziehungen

Das Finanzereignis steht in Verbindung mit mehreren anderen Bereichen der Anwendung:

- **Bankvorgänge**: Jedes Finanzereignis muss mit genau einem Bankvorgang verknüpft sein. Ein Bankvorgang kann nur einmal zugeordnet werden. Bankvorgänge werden über den CSV-Import oder die automatische Bankanbindung in die Anwendung importiert.
- **Kontakte / Lieferanten**: Optional kann beim Erstellen eines Finanzereignisses ein bestehender Kontakt als Lieferant zugeordnet oder ein neuer Kontakt angelegt werden. Wird über die Beleganalyse ein Lieferantenname erkannt, wird dieser als zusätzliches Label beim Kontakt gespeichert, um zukünftige Zuordnungen zu erleichtern.
- **Belege**: Ein oder mehrere Belege können dem Finanzereignis zugeordnet werden. Belege können vorab über das Upload-Feld auf der Finanzereignis-Übersicht oder über die Belegverwaltung hochgeladen werden.
- **Projekte**: Jede Position eines Finanzereignisses wird einem Projekt zugeordnet. Es werden nur Projekte angezeigt, die zum Buchungsdatum des Bankvorgangs aktiv sind.
- **Finanzereignistypen**: Jede Position erhält einen Finanzereignistyp (z. B. Büromaterial, Miete). Die verfügbaren Typen können in den Einstellungen unter „Finanzereignistypen" verwaltet werden.
- **Spendenerfassung**: Einnahmen, die bei den Bankvorgängen als „Keine Spende" markiert wurden, können hier als Finanzereignis gebucht werden. Falls es sich doch um eine Spende handelt, kann über den entsprechenden Hinweis auf der Seite zur Spendenerfassung gewechselt werden.

---

## page: ManageConnectedAccountTransactionItems

**Entity:** ManageConnectedAccountTransactionItems  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FinancialEventResource/Actions/ManageConnectedAccountTransactionItems.php`  
**Updated:** 2026-02-14 18:17:15  

# Bankvorgang aufteilen

## Übersicht

Mit der Funktion „Bankvorgang aufteilen" kannst du einen einzelnen Bankvorgang in mehrere Einzelvorgänge aufteilen. Dies ist besonders nützlich bei Sammelüberweisungen oder Sammellastschriften, bei denen ein Bankvorgang mehrere einzelne Zahlungen zusammenfasst. Die so erstellten Einzelvorgänge können anschließend wie gewohnt einzeln gebucht (einem Finanzereignis zugeordnet) werden.

## Voraussetzungen

Damit du einen Bankvorgang aufteilen kannst, müssen folgende Bedingungen erfüllt sein:

- Das verbundene Bankkonto muss einen Kontotyp haben, der die Aufteilung unterstützt.
- Der Bankvorgang darf noch nicht gebucht (einem Finanzereignis zugeordnet) sein.
- Falls der Bankvorgang bereits Einzelvorgänge enthält: Keiner dieser Einzelvorgänge darf bereits gebucht sein.

Sind diese Bedingungen nicht erfüllt, ist die Funktion gesperrt und du siehst einen entsprechenden Hinweis (siehe Abschnitt „Gesperrte Aufteilung").

## Formularfelder beim Aufteilen eines Bankvorgangs

Die Aufteilung erfolgt über einen Repeater, in dem du beliebig viele Einzelvorgänge anlegen kannst:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Nein | Name des Einzelvorgangs, z. B. der Name des Zahlungsempfängers oder -senders |
| Verwendungszweck | Textfeld | Ja | Verwendungszweck des Einzelvorgangs (max. 255 Zeichen) |
| Kontonummer Gegenpartei | Textfeld | Nein | IBAN oder Kontonummer der Gegenpartei |
| Betrag | Geldbetragsfeld | Ja | Betrag des Einzelvorgangs in der Währung des übergeordneten Bankvorgangs |

Folgende Felder werden automatisch vom übergeordneten Bankvorgang übernommen und müssen nicht manuell eingegeben werden: Buchungsdatum, Wertstellungsdatum und Währung.

## Aktionen beim Aufteilen eines Bankvorgangs

- **Einzelvorgang hinzufügen**: Über den Repeater kannst du beliebig viele Einzelvorgänge anlegen. Klicke dazu auf die Schaltfläche zum Hinzufügen eines neuen Eintrags.
- **Einzelvorgang klonen**: Ein bestehender Einzelvorgang kann dupliziert werden, um die Eingabe bei ähnlichen Zahlungen zu beschleunigen. Die Werte des geklonten Eintrags kannst du anschließend anpassen.
- **Einzelvorgang löschen**: Einzelne Einträge können aus der Liste entfernt werden.
- **Speichern**: Beim Speichern werden alle Einzelvorgänge als zugehörige Datensätze des Bankvorgangs angelegt. Der ursprüngliche Bankvorgang bleibt bestehen und dient als übergeordneter Eintrag.

## Gesperrte Aufteilung

Die Aufteilung eines Bankvorgangs ist in folgenden Fällen nicht möglich:

- **Bankvorgang bereits gebucht (ohne Einzelvorgänge):** Wenn der Bankvorgang bereits einem Finanzereignis zugeordnet wurde, wird folgender Hinweis angezeigt: *„Ein Aufteilen des Bankvorgangs in mehrere Einzelvorgänge ist nur möglich, solange der Bankvorgang noch nicht gebucht wurde."*
- **Einzelvorgänge bereits gebucht:** Wenn der Bankvorgang bereits Einzelvorgänge enthält und mindestens einer davon einem Finanzereignis zugeordnet wurde, wird folgender Hinweis angezeigt: *„Das Bearbeiten der Einzelvorgänge ist nur möglich, solange noch keiner der Einzelvorgänge gebucht wurde."*
- **Kontotyp unterstützt keine Aufteilung:** Wenn das verbundene Bankkonto einen Kontotyp hat, der keine Aufteilung erlaubt, ist die Funktion ebenfalls nicht verfügbar.

## Validierung und Fehlermeldungen beim Aufteilen

Beim Speichern der Einzelvorgänge werden folgende Regeln geprüft:

| Regel | Fehlermeldung | Lösung |
|-------|---------------|--------|
| Verwendungszweck ist ein Pflichtfeld | Standardmeldung für Pflichtfelder | Trage einen Verwendungszweck für jeden Einzelvorgang ein. |
| Verwendungszweck darf max. 255 Zeichen lang sein | Standardmeldung für Maximallänge | Kürze den Verwendungszweck auf maximal 255 Zeichen. |
| Betrag ist ein Pflichtfeld | Standardmeldung für Pflichtfelder | Trage einen Betrag für jeden Einzelvorgang ein. |
| Summe der Einzelvorgänge muss dem Gesamtbetrag des Bankvorgangs entsprechen | *„Die Summe der Beträge der Einzelvorgänge (X €) stimmt nicht mit dem Gesamtbetrag des Bankvorgangs (Y €) überein. Bitte überprüfe die Beträge und versuche es erneut."* | Passe die Beträge der Einzelvorgänge so an, dass ihre Summe exakt dem Gesamtbetrag des übergeordneten Bankvorgangs entspricht. |

## Beziehungen und Zusammenhänge

- **Bankvorgänge**: Jeder Einzelvorgang gehört zu genau einem übergeordneten Bankvorgang. Der übergeordnete Bankvorgang bleibt nach dem Aufteilen bestehen.
- **Finanzereignisse**: Die erstellten Einzelvorgänge können einzeln Finanzereignissen zugeordnet (gebucht) werden. Sobald mindestens ein Einzelvorgang gebucht ist, kann die Aufteilung nicht mehr bearbeitet werden.
- **Bankkonten**: Die Möglichkeit zur Aufteilung hängt vom Typ des verbundenen Bankkontos ab. Nicht alle Kontotypen unterstützen diese Funktion.

---

## page: DeleteAction

**Entity:** DeleteAction  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FinancialEventResource/Actions/DeleteAction.php`  
**Updated:** 2026-02-14 18:15:48  

# Finanzereignis löschen

## Übersicht

Mit dieser Funktion kannst du ein bestehendes Finanzereignis löschen. Beim Löschen öffnet sich ein Bestätigungsdialog, in dem du zusätzlich entscheiden kannst, ob zugehörige Belege und/oder eine verknüpfte PayPal-Gebühr ebenfalls gelöscht werden sollen. Das Finanzereignis wird erst nach deiner Bestätigung endgültig entfernt.

## Navigation

Die Lösch-Funktion findest du direkt auf der Ansichts- oder Bearbeitungsseite eines einzelnen Finanzereignisses unter **Finanzen → Finanzereignisse → [Finanzereignis auswählen]**. Dort steht dir eine Löschen-Schaltfläche zur Verfügung.

## Aktionen

### Finanzereignis löschen

Beim Klick auf die Löschen-Schaltfläche öffnet sich ein Bestätigungsdialog. Je nach Situation werden im Dialog zusätzliche Optionen angezeigt. Wenn zum Finanzereignis weder Belege noch eine PayPal-Gebühr verknüpft sind, erscheint der Dialog nur mit der einfachen Bestätigungsfrage, ob du das Finanzereignis wirklich löschen möchtest.

#### Zugehörige PayPal-Gebühr

Wenn zu diesem Finanzereignis eine gebuchte PayPal-Gebühr existiert, erscheint im Bestätigungsdialog folgende zusätzliche Option:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Zugehörige PayPal-Gebühr ebenfalls löschen | Checkbox | Nein | Standardmäßig aktiviert. Löscht die verknüpfte PayPal-Gebühren-Buchung zusammen mit dem Finanzereignis. Der Hilfetext lautet: „Zu diesem Finanzereignis gibt es eine gebuchte PayPal-Gebühr. Soll die Buchung der PayPal-Gebühr ebenfalls gelöscht werden?" |

Wenn du den Haken entfernst, bleibt die PayPal-Gebühren-Buchung als eigenständiges Finanzereignis bestehen.

#### Hinweis bei PayPal-Gebühr als eigenständige Buchung

Wenn das zu löschende Finanzereignis selbst eine PayPal-Gebühr ist und ein zugehöriges Hauptfinanzereignis existiert, wird im Bestätigungsdialog ein Hinweis angezeigt: „Dies ist eine PayPal-Gebühr und es gibt ein zugehöriges Finanzereignis. Wenn du diese Buchung der Paypal-Gebühr löschst, wird das zugehörige Finanzereignis nicht gelöscht." Zusätzlich wird ein Link zum zugehörigen Finanzereignis angezeigt, damit du es bei Bedarf direkt aufrufen kannst.

#### Belege löschen

Wenn dem Finanzereignis Belege zugeordnet sind, erscheint im Bestätigungsdialog eine weitere Option:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Beleg löschen / Belege löschen | Checkbox | Nein | Ermöglicht das Löschen der zugehörigen Belege zusammen mit dem Finanzereignis. Wenn du den Haken nicht setzt, bleiben die Belege unter **Finanzen → Belege** erhalten und können bei einem neuen Finanzereignis wiederverwendet werden. |

**Sonderfälle bei Belegen:**

- Wenn ein Beleg als **mehrfach verwendbar** markiert ist, kann er nicht gelöscht werden. Die Checkbox wird deaktiviert angezeigt mit dem Hinweis: „Der Beleg wird nicht gelöscht, weil er als mehrfach verwendbar markiert ist." Dieser Beleg bleibt in jedem Fall unter **Finanzen → Belege** erhalten.
- Die Bezeichnung im Dialog passt sich automatisch an die Anzahl der löschbaren Belege an (Singular „Beleg löschen" / Plural „Belege löschen").

### Ablauf beim Löschen

Nachdem du den Bestätigungsdialog mit deinen gewählten Optionen bestätigt hast, werden die Daten in folgender Reihenfolge gelöscht:

1. Zuerst werden – falls ausgewählt – die zugehörigen löschbaren Belege gelöscht. Belege, die als mehrfach verwendbar markiert sind, werden dabei übersprungen.
2. Dann wird – falls ausgewählt – die verknüpfte PayPal-Gebühren-Buchung gelöscht.
3. Anschließend wird das Finanzereignis selbst gelöscht.

## Beziehungen

- **Belege**: Zugeordnete Belege können beim Löschen eines Finanzereignisses optional mit entfernt werden. Nicht gelöschte Belege bleiben unter **Finanzen → Belege** erhalten und können bei einem neuen Finanzereignis wiederverwendet werden. Mehrfach verwendbare Belege können nicht gelöscht werden.
- **PayPal-Gebühren**: Verknüpfte PayPal-Gebühren-Buchungen können beim Löschen eines Finanzereignisses optional mitgelöscht werden. Wird umgekehrt eine PayPal-Gebühr gelöscht, bleibt das zugehörige Hauptfinanzereignis bestehen.

## Häufige Fragen

### Kann ich ein gelöschtes Finanzereignis wiederherstellen?
Nein. Das Löschen eines Finanzereignisses ist endgültig und kann nicht rückgängig gemacht werden. Prüfe daher im Bestätigungsdialog sorgfältig, ob du das richtige Finanzereignis löscht und welche verknüpften Daten (Belege, PayPal-Gebühr) du mitlöschen möchtest.

### Warum kann ich einen bestimmten Beleg nicht zum Löschen auswählen?
Wenn ein Beleg als mehrfach verwendbar markiert ist, kann er beim Löschen eines Finanzereignisses nicht mitgelöscht werden. Die Checkbox ist in diesem Fall deaktiviert. Du kannst solche Belege separat unter **Finanzen → Belege** verwalten.

---

## page: CreateInternalTransferAction

**Entity:** CreateInternalTransferAction  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FinancialEventResource/Actions/CreateInternalTransferAction.php`  
**Updated:** 2026-02-14 18:14:24  

# Umbuchung erstellen

## Übersicht

Mit der Funktion „Umbuchung erstellen" kannst du eine interne Umbuchung zwischen zwei Bankkonten anlegen. Dabei werden zwei zusammengehörige Bankvorgänge – eine Ausgabe und eine Einnahme über den gleichen Betrag – zu einem gemeinsamen Finanzereignis verknüpft. Das ist typisch für Überweisungen zwischen eigenen Konten, z. B. vom Girokonto auf das Sparkonto.

Die Umbuchung stellt sicher, dass solche internen Geldbewegungen korrekt als zusammengehörig erfasst werden und nicht fälschlicherweise als eigenständige Einnahme oder Ausgabe erscheinen.

## Voraussetzungen

- Es müssen mindestens zwei noch nicht zugeordnete Bankvorgänge vorhanden sein: einer mit negativem Betrag (Ausgabe) und einer mit positivem Betrag (Einnahme) über den gleichen Betrag.

## Navigation

Die Funktion „Umbuchung erstellen" erreichst du über die Übersichtsseite der Finanzereignisse: **Seitenleiste → Finanzen → Finanzereignisse**. Dort steht sie als Aktion zur Verfügung.

## Formularfelder der Umbuchung

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Erster Bankvorgang (Ausgabe) | Auswahl | Ja | Wähle den abgehenden Bankvorgang (negativer Betrag). Es werden nur noch nicht zugeordnete Bankvorgänge mit negativem Betrag angezeigt, sortiert nach Buchungsdatum (neueste zuerst). Das Feld ist durchsuchbar. |
| Zweiter Bankvorgang (Einnahme) | Auswahl | Ja | Wähle den eingehenden Bankvorgang (positiver Betrag). Sobald der erste Bankvorgang ausgewählt ist, werden hier nur Bankvorgänge angezeigt, deren Betrag exakt dem Gegenwert des ersten Vorgangs entspricht. Die Ergebnisse sind nach zeitlicher Nähe zum ersten Bankvorgang sortiert. Das Feld ist durchsuchbar. |
| Beschreibung | Textfeld | Ja | Wird automatisch vorausgefüllt mit „Umbuchung von [Kontoname A] zu [Kontoname B]", sobald der zweite Bankvorgang ausgewählt wird. Du kannst den Text manuell anpassen. |

### Abhängigkeiten zwischen den Feldern

Beim Ausfüllen des Formulars zur Umbuchung gibt es folgende automatische Abhängigkeiten:

- **Änderung des ersten Bankvorgangs:** Wenn du den ersten Bankvorgang änderst, wird die Auswahl des zweiten Bankvorgangs automatisch zurückgesetzt, da sich die verfügbaren Optionen ändern.
- **Automatische Beschreibung:** Sobald der zweite Bankvorgang ausgewählt wird, wird die Beschreibung automatisch mit „Umbuchung von [Kontoname A] zu [Kontoname B]" befüllt.
- **Warnung bei gleichem Bankkonto:** Wenn beide ausgewählten Bankvorgänge zum selben Bankkonto gehören, erscheint eine Warnung: *„Warnung: Beide ausgewählten Bankvorgänge gehören zum gleichen Bankkonto. Bitte überprüfe, ob das so gewollt ist."*

### Sonderfälle

- **Keine passenden Bankvorgänge vorhanden:** Wenn keine noch nicht zugeordneten Bankvorgänge mit negativem Betrag existieren, ist die Auswahl des ersten Bankvorgangs leer. In diesem Fall kannst du keine Umbuchung erstellen.
- **Kein passender Gegenwert:** Wenn nach Auswahl des ersten Bankvorgangs kein Bankvorgang mit dem exakt passenden Gegenbetrag vorhanden ist, bleibt die Auswahl des zweiten Bankvorgangs leer.

## Aktionen

### Umbuchung erstellen

Nach dem Absenden des Formulars werden die beiden ausgewählten Bankvorgänge zu einem internen Umbuchungs-Finanzereignis verknüpft. Folgendes passiert:

- Es wird ein neues **Finanzereignis** vom Typ „Umbuchung" erstellt.
- Die beiden Bankvorgänge werden diesem Finanzereignis zugeordnet und gelten danach als „zugeordnet".
- Bei Erfolg erscheint eine Bestätigungsmeldung, z. B.: *„Die Umbuchung von 500,00 € von Girokonto zu Sparkonto wurde erstellt."*

## Validierung und Fehlermeldungen bei der Umbuchung

| Fehlermeldung | Ursache | Lösung |
|---------------|---------|--------|
| „Mindestens einer der ausgewählten Bankvorgänge wurde nicht mehr gefunden. Bitte lade die Seite neu und versuche es erneut." | Ein ausgewählter Bankvorgang existiert nicht mehr, z. B. weil er zwischenzeitlich gelöscht wurde. | Lade die Seite neu und wähle erneut gültige Bankvorgänge aus. |
| „Die Beträge der beiden ausgewählten Bankvorgänge stimmen nicht überein. Bitte wähle zwei Bankvorgänge mit dem gleichen Betrag (eine Ausgabe und eine Einnahme)." | Die Beträge der beiden Bankvorgänge passen nicht zusammen – der Ausgabebetrag entspricht nicht dem Einnahmebetrag. | Wähle zwei Bankvorgänge, bei denen der Ausgabebetrag exakt dem Einnahmebetrag entspricht. |
| „Mindestens einer der beiden ausgewählten Bankvorgänge ist bereits gebucht. Bitte lade die Seite neu und versuche es erneut." | Einer der Bankvorgänge wurde zwischenzeitlich einem anderen Finanzereignis zugeordnet (z. B. durch eine andere Person gleichzeitig). | Lade die Seite neu und wähle andere, noch nicht zugeordnete Bankvorgänge aus. |

## Beziehungen zu anderen Bereichen

- **Finanzereignisse:** Die Umbuchung erzeugt ein neues Finanzereignis, das anschließend in der Liste der Finanzereignisse sichtbar ist und dort eingesehen werden kann.
- **Bankvorgänge:** Die beiden ausgewählten Bankvorgänge werden dem erstellten Finanzereignis zugeordnet und gelten danach als „zugeordnet".
- **Bankkonten:** Bei der Umbuchung werden nur Bankvorgänge von verbundenen Bankkonten angezeigt, die noch keinem Finanzereignis zugeordnet sind.

---

## page: FinancialEventTools

**Entity:** FinancialEventTools  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FinancialEventResource/FinancialEventTools.php`  
**Updated:** 2026-02-14 18:12:40  

# Finanzereignis-Werkzeuge (Betragsvalidierung)

## Übersicht

Die Betragsvalidierung bei Finanzereignissen stellt sicher, dass die eingegebenen Beträge mit dem zugehörigen Bankvorgang übereinstimmen.

## Funktionsweise der Betragsvalidierung

Das Trait `FinancialEventTools` stellt die Methode `extractTotalAmountKeys()` bereit. Diese Methode durchsucht das Formular nach allen Feldern, deren Pfad auf `total_amount` endet, und gibt deren vollständige Feldpfade als Array zurück (z. B. `['data.total_amounts', 'data.items.0.total_amount', 'data.items.long-uid.total_amount']`). Diese Pfade werden verwendet, um Validierungswarnungen den korrekten Betragsfeldern zuzuordnen.

## Fehlermeldungen bei Finanzereignissen

### Beim Erstellen eines Finanzereignisses

| Fehlermeldung | Kontext |
|---|---|
| „Der Betrag des Finanzereignisses stimmt nicht mit dem Betrag der Transaktion überein." | Buchung auf Gesamtebene |
| „Die Summe der Beträge der Positionen stimmt nicht mit dem Betrag der Transaktion überein." | Buchung auf Positionsebene |

### Beim Bearbeiten eines Finanzereignisses

| Fehlermeldung | Kontext |
|---|---|
| „Die Beträge müssen übereinstimmen." | Buchung auf Gesamtebene |
| „Die Summe der Beträge der Positionen stimmt nicht mit dem Gesamtbetrag überein." | Buchung auf Positionsebene |

Die Fehlermeldungen sind in der Übersetzungsdatei unter `financials.financial-events.error.amount-mismatch-creating` und `financials.financial-events.error.amount-mismatch-editing` definiert. Die Unterscheidung zwischen Gesamtebene und Positionsebene erfolgt über die Plural-Syntax (`|`-Trennung) in den Übersetzungsstrings.

## Beziehungen zu anderen Bereichen

- **Finanzereignisse**: Die Betragsvalidierung ist Bestandteil des Erstellungs- und Bearbeitungsprozesses von Finanzereignissen.
- **Bankvorgänge**: Der zugeordnete Bankvorgang liefert den Referenzbetrag, gegen den die Betragsvalidierung prüft.
- **Positionen**: Bei Buchung auf Positionsebene werden die einzelnen Positionsbeträge eines Finanzereignisses über `extractTotalAmountKeys()` identifiziert und gegen den Referenzbetrag geprüft.

---

## page: AddFinancialEventItem

**Entity:** AddFinancialEventItem  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FinancialEventResource/AddFinancialEventItem.php`  
**Updated:** 2026-02-14 18:11:15  

# Position hinzufügen

## Übersicht

Die Funktion "Position hinzufügen" ermöglicht es dir, einem Finanzereignis eine neue Position hinzuzufügen. Positionen sind die einzelnen Buchungszeilen eines Finanzereignisses – zum Beispiel verschiedene Ausgabenarten innerhalb einer Rechnung. Beim Hinzufügen einer neuen Position wird der Betrag automatisch vorberechnet: Er entspricht dem verbleibenden Restbetrag des Finanzereignisses abzüglich der Summe aller bereits vorhandenen Positionen.

## Navigation

Die Funktion "Position hinzufügen" ist keine eigenständige Seite, sondern eine Aktion innerhalb der Erstellungs- und Bearbeitungsansicht eines Finanzereignisses. So erreichst du sie:

1. Navigiere zu **Finanzen → Finanzereignisse**.
2. Erstelle ein neues Finanzereignis oder öffne ein bestehendes zur Bearbeitung.
3. Scrolle zur Positionsliste und klicke auf die Schaltfläche **"Position hinzufügen"** unterhalb der Liste.

## Aktionen

### Position hinzufügen

Über die Schaltfläche **"Position hinzufügen"** wird eine neue Position zur Positionsliste des Finanzereignisses hinzugefügt.

- **Automatische Betragsberechnung:** Der Betrag der neuen Position wird automatisch aus der Differenz zwischen dem Gesamtbetrag des Finanzereignisses und der Summe aller bereits vorhandenen Positionen berechnet. Wenn das Finanzereignis beispielsweise einen Gesamtbetrag von 500,00 € hat und bereits eine Position mit 300,00 € existiert, wird die neue Position automatisch mit 200,00 € vorausgefüllt.
- **Restbetrag ist 0,00 €:** Wenn die Summe der vorhandenen Positionen bereits den Gesamtbetrag des Finanzereignisses erreicht, wird die neue Position mit 0,00 € vorausgefüllt. Du kannst den Betrag anschließend manuell anpassen.
- **Nur eine Position vorhanden:** Ist noch keine Position vorhanden, wird der volle Gesamtbetrag des Finanzereignisses als Betrag vorausgefüllt.
- Alle vorausgefüllten Werte können anschließend manuell angepasst werden.
- Die neue Position wird erst gespeichert, wenn du das gesamte Finanzereignis speicherst.

## Formularfelder

Jede hinzugefügte Position innerhalb eines Finanzereignisses enthält die folgenden Felder:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Beschreibung | Textfeld | Ja | Beschreibung der Position (max. 255 Zeichen). Beschreibt, wofür diese Position steht. |
| Bereich | Auswahl | Ja | Zuordnung zu einem Bereich (Sphäre). Dieses Feld ist nur sichtbar, wenn deine Organisation mehr als einen Bereich verwendet. |
| Typ | Auswahl (durchsuchbar) | Ja | Art der Position (Finanzereignistyp). Du kannst den gewünschten Typ per Texteingabe suchen. Über den enthaltenen Link gelangst du direkt zu den Einstellungen der Finanzereignistypen. |
| Projekt | Projektauswahl | Ja | Zuordnung zu einem Projekt. Jede Position muss einem Projekt zugeordnet werden. |
| Lieferdatum | Datum | Ja | Datum der Lieferung oder Leistungserbringung. Dieses Feld ist nur sichtbar, wenn deine Organisation die Periodenabgrenzung nutzt. |
| Zahlungsdatum | Datum | Ja | Datum der Zahlung. Dieses Feld ist nur sichtbar, wenn deine Organisation die Periodenabgrenzung nutzt. |
| Betrag | Geldbetrag | Ja | Betrag der Position. Wird automatisch mit dem verbleibenden Restbetrag des Finanzereignisses vorausgefüllt, kann aber manuell angepasst werden. |
| Enthaltene Steuer | Geldbetrag | Ja | Höhe der in diesem Betrag enthaltenen Umsatzsteuer. Dieses Feld ist nur sichtbar, wenn deine Organisation umsatzsteuerpflichtig ist. |
| Steuersatz | Auswahl | Ja | Auswahl des Steuersatzes: 0 %, 7 % oder 19 %. Dieses Feld ist nur sichtbar, wenn deine Organisation umsatzsteuerpflichtig ist. |

## Beziehungen

- **Finanzereignisse:** Positionen sind Bestandteil eines Finanzereignisses. Sie werden innerhalb der Erstellungs- und Bearbeitungsansicht von Finanzereignissen verwaltet und können nicht unabhängig davon existieren.
- **Finanzereignistypen:** Jede Position wird einem Finanzereignistyp zugeordnet. Die verfügbaren Typen kannst du in den Einstellungen unter Finanzereignistypen konfigurieren.
- **Projekte:** Jede Position muss einem Projekt zugeordnet werden.
- **Bereiche (Sphären):** Wenn deine Organisation mehrere Bereiche nutzt, wird jede Position einem Bereich zugeordnet. So lassen sich Einnahmen und Ausgaben den verschiedenen Tätigkeitsbereichen der Organisation zuweisen.

---

## page: DonationImportStatus

**Entity:** DonationImportStatus  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/DonationResource/Widgets/DonationImportStatus.php`  
**Updated:** 2026-02-14 18:09:45  

# Import-Status (Spendenimport)

## Übersicht

Die Seite „Import-Status" zeigt den aktuellen Stand eines laufenden oder abgeschlossenen Spendenimports an. Du kannst hier verfolgen, wie weit der Import fortgeschritten ist, und nach Abschluss fehlerhafte Zeilen einsehen.

Der Import-Status erscheint nur dann, wenn ein Import aktiv ist oder kürzlich abgeschlossen wurde.

## Navigation

Der Import-Status wird als Widget auf der Seite „Spendenübersicht" angezeigt. Die Spendenübersicht erreichst du über die Seitenleiste unter der Menügruppe **Spendenverwaltung**. Sobald ein Import gestartet wurde, erscheint das Import-Status-Widget automatisch auf dieser Seite.

## Statusanzeigen

### Import läuft

Während ein Spendenimport verarbeitet wird, zeigt der Import-Status folgende Informationen an:

- **Überschrift:** „Import läuft (gestartet [Datum])"
- **Fortschritt:** Prozentualer Fortschritt mit Angabe der Anzahl von **Gesamt**, **Importiert** und **Fehlerhaft**
- **Hinweis:** „Du kannst diese Seite schließen und später zurückkehren, um den Status des Imports zu überprüfen."

### Import abgeschlossen

Nach Abschluss eines Spendenimports zeigt der Import-Status folgende Zusammenfassung an:

- **Überschrift:** „Letzter Import ([Datum])"
- **Zusammenfassung:** Anzahl der Zeilen **Gesamt**, **Importiert** und **Fehlerhaft**
- **Hinweis bei fehlerhaften Zeilen:** „Du kannst dieselbe Datei erneut hochladen, um fehlgeschlagene Zeilen zu wiederholen. Bestehende Spenden werden nicht dupliziert."

## Tabellenansicht (Fehlerhafte Zeilen)

Wenn beim Spendenimport fehlerhafte Zeilen aufgetreten sind, werden diese im Import-Status in einer Tabelle dargestellt. Die Tabelle enthält:

- **Alle Spalten aus der importierten Datei** – Die Spalten werden dynamisch aus den Importdaten erzeugt und entsprechen den Spaltenüberschriften deiner hochgeladenen Datei.
- **Spalte „Validation error"** – zeigt den konkreten Validierungsfehler für jede fehlerhafte Zeile an, damit du erkennen kannst, warum der Import dieser Zeile fehlgeschlagen ist.

Die Spalteninhalte werden in kompakter Schrift dargestellt und bei Bedarf umgebrochen, damit alle Informationen sichtbar bleiben.

## Erneuter Import nach Fehlern

Wenn beim Spendenimport fehlerhafte Zeilen aufgetreten sind, kannst du diese wie folgt korrigieren:

1. Öffne die importierte Datei in einem Tabellenkalkulationsprogramm (z. B. Excel oder LibreOffice Calc).
2. Korrigiere die fehlerhaften Zeilen anhand der in der Spalte „Validation error" angezeigten Fehlerursachen.
3. Lade die korrigierte Datei erneut über die Import-Funktion auf der Spendenübersicht-Seite hoch.

**Wichtig:** Bereits erfolgreich importierte Spenden werden beim erneuten Hochladen derselben Datei **nicht dupliziert**. Du kannst die gesamte Datei erneut hochladen – es werden nur die zuvor fehlerhaften Zeilen neu verarbeitet.

## Beziehungen zu anderen Bereichen

- **Spendenübersicht:** Der Import-Status wird als Widget innerhalb der Spendenübersicht angezeigt. Die Spendenübersicht ist die zentrale Seite für die Verwaltung von Spenden.
- **Spendenimport:** Der Import wird über die Import-Funktion auf der Spendenübersicht-Seite gestartet. Nach dem Start erscheint automatisch das Import-Status-Widget, das den Fortschritt anzeigt und nach Abschluss die Ergebnisse zusammenfasst.

---

## page: ListDonations

**Entity:** ListDonations  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/DonationResource/Pages/ListDonations.php`  
**Updated:** 2026-02-14 18:08:25  

# Spendenübersicht

## Übersicht

Die Spendenübersicht zeigt alle erfassten Spenden deiner Organisation in einer tabellarischen Ansicht. Hier kannst du Spenden einsehen, filtern, exportieren und importieren. Außerdem lassen sich Spendenbescheinigungen direkt aus der Spendenübersicht heraus erstellen, anzeigen und herunterladen.

## Navigation

Die Spendenübersicht findest du in der Seitenleiste unter der Menügruppe **Spendenverwaltung**. Der Menüpunkt heißt **Spendenübersicht**.

## Tabellenansicht der Spendenübersicht

### Spalten

| Spalte | Beschreibung | Sortierbar | Ein-/Ausblendbar |
|---|---|---|---|
| Datum | Datum der Spende | Ja | Nein |
| Typ | Art der Zuwendung | Ja | Nein |
| Kontaktname | Name des Spenders bzw. der Spenderin | Nein | Nein |
| Adresse | Adresse des Kontakts | Nein | Ja |
| Betrag | Spendenbetrag in der jeweiligen Währung – am Ende der Tabelle wird die Gesamtsumme aller angezeigten Spenden dargestellt | Ja | Nein |
| Projekt | Zugeordnetes Projekt (nur sichtbar, wenn das Tool **Projekte** aktiviert ist) | Ja | Ja |
| Bescheinigung | Schalter, ob für diese Spende eine Spendenbescheinigung erstellt werden soll. Kann nur bearbeitet werden, wenn du die Berechtigung **write donations** hast. | Nein | Ja |

Die Standardsortierung ist nach **Datum** (neueste zuerst).

Ein Klick auf eine Zeile in der Spendenübersicht öffnet das zugehörige Finanzereignis, in dem du alle Details zur Spende einsehen und bearbeiten kannst.

### Filter in der Spendenübersicht

| Filter | Typ | Beschreibung |
|---|---|---|
| Bescheinigung | Ja / Nein / Alle | Filtert nach Spenden, für die eine Bescheinigung erstellt werden soll |
| Projekt | Mehrfachauswahl | Filtert nach zugeordnetem Projekt (nur sichtbar, wenn das Tool **Projekte** aktiviert ist) |
| Typ | Mehrfachauswahl | Filtert nach Art der Zuwendung |
| Datum | Datumsbereich | Filtert nach dem Spendenzeitraum |

Du kannst mehrere Filter gleichzeitig kombinieren. Die Betragssumme am Ende der Tabelle passt sich automatisch an die gefilterten Ergebnisse an.

### Leerer Zustand

Wenn in der Spendenübersicht noch keine Spenden vorhanden sind, erscheint folgender Hinweis:

> „Um Spenden anzuzeigen, müssen sie entweder in der Spendenerfassung erfasst oder über die ‚Import'-Funktion importiert werden."

Du hast also zwei Möglichkeiten, Spenden in das System zu bringen: über die **Spendenerfassung** (einzelne Spenden manuell anlegen) oder über den **Import** (mehrere Spenden auf einmal aus einer Datei einlesen).

## Aktionen in der Spendenübersicht

### Zeilenaktionen

Für jede Spende in der Spendenübersicht stehen dir folgende Aktionen zur Verfügung:

| Aktion | Beschreibung | Sichtbarkeit |
|---|---|---|
| Einzelspendenbestätigung erstellen | Erstellt eine Spendenbescheinigung für diese einzelne Spende. Nach dem Erstellen steht die Bescheinigung zum Anzeigen und Herunterladen bereit. | Immer sichtbar |
| Spendenbescheinigung anzeigen | Zeigt die bereits erstellte Spendenbescheinigung in einer Vorschau an. | Nur sichtbar, wenn bereits eine Bescheinigung mit zugehöriger Mediendatei für diese Spende erstellt wurde |
| Spendenbescheinigung herunterladen | Lädt die bereits erstellte Spendenbescheinigung als Datei herunter. | Nur sichtbar, wenn bereits eine Bescheinigung mit zugehöriger Mediendatei für diese Spende erstellt wurde |

### Kopfzeilen-Aktionen

| Aktion | Beschreibung | Sichtbarkeit |
|---|---|---|
| Export | Exportiert die aktuell angezeigte (ggf. gefilterte) Tabellenansicht der Spendenübersicht | Immer sichtbar |
| Import | Öffnet den Import-Dialog zum Importieren von Spenden aus einer Datei | Nur sichtbar, wenn kein Import gerade läuft und du die Berechtigung **write donations** hast |

## Spendenimport

Über die Schaltfläche **Import** in der Spendenübersicht kannst du Spenden aus einer Datei importieren. Der Import verarbeitet bis zu 10.000 Zeilen in Blöcken von je 100 Einträgen.

### Importfelder

| Feld | Beschreibung |
|---|---|
| Vorname | Vorname des Spenders |
| Nachname | Nachname des Spenders |
| Straße | Straße des Spenders |
| E-Mail-Adresse | E-Mail-Adresse des Spenders |
| PLZ | Postleitzahl |
| Stadt | Stadt |
| Land | Land |
| Datum | Datum der Spende |
| Ursprünglicher Betrag | Betrag in der Originalwährung |
| Ursprüngliche Währung | Währung des Originalbetrags |
| Betrag in [Währung] | Betrag in der Organisationswährung (die Währung wird automatisch anhand deiner Organisationseinstellungen eingesetzt) |

### Importvorgang und Fortschritt

Während ein Import läuft, wird ein Statuswidget im Kopfbereich der Spendenübersicht angezeigt. Dieses zeigt:

- Den **Fortschritt in Prozent**
- Die **Gesamtanzahl** der zu importierenden Zeilen
- Die Anzahl der **bereits importierten** Zeilen
- Die Anzahl der **fehlerhaften** Zeilen

Du kannst die Seite während des Imports schließen und später zur Spendenübersicht zurückkehren, um den aktuellen Status zu prüfen. Der Import läuft im Hintergrund weiter.

### Nach dem Import

Nach Abschluss des Imports wird eine Zusammenfassung angezeigt mit:

- **Gesamtanzahl** der Zeilen
- Anzahl der **erfolgreich importierten** Zeilen
- Anzahl der **fehlerhaften** Zeilen

Fehlerhafte Zeilen kannst du einsehen, um die Ursache zu ermitteln. Du kannst dieselbe Datei erneut hochladen, um fehlgeschlagene Zeilen zu wiederholen – bereits erfolgreich importierte Spenden werden dabei **nicht dupliziert**.

## Berechtigungen für die Spendenübersicht

- Das Tool **Spenden** muss aktiviert sein, damit die Spendenübersicht im Menü erscheint.
- Du benötigst Zugriff auf alle Projekte, um die Spendenübersicht nutzen zu können.
- Die Spalte **Bescheinigung** (Schalter) kann nur bearbeitet werden, wenn du die Berechtigung **write donations** hast.
- Die Schaltfläche **Import** ist nur sichtbar, wenn du die Berechtigung **write donations** hast.

## Beziehungen der Spendenübersicht zu anderen Bereichen

- **Finanzereignisse**: Jede Spende ist mit einem Finanzereignis verknüpft. Ein Klick auf eine Spendenzeile in der Spendenübersicht öffnet das zugehörige Finanzereignis, in dem du weitere Details einsehen und bearbeiten kannst.
- **Kontakte**: Jede Spende ist einem Kontakt (Spender/Spenderin) zugeordnet. Der Kontaktname wird direkt in der Spendenübersicht angezeigt.
- **Projekte**: Spenden können einem Projekt zugeordnet sein. Die Projektspalte ist nur sichtbar, wenn das Tool **Projekte** aktiviert ist.
- **Spendenbescheinigungen**: Aus der Spendenübersicht heraus kannst du Einzelspendenbestätigungen erstellen, anzeigen und herunterladen.
- **Spendenerfassung**: Neue Spenden werden über die Spendenerfassung oder den Import in der Spendenübersicht angelegt.

---

## page: GenerationRunStatus

**Entity:** GenerationRunStatus  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/DonationReceiptResource/Widgets/GenerationRunStatus.php`  
**Updated:** 2026-02-14 18:06:36  

# Status der Spendenbescheinigungserstellung

## Übersicht

Das Widget „Status der Spendenbescheinigungserstellung" zeigt dir den aktuellen Stand der zuletzt durchgeführten Erstellungsläufe von Spendenbescheinigungen an. Du kannst hier den Fortschritt laufender Erstellungen verfolgen und abgeschlossene Erstellungsläufe als Sammeldatei herunterladen. Das Widget wird automatisch auf der Übersichtsseite der Spendenbescheinigungen im Bereich Spendenverwaltung angezeigt.

## Navigation

Das Widget erscheint automatisch auf der Listenansicht der Spendenbescheinigungen – ein separater Menüpunkt ist nicht erforderlich. Die Spendenbescheinigungen findest du unter der Menügruppe **Spendenverwaltung**. Das Tool **Spenden** muss aktiviert sein.

## Angezeigte Informationen

### Laufende Erstellung

Während Spendenbescheinigungen im Hintergrund erstellt werden, zeigt das Widget folgende Informationen:

- **Titel**: „Erstellung läuft"
- **Startzeit**: Wann die Erstellung gestartet wurde
- **Fortschritt**: Prozentualer Fortschritt mit Angabe der Gesamtanzahl und der bereits abgeschlossenen Bescheinigungen
- **Hinweis**: Du kannst die Seite schließen und später wieder aufrufen, um den Status zu überprüfen. Die Erstellung läuft im Hintergrund weiter.

### Abgeschlossene Erstellung

Nach Abschluss eines Erstellungslaufs zeigt das Widget folgende Informationen:

- **Status**: „Abgeschlossen"
- **Gesamtanzahl**: Wie viele Bescheinigungen insgesamt erstellt wurden
- Bei Jahresspendenbescheinigungen wird zusätzlich das betreffende Jahr und das Erstellungsdatum angezeigt (z. B. „Jahresspendenbescheinigungen 2024 (14.02.2025)")

## Aktionen

### Herunterladen

Für jeden abgeschlossenen Erstellungslauf steht eine Herunterladen-Aktion zur Verfügung (Pfeil-nach-unten-Symbol). Nach dem Klick öffnet sich ein Dialog mit folgenden Optionen:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Mit Anschreiben | Checkbox | Nein | Jeder Bescheinigung wird das konfigurierte Anschreiben beigefügt. Sinnvoll für den postalischen Versand. Falls kein Anschreiben konfiguriert ist, erscheint ein entsprechender Hinweis und die Option ist nicht verfügbar. |
| Dateiformat | Auswahl | Ja | **Ein PDF**: Alle Bescheinigungen in einer einzigen PDF-Datei – ideal für Sammeldruck oder den Versand an eine Druckerei. **Einzelne PDFs**: Jede Bescheinigung als eigene Datei in einem ZIP-Archiv – ideal für individuellen Versand oder die digitale Ablage pro Kontakt. |
| Anschreiben separat | Auswahl | Nein | Nur sichtbar, wenn „Mit Anschreiben" aktiviert ist. **Nein**: Anschreiben und Bescheinigung werden pro Kontakt in einer Datei zusammengefügt – sinnvoll für direkten Versand per Post oder E-Mail. **Ja**: Das Anschreiben wird als eigene PDF-Datei gespeichert – sinnvoll, wenn das Anschreiben auf anderem Papier (z. B. Briefpapier) gedruckt werden soll. |
| Leerseiten für beidseitigen Druck | Checkbox | Nein | Fügt nach Bescheinigungen mit ungerader Seitenzahl eine Leerseite ein, damit beim beidseitigen Druck (Duplex) jede Bescheinigung auf einem neuen Blatt beginnt. |
| Verzeichnisstruktur | Auswahl | Nein | Nur bei „Einzelne PDFs" sichtbar. **Flach**: Alle Dateien liegen auf einer Ebene – übersichtlich bei wenigen Bescheinigungen. **Nach Kontakt gruppiert**: Dateien werden in Unterordner pro Kontakt sortiert – empfehlenswert ab ca. 20 Bescheinigungen für eine bessere Übersicht. |

Nach dem Absenden wird der Download im Hintergrund vorbereitet. Du erhältst eine Benachrichtigung, sobald die Datei zum Herunterladen bereitsteht.

## Häufige Fragen und Probleme

### Die Option „Mit Anschreiben" ist nicht verfügbar

Damit du Bescheinigungen mit Anschreiben herunterladen kannst, muss zuvor ein Anschreiben im Bereich **Dokumente** im Microsoft-Format (Office Open XML, z. B. .docx) erstellt und in den Einstellungen der Spendenbescheinigungen hinterlegt worden sein. Erstelle oder hinterlege zunächst ein Anschreiben und versuche es erneut.

### Der Download startet nicht

Der Download wird im Hintergrund vorbereitet. Warte auf die Benachrichtigung, dass die Datei bereitsteht. Falls nach längerer Zeit keine Benachrichtigung erscheint, lade die Seite neu und prüfe den Status des Erstellungslaufs im Widget.

## Beziehungen zu anderen Bereichen

- **Spendenbescheinigungen erstellen**: Das Widget zeigt den Fortschritt der Erstellungsläufe, die über die Aktion „Spendenbescheinigungen erstellen" in der Spendenübersicht gestartet werden.
- **Anschreiben / Dokumente**: Für die Download-Option „Mit Anschreiben" muss zuvor ein Anschreiben im Bereich **Dokumente** im Microsoft-Format (Office Open XML) erstellt und in den Einstellungen hinterlegt worden sein.
- **Spendenübersicht**: Die hier angezeigten Bescheinigungen beziehen sich auf die in der Spendenübersicht erfassten Spenden.

---

## page: ListDonationReceipts

**Entity:** ListDonationReceipts  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/DonationReceiptResource/Pages/ListDonationReceipts.php`  
**Updated:** 2026-02-14 18:04:56  

# Spendenbescheinigungen

## Übersicht
Auf der Seite **Spendenbescheinigungen** kannst du alle Spendenbescheinigungen deiner Organisation verwalten. Du kannst Spendenbescheinigungen für das Vorjahr generieren, bestehende Bescheinigungen einsehen, herunterladen und ein Anschreiben konfigurieren. Die Seite bietet zwei Ansichten: eine Kontakt-basierte Ansicht (Kontakte mit unbestätigten Spenden) und eine Bescheinigungs-Ansicht.

## Navigation
Die Seite **Spendenbescheinigungen** befindet sich im Bereich **Spendenverwaltung** in der Seitenleiste. Du erreichst sie über den Menüpunkt **Spendenbescheinigungen**.

## Ansichtsumschalter
Oben auf der Seite **Spendenbescheinigungen** kannst du zwischen zwei Ansichten umschalten:

| Ansicht | Icon | Beschreibung |
|---------|------|--------------|
| **Kontakte mit unbestätigten Spenden** | Personengruppe | Zeigt Kontakte, für die noch keine Spendenbescheinigung erstellt wurde. |
| **Spendenbescheinigungen** | Dokument | Zeigt die bereits erstellten Spendenbescheinigungen. |

## Tabellenansicht: Spendenbescheinigungen

### Spalten
| Spalte | Beschreibung |
|--------|--------------|
| Typ | Art der Spendenbescheinigung |
| Erstellt | Generierungslauf, in dem die Bescheinigung erstellt wurde |
| Kontaktnummer | Nummer des zugehörigen Kontakts |
| Kontaktname | Name des Kontakts |
| Versandmethode | Wie die Bescheinigung zugestellt wird (dient aktuell nur zur Information und löst keinen automatischen Versand aus) |
| Versendet am | Datum und Uhrzeit, zu der die Bescheinigung als versendet markiert wurde |

### Filter
Du kannst die Spendenbescheinigungen mit folgenden Filtern eingrenzen:

| Filter | Beschreibung |
|--------|--------------|
| Bereits gesendet | Filtert nach bereits versendeten oder noch nicht versendeten Bescheinigungen |
| Versandmethode | Filtert nach der gewählten Versandmethode |
| Typ | Filtert nach dem Typ der Spendenbescheinigung |
| Erstellt | Filtert nach dem Generierungslauf, in dem die Bescheinigungen erzeugt wurden |

## Aktionen

### Header-Aktionen

#### Anschreiben konfigurieren
Über die Schaltfläche **Anschreiben** kannst du ein Dokument im Microsoft-Format (Office Open XML) als Anschreiben hinterlegen, das den Spendenbescheinigungen beigefügt wird.

- Das Dokument muss zuvor im Bereich **Dokumente** erstellt worden sein.
- Ist noch kein passendes Dokument vorhanden, wird ein Hinweis mit einem Link zur Dokumentenverwaltung angezeigt, über den du ein Dokument erstellen kannst.
- Wenn bereits ein Anschreiben konfiguriert ist, kannst du es hier ändern oder entfernen.

#### Spendenbescheinigungen für Vorjahr erstellen
Wenn es offene (unbestätigte) Spenden aus dem Vorjahr gibt, wird die Schaltfläche **Spendenbescheinigungen für Vorjahr erstellen** angezeigt. Gibt es keine offenen Spenden aus dem Vorjahr, wird diese Schaltfläche nicht angezeigt.

Beim Klicken öffnet sich ein Dialog mit folgenden Informationen:

- **Anzahl der betroffenen Kontakte und Spenden**, die in den Generierungslauf einbezogen werden
- **Art der Bescheinigungen**, die erstellt werden:
  - **Sammelspendenbescheinigung** – der Standard für Jahresbescheinigungen
  - **Einzelspendenbestätigung** – wenn für den Kontakt bereits eine Sammelspendenbescheinigung für das Jahr existiert
  - **Sachzuwendungsbestätigung** – für Sachspenden
- **Hinweis:** Die Bescheinigungen werden nicht automatisch versendet.
- **Hinweis:** Die Aktion kann erneut ausgeführt werden, wenn später weitere Spenden hinzukommen.

**Wichtig:** Nur Spenden von Kontakten mit gültiger Adresse werden berücksichtigt. Kontakte ohne gültige Adresse werden übersprungen.

**Voraussetzungen:** Bestimmte Einstellungen müssen konfiguriert sein, bevor Spendenbescheinigungen erstellt werden können. Fehlen Einstellungen, werden diese im Dialog aufgelistet und die Schaltfläche zum Starten der Generierung ist deaktiviert.

**Nach dem Start der Generierung:**
- Es erscheint eine Erfolgsmeldung, die bestätigt, dass die Generierung gestartet wurde.
- Oben auf der Seite wird ein Fortschritts-Widget angezeigt (siehe Abschnitt „Generierungslauf-Status").
- Du kannst die Seite während der Generierung verlassen und später zurückkehren – die Generierung läuft im Hintergrund weiter.

### Zeilen-Aktionen
Für jede Spendenbescheinigung stehen folgende Aktionen zur Verfügung:

| Aktion | Beschreibung |
|--------|--------------|
| **Anschreiben anzeigen** | Zeigt eine Vorschau des Anschreibens als PDF. Diese Aktion ist nur sichtbar, wenn ein Anschreiben konfiguriert ist. |
| **Spendenbescheinigung anzeigen** | Öffnet die Spendenbescheinigung als PDF-Vorschau. |
| **Spendenbescheinigung herunterladen** | Lädt die Spendenbescheinigung als PDF-Datei herunter. |
| **Bearbeiten** | Öffnet das Bearbeitungsformular der Bescheinigung (siehe unten). |
| **Löschen** | Löscht die Bescheinigung. Vor dem Löschen wird ein Bestätigungsdialog angezeigt. |

### Bearbeitungsformular
Beim Bearbeiten einer Spendenbescheinigung kannst du folgendes Feld ändern:

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| Versandmethode | Auswahl | Legt fest, wie die Spendenbescheinigung zugestellt wird. Dieses Feld dient aktuell nur zur Information und löst keinen automatischen Versand aus. |

### Sammelaktionen
Du kannst in der Tabelle mehrere Spendenbescheinigungen auswählen und dann über das Aktionsmenü in der Toolbar folgende Sammelaktionen ausführen:

| Aktion | Beschreibung |
|--------|--------------|
| **Ausgewählte Spendenbescheinigungen herunterladen** | Lädt alle ausgewählten Bescheinigungen herunter. |
| **Als gesendet markieren** | Markiert die ausgewählten Bescheinigungen als versendet. Nutze diese Aktion, wenn du Bescheinigungen manuell (z. B. per Post) versendet hast. |
| **Ausgewählte Spendenbescheinigungen löschen** | Löscht alle ausgewählten Bescheinigungen. Vor dem Löschen wird ein Bestätigungsdialog angezeigt. |

## Generierungslauf-Status
Wenn Spendenbescheinigungen generiert werden oder kürzlich generiert wurden, wird oben auf der Seite **Spendenbescheinigungen** ein Status-Widget angezeigt:

- **Während der Erstellung:** Das Widget zeigt den Fortschritt in Prozent, die Gesamtzahl der zu erstellenden Bescheinigungen, die Anzahl der bereits abgeschlossenen Bescheinigungen sowie den Startzeitpunkt an. Die Seite kann währenddessen geschlossen werden – die Generierung läuft im Hintergrund weiter.
- **Nach Abschluss:** Das Widget zeigt die Gesamtzahl der erfolgreich erstellten Bescheinigungen an.

## Berechtigungen
Das Tool **Spenden** muss für die Organisation aktiviert sein, damit die Seite **Spendenbescheinigungen** zugänglich ist.

## Beziehungen zu anderen Bereichen
- **Kontakte:** Spendenbescheinigungen sind mit Kontakten verknüpft. Nur Kontakte mit gültiger Adresse können bei der Generierung berücksichtigt werden.
- **Spenden:** Die Bescheinigungen basieren auf den erfassten Spenden.
- **Dokumente:** Für das Anschreiben wird ein Dokument im Office Open XML-Format benötigt, das zuvor im Bereich **Dokumente** erstellt werden muss.
- **Spendenübersicht:** Die Seite **Spendenbescheinigungen** ist über die Breadcrumb-Navigation mit der Spendenübersicht verknüpft.

## Häufige Fragen und Probleme

### Die Schaltfläche „Spendenbescheinigungen für Vorjahr erstellen" wird nicht angezeigt
**Ursache:** Es gibt keine offenen (unbestätigten) Spenden aus dem Vorjahr mit gültiger Adresse.
**Lösung:** Prüfe, ob alle Spenden bereits durch bestehende Bescheinigungen abgedeckt sind. Wenn du neue Spenden aus dem Vorjahr erfasst und die zugehörigen Kontakte eine gültige Adresse haben, erscheint die Schaltfläche wieder.

### Die Generierung kann nicht gestartet werden – fehlende Einstellungen
**Ursache:** Bestimmte Pflichteinstellungen sind noch nicht konfiguriert.
**Lösung:** Der Dialog listet die fehlenden Einstellungen auf. Konfiguriere diese zuerst und kehre dann zur Seite **Spendenbescheinigungen** zurück.

### Ein Kontakt wird bei der Generierung übersprungen
**Ursache:** Der Kontakt hat keine gültige Adresse hinterlegt.
**Lösung:** Ergänze die Adresse des Kontakts im Bereich **Kontakte** und führe die Generierung erneut aus.

### Versandmethode löst keinen automatischen Versand aus
Die Versandmethode dient aktuell nur zur Information und Organisation. Sie löst keinen automatischen Versand der Spendenbescheinigung aus.

---

## page: EditDonationReceipt

**Entity:** EditDonationReceipt  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/DonationReceiptResource/Pages/EditDonationReceipt.php`  
**Updated:** 2026-02-14 18:02:24  

# Spendenbescheinigung bearbeiten

## Übersicht

Auf der Seite „Spendenbescheinigung bearbeiten" kannst du eine bestehende Spendenbescheinigung anpassen. Aktuell lässt sich hier die Versandmethode der Bescheinigung ändern. Außerdem hast du die Möglichkeit, die Spendenbescheinigung zu löschen.

> **Hinweis:** Im aktuellen Stand der Anwendung ist die Bearbeitungsseite deaktiviert und nicht über die Navigation erreichbar. Die Edit-Route ist in der `DonationReceiptResource` auskommentiert. Spendenbescheinigungen werden stattdessen direkt in der Listenansicht über die Inline-Bearbeitung angepasst. Die folgenden Informationen beschreiben die Funktionalität der Bearbeitungsseite, sobald sie wieder aktiviert wird.

## Formularfelder

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Versandmethode | Auswahlliste | Nein | Legt fest, auf welchem Weg die Spendenbescheinigung an den zugehörigen Kontakt übermittelt wird. Ein Hinweis-Icon neben dem Feld informiert dich darüber, dass die Versandmethode aktuell nur zur Information dient und die automatische Versendung noch in Entwicklung ist. |

Da die Versandmethode kein Pflichtfeld ist, kann die Spendenbescheinigung auch ohne Angabe einer Versandmethode gespeichert werden.

## Aktionen

| Aktion | Beschreibung |
|--------|--------------|
| **Speichern** | Speichert die Änderungen an der Spendenbescheinigung. |
| **Löschen** | Löscht die Spendenbescheinigung. Diese Aktion ist über die Kopfzeile der Bearbeitungsseite verfügbar. |

## Beziehungen

- **Spendenbescheinigungen-Übersicht:** Die Listenansicht aller Spendenbescheinigungen.
- **Kontakte:** Jede Spendenbescheinigung ist einem Kontakt zugeordnet. Die gewählte Versandmethode bezieht sich auf den Versand an diesen Kontakt.
- **Erstellungslauf:** Spendenbescheinigungen können über einen Sammel-Erstellungslauf generiert worden sein.

## Häufige Fragen

**Kann ich den Kontakt oder den Betrag einer Spendenbescheinigung ändern?**
Nein. Auf der Bearbeitungsseite der Spendenbescheinigung kann aktuell nur die Versandmethode angepasst werden. Kontakt, Betrag und andere Stammdaten der Bescheinigung sind nicht änderbar.

**Was passiert, wenn die Bearbeitungsseite nicht erreichbar ist?**
Die Bearbeitungsseite ist derzeit deaktiviert. Du kannst Spendenbescheinigungen stattdessen direkt in der Spendenbescheinigungen-Übersicht über die Inline-Bearbeitung anpassen.

---

## page: CreateDonationReceipt

**Entity:** CreateDonationReceipt  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/DonationReceiptResource/Pages/CreateDonationReceipt.php`  
**Updated:** 2026-02-14 18:01:27  

# Spendenbescheinigung erstellen

## Übersicht

Auf dieser Seite kannst du eine neue Spendenbescheinigung manuell anlegen. Dabei legst du die gewünschte Versandmethode für die Bescheinigung fest.

## Navigation

Die Seite „Spendenbescheinigung erstellen" erreichst du über die Seitenleiste unter **Spendenverwaltung** → **Spendenbescheinigungen** → Schaltfläche **Erstellen**.

## Formularfelder

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Versandmethode | Auswahl | Nein | Legt fest, wie die Spendenbescheinigung zugestellt werden soll. Ein Hinweis-Icon neben dem Feld informiert darüber, dass die Versandmethode aktuell nur zur Information gespeichert wird – die automatische Versendung befindet sich noch in Entwicklung. |

## Aktionen

- **Erstellen**: Speichert die neue Spendenbescheinigung mit der gewählten Versandmethode.

## Berechtigungen

Damit du diese Seite nutzen kannst, muss das Tool **Spenden** für deine Organisation aktiviert sein.

---

## page: Validation

**Entity:** Validation  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Traits/Validation.php`  
**Updated:** 2026-02-14 18:00:47  

# Validierung bei der Kontakterfassung

## Übersicht

Bei der Erstellung oder Bearbeitung von Kontakten prüft das System automatisch, ob die Mindestangaben für den jeweiligen Kontakttyp ausgefüllt sind. Diese Validierung stellt sicher, dass keine unvollständigen oder leeren Kontakte angelegt werden.

## Validierungsregeln nach Kontakttyp

Die Validierungsregeln bei der Kontakterfassung hängen davon ab, welchen Kontakttyp du gewählt hast. In beiden Fällen muss mindestens ein bestimmtes Feld ausgefüllt sein, damit der Kontakt gespeichert werden kann.

### Kontakttyp „Person"

Beim Kontakttyp „Person" muss mindestens eines der folgenden drei Felder ausgefüllt sein:

- **Vorname**
- **Nachname**
- **Email-Adresse**

Wenn du alle drei Felder leer lässt und versuchst zu speichern, erscheint bei jedem dieser Felder die folgende Fehlermeldung:

> „Mindestens eines der Felder muss ausgefüllt sein"

**Lösung:** Trage in mindestens eines der drei Felder (Vorname, Nachname oder Email-Adresse) einen Wert ein. Es reicht aus, ein einziges Feld auszufüllen – du musst nicht alle Felder befüllen.

### Kontakttyp „Organisation"

Beim Kontakttyp „Organisation" muss mindestens eines der folgenden zwei Felder ausgefüllt sein:

- **Name**
- **Email-Adresse**

Wenn du beide Felder leer lässt und versuchst zu speichern, erscheint bei jedem dieser Felder die folgende Fehlermeldung:

> „Mindestens eines der Felder muss ausgefüllt sein"

**Lösung:** Trage in mindestens eines der zwei Felder (Name oder Email-Adresse) einen Wert ein. Es reicht aus, ein einziges Feld auszufüllen.

## Häufige Fragen zur Validierung

### Was passiert, wenn ich auf „Speichern" klicke und die Validierung fehlschlägt?

Der Kontakt wird **nicht** gespeichert. Stattdessen werden die betroffenen Felder rot markiert und die entsprechende Fehlermeldung wird angezeigt.

### Gibt es weitere Pflichtfelder?

Die hier beschriebene Validierung betrifft ausschließlich die Mindestangaben, die nötig sind, damit ein Kontakt überhaupt angelegt werden kann. Weitere Felder im Kontaktformular sind optional, sofern sie nicht gesondert als Pflichtfeld gekennzeichnet sind.

---

## page: Navigation

**Entity:** Navigation  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Traits/Navigation.php`  
**Updated:** 2026-02-14 17:59:36  

# Kontakt-Navigation

## Übersicht

Die Kontakt-Navigation ist die Unternavigation (Tabs) am oberen Rand der Kontaktdetailseite. Sie erscheint, sobald du einen Kontakt aus der Kontaktliste öffnest, und ermöglicht dir den schnellen Wechsel zwischen den verschiedenen Detailbereichen eines Kontakts – zum Beispiel Adressen, Spenden oder Anmerkungen.

Die Kontakt-Navigation passt sich automatisch an: Je nachdem, welche Tools für deine Organisation aktiviert sind und welche Rolle du hast, werden nur die relevanten Navigationspunkte angezeigt.

## Navigationspunkte der Kontakt-Navigation

Die folgende Tabelle zeigt alle verfügbaren Navigationspunkte innerhalb der Kontakt-Navigation. Einige sind immer sichtbar, andere erscheinen nur, wenn bestimmte Tools aktiviert sind oder du die entsprechende Berechtigung hast.

| Navigationspunkt | Immer sichtbar | Voraussetzung |
|---|---|---|
| Übersicht | Ja | – |
| Adressen | Ja | – |
| Anmerkungen | Ja | – |
| Finanzereignisse | Nein | Das Tool **Buchhaltung** muss aktiviert sein |
| Spenden | Nein | Das Tool **Spenden** muss aktiviert sein |
| Spendenbescheinigungen | Nein | Das Tool **Spenden** muss aktiviert sein |
| Zeiterfassung | Nein | Das Tool **Zeiterfassung** muss aktiviert sein |
| Newsletter | Nein | Das Tool **Newsletter** muss aktiviert sein |
| Persönliche Seite | Nein | Du musst Organisations-Administrator sein |
| Briefsendungen | Ja | – |

Wenn ein Navigationspunkt nicht angezeigt wird, liegt das daran, dass das zugehörige Tool für deine Organisation nicht aktiviert ist. Wende dich in diesem Fall an deinen Organisations-Administrator, um das gewünschte Tool aktivieren zu lassen.

## Verfügbare Unterseiten der Kontakt-Navigation

Jeder Navigationspunkt führt dich zu einer eigenen Unterseite innerhalb des Kontakts. Beim Klick auf einen Navigationspunkt wechselt die Ansicht unterhalb der Navigation – der geöffnete Kontakt bleibt derselbe.

- **Übersicht** – Zentrale Ansicht mit allen Stammdaten des Kontakts (z. B. Name, Kontaktdaten, Gruppen). Dies ist die Standardansicht, die beim Öffnen eines Kontakts zuerst angezeigt wird.
- **Adressen** – Verwaltung aller Adressen des Kontakts (z. B. Haupt- und Nebenadressen).
- **Anmerkungen** – Notizen und Wiedervorlagen zum Kontakt. Hier kannst du interne Vermerke hinterlassen.
- **Finanzereignisse** – Finanzielle Vorgänge des Kontakts. Dieser Navigationspunkt ist nur sichtbar, wenn das Tool **Buchhaltung** aktiviert ist.
- **Spenden** – Spendenhistorie des Kontakts mit allen erfassten Spenden. Dieser Navigationspunkt ist nur sichtbar, wenn das Tool **Spenden** aktiviert ist.
- **Spendenbescheinigungen** – Alle für diesen Kontakt erstellten Spendenbescheinigungen. Dieser Navigationspunkt ist nur sichtbar, wenn das Tool **Spenden** aktiviert ist.
- **Zeiterfassung** – Erfasste Aktivitätszeiträume für diesen Kontakt. Dieser Navigationspunkt ist nur sichtbar, wenn das Tool **Zeiterfassung** aktiviert ist.
- **Newsletter** – Newsletter-Listen, denen dieser Kontakt zugeordnet ist. Dieser Navigationspunkt ist nur sichtbar, wenn das Tool **Newsletter** aktiviert ist.
- **Persönliche Seite** – Einstellungen zur persönlichen Seite des Kontakts. Dieser Navigationspunkt ist ausschließlich für Organisations-Administratoren sichtbar.
- **Briefsendungen** – Übersicht über alle Briefsendungen, die an diesen Kontakt verschickt wurden.

## Berechtigungen für die Kontakt-Navigation

Die Sichtbarkeit der einzelnen Navigationspunkte in der Kontakt-Navigation wird durch zwei Faktoren gesteuert:

1. **Aktivierte Tools**: Navigationspunkte wie Finanzereignisse, Spenden, Spendenbescheinigungen, Zeiterfassung und Newsletter erscheinen nur, wenn das jeweilige Tool für deine Organisation aktiviert ist. Ist ein Tool nicht aktiviert, wird der zugehörige Navigationspunkt für alle Benutzer ausgeblendet.

2. **Benutzerrolle**: Der Navigationspunkt **Persönliche Seite** ist ausschließlich für Organisations-Administratoren sichtbar. Andere Benutzer sehen diesen Punkt nicht in der Kontakt-Navigation.

Die Navigationspunkte **Übersicht**, **Adressen**, **Anmerkungen** und **Briefsendungen** sind immer sichtbar und erfordern keine besonderen Voraussetzungen.

## Beziehungen der Kontakt-Navigation zu anderen Bereichen

Die Kontakt-Navigation ist das zentrale Steuerungselement innerhalb der Kontaktdetailansicht. Sie verbindet alle Detailbereiche eines Kontakts miteinander und stellt die Verbindung zu folgenden übergeordneten Bereichen her:

- **Kontakte** – Die übergeordnete Kontaktliste, aus der du einen Kontakt öffnest, um zur Kontakt-Navigation zu gelangen.
- **Buchhaltung** – Über den Navigationspunkt „Finanzereignisse" erreichst du die finanziellen Vorgänge des Kontakts.
- **Spenden** – Über die Navigationspunkte „Spenden" und „Spendenbescheinigungen" erreichst du die Spendenhistorie und die zugehörigen Bescheinigungen.
- **Zeiterfassung** – Über den Navigationspunkt „Zeiterfassung" erreichst du die erfassten Aktivitätszeiträume des Kontakts.
- **Newsletter** – Über den Navigationspunkt „Newsletter" siehst du, welchen Newsletter-Listen der Kontakt zugeordnet ist.
- **Briefsendungen** – Über den Navigationspunkt „Briefsendungen" erhältst du eine Übersicht über alle an diesen Kontakt versandten Briefe.

## Häufige Fragen zur Kontakt-Navigation

**Warum sehe ich bestimmte Navigationspunkte nicht?**
Wenn ein Navigationspunkt in der Kontakt-Navigation fehlt, ist das zugehörige Tool für deine Organisation nicht aktiviert. Beim Navigationspunkt „Persönliche Seite" musst du zusätzlich Organisations-Administrator sein. Wende dich an deinen Organisations-Administrator, wenn du ein Tool aktivieren lassen möchtest.

**Wie wechsle ich zwischen den Bereichen?**
Klicke einfach auf den gewünschten Navigationspunkt in der Leiste am oberen Rand der Kontaktdetailseite. Die Ansicht wechselt sofort zum ausgewählten Bereich.

**Wo finde ich die Kontakt-Navigation?**
Die Kontakt-Navigation erscheint automatisch, sobald du einen Kontakt aus der Kontaktliste öffnest. Sie befindet sich als Tab-Leiste am oberen Rand der Kontaktdetailseite.

---

## page: Infolist

**Entity:** Infolist  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Traits/Infolist.php`  
**Updated:** 2026-02-14 17:58:10  

# Kontakt-Detailansicht (Infolist)

## Übersicht

Die Kontakt-Detailansicht zeigt alle gespeicherten Informationen eines Kontakts in einer übersichtlichen, nicht editierbaren Darstellung an. Du kannst hier alle Details auf einen Blick erfassen, ohne versehentlich etwas zu ändern. Je nach Kontakttyp (Person, Organisation oder Ehepaar) werden unterschiedliche Felder angezeigt. Von hier aus kannst du verknüpfte Kontakte direkt per Klick auf deren Namen aufrufen.

Um Daten zu bearbeiten, wechsle über die entsprechende Schaltfläche in den Bearbeitungsmodus.

## Angezeigte Felder

Die Kontakt-Detailansicht zeigt die folgenden Informationen an. Viele Felder sind nur unter bestimmten Bedingungen sichtbar – etwa abhängig vom Kontakttyp oder von aktivierten Tools und Einstellungen.

| Feld | Beschreibung | Sichtbarkeit |
|---|---|---|
| **Segmente** | Zugeordnete Segmente als farbige Badges. Wenn keine Segmente zugeordnet sind, wird „Keine Segmente zugeordnet" angezeigt. Ein Hinweistext erklärt: „Ein Segment ist eine Gruppe, zu der beliebig viele Kontakte gehören können." | Immer sichtbar |
| **Avatar** | Profilbild des Kontakts | Nur sichtbar, wenn ein Bild hinterlegt ist |
| **Kontaktnummer** | Eindeutige Nummer des Kontakts | Immer sichtbar |
| **Mitgliedsnummer** | Nummer der Mitgliedschaft | Nur wenn das Tool „Mitglieder" aktiviert ist |
| **Mitglieds-Status** | Aktueller Status der Mitgliedschaft. Wird „Kein Mitglied" angezeigt, ist dem Kontakt kein Mitgliedsstatus zugeordnet. | Nur wenn das Tool „Mitglieder" aktiviert ist |
| **Ehepaar** | Name des verknüpften Ehepaar-Kontakts. Ein Klick darauf öffnet die Detailansicht des Ehepaar-Kontakts. | Nur sichtbar, wenn der Kontakt einem Ehepaar zugeordnet ist |
| **Typ** | Art des Kontakts: Person, Organisation oder Ehepaar | Immer sichtbar |
| **Titel** | Akademischer Titel o. Ä. (z. B. „Dr.", „Prof.") | Nur bei Typ „Person" |
| **Name** | Name der Organisation | Nur bei Typ „Organisation" |
| **Vorname** | Vorname der Person | Bei Typ „Person" oder bei Typ „Ehepaar" ohne verknüpfte Partner |
| **Nachname** | Nachname der Person | Bei Typ „Person" oder bei Typ „Ehepaar" ohne verknüpfte Partner |
| **Rufname** | Bevorzugter Rufname der Person | Nur bei Typ „Person" und wenn das Feld in den Einstellungen aktiviert ist |
| **Zweiter Vorname** | Weiterer Vorname der Person | Nur bei Typ „Person" und wenn das Feld in den Einstellungen aktiviert ist |
| **Geburtsname** | Geburtsname vor einer Namensänderung (z. B. durch Heirat) | Nur bei Typ „Person" und wenn das Feld in den Einstellungen aktiviert ist |
| **Person 1** | Name des ersten Partners im Ehepaar. Ein Klick öffnet die Detailansicht dieses Kontakts. | Nur bei Typ „Ehepaar" mit verknüpften Partnern |
| **Person 2** | Name des zweiten Partners im Ehepaar. Ein Klick öffnet die Detailansicht dieses Kontakts. | Nur bei Typ „Ehepaar" mit verknüpften Partnern |
| **Anrede** | Persönliche Anrede des Kontakts | Immer sichtbar |
| **Geburtstag** | Geburtsdatum mit dem aktuellen Alter in Klammern (z. B. „15.03.1985 (41)") | Nur bei Typ „Person" |
| **Sterbedatum** | Sterbedatum der Person. Wurde das Datum als geschätzt markiert, erscheint der Vermerk „geschätzt". Ist das genaue Datum nicht bekannt, wird „unbekannt" angezeigt. | Nur bei Typ „Person" und wenn das Feld in den Einstellungen aktiviert ist |
| **Geschlecht** | Geschlecht des Kontakts | Nur bei Typ „Person" |
| **Sprache** | Bevorzugte Sprache des Kontakts | Nur sichtbar, wenn das Feld in den Einstellungen aktiviert ist |
| **Newsletter-Listen** | Abonnierte Newsletter-Listen als farbige Badges. Wenn keine Listen zugeordnet sind, wird „Keine Newsletter-Listen zugeordnet" angezeigt. | Nur wenn das Tool „Newsletter" aktiviert ist |
| **E-Mail-Adresse** | E-Mail-Adresse des Kontakts. Ein Klick öffnet dein E-Mail-Programm mit einer neuen Nachricht an diese Adresse. | Immer sichtbar |
| **Webseite** | Website-URL der Organisation. Ein Klick öffnet die Webseite in einem neuen Browser-Tab. | Nur bei Typ „Organisation" |
| **Kommunikationskanäle** | Auflistung aller hinterlegten Kommunikationskanäle (z. B. Telefonnummern, Mobilnummern, Fax) | Immer sichtbar |
| **Spendenbescheinigungen** | Bevorzugte Zustellmethode für Spendenbescheinigungen (z. B. per Post oder per E-Mail). Hinweis: „Dient aktuell nur zur Information. Die automatische Versendung ist in Entwicklung." | Immer sichtbar |
| **Beziehungen** | Verknüpfte Kontakte mit Angabe des Beziehungstyps (z. B. „ist Arbeitgeber von"). Ein Klick auf den Namen öffnet die Detailansicht des verknüpften Kontakts. | Immer sichtbar |
| **Adresse** | Vollständige Adresse als formatierter Text | Nur sichtbar, wenn mindestens eine Adresse hinterlegt ist |
| **Anmerkungen** | Alle Notizen zum Kontakt, jeweils mit Überschrift | Nur sichtbar, wenn Anmerkungen vorhanden sind |
| **Umsatzsteuer-ID** | Umsatzsteuer-Identifikationsnummer des Kontakts | Nur sichtbar, wenn das Feld in den Einstellungen aktiviert ist |
| **Erstellt am** | Datum und Uhrzeit, wann der Kontakt angelegt wurde (Format: TT.MM.JJJJ HH:MM, z. B. „14.02.2026 09:30") | Immer sichtbar |

Zusätzlich werden eventuell vorhandene **eigene Felder** (Custom Fields) angezeigt, die in den Einstellungen unter „Kontakte → Eigene Felder" definiert wurden. Diese erscheinen in der Detailansicht zusammen mit den Standardfeldern.

## Beziehungen und Verknüpfungen

In der Kontakt-Detailansicht werden verschiedene Verknüpfungen zu anderen Daten angezeigt:

- **Ehepaar-Verknüpfung**: Bei Kontakten vom Typ „Ehepaar" werden die beiden Partner als anklickbare Links angezeigt. Ein Klick auf einen Partnernamen öffnet dessen Kontakt-Detailansicht.
- **Kontakt-Beziehungen**: Beziehungen zu anderen Kontakten (z. B. „ist Arbeitgeber von", „ist Kind von") werden mit dem Beziehungstyp und einem anklickbaren Link zum verknüpften Kontakt dargestellt.
- **Segmente**: Zugeordnete Segmente werden als farbige Badges in der Detailansicht angezeigt. Wenn keine Segmente zugeordnet sind, erscheint der Hinweis „Keine Segmente zugeordnet".
- **Newsletter-Listen**: Abonnierte Newsletter-Listen werden als farbige Badges dargestellt. Dieser Bereich ist nur sichtbar, wenn das Tool „Newsletter" aktiviert ist. Sind keine Listen zugeordnet, erscheint „Keine Newsletter-Listen zugeordnet".
- **Adressen**: Die aktive Adresse des Kontakts wird in der Detailansicht angezeigt.
- **Anmerkungen**: Vorhandene Notizen zum Kontakt werden in der Detailansicht aufgelistet.

## Felder und Sichtbarkeitseinstellungen

Einige Felder in der Kontakt-Detailansicht sind standardmäßig ausgeblendet und können in den Einstellungen aktiviert werden. Dazu gehören unter anderem:

- Rufname
- Zweiter Vorname
- Geburtsname
- Sterbedatum
- Sprache
- Umsatzsteuer-ID

Wenn du ein Feld in der Detailansicht vermisst, prüfe in den Einstellungen unter „Kontakte", ob das entsprechende Feld aktiviert ist.

## Häufige Fragen zur Kontakt-Detailansicht

**Warum fehlen bestimmte Felder in der Detailansicht?**
Felder werden nur angezeigt, wenn sie für den jeweiligen Kontakttyp relevant sind und in den Einstellungen aktiviert wurden. Felder wie „Rufname" oder „Geburtsname" müssen erst in den Einstellungen freigeschaltet werden. Außerdem werden Felder, die keinen Wert enthalten, teilweise ausgeblendet (z. B. Avatar, Adresse, Anmerkungen).

**Warum sehe ich keine Mitgliedsnummer oder keinen Mitglieds-Status?**
Diese Felder sind nur sichtbar, wenn das Tool „Mitglieder" aktiviert ist.

**Warum sehe ich keine Newsletter-Listen?**
Newsletter-Listen werden nur angezeigt, wenn das Tool „Newsletter" aktiviert ist. Ist das Tool nicht aktiviert, erscheint dieser Bereich nicht in der Detailansicht.

**Kann ich Daten direkt in der Detailansicht ändern?**
Nein, die Detailansicht ist eine reine Leseansicht. Um Daten zu bearbeiten, wechsle über die Bearbeitungs-Schaltfläche in den Bearbeitungsmodus.

---

## page: Fields

**Entity:** Fields  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Traits/Fields.php`  
**Updated:** 2026-02-14 17:56:02  

# Kontakt-Formularfelder

## Übersicht

Die Formularfelder beschreiben alle Eingabemöglichkeiten beim Erstellen und Bearbeiten eines Kontakts. Je nach Kontakttyp (Person, Organisation oder Ehepaar) werden unterschiedliche Felder angezeigt. Das Formular ist in die Reiter „Allgemein" und „Mitgliedschaft" unterteilt.

## Navigation

Die Formularfelder erscheinen beim Erstellen eines neuen Kontakts oder beim Bearbeiten eines bestehenden Kontakts.

## Formularfelder im Reiter „Allgemein"

### Kontakttyp und Identifikation

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Avatar | Bild-Upload | Nein | Profilbild des Kontakts. Du kannst das Bild nach dem Hochladen zuschneiden und bearbeiten. |
| Kontaktnummer | Textfeld | — | Wird automatisch vom System vergeben und kann nicht bearbeitet werden (ausgegraut). Dient zur eindeutigen Identifikation des Kontakts. |
| Typ | Auswahl | Ja | Kontakttyp: **Person**, **Organisation** oder **Ehepaar**. Dieses Feld bestimmt, welche weiteren Felder im Formular sichtbar sind. **Wichtig**: Der Kontakttyp kann nach dem Erstellen nicht mehr geändert werden. Wähle den Typ daher sorgfältig. |

### Felder für Typ „Person"

Diese Felder sind nur sichtbar, wenn du als Kontakttyp **Person** ausgewählt hast:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Titel | Textfeld | Nein | Akademischer oder anderer Titel der Person (z. B. „Dr.", „Prof."). |
| Vorname | Textfeld | Nein | Vorname der Person. Maximal 255 Zeichen. |
| Nachname | Textfeld | Nein | Nachname der Person. Maximal 255 Zeichen. |
| Rufname | Textfeld | Nein | Nur sichtbar, wenn dieses Feld in den Einstellungen aktiviert ist. Der bevorzugte Name, mit dem die Person angesprochen wird. |
| Zweiter Vorname | Textfeld | Nein | Nur sichtbar, wenn dieses Feld in den Einstellungen aktiviert ist. |
| Geburtsname | Textfeld | Nein | Nur sichtbar, wenn dieses Feld in den Einstellungen aktiviert ist. Der Nachname vor einer Namensänderung (z. B. durch Heirat). |
| Geburtstag | Datumsfeld | Nein | Geburtsdatum der Person. Es kann kein Datum in der Zukunft gewählt werden. |
| Sterbedatum | Datumsfeld | Nein | Nur sichtbar, wenn dieses Feld in den Einstellungen aktiviert ist. Es kann kein Datum in der Zukunft gewählt werden. |
| Sterbedatum ist geschätzt | Checkbox | Nein | Nur sichtbar, wenn das Sterbedatum-Feld in den Einstellungen aktiviert ist. Kennzeichnet das Sterbedatum als ungefähre Angabe. |
| Geschlecht | Auswahl | Nein | Optionen: **männlich**, **weiblich**, **divers**. |

### Felder für Typ „Organisation"

Diese Felder sind nur sichtbar, wenn du als Kontakttyp **Organisation** ausgewählt hast:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Nein | Name der Organisation (z. B. Firmenname, Vereinsname). |

### Felder für Typ „Ehepaar"

Wenn du den Kontakttyp **Ehepaar** wählst, werden beim Erstellen die Daten für beide Personen abgefragt. Nach dem Erstellen wird ein gemeinsamer Kontakt angelegt sowie zwei einzelne Personen-Kontakte, die automatisch miteinander verknüpft werden.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Vorname (Person 1) | Textfeld | Ja | Vorname der ersten Person. Nur beim Erstellen sichtbar. Maximal 255 Zeichen. |
| Nachname (Person 1) | Textfeld | Ja | Nachname der ersten Person. Nur beim Erstellen sichtbar. Maximal 255 Zeichen. |
| Vorname (Person 2) | Textfeld | Ja | Vorname der zweiten Person. Nur beim Erstellen sichtbar. Maximal 255 Zeichen. |
| Nachname (Person 2) | Textfeld | Ja | Nachname der zweiten Person. Nur beim Erstellen sichtbar. Maximal 255 Zeichen. |
| Name | Textfeld | — | Wird beim Bearbeiten eines Ehepaars angezeigt, kann aber nicht bearbeitet werden. Der Name wird automatisch aus den Namen beider Personen zusammengesetzt. |

### Weitere allgemeine Felder

Die folgenden Felder im Reiter „Allgemein" des Kontaktformulars sind je nach Kontakttyp sichtbar:

| Feld | Typ | Sichtbar bei | Pflicht | Beschreibung |
|------|-----|-------------|---------|--------------|
| Sprache | Auswahl (durchsuchbar) | Person, Ehepaar | Nein | Nur sichtbar, wenn dieses Feld in den Einstellungen aktiviert ist. Nicht sichtbar bei Typ **Organisation**. Du kannst aus einer Liste aller verfügbaren Sprachen die bevorzugte Sprache des Kontakts auswählen. Das Feld ist durchsuchbar – tippe einfach los, um die Liste zu filtern. |
| Spendenbescheinigungen | Auswahl | Alle Typen | Nein | Zustellmethode für Spendenbescheinigungen. Optionen: **E-Mail**, **Post**, **Per Hand**, **keine versenden**. Dieses Feld dient aktuell nur zur Information und Dokumentation. Die automatische Versendung ist in Entwicklung. |
| Segmente | Mehrfachauswahl | Alle Typen | Nein | Zuordnung zu einem oder mehreren Segmenten. Ein Segment ist eine Gruppe, der du beliebig viele Kontakte zuordnen kannst. Segmente kannst du in den Einstellungen unter **Kontakte → Segmente** anlegen und verwalten. Wenn noch keine Segmente existieren, ist das Feld deaktiviert mit dem Hinweis, dass zuerst Segmente in den Einstellungen angelegt werden müssen. Dynamische Segmente (die automatisch über Regeln befüllt werden) werden hier nicht angezeigt – nur manuell zuweisbare Segmente. |
| E-Mail-Adresse | Textfeld | Alle Typen | Nein | E-Mail-Adresse des Kontakts. Muss ein gültiges E-Mail-Format haben (z. B. name@beispiel.de). |
| Webseite | Textfeld | Alle Typen | Nein | Webseite des Kontakts. Muss eine gültige URL sein (z. B. https://beispiel.de). |
| Anrede | Textfeld | Alle Typen | Nein | Freitext-Feld für die persönliche Anrede, die z. B. bei Serienbriefen oder E-Mails verwendet wird (z. B. „Lieber Max"). |
| Umsatzsteuer-ID | Textfeld | Person, Organisation | Nein | Nur sichtbar, wenn dieses Feld in den Einstellungen aktiviert ist. Nicht verfügbar bei Typ **Ehepaar**. |

### Kommunikationskanäle

Im Kontaktformular kannst du unter „Kommunikationskanäle" mehrere Wege erfassen, über die der Kontakt erreichbar ist. Jeder Eintrag wird als eigene Zeile gespeichert. Du kannst beliebig viele Einträge über die Schaltfläche „Hinzufügen" ergänzen und bestehende Einträge über das Löschen-Symbol entfernen.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Typ | Auswahl | Ja | Art des Kommunikationskanals, z. B. **Telefon geschäftlich**, **Telefon**, **Mobil**, **Email privat**, **Email privat 2**, **Email geschäftlich**, **Postalisch**. |
| Daten | Textfeld | Ja | Die eigentliche Kontaktinformation, z. B. Telefonnummer oder E-Mail-Adresse. Wird je nach gewähltem Typ validiert (z. B. Telefonnummern-Format bei Telefon/Mobil). Dieses Feld ist nur sichtbar, wenn der gewählte Typ Daten erfordert. |
| Gesperrt | Ja/Nein-Schalter | Nein | Kennzeichnet den Kanal als gesperrt. Ein gesperrter Kanal signalisiert, dass der Kontakt über diesen Weg nicht kontaktiert werden möchte. Nur sichtbar, wenn ein Typ ausgewählt wurde. |

Die einzelnen Einträge kannst du ein- und ausklappen, um die Übersichtlichkeit zu verbessern.

### Beziehungen

Im Kontaktformular kannst du unter „Beziehungen" Verknüpfungen zu anderen Kontakten herstellen. Dieser Bereich ist nur beim **Bearbeiten** eines Kontakts sichtbar (nicht beim Erstellen) und nur, wenn der Kontakttyp Beziehungen unterstützt.

Für jede Beziehung wählst du:

- **Beziehungstyp**: z. B. **Elternteil von**, **Kind von**, **Ehepartner von**, **Mitglied von**, **Kontaktperson für**, **Angestellter von** oder benutzerdefinierte Beziehungstypen, die in den Einstellungen angelegt wurden.
- **Verknüpfter Kontakt**: Der Kontakt, zu dem die Beziehung besteht.

Die verfügbaren Beziehungstypen und möglichen Gegenkontakte hängen vom Kontakttyp des aktuellen Kontakts ab.

## Formularfelder im Reiter „Mitgliedschaft"

Der Reiter „Mitgliedschaft" im Kontaktformular ist nur sichtbar, wenn folgende Bedingungen erfüllt sind:

- Das Tool **Mitglieder** muss aktiviert sein.
- Der Kontakt ist **kein** Ehepaar (bei Ehepaaren wird die Mitgliedschaft über die einzelnen Personen-Kontakte verwaltet).
- Du befindest dich im **Bearbeitungsmodus** (beim Erstellen eines neuen Kontakts ist der Reiter nicht verfügbar).

### Mitgliedsdaten

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Mitgliedsnummer | Textfeld | Nein | Eine individuelle Mitgliedsnummer für den Kontakt. Diese wird nicht automatisch vergeben und kann frei gewählt werden. Dieses Feld ist nur sichtbar, wenn das Tool **Mitglieder** aktiviert ist. |

### Mitgliedszeiten

Im Reiter „Mitgliedschaft" des Kontaktformulars kannst du mehrere Mitgliedschaftszeiträume erfassen, um die Mitgliedschaftshistorie eines Kontakts lückenlos zu dokumentieren. Jeder Zeitraum besteht aus folgenden Feldern:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Von | Datumsfeld | Ja | Startdatum der Mitgliedschaft. |
| Startdatum ist geschätzt | Checkbox | Nein | Kennzeichnet das Startdatum als ungefähre Angabe, wenn das genaue Datum nicht bekannt ist. |
| bis | Datumsfeld | Nein | Enddatum der Mitgliedschaft. Muss nach dem Startdatum liegen. Wenn du dieses Feld leer lässt, gilt die Mitgliedschaft als laufend (aktiv). |
| Enddatum ist geschätzt | Checkbox | Nein | Nur sichtbar, wenn ein Enddatum eingetragen ist. Kennzeichnet das Enddatum als ungefähre Angabe. |
| Typ | Auswahl | Nein | Art der Mitgliedschaft: **Aktiv**, **Passiv**, **Ehrenmitglied**, **Fördernd**, **Jugend**. |

Mitgliedschaftszeiträume dürfen sich nicht überlappen. Wenn sich zwei Zeiträume überschneiden, zeigt das System eine entsprechende Fehlermeldung an (siehe Abschnitt Validierung).

## Validierung und Fehlermeldungen

Beim Speichern des Kontaktformulars prüft das System verschiedene Eingaben. Falls eine Validierung fehlschlägt, wird das betroffene Feld rot hervorgehoben und eine Fehlermeldung angezeigt. Der Kontakt wird in diesem Fall nicht gespeichert, bis alle Fehler behoben sind.

| Fehlermeldung | Ursache | Lösung |
|---------------|---------|--------|
| „Ungültiges Telefonnummer-Format" | Die eingegebene Telefonnummer in einem Kommunikationskanal vom Typ Telefon oder Mobil entspricht nicht dem erwarteten Format. | Prüfe die Telefonnummer auf Tippfehler und verwende ein gängiges Format (z. B. +49 123 4567890 oder 0123 4567890). |
| „Überlappende Mitgliedszeiten sind nicht möglich." | Zwei oder mehr Mitgliedschaftszeiträume im Reiter „Mitgliedschaft" überschneiden sich zeitlich. | Passe die Datumsbereiche so an, dass sich keine Zeiträume überlappen. Ein Zeitraum muss enden, bevor der nächste beginnt. |

## Optionale Felder und Einstellungen

Einige Felder im Kontaktformular sind standardmäßig ausgeblendet und müssen zuerst in den Einstellungen aktiviert werden, bevor sie im Formular erscheinen. Diese optionalen Felder sind:

- **Rufname** (nur bei Typ Person)
- **Zweiter Vorname** (nur bei Typ Person)
- **Geburtsname** (nur bei Typ Person)
- **Sterbedatum** und **Sterbedatum ist geschätzt** (nur bei Typ Person)
- **Sprache** (bei Typ Person und Ehepaar)
- **Umsatzsteuer-ID** (bei Typ Person und Organisation)

Darüber hinaus können über die Einstellungen **benutzerdefinierte Felder** (eigene Felder) angelegt werden, die dann ebenfalls im Kontaktformular erscheinen. Diese eigenen Felder werden von deiner Organisation individuell konfiguriert.

---

## page: PersonalPage

**Entity:** PersonalPage  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/PersonalPage.php`  
**Updated:** 2026-02-14 17:52:57  

# Persönliche Seite

## Übersicht

Auf der Seite „Persönliche Seite" kannst du für einen einzelnen Kontakt eine persönliche Seite verwalten. Die persönliche Seite ist über eine individuelle URL erreichbar und kann pro Kontakt aktiviert oder deaktiviert werden. Außerdem lässt sich die URL kopieren oder bei Bedarf zurücksetzen.

## Navigation

Die Seite „Persönliche Seite" befindet sich innerhalb eines geöffneten Kontakts als Unterseite. In der Navigation des Kontakts erscheint der Menüpunkt **Persönliche Seite**. Dieser Menüpunkt ist nur sichtbar, wenn die Einstellung „Persönliche Seiten" in deiner Organisation aktiviert ist und du über die erforderlichen Berechtigungen verfügst.

## Formularfelder

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Aktiviert | Umschalter (Toggle) | Nein | Aktiviert oder deaktiviert die persönliche Seite für diesen Kontakt. Änderungen werden sofort übernommen. Dieses Feld ist nur sichtbar, wenn in den Einstellungen festgelegt wurde, dass die persönliche Seite pro Kontakt einzeln aktiviert werden muss. |

## Aktionen

### URL kopieren

Mit der Aktion **URL kopieren** wird die individuelle URL der persönlichen Seite dieses Kontakts in die Zwischenablage kopiert.

### URL zurücksetzen

Mit der Aktion **URL zurücksetzen...** wird die bisherige URL der persönlichen Seite ungültig gemacht und durch eine neue ersetzt. Vor dem Zurücksetzen erscheint eine Sicherheitsabfrage mit der Überschrift *„URL zurücksetzen"* und dem Hinweis: *„Willst du wirklich die URL zurücksetzen? Der Zugriff auf die alte Seite ist anschließend nicht mehr möglich."*

## Berechtigungen

Die Seite „Persönliche Seite" ist nur unter folgenden Voraussetzungen zugänglich:

- Die Einstellung **Persönliche Seiten** muss in der Organisation aktiviert sein.
- Du musst **Organisations-Admin** sein.

Ohne diese Voraussetzungen wird der Menüpunkt „Persönliche Seite" in der Kontakt-Navigation nicht angezeigt.

## Beziehungen

- Die Seite „Persönliche Seite" ist eine Unterseite der **Kontakte**-Verwaltung und wird im Kontext eines einzelnen Kontakts angezeigt.
- Die Sichtbarkeit und das Verhalten der persönlichen Seite hängen von den **Einstellungen** der Organisation ab – insbesondere davon, ob die Einstellung „Persönliche Seiten" aktiviert ist und ob persönliche Seiten pro Kontakt einzeln aktiviert werden müssen.

## Häufige Fragen und Hinweise

- **Was passiert, wenn ich die URL zurücksetze?** Der Kontakt erhält eine neue, individuelle URL für seine persönliche Seite. Die bisherige URL funktioniert ab sofort nicht mehr.
- **Kann ich die alte URL nach dem Zurücksetzen wiederherstellen?** Nein, das Zurücksetzen ist endgültig. Die alte URL kann nicht wiederhergestellt werden.

---

## page: Overview

**Entity:** Overview  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/Overview.php`  
**Updated:** 2026-02-14 17:51:56  

# Übersicht

## Übersicht

Die Übersichtsseite zeigt alle wichtigen Informationen eines einzelnen Kontakts auf einen Blick an. Hier kannst du die gespeicherten Daten eines Kontakts einsehen, ohne direkt in den Bearbeitungsmodus wechseln zu müssen. Die Seite dient als zentrale Anlaufstelle, um dir schnell einen Überblick über einen bestimmten Kontakt zu verschaffen.

Die Kontakt-Übersicht befindet sich im Kontakte-Bereich der Anwendung und wird aufgerufen, wenn du einen bestimmten Kontakt aus der Kontaktliste auswählst.

## Navigation zur Kontakt-Übersicht

Die Übersichtsseite eines Kontakts erreichst du wie folgt:

1. Klicke in der Seitenleiste auf **Kontakte**.
2. Wähle einen Kontakt aus der angezeigten Liste aus.
3. Du gelangst automatisch zur **Übersicht** des ausgewählten Kontakts.

Der Navigationspunkt trägt den Namen **Übersicht** und ist der erste Reiter in der Kontakt-Detailansicht.

## Angezeigte Informationen auf der Kontakt-Übersicht

Die Übersichtsseite zeigt die folgenden Kontaktdaten in einer strukturierten Detailansicht an. Nicht alle Felder sind bei jedem Kontakt sichtbar — Felder, für die keine Daten hinterlegt sind, können ausgeblendet sein oder leer angezeigt werden. Welche Felder angezeigt werden, hängt auch vom Kontakttyp ab (z. B. werden bei Ehepaaren zusätzliche Felder wie „Nachname Partner 1 & 2" angezeigt).

| Information | Beschreibung |
|---|---|
| Segmente | Zugeordnete Segmente des Kontakts (Newsletter-Listen werden hier nicht angezeigt, sondern separat unter „Newsletter-Listen") |
| Avatar | Profilbild des Kontakts. Wenn kein Bild hinterlegt ist, wird ein Platzhalter angezeigt. |
| Kontaktnummer | Eindeutige, automatisch vergebene Nummer des Kontakts |
| Mitgliedsnummer | Mitgliedsnummer, falls dem Kontakt eine zugewiesen wurde |
| Mitglieds-Status | Aktueller Status der Mitgliedschaft |
| Ehepaar | Informationen zur Paar-Verbindung. Dieses Feld wird nur bei Kontakten vom Typ „Ehepaar" angezeigt. |
| Typ | Art des Kontakts |
| Titel | Titel des Kontakts |
| Name | Name des Kontakts |
| Vorname | Vorname des Kontakts |
| Nachname | Nachname des Kontakts |
| Rufname | Rufname, falls abweichend vom Vornamen |
| Zweiter Vorname | Zweiter Vorname, falls vorhanden |
| Geburtsname | Geburtsname, falls abweichend vom aktuellen Nachnamen |
| Nachname (Partner 1 & 2) | Nachnamen der einzelnen Partner bei Ehepaar-Kontakten |
| Anrede | Anrede des Kontakts |
| Geburtstag | Geburtsdatum des Kontakts |
| Sterbedatum | Sterbedatum, falls der Kontakt verstorben ist |
| Geschlecht | Geschlecht des Kontakts |
| Sprache | Bevorzugte Sprache für die Kommunikation |
| Newsletter-Listen | Newsletter-Listen, die der Kontakt abonniert hat |
| Email-Adresse | Hinterlegte E-Mail-Adresse des Kontakts |
| Webseite | Webseite des Kontakts, falls vorhanden |
| Kommunikationskanäle | Verfügbare Kommunikationskanäle |
| Spendenbescheinigungen | Zustellmethode für Spendenbescheinigungen |
| Beziehungen | Verknüpfungen zu anderen Kontakten |
| Adresse | Anschrift des Kontakts |
| Anmerkungen | Hinterlegte Anmerkungen und Notizen zum Kontakt |
| Umsatzsteuer-ID | Umsatzsteuer-Identifikationsnummer, falls vorhanden |
| Erstellt am | Datum, an dem der Kontakt im System angelegt wurde |
| Eigene Felder | Individuell definierte Zusatzfelder, die von deiner Organisation konfiguriert wurden |

## Aktionen auf der Kontakt-Übersicht

Auf der Übersichtsseite stehen dir folgende Aktionen zur Verfügung:

| Aktion | Beschreibung |
|---|---|
| **Bearbeiten** | Öffnet den Kontakt im Bearbeitungsmodus, sodass du die angezeigten Daten ändern kannst. Diese Aktion ist nur sichtbar, wenn du die entsprechende Berechtigung besitzt (siehe Abschnitt „Berechtigungen"). |

## Berechtigungen für die Kontakt-Übersicht

Der Zugriff auf die Kontakt-Übersicht und die verfügbaren Aktionen hängen von deinen Berechtigungen ab:

- **Übersichtsseite aufrufen:** Das Tool **Kontakte** muss für deine Organisation aktiviert sein.
- **Aktion „Bearbeiten":** Diese Aktion ist nur sichtbar, wenn du die Berechtigung **write contacts** besitzt.

Wenn du eine Aktion nicht siehst oder die Übersichtsseite nicht aufrufen kannst, wende dich an eine Person in deiner Organisation, die über entsprechende Berechtigungen für das Tool **Kontakte** verfügt.

## Verwandte Bereiche der Kontakt-Detailansicht

Die Übersichtsseite ist Teil der Kontakt-Detailansicht. Von dort aus kannst du über weitere Reiter auf zusätzliche Bereiche zugreifen, die weitere Informationen und Funktionen zum Kontakt bieten.

Die Verfügbarkeit dieser Bereiche kann davon abhängen, welche Tools für deine Organisation aktiviert sind und welche Berechtigungen du besitzt.

---

## page: Notes

**Entity:** Notes  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/Notes.php`  
**Updated:** 2026-02-14 17:50:18  

# Anmerkungen

## Übersicht

Auf der Seite „Anmerkungen" kannst du Notizen zu einem Kontakt erfassen und verwalten. Jede Anmerkung kann mit einem Datum, einer Überschrift und einem Freitext versehen werden. Optional kannst du beim Erstellen einer Anmerkung eine Wiedervorlage mit Datum und Zuständigkeiten anlegen.

## Anmerkungen in der Listenansicht

Die Anmerkungen eines Kontakts werden in einer Tabelle angezeigt.

| Spalte | Sortierbar | Durchsuchbar |
|---|---|---|
| Datum | Ja | Nein |
| Benutzer | Ja | Ja |
| Überschrift | Ja | Ja |
| Anmerkungen | Ja | Ja |

Die Standardsortierung ist nach Datum absteigend (neueste Anmerkungen zuerst).

## Anmerkung erstellen

Über die Schaltfläche in der Kopfzeile der Tabelle kannst du eine neue Anmerkung erstellen. Diese Schaltfläche ist nur sichtbar, wenn du die Berechtigung „write contacts" besitzt.

### Formularfelder der Anmerkung

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Datum | Datum & Uhrzeit | Ja | Datum und Uhrzeit der Anmerkung. Wird standardmäßig auf den aktuellen Zeitpunkt gesetzt. Sekunden werden nicht erfasst. |
| Überschrift | Textfeld | Bedingt | Überschrift der Anmerkung. Pflichtfeld, wenn kein Anmerkungstext eingegeben wird. |
| Anmerkungen | Rich-Text-Editor | Bedingt | Freitext der Anmerkung mit Formatierungsmöglichkeiten. Pflichtfeld, wenn keine Überschrift eingegeben wird. |

Es muss mindestens eines der beiden Felder „Überschrift" oder „Anmerkungen" ausgefüllt sein.

### Bereich „Wiedervorlage"

Der Bereich „Wiedervorlage" ist nur beim Erstellen einer neuen Anmerkung sichtbar (nicht beim Bearbeiten). Zusätzlich muss das Tool „Aufgaben" aktiviert sein, damit dieser Bereich angezeigt wird.

Wenn du die Wiedervorlage aktivierst und die Anmerkung speicherst, wird automatisch eine Aufgabe vom Typ „Kontakt-Wiedervorlage" erstellt. Diese Aufgabe wird den ausgewählten Benutzern und/oder Benutzergruppen zugewiesen.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Wiedervorlage aktivieren | Schalter (An/Aus) | Nein | Aktiviert die Wiedervorlage-Funktion. Alle folgenden Felder werden erst sichtbar, wenn du diesen Schalter aktivierst. |
| Datum | Datum & Uhrzeit | Nein | Datum der Wiedervorlage. Wird standardmäßig auf eine Woche in der Zukunft gesetzt. Sekunden werden nicht erfasst. |
| Benutzer | Benutzer-Auswahl (Mehrfachauswahl) | Bedingt | Benutzer, die für die Wiedervorlage zuständig sind. Pflichtfeld, wenn keine Benutzergruppe ausgewählt wird. |
| Benutzergruppe | Benutzergruppen-Auswahl (Mehrfachauswahl) | Bedingt | Benutzergruppen, die für die Wiedervorlage zuständig sind. Pflichtfeld, wenn kein Benutzer ausgewählt wird. |

## Berechtigungen

| Aktion | Erforderliche Berechtigung |
|---|---|
| Anmerkung erstellen | Berechtigung „write contacts" |

Die Schaltfläche zum Erstellen einer neuen Anmerkung wird nur angezeigt, wenn du über die entsprechende Berechtigung verfügst.

## Validierung & Fehlermeldungen

Beim Erstellen einer Anmerkung können folgende Validierungsfehler auftreten:

| Fehler | Ursache | Lösung |
|---|---|---|
| *„Überschrift oder Anmerkungen müssen ausgefüllt werden."* | Beide Felder „Überschrift" und „Anmerkungen" sind leer. | Fülle mindestens eines der beiden Felder aus – entweder eine Überschrift oder einen Anmerkungstext. |
| Benutzer oder Benutzergruppe erforderlich | Die Wiedervorlage ist aktiviert, aber weder ein Benutzer noch eine Benutzergruppe wurde ausgewählt. | Wähle mindestens einen Benutzer oder eine Benutzergruppe für die Wiedervorlage aus. |

## Beziehungen

- **Kontakt:** Jede Anmerkung gehört zu einem bestimmten Kontakt.
- **Benutzer:** Der Benutzer, der die Anmerkung erstellt hat, wird in der Tabelle in der Spalte „Benutzer" angezeigt.
- **Aufgaben (Wiedervorlage):** Beim Erstellen einer Anmerkung kann optional eine Wiedervorlage-Aufgabe erstellt werden. Voraussetzung dafür ist, dass das Tool „Aufgaben" aktiviert ist.

---

## page: Newsletters

**Entity:** Newsletters  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/Newsletters.php`  
**Updated:** 2026-02-14 17:48:58  

# Newsletter-Listen (Kontaktdetail)

## Übersicht

Auf der Seite **Newsletter-Listen** siehst du alle Newsletter-Listen, bei denen ein bestimmter Kontakt angemeldet ist oder war. Du kannst den Anmeldestatus einsehen, Kontakte von Newsletter-Listen abmelden oder ausstehende Anmeldungen manuell bestätigen.

Diese Seite ist eine Unterseite innerhalb der Kontaktdetailansicht und zeigt die Newsletter-Zugehörigkeiten eines einzelnen Kontakts. Wenn der Kontakt bei keiner Newsletter-Liste angemeldet ist oder war, wird eine leere Tabelle angezeigt.

## Navigation

Die Seite **Newsletter-Listen** befindet sich als Unterseite innerhalb eines Kontakts. Der Navigationspunkt heißt **Newsletter-Listen**. Am Navigations-Badge wird die Anzahl der aktuell abonnierten Newsletter-Listen angezeigt – abgemeldete Listen werden dabei nicht mitgezählt.

## Tabellenansicht

Die Tabelle auf der Seite **Newsletter-Listen** zeigt alle Newsletter-Listen-Zugehörigkeiten des Kontakts – auch solche, von denen er sich bereits abgemeldet hat.

### Spalten

| Spalte | Beschreibung |
|---|---|
| **Name** | Name der Newsletter-Liste (durchsuchbar, sortierbar) |
| **Datum** | Zeitpunkt der Anmeldung (sortierbar) |
| **Bestätigt** | Zeitpunkt der Bestätigung (sortierbar). Bleibt leer, wenn die Anmeldung noch nicht bestätigt wurde. |
| **Abmeldezeit** | Zeitpunkt der Abmeldung (sortierbar). Bleibt leer, wenn der Kontakt noch angemeldet ist. |
| **Status** | Aktueller Status als farbiges Badge: **Angemeldet (unbestätigt)** (gelb), **Bestätigt** (grün) oder **Abgemeldet** (rot) |

### Standardsortierung

Die Tabelle der Newsletter-Listen ist standardmäßig nach dem Anmeldedatum absteigend sortiert (neueste Anmeldung zuerst).

### Filter

| Filter | Optionen | Beschreibung |
|---|---|---|
| **Status** | Angemeldet (unbestätigt) | Zeigt alle Einträge, bei denen keine Abmeldung vorliegt. |
| | Bestätigt | Zeigt nur bestätigte Einträge, bei denen keine Abmeldung vorliegt. |
| | Abgemeldet | Zeigt alle Einträge, bei denen eine Abmeldung erfolgt ist. |

## Aktionen

### Abmelden

Über die Aktion **Abmelden** kannst du einen Kontakt von einer Newsletter-Liste abmelden.

- **Sichtbar bei:** Einträgen, die bestätigt sind und bei denen noch keine Abmeldung vorliegt (Status „Bestätigt").
- **Ablauf:** Nach Klick auf „Abmelden" erscheint eine Bestätigungsabfrage mit dem Text: *„Sind Sie sicher, dass Sie diesen Kontakt von diesem Newsletter abmelden möchten?"* Bestätigst du die Abfrage, wird der Kontakt von der Newsletter-Liste abgemeldet.
- **Abbrechen:** Wenn du die Bestätigungsabfrage abbrichst, passiert nichts – der Kontakt bleibt angemeldet.

### Bestätigen

Über die Aktion **Bestätigen** kannst du eine ausstehende Anmeldung manuell bestätigen.

- **Sichtbar bei:** Einträgen, die weder bestätigt noch abgemeldet sind (Status „Angemeldet (unbestätigt)").
- **Ablauf:** Nach Klick auf „Bestätigen" öffnet sich ein Formular. Das Feld „Begründung" ist automatisch mit „Dokumentierte Einwilligung" vorausgefüllt. Nach dem Absenden wird die Anmeldung bestätigt.
- **Abbrechen:** Wenn du das Formular schließt, ohne abzusenden, bleibt der Status unverändert auf „Angemeldet (unbestätigt)".

## Berechtigungen

Die Seite **Newsletter-Listen** ist nur verfügbar, wenn das Tool **Spenden** für die Organisation aktiviert ist.

## Beziehungen

- In der **Kontaktliste** kannst du Kontakte per Bulk-Aktion zu Newsletter-Listen hinzufügen.

---

## page: ListContacts

**Entity:** ListContacts  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/ListContacts.php`  
**Updated:** 2026-02-14 17:47:33  

# Kontaktliste

## Übersicht
Die Kontaktliste zeigt alle Kontakte deiner Organisation in einer Tabellenansicht. Hier kannst du Kontakte durchsuchen, filtern, sortieren, exportieren und verwalten. Über die Aktionen kannst du neue Kontakte erstellen, aus Excel-Dateien importieren sowie Massenaktionen wie das Zuordnen zu Segmenten oder Newsletter-Listen durchführen.

## Voraussetzungen
Damit du die Kontaktliste sehen und nutzen kannst, müssen folgende Bedingungen erfüllt sein:

- Das Tool **Kontakte** muss für deine Organisation aktiviert sein.
- Du musst Zugriff auf alle Projekte haben.

Ist eine dieser Voraussetzungen nicht erfüllt, erscheint die Kontaktliste nicht in der Navigation.

## Tabellenansicht / Listenansicht

### Spalten der Kontaktliste
Die Tabelle der Kontaktliste zeigt standardmäßig nur einige Spalten an. Über die Spaltenauswahl (Spalten-Icon oberhalb der Tabelle) kannst du weitere Spalten ein- oder ausblenden.

| Spalte | Standardmäßig sichtbar | Beschreibung |
|---|---|---|
| Kontaktnummer | Nein | Eindeutige Nummer des Kontakts |
| Typ | Nein | Einzelperson, Organisation oder Ehepaar |
| Titel | Nein | Akademischer Titel (z.B. Dr., Prof.) |
| Name | Ja | Vollständiger Name des Kontakts (zusammengesetzt aus Vor- und Nachname) |
| Vorname | Nein | Vorname |
| Nachname | Nein | Nachname |
| Mitgliedsnummer | Nein | Nummer für Vereinsmitglieder |
| Rufname | Nein | Rufname des Kontakts |
| Zweiter Vorname | Nein | Zweiter Vorname |
| Geburtsname | Nein | Geburtsname |
| Anrede | Nein | Persönliche Anrede (z.B. „Lieber Max") |
| Segmente | Ja | Zugeordnete Segmente des Kontakts |
| Newsletter-Listen | Nein | Newsletter-Listen, die der Kontakt abonniert hat |
| Email-Adresse | Ja | Primäre Email-Adresse des Kontakts |
| Webseite | Nein | Website des Kontakts |
| Geburtstag | Nein | Geburtsdatum |
| Sterbedatum | Nein | Sterbedatum (wird nur angezeigt, wenn vorhanden) |
| Geschlecht | Nein | Geschlecht des Kontakts |
| Strasse | Ja (nur ohne aktiven Vorfilter) | Straße der Hauptadresse |
| Postleitzahl | Ja (nur ohne aktiven Vorfilter) | Postleitzahl der Hauptadresse |
| Ort | Ja (nur ohne aktiven Vorfilter) | Ort der Hauptadresse |
| Land | Nein | Land der Hauptadresse |
| Sprache | Nein | Bevorzugte Sprache des Kontakts |
| Kommunikationskanäle | Nein | Telefonnummern und andere Kommunikationskanäle |
| Postweg gesperrt | Nein | Zeigt an, ob der Postweg für diesen Kontakt gesperrt ist |
| Anmerkungen | Nein | Interne Anmerkungen zum Kontakt |
| Mitglieds-Status | Nur im Mitglieder-Tab | Status der Mitgliedschaft (z.B. Aktiv, Ausgetreten) |
| Mitglied seit | Nur im Mitglieder-Tab | Startdatum der aktuellen Mitgliedschaft |
| Mitglied bis | Nur im Mitglieder-Tab | Enddatum der aktuellen Mitgliedschaft |
| Spenden (Summe) | Nein | Gesamtbetrag aller Spenden dieses Kontakts |
| Umsatzsteuer-ID | Nein | Umsatzsteuer-Identifikationsnummer |
| Erstellt am | Nein | Datum, an dem der Kontakt angelegt wurde |

Die Kontaktliste ist standardmäßig alphabetisch nach Name sortiert. Du kannst die Sortierung durch Klick auf eine Spaltenüberschrift ändern.

### Vordefinierte Ansichten (Tabs) in der Kontaktliste
Wenn das Tool **Mitgliederverwaltung** aktiviert ist, erscheint in der Kontaktliste ein zusätzlicher Tab **Mitglieder**. Dieser Tab zeigt ausschließlich Kontakte mit einem Mitgliedschaftsstatus an und blendet automatisch die zusätzlichen Spalten „Mitglieds-Status", „Mitglied seit" und „Mitglied bis" ein. Die Anzahl der aktuell aktiven Mitglieder wird als Badge (Zahl) am Tab angezeigt, sodass du auf einen Blick siehst, wie viele aktive Mitglieder deine Organisation hat.

### Filter der Kontaktliste
Über das Filter-Symbol oberhalb der Tabelle kannst du die Kontaktliste nach verschiedenen Kriterien einschränken.

| Filter | Beschreibung |
|---|---|
| Mitglieds-Status | Filtert nach dem Mitgliedsstatus (z.B. Aktiv, Ausgetreten) |
| Spenden | Filtert nach Kontakten, die Spenden haben oder nicht haben |
| Einzelpersonen von Paaren ausblenden | Blendet die einzelnen Personen aus, die als Ehepaar miteinander verbunden sind – es wird dann nur der Ehepaar-Kontakt angezeigt |
| Segmente | Filtert nach Kontakten, die bestimmten Segmenten zugeordnet sind |
| Newsletter-Listen | Filtert nach Kontakten, die bestimmte Newsletter-Listen abonniert haben |
| Geschlecht | Filtert nach Geschlecht |
| Typ | Filtert nach Kontakttyp (Einzelperson, Organisation, Ehepaar) |
| Postweg gesperrt | Filtert nach Kontakten mit gesperrtem oder nicht gesperrtem Postweg |

### Seitenoptionen der Kontaktliste
Du kannst einstellen, wie viele Kontakte pro Seite angezeigt werden. Zur Auswahl stehen: 5, 10, 25, 50, 100 und 200 Einträge pro Seite.

## Aktionen der Kontaktliste

### Kopfzeilen-Aktionen

| Aktion | Beschreibung |
|---|---|
| **Erstellen** | Öffnet das Formular zum Anlegen eines neuen Kontakts. Diese Aktion ist nur sichtbar, wenn du die Berechtigung „write contacts" hast. |
| **Importieren** | Öffnet den Import-Dialog zum Hochladen einer Excel-Datei mit Kontaktdaten. Dort kannst du eine Vorlage herunterladen und verschiedene Import-Optionen einstellen. Siehe Abschnitt „Kontakt-Import" für Details. |
| **Dublettenmanagement** | Öffnet die Seite zur Erkennung und Bereinigung doppelter Kontakte. |
| **Direktbearbeitung** | Schaltet den Inline-Bearbeitungsmodus ein oder aus. Bei aktivierter Direktbearbeitung kannst du bestimmte Felder direkt in der Tabelle ändern, ohne den Kontakt einzeln öffnen zu müssen. Ein erneuter Klick deaktiviert den Modus wieder. Der Zustand bleibt für deine aktuelle Sitzung gespeichert. |

### Tabellen-Kopfzeilen-Aktionen

| Aktion | Beschreibung |
|---|---|
| **Export** | Exportiert Kontakte. |

### Zeilen-Aktionen

| Aktion | Beschreibung |
|---|---|
| **Anschauen** | Öffnet die Detailansicht des Kontakts mit allen Informationen. |
| **Bearbeiten** | Öffnet das Bearbeitungsformular, in dem du die Daten des Kontakts ändern kannst. |

### Massenaktionen (Bulk-Aktionen) der Kontaktliste
Durch Auswählen mehrerer Kontakte über die Checkboxen in der Kontaktliste stehen dir folgende Massenaktionen zur Verfügung:

| Aktion | Beschreibung |
|---|---|
| **Zu Segment hinzufügen** | Fügt alle ausgewählten Kontakte einem bestimmten Segment hinzu. Du wählst das gewünschte Segment in einem Dialog aus. |
| **Aus Segment entfernen** | Entfernt alle ausgewählten Kontakte aus einem bestimmten Segment. Du wählst das Segment in einem Dialog aus. |
| **Zu Newsletter-Liste hinzufügen** | Fügt alle ausgewählten Kontakte einer Newsletter-Liste hinzu. Du wählst die gewünschte Newsletter-Liste aus den vorhandenen Listen aus. |
| **Löschen** | Löscht alle ausgewählten Kontakte. |

## Kontakt-Import

Über die Aktion **Importieren** in der Kontaktliste kannst du Kontakte aus einer Excel-Datei importieren. Dies ist besonders nützlich, wenn du viele Kontakte auf einmal anlegen oder aus einem anderen System übernehmen möchtest.

### Ablauf des Imports

1. Klicke auf **Importieren** in der Kopfzeile der Kontaktliste.
2. Lade dir die Excel-Vorlage („NGO.Tools Import Vorlage.xlsx") herunter. Diese Vorlage enthält alle unterstützten Felder mit Beispieldaten und Anleitungen.
3. Fülle die Vorlage mit deinen Kontaktdaten aus. Du kannst nicht benötigte Spalten löschen – die Reihenfolge der Spalten spielt keine Rolle.
4. Lade die ausgefüllte Datei hoch.
5. Stelle die gewünschten Import-Optionen ein (siehe unten).
6. Starte den Import.

### Import-Optionen

| Option | Beschreibung |
|---|---|
| **Datei** | Die ausgefüllte Excel-Datei mit deinen Kontaktdaten zum Hochladen. |
| **Bestehende Kontakte erkennen** | Legt fest, anhand welcher Kriterien geprüft wird, ob ein Kontakt bereits existiert (z.B. anhand der Email-Adresse oder der Kontaktnummer). So werden Duplikate vermieden. |
| **Segment erstellen, wenn es noch nicht existiert** | Wenn aktiviert, werden in der Import-Datei angegebene Segmente automatisch neu erstellt, falls sie noch nicht vorhanden sind. |
| **Newsletter-Liste erstellen, wenn sie noch nicht existiert** | Wenn aktiviert, werden in der Import-Datei angegebene Newsletter-Listen automatisch neu erstellt, falls sie noch nicht vorhanden sind. |

### Unterstützte Import-Felder

Die folgende Tabelle zeigt alle Felder, die du beim Kontakt-Import verwenden kannst. Mindestens eines der Felder **Vorname**, **Nachname**, **Name** oder **Email** muss angegeben werden – alle anderen Felder sind optional.

| Feld | Beschreibung | Beispiel |
|---|---|---|
| Vorname | Vorname des Kontakts | Max |
| Nachname | Nachname des Kontakts | Mustermann |
| Name | Voller Name (Vor- und Nachname) | Max Mustermann |
| Email | Email-Adresse | max.mustermann@example.com |
| Kontaktnummer | Kontakt-/Kundennummer | 10042 |
| Titel | Akademischer Titel | Dr. |
| Anrede | Persönliche Anrede | Lieber Max |
| Geschlecht | Geschlecht: männlich, weiblich, divers (oder die Kurzformen m, w, d) | männlich |
| Geburtstag | Geburtsdatum | 15.03.1979 |
| Strasse | Straße der Hauptadresse | Gartenstr. 3 |
| Postleitzahl | PLZ der Hauptadresse | 70123 |
| Ort | Ort der Hauptadresse | Stuttgart |
| Land | Land der Hauptadresse | Deutschland |
| Telefon | Telefonnummer(n) | 0711/1234567 |
| Organisation | Name der zugehörigen Organisation | Fit für die Zukunft e.V. |
| Segmente | Zugeordnete Segmente (mehrere kommagetrennt) | VIP, Abonnenten |
| Newsletter-Listen | Abonnierte Newsletter-Listen (mehrere kommagetrennt) | Newsletter 1, Newsletter 2 |
| Sprache | Bevorzugte Sprache (ISO-Code oder ausgeschrieben) | de |
| Website | Website des Kontakts | https://www.example.org |
| Ist verstorben | Kontakt als verstorben markieren (Ankreuzfeld: ein „x" setzen) | x |
| Persönliche Seite aktiv | Persönliche Seite aktivieren (Ankreuzfeld: ein „x" setzen) | x |
| Mitgliedschaft Beginn | Beginn der Mitgliedschaft | 10.01.2012 |

Zusätzlich zu den Standardfeldern kannst du auch **benutzerdefinierte Felder** importieren. Verwende dazu als Spaltenname den exakten Namen des benutzerdefinierten Feldes, wie er in deiner Organisation eingerichtet ist.

### Import-Fehlermeldungen

Wenn beim Kontakt-Import Fehler auftreten, werden dir die betroffenen Zeilen mit einer Fehlerbeschreibung angezeigt. Häufige Fehler sind:

| Fehlertyp | Ursache | Lösung |
|---|---|---|
| **Unbekanntes Feld** | Ein Spaltenname in deiner Excel-Datei wurde nicht erkannt. | Prüfe, ob der Spaltenname exakt mit einem der unterstützten Felder (siehe Tabelle oben) oder einem benutzerdefinierten Feld übereinstimmt. |
| **Ungültiger Wert** | Ein Feldwert entspricht nicht dem erwarteten Format. | Prüfe das Format des Wertes. |

## Berechtigungen der Kontaktliste

Die folgende Übersicht zeigt, welche Berechtigungen für die einzelnen Funktionen der Kontaktliste erforderlich sind:

| Funktion | Erforderliche Berechtigung |
|---|---|
| Kontaktliste anzeigen | Das Tool **Kontakte** muss aktiviert sein und du brauchst Zugriff auf alle Projekte |
| Kontakt erstellen | Berechtigung „write contacts" |
| Tab „Mitglieder" anzeigen | Das Tool **Mitgliederverwaltung** muss aktiviert sein |

## Beziehungen der Kontaktliste

Die Kontaktliste ist der zentrale Einstiegspunkt für die Kontaktverwaltung. Von der Kontaktliste aus gelangst du zu folgenden Bereichen:

- **Kontakt-Detailansicht**: Zeigt alle Informationen zu einem einzelnen Kontakt.
- **Kontakt bearbeiten**: Formular zum Ändern der Kontaktdaten.
- **Dublettenmanagement**: Seite zur Erkennung und Zusammenführung doppelter Kontakte.

---

## page: LetterShipments

**Entity:** LetterShipments  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/LetterShipments.php`  
**Updated:** 2026-02-14 17:43:30  

# Briefsendungen

## Übersicht
Auf der Seite „Briefsendungen" kannst du alle Briefsendungen einsehen, die für einen bestimmten Kontakt erstellt wurden. Die Liste zeigt das Datum, den Dokumentnamen und den aktuellen Versandstatus jeder Briefsendung an. Einzelne Briefe kannst du als PDF-Vorschau anzeigen lassen. Diese Seite dient ausschließlich der Ansicht – du kannst hier keine neuen Briefsendungen erstellen.

## Navigation
Die Seite „Briefsendungen" ist eine Unterseite eines einzelnen Kontakts. Du erreichst sie über folgenden Weg: Seitenleiste → **Kontakte** → Kontakt auswählen → Reiter **„Briefsendungen"**. Der Reiter ist nur sichtbar, wenn du die entsprechenden Berechtigungen besitzt (siehe Abschnitt „Berechtigungen").

## Tabellenansicht

Die Tabelle auf der Seite „Briefsendungen" zeigt folgende Spalten:

| Spalte | Beschreibung |
|--------|-------------|
| Datum | Das Erstellungsdatum der Briefsendung (als Datumsformat ohne Uhrzeit) |
| Name | Der Name des zugehörigen Dokuments, das mit der Briefsendung verknüpft ist |
| Status | Der aktuelle Versandstatus der Briefsendung, dargestellt als farbiges Badge |

Die Tabelle ist standardmäßig nach Datum absteigend sortiert, sodass die neuesten Briefsendungen zuerst angezeigt werden.

## Aktionen

Auf der Seite „Briefsendungen" steht dir folgende Aktion zur Verfügung:

| Aktion | Beschreibung |
|--------|-------------|
| PDF-Vorschau | Über die Zeilenaktion bei jeder Briefsendung kannst du eine PDF-Vorschau des Briefs öffnen. |

Es gibt keine Möglichkeit, auf dieser Seite neue Briefsendungen zu erstellen. Briefsendungen werden an anderer Stelle im System erzeugt und hier nur zur Ansicht aufgelistet.

## Berechtigungen
Die Seite „Briefsendungen" ist ausschließlich für Superadmins zugänglich. Wenn du keine Superadmin-Rechte besitzt, wird der Reiter „Briefsendungen" in der Kontaktansicht nicht angezeigt und du kannst diese Seite nicht aufrufen.

## Beziehungen
- Jede Briefsendung gehört zu einem bestimmten **Kontakt** und wird als Unterseite der Kontaktdetailansicht angezeigt.
- Jede Briefsendung ist mit einem **Dokument** verknüpft, dessen Name in der Spalte „Name" der Tabelle erscheint.

---

## page: FinancialEvents

**Entity:** FinancialEvents  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/FinancialEvents.php`  
**Updated:** 2026-02-14 17:42:41  

# Finanzereignisse (im Kontakt)

## Übersicht

Auf der Unterseite **Finanzereignisse** eines Kontakts siehst du alle Finanzereignisse, die diesem Kontakt zugeordnet sind. Die Tabelle zeigt eine Übersicht der Zahlungen mit Datum, Beschreibung, Typ, Projekt und Betrag – inklusive einer Summenzeile am Ende.

Diese Unterseite ist Teil der Kontakt-Detailansicht im Bereich **Kontakte** und nur sichtbar, wenn das Tool **Buchhaltung** für deine Organisation aktiviert ist.

## Navigation

Um die Finanzereignisse eines Kontakts aufzurufen, öffne zunächst den gewünschten Kontakt im Bereich **Kontakte**. Wechsle dort zur Unterseite **Finanzereignisse**. Diese Unterseite erscheint nur, wenn das Tool **Buchhaltung** aktiviert ist.

## Tabellenansicht

Die Tabelle der Finanzereignisse zeigt folgende Spalten:

| Spalte | Beschreibung |
|---|---|
| **Datum** | Das Zahlungsdatum des Finanzereignisses. Die Spalte ist sortierbar. |
| **Beschreibung** | Beschreibung des Finanzereignisses. Durchsuchbar und sortierbar. Bei langen Texten wird die Beschreibung gekürzt angezeigt; der vollständige Text erscheint als Tooltip beim Überfahren mit der Maus. Die Spalte ist ein-/ausblendbar. |
| **Typ** | Der Typ des Finanzereignisses, dargestellt als farbiges Badge. Die Spalte ist ein-/ausblendbar. |
| **Projekt** | Das zugeordnete Projekt, dargestellt als Badge. Diese Spalte ist nur sichtbar, wenn das Tool **Projekte** aktiviert ist. Die Spalte ist ein-/ausblendbar. |
| **Betrag** | Der Gesamtbetrag in der Währung deiner Organisation, rechtsbündig dargestellt. Negative Beträge werden rot hervorgehoben. Am Ende der Tabelle wird die Summe aller angezeigten Beträge dargestellt. |

**Standardsortierung:** Die Finanzereignisse sind nach Zahlungsdatum sortiert, die neuesten Einträge erscheinen zuerst.

## Aktionen in der Tabelle

Durch Klick auf ein Finanzereignis in der Tabelle wirst du zur Detailansicht des jeweiligen Finanzereignisses im Bereich **Finanzen → Finanzereignisse** weitergeleitet.

## Berechtigungen

Damit die Unterseite **Finanzereignisse** in der Kontakt-Detailansicht angezeigt wird, muss das Tool **Buchhaltung** für deine Organisation aktiviert sein.

## Beziehungen

- Jeder Eintrag in der Tabelle der Finanzereignisse verlinkt auf das jeweilige **Finanzereignis** im Bereich **Finanzen → Finanzereignisse**.
- Falls das Tool **Projekte** aktiviert ist, wird die Projektzuordnung des Finanzereignisses als zusätzliche Spalte in der Tabelle angezeigt.
- Die Seite **Finanzereignisse** ist eine Unterseite der **Kontakt-Detailansicht** und zeigt ausschließlich Finanzereignisse, die diesem bestimmten Kontakt zugeordnet sind.

---

## page: EditContact

**Entity:** EditContact  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/EditContact.php`  
**Updated:** 2026-02-14 17:41:40  

# Kontakt bearbeiten

## Übersicht

Auf der Seite „Kontakt bearbeiten" kannst du einen bestehenden Kontakt anpassen. Alle Stammdaten wie Name, Segmente und Mitgliedschaft lassen sich hier ändern. Außerdem kannst du den Kontakt über diese Seite löschen, wobei bei Ehepaaren besondere Optionen zur Verfügung stehen.

## Navigation zur Seite „Kontakt bearbeiten"

Du erreichst die Bearbeitungsseite über die Kontaktliste. Öffne die Kontaktübersicht und wähle bei dem gewünschten Kontakt die Bearbeiten-Aktion aus. Du gelangst dann direkt auf die Seite „Kontakt bearbeiten".

## Formularfelder beim Kontakt bearbeiten

Das Formular auf der Seite „Kontakt bearbeiten" ist in Tabs unterteilt. Je nach Kontakttyp und aktivierten Tools sind unterschiedliche Felder und Tabs sichtbar.

### Tab „Allgemein"

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Avatar | Bild | Nein | Profilbild des Kontakts. Du kannst ein Bild hochladen oder ein vorhandenes entfernen. |
| Kontaktnummer | Text | Nein | Eindeutige Nummer des Kontakts zur internen Identifikation. |
| Typ | Auswahl | Ja | Art des Kontakts (z. B. Einzelperson, Ehepaar, Organisation). Der gewählte Typ bestimmt, welche weiteren Felder angezeigt werden. |
| Titel | Text | Nein | Akademischer Titel o. Ä. (z. B. „Dr.", „Prof."). |
| Name | Text | Bedingt | Name des Kontakts (wird bei Organisationen und Projekten angezeigt). Mindestens eines der Namensfelder muss ausgefüllt sein – siehe Abschnitt „Validierung & Fehlermeldungen". |
| Vorname | Text | Bedingt | Vorname der Person. Mindestens eines der Namensfelder muss ausgefüllt sein. |
| Nachname | Text | Bedingt | Nachname der Person. Mindestens eines der Namensfelder muss ausgefüllt sein. |
| Rufname | Text | Nein | Rufname, falls er vom Vornamen abweicht (z. B. Spitzname oder Kurzform). |
| Zweiter Vorname | Text | Nein | Zweiter Vorname der Person. |
| Geburtsname | Text | Nein | Geburtsname, falls er vom aktuellen Nachnamen abweicht. |
| Geburtstag | Datum | Nein | Geburtsdatum des Kontakts. |
| Sterbedatum | Datum | Nein | Sterbedatum des Kontakts. |
| Sterbedatum ist geschätzt | Checkbox | Nein | Markierung, ob das eingetragene Sterbedatum nur eine Schätzung ist. |
| Geschlecht | Auswahl | Nein | Geschlecht des Kontakts. |
| Vorname (Person 2) | Text | Nein | Vorname der zweiten Person. Dieses Feld ist nur sichtbar, wenn der Typ „Ehepaar" gewählt ist. |
| Nachname (Person 2) | Text | Nein | Nachname der zweiten Person. Dieses Feld ist nur sichtbar, wenn der Typ „Ehepaar" gewählt ist. |
| Sprache | Auswahl | Nein | Bevorzugte Sprache des Kontakts (z. B. für Korrespondenz). |
| Spendenbescheinigungzustellung | Auswahl | Nein | Art der Zustellung von Spendenbescheinigungen (z. B. per Post oder per E-Mail). |
| Segmente | Mehrfachauswahl | Nein | Zuordnung zu Segmenten (ohne Newsletter-Listen). Ein Segment ist eine Gruppe, zu der beliebig viele Kontakte gehören können. Weitere Segmente kannst du in den Einstellungen unter „Kontakte > Segmente" anlegen. |
| E-Mail-Adresse | Text | Nein | E-Mail-Adresse des Kontakts. |
| Webseite | Text | Nein | Website des Kontakts. |
| Kommunikationskanäle | Repeater | Nein | Telefonnummern und weitere Kontaktwege. Du kannst mehrere Einträge hinzufügen oder bestehende entfernen. |
| Beziehungen | Repeater | Nein | Verknüpfungen zu anderen Kontakten (z. B. Familienmitglieder, Geschäftspartner). Du kannst mehrere Beziehungen hinzufügen oder bestehende entfernen. |
| Anrede | Text | Nein | Individuelle Anrede für den Kontakt (z. B. für Serienbriefe). |
| Umsatzsteuer-ID | Text | Nein | USt-ID des Kontakts. |
| Eigene Felder | Variabel | Nein | Zusätzlich definierte benutzerdefinierte Felder. Diese Felder werden in den Einstellungen konfiguriert und erscheinen hier automatisch. |

### Tab „Mitgliedschaft"

Dieser Tab ist auf der Seite „Kontakt bearbeiten" nur sichtbar, wenn zwei Bedingungen erfüllt sind:
- Der Kontakt ist keine Ehepaar-Verbindung (also kein übergeordneter Ehepaar-Kontakt).
- Das Tool „Mitglieder" muss aktiviert sein.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Mitgliedsnummer | Text | Nein | Mitgliedsnummer des Kontakts. |
| Mitgliedszeiten | Repeater | Nein | Zeiträume der Mitgliedschaft mit Start- und Enddatum. Du kannst mehrere Zeiträume hinzufügen, um z. B. eine unterbrochene Mitgliedschaft abzubilden. |

## Aktionen beim Kontakt bearbeiten

### Kontakt speichern

Über den Speichern-Button werden deine Änderungen am Kontakt übernommen. Nach dem Speichern passiert Folgendes:
- Alle geänderten Stammdaten werden gespeichert.
- Es wird automatisch geprüft, ob alle Segment-Zuordnungen korrekt abonniert und bestätigt sind.

### Kontakt löschen

Über den Button „Löschen" in der Kopfzeile der Seite „Kontakt bearbeiten" kannst du den Kontakt löschen. Der Button ist deaktiviert, wenn der Kontakt nicht gelöscht werden kann – in diesem Fall wird ein Tooltip mit dem Grund angezeigt (z. B. „Dieser Kontakt kann nicht gelöscht werden.").

**Löschen eines Einzelkontakts:**
- Es erscheint ein Bestätigungsdialog, bevor der Kontakt endgültig gelöscht wird.
- Wenn der Kontakt eine E-Mail-Adresse hat, kannst du optional die Checkbox „E-Mail-Adresse auf Sperrliste setzen (DSGVO)" aktivieren. Die E-Mail-Adresse wird dann auf die Sperrliste gesetzt, damit der Kontakt nicht versehentlich erneut angelegt oder angeschrieben wird.
- Nach dem Bestätigen wird der Kontakt gelöscht und du wirst zurück zur Kontaktliste weitergeleitet.

**Löschen eines Ehepaars oder Partners:**
- Der Dialog trägt die Überschrift „Ehepaar löschen".
- Es wird erklärt, dass die Ehepaar-Verbindung zwischen den beiden Kontakten gelöscht wird.
- Es erscheint eine Auswahlliste der Partner. Du kannst einzelne Partner auswählen, um sie zusätzlich zur Ehepaar-Verbindung mit zu löschen. Partner, die nicht gelöscht werden können, sind ausgegraut und zeigen per Tooltip den Grund an.
- Optional kannst du auch hier die E-Mail-Adresse auf die Sperrliste setzen.
- Nach dem erfolgreichen Löschen erscheint die Meldung: „Ehepaar-Verbindung wurde gelöscht" mit Details, wie viele Partner-Kontakte ebenfalls gelöscht wurden.
- Bei einem Fehler erscheint die Meldung „Löschen fehlgeschlagen".

## Berechtigungen für die Seite „Kontakt bearbeiten"

- Zum Bearbeiten von Kontakten benötigst du die Berechtigung „write contacts".
- Ohne diese Berechtigung kannst du die Seite „Kontakt bearbeiten" nicht aufrufen.

## Validierung & Fehlermeldungen beim Kontakt bearbeiten

| Fehlermeldung | Ursache | Lösung |
|---------------|---------|--------|
| „Mindestens eines der Felder muss ausgefüllt sein" | Beim Speichern ist keines der relevanten Namensfelder ausgefüllt (je nach Kontakttyp sind das z. B. Name, Vorname oder Nachname). | Fülle mindestens eines der hervorgehobenen Namensfelder aus und speichere erneut. |

## Verknüpfte Bereiche und Beziehungen beim Kontakt bearbeiten

- **Segmente:** Kontakte können Segmenten zugeordnet werden. Segmente verwaltest du in den Einstellungen unter „Kontakte > Segmente".
- **Ehepaar-Verbindungen:** Ehepaare bestehen aus einem übergeordneten Ehepaar-Kontakt und den einzelnen Partner-Kontakten. Beim Löschen kannst du diese Verbindungen auflösen und die Partner optional mit löschen.
- **E-Mail-Sperrliste:** Beim Löschen eines Kontakts kannst du die E-Mail-Adresse auf die Sperrliste setzen (DSGVO-konforme Löschung), um zukünftige Kontaktaufnahme zu verhindern.

---

## page: Duplicates

**Entity:** Duplicates  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/ContactResource/Pages/Duplicates.php`  
**Updated:** 2026-02-14 17:39:22  

# Dublettenmanagement

## Übersicht

Das Dublettenmanagement ermöglicht es dir, doppelt vorhandene Kontakte in der Datenbank zu finden, zu vergleichen und zu bereinigen. Du kannst automatisch nach Dubletten suchen lassen, einen Hauptkontakt festlegen und die weiteren (doppelten) Kontakte löschen, ignorieren oder deren Segmentzugehörigkeiten auf den Hauptkontakt übertragen.

**Voraussetzungen:**
- Das Tool **Kontakte** muss aktiviert sein.

## Navigation

Die Funktion „Dublettenmanagement" befindet sich im Bereich **Kontakte**. Die Breadcrumb-Navigation zeigt „Kontakte" als übergeordneten Bereich an.

## Dubletten finden

Über die Schaltfläche **„Dubletten finden"** im oberen Bereich der Dublettenmanagement-Seite wird die Suche nach doppelten Kontakten gestartet. Es öffnet sich ein Dialog mit folgenden Einstellungen:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Felder | Checkbox-Liste | Ja (mind. 1) | Auswahl der Felder, anhand derer Dubletten erkannt werden sollen. Verfügbare Optionen: **Email-Adresse**, **Name**, **Vorname**, **Nachname**. Du kannst mehrere Felder gleichzeitig auswählen. |
| Exakte Suche | Schalter | Nein | Wenn aktiviert, werden nur Kontakte gefunden, die in den gewählten Feldern exakt übereinstimmen. Wenn deaktiviert, werden auch ähnlich geschriebene Einträge berücksichtigt (z. B. „Müller" und „Mueller"). |

**Wichtige Hinweise:**

- Falls bereits zuvor erkannte Dubletten vorhanden sind, erscheint eine Warnung: *„Achtung: Die zuvor erkannten Dubletten werden verworfen."* Die vorherigen Ergebnisse werden bei einer neuen Suche gelöscht. Stelle sicher, dass du alle gewünschten Bereinigungen abgeschlossen hast, bevor du eine neue Suche startest.
- Bei mehr als 300 Kontakten wird die Suche im Hintergrund ausgeführt. Du erhältst die Benachrichtigung: *„Wir suchen jetzt im Hintergrund nach Dubletten. Du bekommst eine Email, wenn wir fertig sind."* Du kannst in der Zwischenzeit normal weiterarbeiten.
- Bei 300 oder weniger Kontakten erfolgt die Suche sofort und die Ergebnisse werden direkt in der Tabelle angezeigt.

**Mögliche Fehler:**

| Fehlermeldung | Ursache | Lösung |
|---|---|---|
| Validierungsfehler bei „Felder" | Es wurde kein Feld ausgewählt. | Wähle mindestens ein Feld aus (z. B. „Email-Adresse" oder „Nachname"), bevor du die Suche startest. |

## Tabellenansicht der Dubletten

Die gefundenen Dubletten werden im Dublettenmanagement in einer Tabelle angezeigt. Jede Zeile repräsentiert eine Gruppe von Kontakten, die als mögliche Dubletten erkannt wurden.

| Spalte | Beschreibung |
|---|---|
| **Gemeinsamkeit** | Zeigt an, welche Felder bei den Kontakten übereinstimmen. Diese Spalte ist durchsuchbar. |
| **Hauptkontakt** | Dropdown-Auswahl, über die du festlegst, welcher Kontakt aus der Gruppe als Hauptkontakt gelten soll. Die Kontakte werden alphabetisch sortiert angezeigt. Du kannst die Auswahl jederzeit direkt in der Tabelle ändern. |
| *(Link-Icon)* | Über dieses Icon öffnest du die Detailansicht des gewählten Hauptkontakts direkt (Tooltip: „Hauptkontakt öffnen"). |
| **Weitere Kontakte** | Zeigt die übrigen Kontakte der Dubletten-Gruppe an, die nicht als Hauptkontakt ausgewählt sind. Diese Spalte ist durchsuchbar. |
| **Infos** | Zusätzliche Informationen oder Hinweise zur Dubletten-Gruppe. |

## Aktionen im Dublettenmanagement

### Massenaktionen (Bulk-Aktionen)

Du kannst über die Checkboxen in der Tabelle mehrere Dubletten-Einträge auswählen und dann eine der folgenden Massenaktionen ausführen:

#### Weitere Kontakte löschen (nur Hauptkontakt lassen)

Diese Aktion löscht alle sekundären Kontakte der ausgewählten Dubletten-Gruppen. Nur der als Hauptkontakt festgelegte Kontakt bleibt bestehen.

- **Vor der Ausführung:** Es erscheint ein Bestätigungsdialog. Prüfe sorgfältig, ob der richtige Hauptkontakt ausgewählt ist, da die gelöschten Kontakte nicht wiederhergestellt werden können.
- **Nach der Ausführung:** Die sekundären Kontakte sind unwiderruflich gelöscht.
- **Bei vielen ausgewählten Einträgen:** Die Aktion wird im Hintergrund ausgeführt. Du wirst benachrichtigt, sobald der Vorgang abgeschlossen ist.

#### Hauptkontakt zu Segment hinzufügen; andere entfernen

Diese Aktion ermöglicht es dir, Segmentzugehörigkeiten von den sekundären Kontakten auf den Hauptkontakt zu übertragen.

- **Ablauf:** Es öffnet sich ein Dialog, in dem du ein oder mehrere **Segmente** auswählen kannst. Es stehen nur statische Segmente zur Auswahl (keine dynamischen Segmente). Mindestens ein Segment muss ausgewählt werden.
- **Nach der Ausführung:** Die sekundären Kontakte werden aus den gewählten Segmenten entfernt. Der Hauptkontakt wird stattdessen in diese Segmente aufgenommen. Der Dubletten-Eintrag wird anschließend aus der Liste entfernt. Die Kontakte selbst werden dabei **nicht** gelöscht – es ändern sich nur die Segmentzugehörigkeiten.

| Fehlermeldung | Ursache | Lösung |
|---|---|---|
| Validierungsfehler bei Segmentauswahl | Es wurde kein Segment ausgewählt. | Wähle mindestens ein statisches Segment aus, bevor du die Aktion bestätigst. |

#### Ignorieren/Ausblenden

Diese Aktion entfernt die ausgewählten Dubletten-Einträge aus der Liste, ohne die Kontakte selbst zu verändern.

- **Vor der Ausführung:** Es erscheint ein Bestätigungsdialog.
- **Nach der Ausführung:** Die Dubletten-Einträge werden ausgeblendet und sind nicht mehr in der Tabelle sichtbar. Die Kontakte selbst bleiben unverändert erhalten. Bei einer erneuten Dublettensuche können diese Kontakte wieder als Dubletten erkannt werden.

## Beziehungen zu anderen Bereichen

- **Kontakte:** Das Dublettenmanagement arbeitet direkt mit der Kontaktverwaltung zusammen. Der Hauptkontakt und die weiteren Kontakte sind reguläre Kontakt-Datensätze. Über das Link-Icon in der Tabelle gelangst du direkt zur Detailansicht des jeweiligen Hauptkontakts.
- **Segmente:** Über die Massenaktion „Hauptkontakt zu Segment hinzufügen; andere entfernen" kannst du Segmentzugehörigkeiten zwischen Haupt- und sekundären Kontakten übertragen. Dabei stehen ausschließlich statische Segmente zur Auswahl. Dynamische Segmente werden nicht angezeigt, da deren Zugehörigkeit automatisch über Regeln gesteuert wird.

## Häufige Fragen zum Dublettenmanagement

**Was passiert, wenn ich den falschen Hauptkontakt ausgewählt habe?**
Solange du noch keine Aktion ausgeführt hast, kannst du den Hauptkontakt jederzeit über das Dropdown in der Tabelle ändern. Wurde bereits eine Lösch-Aktion durchgeführt, können gelöschte Kontakte nicht wiederhergestellt werden.

**Kann ich eine Dublettensuche abbrechen?**
Eine laufende Hintergrundsuche kann nicht abgebrochen werden. Du kannst aber jederzeit eine neue Suche starten – die Ergebnisse der vorherigen Suche werden dabei verworfen.

**Warum werden bestimmte Kontakte nicht als Dubletten erkannt?**
Das hängt von den gewählten Suchfeldern und der Einstellung „Exakte Suche" ab. Wenn du die exakte Suche aktiviert hast, müssen die Felder buchstabengenau übereinstimmen. Deaktiviere die exakte Suche, um auch ähnliche Einträge zu finden, oder wähle andere bzw. zusätzliche Felder aus.

---

## page: Donations

**Entity:** Donations  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/ContactResource/Pages/Donations.php`  
**Updated:** 2026-02-14 17:37:15  

# Spenden (Kontakt-Unterseite)

## Übersicht

Die Unterseite **Spenden** zeigt alle Spenden eines bestimmten Kontakts. Du kannst hier die Spendenhistorie einsehen, festlegen ob für einzelne Spenden eine Bescheinigung erstellt werden soll, und Einzelspendenbestätigungen erzeugen, anzeigen oder herunterladen.

Die Seite befindet sich innerhalb der Kontaktdetails und zeigt ausschließlich die Spenden des aktuell geöffneten Kontakts.

## Navigation

Die Unterseite **Spenden** erreichst du über den gleichnamigen Navigationsreiter innerhalb eines Kontakts.

**Voraussetzung:** Das Tool **Spenden** muss für deine Organisation aktiviert sein, damit der Reiter sichtbar ist.

## Tabellenansicht

Die Spenden-Tabelle auf der Kontakt-Unterseite zeigt alle Spenden des jeweiligen Kontakts mit folgenden Spalten:

### Spalten

| Spalte | Beschreibung |
|---|---|
| **Datum** | Das Datum der Spende. Diese Spalte ist sortierbar. |
| **Beschreibung** | Beschreibung des zugehörigen Finanzereignisses, durchsuchbar. Bei langen Texten wird der vollständige Text als Tooltip angezeigt, wenn du mit der Maus darüber fährst. Diese Spalte kann ein-/ausgeblendet werden. |
| **Projekt** | Name des zugeordneten Projekts, durchsuchbar und sortierbar. Ein Klick auf den Projektnamen öffnet die Spendenübersicht des jeweiligen Projekts. Diese Spalte ist nur sichtbar, wenn das Tool **Projekte** aktiviert ist. Die Spalte kann ein-/ausgeblendet werden. |
| **Bescheinigung** | Ein Schalter, mit dem du festlegst, ob für diese Spende eine Spendenbescheinigung erstellt werden soll. Der Schalter ist nur bedienbar, wenn du die Berechtigung **write donations** hast. Ohne diese Berechtigung wird der Schalter deaktiviert dargestellt. Diese Spalte kann ein-/ausgeblendet werden. |
| **Konto** | Name des verbundenen Bankkontos, über das die Spende eingegangen ist. Diese Spalte wird nur angezeigt, wenn deine Organisation mehr als ein Bankkonto hat. Standardmäßig ist die Spalte ausgeblendet, kann aber über die Spaltenauswahl eingeblendet werden. |
| **Betrag** | Der Spendenbetrag in der Währung der Organisation, rechtsbündig dargestellt. Am Fuß der Tabelle wird die Summe aller aktuell angezeigten Beträge dargestellt. |

### Sortierung

Die Spenden-Tabelle ist standardmäßig nach **Datum** absteigend sortiert (neueste Spenden zuerst).

### Gruppierung

Die Spendeneinträge können nach **Projekt** gruppiert werden. Die einzelnen Gruppen sind einklappbar.

### Filter

Die Spenden-Tabelle bietet folgende Filtermöglichkeiten:

| Filter | Beschreibung |
|---|---|
| **Projekt** | Filtert die Spenden nach einem oder mehreren Projekten. Eine Mehrfachauswahl ist möglich. |

### Zeilenklick

Ein Klick auf eine Spendenzeile öffnet die Detailansicht des zugehörigen Finanzereignisses.

## Aktionen

Für jede Spendenzeile in der Spenden-Tabelle stehen folgende Aktionen zur Verfügung:

| Aktion | Beschreibung |
|---|---|
| **Einzelspendenbestätigung erstellen** | Erzeugt eine Spendenbescheinigung für diese einzelne Spende. |
| **Spendenbescheinigung anzeigen** | Zeigt die bereits erstellte Spendenbescheinigung an. Diese Aktion ist nur sichtbar, wenn für die Spende bereits eine Bescheinigung erstellt wurde. |
| **Spendenbescheinigung herunterladen** | Lädt die bereits erstellte Spendenbescheinigung als Datei herunter. Diese Aktion ist nur sichtbar, wenn für die Spende bereits eine Bescheinigung erstellt wurde. |

## Berechtigungen

Für die Unterseite **Spenden** gelten folgende Berechtigungsregeln:

- Das Tool **Spenden** muss für deine Organisation aktiviert sein, damit die Unterseite im Kontakt sichtbar ist.
- Der Schalter **Bescheinigung** in der Tabelle kann nur von Benutzern mit der Berechtigung **write donations** umgeschaltet werden. Ohne diese Berechtigung wird der Schalter deaktiviert dargestellt.
- Die Spalte **Projekt** ist nur sichtbar, wenn zusätzlich das Tool **Projekte** aktiviert ist.

## Beziehungen

Die Unterseite **Spenden** steht in Verbindung mit mehreren anderen Bereichen der Plattform:

- **Finanzereignisse**: Jede Spende ist mit einem Finanzereignis verknüpft. Ein Klick auf eine Spendenzeile öffnet die Detailansicht des zugehörigen Finanzereignisses.
- **Projekte**: Spenden können einem Projekt zugeordnet sein. Der Projektname in der Spalte **Projekt** verlinkt zur Spendenübersicht des jeweiligen Projekts.
- **Spendenbescheinigungen**: Über die Zeilenaktionen kannst du Einzelspendenbestätigungen erstellen, anzeigen und herunterladen.
- **Bankkonten**: Die Spalte **Konto** zeigt das Bankkonto an, über das die Spende eingegangen ist. Diese Information ist besonders relevant, wenn deine Organisation mehrere Bankkonten nutzt.

---

## page: DonationReceipts

**Entity:** DonationReceipts  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/ContactResource/Pages/DonationReceipts.php`  
**Updated:** 2026-02-14 17:35:50  

# Spendenbescheinigungen (Kontakt-Unterseite)

## Übersicht

Auf der Unterseite **Spendenbescheinigungen** eines Kontakts werden alle Spendenbescheinigungen angezeigt, die für diesen Kontakt erstellt wurden. Du kannst die Bescheinigungen hier einsehen und herunterladen.

Wenn für den Kontakt noch keine Spendenbescheinigungen erstellt wurden, wird die Tabelle leer angezeigt.

## Navigation

Die Seite **Spendenbescheinigungen** ist eine Unterseite innerhalb der Kontaktdetailansicht. Du erreichst sie über den Reiter **Spendenbescheinigungen** in der Detailansicht eines einzelnen Kontakts.

## Tabellenansicht

Die Tabelle auf der Seite **Spendenbescheinigungen** zeigt alle für den Kontakt vorhandenen Spendenbescheinigungen mit folgenden Spalten:

| Spalte | Beschreibung |
|--------|-------------|
| Datum | Das Erstellungsdatum der Spendenbescheinigung |
| Typ | Die Art der Spendenbescheinigung |

Die Standardsortierung ist nach Datum absteigend, sodass die neueste Spendenbescheinigung immer oben steht. Die Spalte **Typ** ist zusätzlich sortierbar.

## Aktionen

Für jede Spendenbescheinigung in der Tabelle stehen folgende Aktionen zur Verfügung:

- **Spendenbescheinigung anzeigen** – Öffnet eine Vorschau der Spendenbescheinigung.
- **Spendenbescheinigung herunterladen** – Lädt die Spendenbescheinigung herunter.

## Berechtigungen

Damit die Unterseite **Spendenbescheinigungen** in der Kontaktdetailansicht sichtbar ist, muss das Tool **Spenden** für die Organisation aktiviert sein. Ist das Tool nicht aktiviert, wird der Reiter nicht angezeigt.

## Beziehungen

- Die Seite **Spendenbescheinigungen** gehört zur Kontaktverwaltung und ist eine Unterseite der Kontaktdetailansicht.
- Eng verknüpft ist die Unterseite **Spenden** des Kontakts, auf der die einzelnen Spenden des Kontakts aufgelistet werden. Die Spendenbescheinigungen beziehen sich auf diese Spenden.

---

## page: CreateContact

**Entity:** CreateContact  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/ContactResource/Pages/CreateContact.php`  
**Updated:** 2026-02-14 17:35:01  

# Neuen Kontakt anlegen

## Übersicht

Auf der Seite „Neuen Kontakt anlegen" erstellst du einen neuen Kontakt in deiner Kontaktverwaltung. Es stehen drei Kontakttypen zur Verfügung: **Einzelperson**, **Organisation** und **Ehepaar**. Je nach gewähltem Typ werden unterschiedliche Felder im Formular angezeigt. Beim Speichern prüft das System automatisch, ob bereits ein ähnlicher Kontakt existiert, und warnt dich vor möglichen Duplikaten.

**Voraussetzung:** Du benötigst die Berechtigung „Bearbeiten" für das Tool „Kontakte", um diese Seite aufrufen und einen neuen Kontakt anlegen zu können.

## Navigation

Du erreichst die Seite „Neuen Kontakt anlegen" über die Seitenleiste: **Kontakte → Neuer Kontakt** (bzw. über die Erstellen-Schaltfläche in der Kontaktliste).

## Kontakttypen

Beim Anlegen eines neuen Kontakts wählst du zuerst den Typ über die Auswahl-Buttons aus. Der gewählte Typ bestimmt, welche Felder im Formular angezeigt werden:

| Typ | Beschreibung | Besondere Felder |
|-----|-------------|------------------|
| **Einzelperson** (Standard) | Eine einzelne Person | Vorname, Nachname, Rufname, Zweiter Vorname, Geburtsname, Geburtstag, Sterbedatum, Geschlecht |
| **Organisation** | Ein Verein, Unternehmen oder eine andere Organisation | Name |
| **Ehepaar** | Zwei Personen als gemeinsamer Kontakt | Person 1 (Vorname/Nachname), Person 2 (Vorname/Nachname) |

Wenn du den Typ wechselst, werden die Namensfelder und der Titel zurückgesetzt, damit du die Daten passend zum neuen Typ eingeben kannst.

## Formularfelder

### Tab „Allgemein"

Dieser Tab enthält die grundlegenden Kontaktdaten. Welche Felder sichtbar sind, hängt vom gewählten Kontakttyp ab.

#### Grunddaten

| Feld | Typ | Pflicht | Sichtbar bei | Beschreibung |
|------|-----|---------|-------------|--------------|
| Avatar | Bild-Upload | Nein | Alle Typen | Profilbild des Kontakts (kreisförmig dargestellt). Du kannst ein Bild hochladen oder dieses Feld leer lassen. |
| Kontaktnummer | Textfeld | — | Alle Typen | Wird beim Erstellen automatisch vom System vergeben. Das Feld ist beim Anlegen deaktiviert und kann nicht manuell befüllt werden. |
| Typ | Auswahl-Buttons | Ja | Alle Typen | Wahl zwischen „Einzelperson", „Organisation" oder „Ehepaar". Standardmäßig ist „Einzelperson" vorausgewählt. |

#### Felder für Einzelpersonen

Diese Felder erscheinen nur, wenn der Typ „Einzelperson" gewählt ist:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Titel | Textfeld | Nein | Anrede-Titel, z. B. „Dr." oder „Prof.". |
| Vorname | Textfeld | Nein* | Vorname der Person. |
| Nachname | Textfeld | Nein* | Nachname der Person. |
| Rufname | Textfeld | Nein | Bevorzugter Rufname, falls abweichend vom Vornamen. |
| Zweiter Vorname | Textfeld | Nein | Ein zweiter Vorname, falls vorhanden. |
| Geburtsname | Textfeld | Nein | Früherer Name, z. B. Mädchenname vor der Heirat. |
| Geburtstag | Datumsfeld | Nein | Geburtsdatum der Person. |
| Sterbedatum | Datumsfeld | Nein | Sterbedatum der Person, falls verstorben. |
| Sterbedatum ist geschätzt | Checkbox | Nein | Aktiviere diese Option, wenn das Sterbedatum nicht exakt bekannt und nur geschätzt ist. |
| Geschlecht | Dropdown | Nein | Auswahl: „Männlich", „Weiblich" oder „Divers". |

*\* Mindestens eines der Felder „Vorname", „Nachname" oder „Email-Adresse" muss ausgefüllt sein.*

#### Felder für Organisationen

Diese Felder erscheinen nur, wenn der Typ „Organisation" gewählt ist:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Vollständiger Name der Organisation (z. B. Vereinsname, Firmenname). |

#### Felder für Ehepaare

Diese Felder erscheinen nur, wenn der Typ „Ehepaar" gewählt ist:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Titel | Textfeld | Nein | Gemeinsamer Anrede-Titel. |
| Person 1 – Vorname | Textfeld | Nein* | Vorname der ersten Person. |
| Person 1 – Nachname | Textfeld | Nein* | Nachname der ersten Person. |
| Person 2 – Vorname | Textfeld | Nein | Vorname der zweiten Person. |
| Person 2 – Nachname | Textfeld | Nein | Nachname der zweiten Person. |

*\* Mindestens eines der Felder „Vorname", „Nachname" oder „Email-Adresse" muss ausgefüllt sein.*

#### Weitere Felder (alle Typen)

Diese Felder sind unabhängig vom Kontakttyp sichtbar:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Sprache | Dropdown (durchsuchbar) | Nein | Bevorzugte Sprache des Kontakts. Du kannst durch Tippen im Dropdown suchen. |
| Spendenbescheinigungen | Dropdown | Nein | Legt fest, wie der Kontakt Spendenbescheinigungen erhalten soll: „Post", „Email" oder „Keine". Diese Einstellung dient aktuell zur Information – die automatische Versendung ist in Entwicklung. |
| Segmente | Mehrfachauswahl (durchsuchbar) | Nein | Ordne den Kontakt einem oder mehreren Segmenten zu. Segmente sind Gruppen, mit denen du deine Kontakte organisieren kannst (z. B. „Spender", „Vorstand", „Ehrenamtliche"). Weitere Segmente kannst du in den Einstellungen anlegen. |
| Email-Adresse | Textfeld | Nein* | E-Mail-Adresse des Kontakts. Muss ein gültiges E-Mail-Format haben. |
| Webseite | Textfeld (URL) | Nein | Website-Adresse des Kontakts (z. B. „https://beispiel.de"). |
| Kommunikationskanäle | Wiederholbare Einträge | Nein | Zusätzliche Kontaktmöglichkeiten. Für jeden Eintrag gibst du eine Bezeichnung (z. B. „Privat-Handy"), einen Wert (z. B. die Telefonnummer) und einen Typ an. Du kannst beliebig viele Einträge hinzufügen oder wieder entfernen. |
| Beziehungen | Wiederholbare Einträge | Nein | Verknüpfungen zu anderen bestehenden Kontakten. Für jede Beziehung wählst du einen anderen Kontakt aus und vergibst eine Bezeichnung (z. B. „Ehepartner", „Arbeitgeber", „Kind"). Du kannst beliebig viele Beziehungen hinzufügen oder wieder entfernen. |
| Anrede | Textbereich | Nein | Individuelle Anredeformel für den Kontakt, die z. B. in Briefen oder E-Mails verwendet werden kann. |
| Umsatzsteuer-ID | Textfeld | Nein | Umsatzsteuer-Identifikationsnummer des Kontakts. |
| Eigene Felder | Variabel | Nein | Falls in den Einstellungen eigene Felder für Kontakte definiert wurden, erscheinen diese zusätzlich im Formular. |

*\* Bei Einzelperson und Ehepaar muss mindestens eines der Felder „Vorname", „Nachname" oder „Email-Adresse" ausgefüllt sein.*

## Kontakt erstellen (Speichern)

Wenn du alle gewünschten Daten eingegeben hast, klickst du auf die Erstellen-Schaltfläche. Das System führt dann folgende Schritte aus:

1. **Validierung:** Das System prüft, ob alle Pflichtfelder korrekt ausgefüllt sind. Bei Fehlern werden Fehlermeldungen an den entsprechenden Feldern angezeigt, und der Kontakt wird nicht erstellt.

2. **Duplikatsprüfung:** Das System sucht nach bestehenden Kontakten mit ähnlichem Vornamen, Nachnamen, E-Mail-Adresse oder Namen (bei Organisationen).

   - **Kein Duplikat gefunden:** Der Kontakt wird direkt erstellt, und du wirst zur Kontaktliste weitergeleitet.
   - **Mögliches Duplikat gefunden:** Es erscheint ein Bestätigungsdialog mit der Überschrift „Mögliches Duplikat". Der Dialog zeigt den Namen des bestehenden Kontakts und enthält einen Link, über den du den bestehenden Kontakt in einem neuen Fenster öffnen und überprüfen kannst. Du hast dann zwei Möglichkeiten:
     - **„Neuen Kontakt anlegen":** Der Kontakt wird trotzdem erstellt, auch wenn ein ähnlicher bereits existiert.
     - **Abbrechen:** Du kehrst zum Formular zurück und kannst die eingegebenen Daten anpassen oder den Vorgang abbrechen.

3. **Segment-Zuordnung:** Beim Erstellen zugewiesene Segmente werden automatisch bestätigt und als abonniert markiert.

## Validierung und Fehlermeldungen beim Anlegen eines neuen Kontakts

Beim Erstellen eines neuen Kontakts werden folgende Regeln geprüft. Bei einem Verstoß erscheint eine Fehlermeldung am betroffenen Feld:

| Regel | Fehlermeldung | Lösung |
|-------|---------------|--------|
| Bei Typ „Organisation" muss das Feld „Name" ausgefüllt sein. | „Mindestens eines der Felder muss ausgefüllt sein" | Trage den Namen der Organisation ein. |
| Bei Typ „Einzelperson" oder „Ehepaar" muss mindestens eines der Felder „Vorname", „Nachname" oder „Email-Adresse" ausgefüllt sein. | „Mindestens eines der Felder muss ausgefüllt sein" | Trage mindestens einen Vornamen, Nachnamen oder eine E-Mail-Adresse ein. |
| Die E-Mail-Adresse muss ein gültiges Format haben. | Standard-E-Mail-Validierungsfehler | Gib eine gültige E-Mail-Adresse ein, z. B. „name@beispiel.de". |
| Die Webseite muss ein gültiges URL-Format haben. | Standard-URL-Validierungsfehler | Gib eine gültige URL ein, z. B. „https://beispiel.de". |

## Berechtigungen für das Anlegen neuer Kontakte

Zum Anlegen eines neuen Kontakts benötigst du die Berechtigung **„Bearbeiten"** für das Tool **„Kontakte"**. Ohne diese Berechtigung ist die Seite „Neuen Kontakt anlegen" nicht zugänglich und die Erstellen-Schaltfläche in der Kontaktliste wird nicht angezeigt.

## Zusammenhänge mit anderen Bereichen

- **Kontaktliste:** Nach dem erfolgreichen Erstellen erscheint der neue Kontakt in der Kontaktliste und kann dort gesucht, gefiltert und bearbeitet werden.
- **Segmente:** Beim Erstellen zugewiesene Segmente verknüpfen den Kontakt mit den entsprechenden Gruppen. Diese Segmente kannst du in den Einstellungen verwalten und neue anlegen.
- **Beziehungen:** Über das Feld „Beziehungen" beim Anlegen eines neuen Kontakts kannst du den Kontakt direkt mit anderen bestehenden Kontakten verknüpfen.
- **Eigene Felder:** Falls in den Einstellungen eigene Felder für Kontakte definiert wurden, erscheinen diese zusätzlich im Formular und werden zusammen mit dem Kontakt gespeichert.
- **Duplikaterkennung:** Das System vergleicht beim Erstellen eines neuen Kontakts automatisch die eingegebenen Daten mit bestehenden Kontakten, um versehentliche Doppeleinträge zu vermeiden.

---

## page: ContactResourceSubPage

**Entity:** ContactResourceSubPage  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/ContactResource/Pages/ContactResourceSubPage.php`  
**Updated:** 2026-02-14 17:27:47  

# Kontakt-Unterseiten

## Übersicht

Die Kontakt-Unterseiten sind die einzelnen Reiter, die innerhalb eines Kontaktdatensatzes angezeigt werden – wie z. B. Anmerkungen, Finanzereignisse, Spenden, Adressen und weitere. Jede Unterseite zeigt verknüpfte Daten zum jeweiligen Kontakt in einer Tabellenansicht an und ermöglicht – je nach Berechtigung – das Erstellen, Bearbeiten und Löschen dieser Einträge.

Die Kontakt-Unterseiten befinden sich im Mandanten-Bereich der Anwendung unter der Kontakte-Verwaltung.

## Navigation zu den Kontakt-Unterseiten

Wenn du einen Kontakt öffnest, werden die verschiedenen Kontakt-Unterseiten als Reiter (Tabs) in der Seitennavigation angezeigt. Du kannst zwischen den Reitern wechseln, um die jeweiligen verknüpften Daten einzusehen.

Der jeweilige Name des Reiters wird automatisch als deutsches Label angezeigt. Alle Kontakt-Unterseiten beziehen sich immer auf den aktuell geöffneten Kontakt.

## Tabellenansicht auf den Kontakt-Unterseiten

Jede Kontakt-Unterseite zeigt die verknüpften Datensätze in einer Tabelle an. Die konkreten Spalten, Filter und Sortierungen hängen von der jeweiligen Unterseite ab (z. B. zeigt die Unterseite „Spenden" andere Spalten als die Unterseite „Adressen").

Falls noch keine Einträge vorhanden sind, wird ein leerer Zustand angezeigt. Du kannst dann über die Erstellen-Schaltfläche den ersten Eintrag anlegen, sofern du die erforderliche Berechtigung hast.

## Aktionen auf den Kontakt-Unterseiten

| Aktion | Beschreibung |
|---|---|
| **Erstellen** | Über die Schaltfläche oberhalb der Tabelle kannst du einen neuen Eintrag erstellen. Es öffnet sich ein Formular, in dem du die erforderlichen Daten eingibst. Nach dem Speichern erscheint der neue Eintrag in der Tabelle. Diese Schaltfläche ist nur sichtbar, wenn du die entsprechende Berechtigung besitzt. |
| **Bearbeiten** | Über das Bearbeiten-Symbol in der jeweiligen Tabellenzeile kannst du einen bestehenden Eintrag bearbeiten. Es öffnet sich das Formular mit den vorausgefüllten Daten, die du anpassen und speichern kannst. |
| **Löschen** | Über das Löschen-Symbol in der jeweiligen Tabellenzeile kannst du einen Eintrag entfernen. Vor dem endgültigen Löschen wirst du um Bestätigung gebeten. Nach dem Löschen wird der Eintrag aus der Tabelle entfernt. |

Je nach Kontakt-Unterseite können zusätzliche Aktionen pro Tabellenzeile verfügbar sein.

## Berechtigungen für die Kontakt-Unterseiten

Die verfügbaren Aktionen auf den Kontakt-Unterseiten hängen von deiner Berechtigung **„write contacts"** ab:

| Berechtigung | Verfügbare Aktionen |
|---|---|
| **Ohne „write contacts"** | Die Tabelle wird im Lesemodus angezeigt. Du kannst die Einträge einsehen, aber weder erstellen, bearbeiten noch löschen. Es erscheinen keine Erstellen-Schaltfläche und keine Bearbeiten- oder Löschen-Symbole. |
| **Mit „write contacts"** | Du kannst Einträge einsehen, erstellen, bearbeiten und löschen. |

## Häufige Fragen und Hinweise zu den Kontakt-Unterseiten

**Warum sehe ich keine Erstellen-Schaltfläche oder Bearbeiten-/Löschen-Symbole?**
Du benötigst die Berechtigung **„write contacts"**, um Einträge erstellen, bearbeiten oder löschen zu können. Wende dich an eine Person mit Verwaltungsrechten, um deine Berechtigung anpassen zu lassen.

**Warum ist die Tabelle leer?**
Wenn auf einer Kontakt-Unterseite keine Einträge angezeigt werden, bedeutet das, dass für diesen Kontakt noch keine entsprechenden Daten erfasst wurden. Du kannst über die Erstellen-Schaltfläche den ersten Eintrag anlegen.

**Kann ich einen gelöschten Eintrag wiederherstellen?**
Das Löschen eines Eintrags auf einer Kontakt-Unterseite ist endgültig. Gelöschte Einträge können nicht wiederhergestellt werden. Prüfe daher vor dem Löschen sorgfältig, ob du den richtigen Eintrag ausgewählt hast.

---

## page: ContactBreadcrumbs

**Entity:** ContactBreadcrumbs  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/ContactResource/Pages/ContactBreadcrumbs.php`  
**Updated:** 2026-02-14 17:26:27  

# Kontakt-Breadcrumbs (Navigation)

## Übersicht

Die Breadcrumb-Navigation auf Kontakt-Detailseiten zeigt dir den aktuellen Navigationspfad an und ermöglicht eine schnelle Rückkehr zur Kontaktliste. Der Titel der aktuellen Seite wird dabei dynamisch anhand der verfügbaren Kontaktdaten bestimmt, sodass du immer erkennst, welchen Kontakt du gerade betrachtest.

## Navigation über die Breadcrumb-Leiste

Die Breadcrumb-Leiste erscheint automatisch am oberen Rand jeder Kontakt-Detailseite – zum Beispiel beim Anschauen oder Bearbeiten eines Kontakts. Sie enthält einen klickbaren Link mit dem Label **Kontakte**, der dich direkt zurück zur Kontaktübersicht (Kontaktliste) bringt.

## Titelanzeige des Kontakts in den Breadcrumbs

Der Seitentitel eines Kontakts in der Breadcrumb-Navigation wird automatisch nach folgender Priorität bestimmt:

1. **Name** des Kontakts – wird bevorzugt angezeigt, wenn ein Name hinterlegt ist.
2. **E-Mail-Adresse** – wird angezeigt, wenn kein Name vorhanden ist.
3. **Kontaktnummer** (mit vorangestelltem `#`) – wird angezeigt, wenn weder Name noch E-Mail-Adresse hinterlegt sind.
4. **ID** (mit vorangestelltem `ID `) – wird als letzte Rückfalloption verwendet, wenn keine der obigen Informationen vorhanden ist.

Es wird also immer ein Titel angezeigt – selbst wenn zu einem Kontakt noch keine weiteren Daten erfasst wurden, greift die Anzeige auf die interne ID zurück.

## Benutzer-Link neben dem Kontaktnamen

Falls dem Kontakt ein Benutzer zugeordnet ist, wird für Organisations-Administratoren zusätzlich ein Link zum zugeordneten Benutzer neben dem Kontakt-Titel in den Breadcrumbs angezeigt.

**Berechtigung:** Dieser Benutzer-Link ist ausschließlich für Organisations-Administratoren sichtbar. Alle anderen Benutzer sehen nur den Kontaktnamen ohne den Benutzer-Link. Wenn dem Kontakt kein Benutzer zugeordnet ist, wird der Link auch für Administratoren nicht angezeigt.

---

## page: Addresses

**Entity:** Addresses  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/ContactResource/Pages/Addresses.php`  
**Updated:** 2026-02-14 17:25:33  

# Adressen

## Übersicht
Auf der Seite „Adressen" kannst du die Adressen eines Kontakts verwalten. Du kannst neue Adressen hinzufügen, bestehende bearbeiten oder löschen und eine Adresse als aktive Adresse festlegen. Die aktive Adresse wird in der Tabelle mit einem blauen Hintergrund hervorgehoben.

## Navigation
Die Seite „Adressen" ist eine Unterseite eines Kontakts. Du erreichst sie, indem du einen Kontakt öffnest und dann den Navigationspunkt **Adressen** auswählst.

## Formularfelder

Die folgenden Felder stehen beim Erstellen und Bearbeiten einer Adresse zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Typ | Auswahl | Nein | Art der Adresse |
| Adresszeile 1 | Textfeld | Ja | Straße und Hausnummer |
| Adresszeile 2 | Textfeld | Nein | Zusätzliche Adressinformationen |
| PLZ | Textfeld | Ja | Postleitzahl |
| Ort | Textfeld | Ja | Stadt oder Gemeinde |
| Land | Auswahl | Nein | Länderauswahl. Beeinflusst die verfügbaren Optionen im Feld „Bundesland". |
| Bundesland | Auswahl | Nein | Bundesland oder Region. Die verfügbaren Optionen hängen vom ausgewählten Land ab – erst wenn ein Land gewählt ist, werden die zugehörigen Bundesländer/Regionen angezeigt. Ohne Länderauswahl bleibt dieses Feld leer. |

### Validierung und Fehlermeldungen

Beim Speichern einer Adresse können folgende Validierungsfehler auftreten:

| Fehlermeldung | Ursache | Lösung |
|---------------|---------|--------|
| „Adresszeile 1 ist ein Pflichtfeld." | Das Feld „Adresszeile 1" wurde nicht ausgefüllt. | Trage Straße und Hausnummer in das Feld „Adresszeile 1" ein. |
| „PLZ ist ein Pflichtfeld." | Das Feld „PLZ" wurde nicht ausgefüllt. | Trage die Postleitzahl ein. |
| „Ort ist ein Pflichtfeld." | Das Feld „Ort" wurde nicht ausgefüllt. | Trage die Stadt oder Gemeinde ein. |

## Tabellenansicht / Listenansicht

Die Adressliste auf der Seite „Adressen" zeigt folgende Spalten:

| Spalte | Beschreibung | Ein-/Ausblendbar |
|--------|--------------|------------------|
| Typ | Art der Adresse | Ja |
| Straße und Hausnummer | Zeigt Adresszeile 1 und ggf. Adresszeile 2 kommagetrennt an | Nein |
| PLZ | Postleitzahl | Nein |
| Ort | Stadt oder Gemeinde | Nein |
| Bundesland | Bundesland oder Region als Text | Ja |
| Land | Land (als Ländername) | Ja |

Die aktuell aktive Adresse des Kontakts wird mit einem blauen Hintergrund hervorgehoben, sodass du sie auf einen Blick erkennen kannst.

## Aktionen

### Als aktive Adresse festlegen
- **Symbol:** Häkchen-Icon
- **Beschreibung:** Legt die ausgewählte Adresse als aktive Adresse des Kontakts fest.
- **Bestätigung:** Vor der Ausführung wird eine Bestätigungsabfrage angezeigt.
- **Sichtbarkeit:** Die Aktion ist nur bei Adressen sichtbar, die **nicht** bereits die aktive Adresse sind. Bei der aktuell aktiven Adresse wird das Häkchen-Icon nicht angezeigt.
- **Nach der Ausführung:** Die neue aktive Adresse wird in der Tabelle mit blauem Hintergrund hervorgehoben. Die zuvor aktive Adresse verliert ihre Hervorhebung.

### Erstellen
Du kannst eine neue Adresse über die Erstellen-Schaltfläche oberhalb der Tabelle anlegen. Nach dem Klick öffnet sich ein Formular mit den oben beschriebenen Feldern. Fülle die Pflichtfelder aus und speichere die Adresse. Die neue Adresse erscheint anschließend in der Adressliste.

### Bearbeiten
Du kannst eine bestehende Adresse bearbeiten, indem du die Bearbeiten-Aktion in der jeweiligen Tabellenzeile verwendest. Das Formular öffnet sich mit den vorhandenen Daten, die du anpassen und speichern kannst.

### Löschen
Du kannst eine Adresse über die Löschen-Aktion in der Tabellenzeile entfernen. Vor dem Löschen wird eine Bestätigungsabfrage angezeigt.

## Beziehungen

- **Kontakt:** Jede Adresse auf der Seite „Adressen" gehört zu einem bestimmten Kontakt. Die aktive Adresse wird im Kontakt gespeichert.

---

## page: ActivityPeriods

**Entity:** ActivityPeriods  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/ContactResource/Pages/ActivityPeriods.php`  
**Updated:** 2026-02-14 17:24:16  

# Tätigkeitszeiträume

## Übersicht

Auf der Seite **Tätigkeitszeiträume** siehst du, wann und wie lange ein Kontakt aktiv war. Jeder Eintrag enthält Beginn, Ende und eine Beschreibung der jeweiligen Tätigkeit. Die Tätigkeitszeiträume sind eine Unterseite eines einzelnen Kontakts und stehen in direktem Zusammenhang mit dem Tool **Zeiterfassung**.

## Navigation

Die Seite **Tätigkeitszeiträume** erreichst du über folgenden Pfad:

**Kontakte → [Kontakt auswählen] → Tätigkeitszeiträume**

Der Menüpunkt wird nur angezeigt, wenn die unter „Voraussetzungen" genannten Bedingungen erfüllt sind.

## Voraussetzungen

Damit die Seite **Tätigkeitszeiträume** bei einem Kontakt sichtbar ist, müssen zwei Bedingungen erfüllt sein:

1. **Das Tool „Zeiterfassung" muss aktiviert sein** – dieses Tool wird in der Toolbox für die gesamte Organisation aktiviert.
2. **Beim jeweiligen Kontakt muss die Zeiterfassung aktiviert sein** – diese Einstellung wird direkt am Kontakt vorgenommen.

Ist eine dieser Bedingungen nicht erfüllt, wird der Menüpunkt **Tätigkeitszeiträume** beim Kontakt nicht angezeigt.

## Tabellenansicht

Die Seite **Tätigkeitszeiträume** zeigt eine Tabelle mit allen erfassten Tätigkeitszeiträumen des Kontakts. Die Tabelle enthält folgende Spalten:

| Spalte | Beschreibung |
|---|---|
| **von** | Datum und Uhrzeit, wann die Tätigkeit begonnen hat |
| **bis** | Uhrzeit, wann die Tätigkeit geendet hat |
| **Beschreibung** | Kurze Beschreibung der durchgeführten Tätigkeit |

Die Tabelle ist standardmäßig nach dem Feld **von** absteigend sortiert, sodass die neuesten Einträge oben stehen.

## Beziehungen

- Die Seite **Tätigkeitszeiträume** gehört zur **Kontakte**-Verwaltung und ist eine Unterseite eines Kontakts.
- Die Funktion setzt das Tool **Zeiterfassung** voraus, das in der Toolbox separat aktiviert werden muss.

---

## page: ViewConnectedAccountTransaction

**Entity:** ViewConnectedAccountTransaction  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ConnectedAccountTransactionResource/Pages/ViewConnectedAccountTransaction.php`  
**Updated:** 2026-02-14 17:23:28  

# Bankvorgang ansehen

## Übersicht
Auf der Seite „Bankvorgang ansehen" kannst du die Details eines einzelnen Bankvorgangs einsehen. Du siehst alle relevanten Informationen wie Buchungsdatum, Name, Verwendungszweck, Buchungstext, Kontonummer der Gegenpartei und den Betrag. Von hier aus kannst du den Bankvorgang einem Finanzereignis zuordnen oder in mehrere Einzelvorgänge aufteilen.

## Navigation
Die Detailseite „Bankvorgang ansehen" erreichst du, indem du in der Liste der Bankvorgänge (Seitenleiste → Finanzen → Bankvorgänge) auf einen einzelnen Bankvorgang klickst. Über die Breadcrumb-Navigation oben auf der Seite gelangst du jederzeit zurück zur Übersicht aller Bankvorgänge.

## Angezeigte Felder

Auf der Seite „Bankvorgang ansehen" werden folgende Informationen angezeigt:

| Feld | Typ | Beschreibung |
|------|-----|-------------|
| Buchungsdatum | Datum | Das Datum, an dem der Bankvorgang gebucht wurde |
| Konto | Auswahl | Das Bankkonto, zu dem der Vorgang gehört. Dieses Feld wird nur angezeigt, wenn mehr als ein Bankkonto vorhanden ist. |
| Name | Text | Der Name des Absenders oder Empfängers |
| Verwendungszweck | Text | Der Verwendungszweck der Überweisung |
| Buchungstext | Text | Technische Informationen zur Art der Buchung, z. B. „Überweisung", „Bargeldeinzahlung" oder „Dauerauftrag" |
| Kontonummer Gegenpartei | Text | Die IBAN der Gegenpartei. Dieses Feld ist nicht bei allen Banken verfügbar und kann daher leer sein. |
| Betrag | Geldbetrag | Der Betrag des Bankvorgangs |

## Aktionen

### Zuordnen
Über die Schaltfläche **Zuordnen** kannst du den Bankvorgang einem Finanzereignis zuordnen. Diese Schaltfläche ist nur sichtbar, wenn folgende Bedingungen erfüllt sind:

- Der Bankvorgang hat genau einen Einzelvorgang (wurde also nicht aufgeteilt).
- Dieser Einzelvorgang ist noch keinem Finanzereignis zugeordnet.
- Du hast die Berechtigung „write accounting".

Ein Klick auf **Zuordnen** leitet dich zur Zuordnungsseite weiter.

Wenn der Bankvorgang bereits einem Finanzereignis zugeordnet ist, wird die Schaltfläche **Zuordnen** nicht angezeigt.

### Weitere Aktionen
Über das Menü **Weitere Aktionen** kannst du den Bankvorgang in mehrere Einzelvorgänge aufteilen. Dies ist nützlich für Sammelüberweisungen oder Sammellastschriften, bei denen ein einzelner Bankvorgang mehrere Zahlungen zusammenfasst. Nach dem Aufteilen können die einzelnen Vorgänge jeweils separat einem Finanzereignis zugeordnet werden.

Das Menü **Weitere Aktionen** ist nur sichtbar, wenn du die Berechtigung „write accounting" hast.

## Berechtigungen

Für die Seite „Bankvorgang ansehen" gelten folgende Berechtigungsregeln:

- **Voraussetzung**: Das Tool **Buchhaltung** oder **Erweiterte Buchhaltung** muss aktiviert sein, und du musst Zugriff auf alle Projekte haben, um Bankvorgänge sehen zu können.
- **Anschauen**: Ohne die Berechtigung „write accounting" kannst du die Details eines Bankvorgangs einsehen, aber keine Änderungen vornehmen.
- **Bearbeiten**: Mit der Berechtigung „write accounting" stehen dir zusätzlich die Aktionen **Zuordnen** und **Weitere Aktionen** (Aufteilen) zur Verfügung.

## Beziehungen

Die Seite „Bankvorgang ansehen" steht in Zusammenhang mit folgenden Bereichen:

- **Finanzereignisse**: Ein Bankvorgang kann über seine Einzelvorgänge einem oder mehreren Finanzereignissen zugeordnet werden. So wird die Verbindung zwischen Banktransaktion und buchhaltungsrelevantem Vorgang hergestellt.
- **Bankkonten**: Jeder Bankvorgang gehört zu einem bestimmten Bankkonto. Das zugehörige Konto wird auf der Detailseite angezeigt, sofern mehrere Bankkonten vorhanden sind.
- **Einzelvorgänge**: Ein Bankvorgang besteht standardmäßig aus einem Einzelvorgang. Über die Aktion „Aufteilen" kann er in mehrere Einzelvorgänge zerlegt werden, die jeweils separat einem Finanzereignis zugeordnet werden können.
- **Bankvorgänge (Liste)**: Von der Detailansicht „Bankvorgang ansehen" gelangst du über die Breadcrumb-Navigation zurück zur Übersicht aller Bankvorgänge.

---

## page: ListConnectedAccountTransactions

**Entity:** ListConnectedAccountTransactions  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ConnectedAccountTransactionResource/Pages/ListConnectedAccountTransactions.php`  
**Updated:** 2026-02-14 17:22:19  

# Bankvorgänge

## Übersicht

Die Seite **Bankvorgänge** zeigt alle Kontobewegungen an, die entweder manuell per CSV-Import aus Kontoauszügen importiert oder automatisch über eine Bankanbindung abgerufen wurden. Hier kannst du Bankvorgänge einsehen, filtern, durchsuchen und sie Finanzereignissen zuordnen, um sie zu buchen.

Die Seite befindet sich im Bereich **Finanzen** der Anwendung.

## Navigation

Seitenleiste → **Finanzen** → **Bankvorgänge**

## Tabellenansicht der Bankvorgänge

Die Bankvorgänge werden in einer Tabelle dargestellt. Pro Seite wird eine begrenzte Anzahl an Einträgen angezeigt; über die Seitennavigation am Tabellenende kannst du durch weitere Einträge blättern.

### Spalten

| Spalte | Beschreibung | Suchbar | Sortierbar | Besonderheiten |
|---|---|---|---|---|
| Datum | Buchungsdatum des Bankvorgangs | Nein | Ja | Standardsortierung: neueste zuerst |
| Konto | Name des zugehörigen Bankkontos | Nein | Nein | Nur sichtbar, wenn mehr als ein Bankkonto angelegt ist; ein-/ausblendbar |
| Name | Name des Kontoinhabers oder der Gegenpartei | Nein | Nein | Ein-/ausblendbar |
| Verwendungszweck | Verwendungszweck der Transaktion | Ja | Ja | Ein-/ausblendbar |
| Buchungstext | Technische Buchungsart (z. B. „Überweisung", „Dauerauftrag") | Ja | Ja | Ein-/ausblendbar |
| Kontonummer Gegenpartei | IBAN der Gegenpartei | Ja | Ja | Standardmäßig ausgeblendet; ein-/ausblendbar |
| Betrag | Betrag der Transaktion in Euro | Ja | Ja | Negative Beträge (Ausgaben) werden rot angezeigt. Am Tabellenende wird die Summe der aktuell angezeigten Beträge dargestellt. Bei der Suche kannst du Beträge im Format „14,53 €" eingeben. |
| Zugeordnet | Zeigt an, ob der Bankvorgang einem Finanzereignis zugeordnet ist | Nein | Nein | Grünes Häkchen = zugeordnet; orangefarbener Pfeil = teilweise zugeordnet (bei mehreren Einzelvorgängen); Klick auf das Symbol öffnet das zugeordnete Finanzereignis oder zeigt Details an |

Wenn Filter aktiv sind und Bankvorgänge existieren, ändert sich die Tabellenüberschrift zu **Bankvorgänge (entsprechend Filter)**. Das macht deutlich, dass sich die angezeigte Summenzeile nur auf die gefilterten Ergebnisse bezieht – nicht auf alle Bankvorgänge insgesamt.

### Filter

Die Bankvorgänge-Tabelle bietet folgende Filtermöglichkeiten:

| Filter | Beschreibung |
|---|---|
| Konto | Filtert nach einem oder mehreren Bankkonten. Nur sichtbar, wenn mehr als ein Bankkonto angelegt ist. Enthält auch die Option „[Konto unbekannt / gelöscht]" für Bankvorgänge, deren zugehöriges Konto nicht mehr existiert. |
| Nur Unzugeordnete | Zeigt nur Bankvorgänge an, die noch keinem Finanzereignis zugeordnet sind. Hilfreich, um offene Buchungen abzuarbeiten. |
| Kategorie | Filtert nach Einnahmen oder Ausgaben |
| Datum | Filtert nach einem frei wählbaren Datumsbereich |

Du kannst mehrere Filter gleichzeitig kombinieren, um die Anzeige weiter einzuschränken.

### Leerer Zustand

Wenn keine Bankvorgänge angezeigt werden, erscheint je nach Ursache eine passende Meldung:

- **Kein Bankkonto angelegt:** Du siehst den Hinweis, dass zunächst ein Bankkonto eingerichtet werden muss. Wenn du die Berechtigung „Verwalten" für das Tool Buchhaltung hast, wird ein Button angezeigt, über den du direkt die Bankkonten-Einstellungen öffnen kannst.
- **Keine Bankvorgänge vorhanden (mit automatischer Bankanbindung):** Du siehst den Hinweis, dass importierte Bankvorgänge innerhalb eines Tages automatisch erscheinen sollten. Hier musst du nichts weiter tun.
- **Keine Bankvorgänge vorhanden (ohne automatische Bankanbindung):** Du siehst den Hinweis, dass du Bankvorgänge per CSV-Import hochladen oder den automatischen Abruf über eine Bankanbindung aktivieren kannst.
- **Keine Treffer bei aktiven Filtern:** Du siehst den Hinweis, die Filter zu entfernen, um alle Bankvorgänge anzuzeigen.

## Aktionen auf der Bankvorgänge-Seite

### Import von Bankvorgängen (Header-Aktion)

Der **Import**-Button oben auf der Seite ermöglicht das Importieren von Bankvorgängen aus CSV-Dateien (Kontoauszügen).

**Voraussetzung:** Mindestens ein Bankkonto muss angelegt sein, und du benötigst die Berechtigung „Bearbeiten" für das Tool Buchhaltung.

Das Verhalten des Import-Buttons hängt von der Anzahl deiner Bankkonten ab:

- **Bei einem einzigen Bankkonto:** Der Import startet direkt für dieses Konto. Bei einem PayPal-Konto wird automatisch der PayPal-Importer verwendet.
- **Bei mehreren Bankkonten:** Es öffnet sich zunächst ein Dialog zur Auswahl des Bankkontos, für das der Import durchgeführt werden soll. Anschließend öffnet sich der entsprechende Import-Dialog.
- **Bei keinem Bankkonto:** Der Import-Button ist deaktiviert. Du siehst den Hinweis: „Bankvorgänge können erst importiert werden, wenn ein Bankkonto angelegt ist."

Der Import-Dialog trägt die Überschrift **Bankvorgänge aus CSV (Kontoauszug) importieren** bzw. **Paypal-Bankvorgänge aus CSV (Kontoauszug) importieren** für PayPal-Konten.

### Zuordnen eines Bankvorgangs (Zeilen-Aktion)

Über den Button **Zuordnen** in einer Tabellenzeile kannst du einen noch nicht zugeordneten Bankvorgang einem Finanzereignis zuordnen. Diese Aktion ist nur sichtbar, wenn der Bankvorgang noch zugeordnet werden kann (d. h. noch nicht vollständig gebucht ist).

**Voraussetzung:** Berechtigung „Bearbeiten" für das Tool Buchhaltung.

- **Bei einem einzelnen Vorgang:** Du wirst direkt zur Zuordnungsseite weitergeleitet, auf der du den Bankvorgang einem passenden Finanzereignis zuordnen kannst.
- **Bei mehreren Einzelvorgängen:** Es öffnet sich ein Dialog mit der Überschrift „Einzelvorgang auswählen". Dort wählst du den gewünschten (noch nicht zugeordneten) Einzelvorgang aus. Der Hilfetext lautet: „Der Bankvorgang besteht aus mehreren Einzelvorgängen. Wähle hier aus, welchen (noch nicht zugeordneten) Einzelvorgang du zuordnen möchtest." Nach der Auswahl wirst du zur Zuordnungsseite weitergeleitet.

### Einzelvorgänge anzeigen (Zeilen-Aktion)

Wenn ein Bankvorgang aus mehreren Einzelvorgängen besteht (z. B. weil er aufgeteilt wurde), erscheint ein Info-Symbol in der Tabellenzeile. Ein Klick darauf öffnet ein Modal mit einer Übersicht aller Einzelvorgänge inklusive deren Beträgen und Zuordnungsstatus.

### Weitere Aktionen (Zeilen-Aktionsmenü)

Über das Menü **Weitere Aktionen** in der Tabellenzeile findest du:

- **Bankvorgang aufteilen:** Mit dieser Funktion kannst du einen Bankvorgang in mehrere Einzelvorgänge aufteilen. Das ist nützlich bei Sammelüberweisungen oder Sammellastschriften, bei denen ein einzelner Kontoumsatz mehrere Geschäftsvorfälle enthält. Jeder Einzelvorgang kann anschließend separat einem Finanzereignis zugeordnet und gebucht werden. Diese Aktion ist nur verfügbar, solange der Bankvorgang noch nicht gebucht wurde.

**Voraussetzung:** Berechtigung „Bearbeiten" für das Tool Buchhaltung.

### Massenlöschung von Bankvorgängen (Toolbar-Aktion)

Du kannst mehrere Bankvorgänge gleichzeitig löschen, indem du sie über die Checkboxen in der Tabelle auswählst und dann die Löschen-Aktion in der Toolbar verwendest.

**Voraussetzung:** Berechtigung „Bearbeiten" für das Tool Buchhaltung.

**Wichtige Einschränkungen:**

- **Gebuchte Bankvorgänge** (die einem Finanzereignis zugeordnet sind) können nicht gelöscht werden. Um sie zu löschen, musst du zunächst die entsprechenden Finanzereignisse löschen.
- **Automatisch importierte Bankvorgänge** (über eine Bankanbindung abgerufen) können nur gelöscht werden, wenn das verbundene Bankkonto in den Einstellungen gelöscht wurde.
- Nur löschbare Bankvorgänge können per Checkbox ausgewählt werden. Nicht löschbare Einträge sind ausgegraut.
- Die Auswahl ist auf die aktuell angezeigte Seite beschränkt.

## Zuordnungsstatus der Bankvorgänge

Die Spalte **Zugeordnet** zeigt den aktuellen Zuordnungsstatus eines Bankvorgangs an:

| Symbol | Farbe | Bedeutung |
|---|---|---|
| Häkchen | Grün | Der Bankvorgang ist vollständig einem Finanzereignis zugeordnet (gebucht). |
| Häkchen | Grün | Alle Einzelvorgänge des Bankvorgangs sind Finanzereignissen zugeordnet. |
| Pfeil | Orange | Der Bankvorgang besteht aus mehreren Einzelvorgängen, von denen noch nicht alle zugeordnet sind. Es gibt also noch offene Einzelvorgänge. |
| Kein Symbol | – | Der Bankvorgang ist noch nicht zugeordnet und kann gebucht werden. |

**Interaktion mit dem Zuordnungsstatus:**

- Ein Klick auf das grüne Häkchen bei einem einzelnen Vorgang öffnet direkt das zugeordnete Finanzereignis.
- Ein Klick auf das grüne Häkchen oder den orangefarbenen Pfeil bei einem Bankvorgang mit mehreren Einzelvorgängen öffnet ein Modal mit der Detailansicht aller Einzelvorgänge und deren jeweiligem Zuordnungsstatus.

## Berechtigungen für die Bankvorgänge-Seite

| Aktion | Voraussetzung |
|---|---|
| Seite aufrufen | Das Tool „Buchhaltung" oder „Erweiterte Buchhaltung" muss aktiviert sein. Der Benutzer muss Zugriff auf alle Projekte haben. |
| Bankvorgänge importieren | Berechtigung „Bearbeiten" für das Tool Buchhaltung |
| Bankvorgänge zuordnen | Berechtigung „Bearbeiten" für das Tool Buchhaltung |
| Bankvorgänge aufteilen | Berechtigung „Bearbeiten" für das Tool Buchhaltung |
| Bankvorgänge löschen (Massenlöschung) | Berechtigung „Bearbeiten" für das Tool Buchhaltung |
| Bankkonten verwalten (Link im leeren Zustand) | Berechtigung „Verwalten" für das Tool Buchhaltung |

Benutzer mit der Berechtigung „Anschauen" für das Tool Buchhaltung können die Bankvorgänge-Seite aufrufen und Bankvorgänge einsehen, aber keine Änderungen vornehmen (kein Import, keine Zuordnung, keine Löschung).

## Beziehungen zu anderen Bereichen

- **Bankkonten (Zahlungskonten):** Jeder Bankvorgang gehört zu einem Bankkonto. Bankkonten werden unter **Einstellungen → Zahlungskonten** verwaltet. Wenn ein Bankkonto gelöscht wurde, werden die zugehörigen Bankvorgänge mit „[Konto unbekannt / gelöscht]" gekennzeichnet.
- **Finanzereignisse:** Bankvorgänge werden Finanzereignissen zugeordnet, um sie zu buchen. Über die Zuordnungsfunktion werden Bankvorgang und Finanzereignis miteinander verknüpft.
- **Einzelvorgänge:** Ein Bankvorgang kann in mehrere Einzelvorgänge aufgeteilt werden (z. B. bei Sammelüberweisungen). Jeder Einzelvorgang kann separat einem Finanzereignis zugeordnet und gebucht werden.
- **Bankvorgang-Detailansicht:** Über einen Klick auf eine Tabellenzeile kannst du zur Detailansicht eines einzelnen Bankvorgangs navigieren, um weitere Informationen einzusehen.

---

## page: ManageCommunicationsContacts

**Entity:** ManageCommunicationsContacts  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/CommunicationsContactResource/Pages/ManageCommunicationsContacts.php`  
**Updated:** 2026-02-14 17:20:17  

# Kommunikation – Kontakte

## Übersicht

Die Seite **Kommunikation – Kontakte** zeigt alle Kontakte deiner Organisation, die aktuell mindestens einer Newsletter-Liste oder einem Segment zugeordnet (abonniert) sind. Du kannst die Kontakte filtern, durchsuchen, sortieren und direkt zur Bearbeitungsseite eines einzelnen Kontakts wechseln. Außerdem steht ein Export zur Verfügung, um die angezeigte Kontaktliste als Datei herunterzuladen.

Wenn noch keine Kontakte einer Newsletter-Liste oder einem Segment zugeordnet sind, wird die Tabelle leer angezeigt. In diesem Fall musst du zunächst Kontakte zu einer Newsletter-Liste oder einem Segment hinzufügen, damit sie hier erscheinen.

## Navigation

Die Seite **Kommunikation – Kontakte** ist nicht direkt über die Seitenleiste erreichbar, sondern wird im Kontext des Kommunikationsbereichs aufgerufen.

## Zugangsvoraussetzungen

Um die Seite **Kommunikation – Kontakte** nutzen zu können, muss mindestens eines der folgenden Tools für die Organisation aktiviert sein:

- Das Tool **Newsletter**
- Das Tool **Segment-Kommunikation**

## Tabellenansicht / Listenansicht

Die Seite **Kommunikation – Kontakte** zeigt die Kontakte in einer Tabellenansicht mit den folgenden Spalten, Filtern, Such- und Sortiermöglichkeiten.

### Spalten

| Spalte | Beschreibung |
|---|---|
| Email-Adresse | Die E-Mail-Adresse des Kontakts. |
| Vorname | Der Vorname des Kontakts. |
| Nachname | Der Nachname des Kontakts. |
| Anrede | Die Anrede des Kontakts. |
| Newsletter-Listen | Zeigt an, welchen Newsletter-Listen der Kontakt zugeordnet ist. Ist der Kontakt keiner Newsletter-Liste zugeordnet, bleibt diese Spalte leer. |
| Segmente | Zeigt die Segmente an, denen der Kontakt zugeordnet ist (ohne Newsletter-Listen). Ist der Kontakt keinem Segment zugeordnet, bleibt diese Spalte leer. |

### Filter

| Filter | Beschreibung |
|---|---|
| Newsletter-Listen | Filtert die Kontaktliste nach einer oder mehreren Newsletter-Listen. Mehrfachauswahl ist möglich. |
| Segmente | Filtert die Kontaktliste nach einem oder mehreren Segmenten. Mehrfachauswahl ist möglich. |

### Suche

Auf der Seite **Kommunikation – Kontakte** kannst du die Kontaktliste über das Suchfeld durchsuchen. Die Suche berücksichtigt die Spalten Anrede. Wenn kein Kontakt zum Suchbegriff passt, wird die Tabelle leer angezeigt.

### Sortierung

Die Spalten Anrede sind sortierbar. Klicke auf die jeweilige Spaltenüberschrift, um die Sortierreihenfolge zu ändern (aufsteigend oder absteigend).

## Aktionen

### Zeilenaktionen

- **Bearbeiten**: Öffnet die vollständige Bearbeitungsseite des ausgewählten Kontakts im Kontakte-Bereich. Dort kannst du alle Daten des Kontakts einsehen und ändern – nicht nur die hier angezeigten Felder.

### Header-Aktionen

- **Export**: Exportiert die aktuell angezeigte Kontaktliste als Datei.

## Beziehungen und Zusammenhänge

- Die auf der Seite **Kommunikation – Kontakte** angezeigten Kontakte sind dieselben, die auch unter **Kontakte** verwaltet werden. Der Bearbeiten-Link führt direkt zur vollständigen Kontakt-Bearbeitungsseite im Kontakte-Bereich.
- Die Liste zeigt ausschließlich Kontakte, die aktuell mindestens einer Newsletter-Liste oder einem Segment zugeordnet (abonniert) sind. Kontakte ohne Zuordnung erscheinen hier nicht.
- **Newsletter-Listen** und **Segmente** können in den jeweiligen Einstellungsbereichen verwaltet werden. Änderungen dort (z. B. das Löschen einer Newsletter-Liste) wirken sich auf die hier angezeigte Kontaktliste aus.

---

## page: ViewBudgetTable

**Entity:** ViewBudgetTable  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/BudgetResource/Widgets/ViewBudgetTable.php`  
**Updated:** 2026-02-14 17:19:14  

# Finanzereignisse (Budget-Detailansicht)

## Übersicht

Die Tabelle „Finanzereignisse" zeigt alle Buchungen, die zu einem bestimmten Budget gehören. Sie erscheint auf der Detailseite eines Budgets und listet die tatsächlichen Finanzereignisse auf, die dem Budget zugeordnet sind – gefiltert nach den im Budget definierten Kriterien wie Typ, Projekt und Zeitraum. So kannst du den Soll-Ist-Vergleich auf Einzelbuchungsebene nachvollziehen.

Wenn keine Finanzereignisse zu den Kriterien des Budgets passen, wird die Tabelle leer angezeigt.

## Navigation zur Budget-Detailansicht

Um die Tabelle der Finanzereignisse zu sehen, öffne die Detailseite eines Budgets:

1. **Seitenleiste → Finanzen → Budgets**
2. Klicke bei dem gewünschten Budget auf die **Anschauen**-Aktion

Die Tabelle der Finanzereignisse wird automatisch auf dieser Detailseite angezeigt.

## Tabellenansicht der Finanzereignisse

Die Tabelle auf der Budget-Detailansicht zeigt die zum Budget passenden Finanzereignisse mit folgenden Spalten:

| Spalte | Beschreibung | Sortierbar | Besonderheiten |
|---|---|---|---|
| **Datum** | Das Zahlungsdatum des Finanzereignisses | Ja | Standardsortierung: neueste zuerst |
| **Beschreibung** | Beschreibungstext des Finanzereignisses | Nein | Wird nach 50 Zeichen abgeschnitten |
| **Typ** | Der Typ des Finanzereignisses | Nein | Standardmäßig ausgeblendet, wenn das Budget bereits auf einen bestimmten Typ eingeschränkt ist. Du kannst die Spalte über die Spaltenauswahl ein- oder ausblenden |
| **Projekt** | Das zugeordnete Projekt | Nein | Nur sichtbar, wenn das Tool **Projekte** aktiviert ist. Standardmäßig ausgeblendet, wenn das Budget auf ein Projekt ohne Unterprojekte eingeschränkt ist. Du kannst die Spalte über die Spaltenauswahl ein- oder ausblenden |
| **Betrag** | Der Betrag des Finanzereignisses | Ja | Negative Beträge werden rot dargestellt. Am Ende der Tabelle wird eine Summenzeile mit dem „Ist"-Wert angezeigt |

### Automatische Filterung der Finanzereignisse

Die Tabelle auf der Budget-Detailansicht wird automatisch nach den Kriterien des zugehörigen Budgets gefiltert. Du musst selbst keine Filter setzen – die Filterung ergibt sich aus der Budget-Konfiguration:

- **Nach Typ**: Wenn im Budget ein bestimmter Finanzereignis-Typ hinterlegt ist, werden nur Ereignisse dieses Typs angezeigt.
- **Nach Projekt**: Wenn im Budget ein Projekt hinterlegt ist, werden Finanzereignisse dieses Projekts sowie aller Unterprojekte angezeigt.
- **Nach Zeitraum**:
  - Bei Zeiteinschränkung **Monat**: nur Finanzereignisse aus dem festgelegten Monat
  - Bei Zeiteinschränkung **Wirtschaftsjahr**: nur Finanzereignisse aus dem festgelegten Wirtschaftsjahr
  - Bei **keiner** Zeiteinschränkung: alle Finanzereignisse ohne zeitliche Filterung

Falls du Finanzereignisse vermisst, prüfe die Kriterien des Budgets (Typ, Projekt, Zeitraum). Die Tabelle zeigt nur Einträge, die zu allen definierten Kriterien gleichzeitig passen.

### Paginierung der Finanzereignisse-Tabelle

Die Tabelle auf der Budget-Detailansicht kann 10, 25, 50 oder 100 Einträge pro Seite anzeigen. Du kannst die Anzahl über die Auswahl unterhalb der Tabelle ändern. Bei vielen Buchungen navigierst du über die Seitennavigation durch die weiteren Einträge.

## Beziehungen zu anderen Bereichen

- **Budget**: Die Tabelle der Finanzereignisse gehört zur Detailansicht eines einzelnen Budgets und zeigt dessen zugehörige Buchungen.
- **Finanzereignisse**: Die angezeigten Einträge sind die tatsächlichen Buchungen, die den Ist-Wert des Budgets ausmachen.
- **Projekte**: Wenn das Budget einem Projekt zugeordnet ist, werden in der Tabelle auch Finanzereignisse von Unterprojekten berücksichtigt. Voraussetzung: Das Tool **Projekte** muss aktiviert sein.

---

## page: ViewBudgetSummary

**Entity:** ViewBudgetSummary  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/BudgetResource/Widgets/ViewBudgetSummary.php`  
**Updated:** 2026-02-14 17:17:57  

# Budget-Zusammenfassung

## Übersicht

Die Budget-Zusammenfassung zeigt dir auf der Detailseite eines Budgets drei Kennzahlen als Statistik-Karten an: den geplanten Betrag, den tatsächlichen Ist-Betrag und den verbleibenden Betrag. Die Werte werden farblich hervorgehoben, damit du auf einen Blick erkennst, ob das Budget im Plan liegt oder überschritten wurde.

## Navigation zur Budget-Zusammenfassung

Die Budget-Zusammenfassung erscheint automatisch als Widget auf der Detailseite eines einzelnen Budgets. Dorthin gelangst du über **Seitenleiste → Finanzen → Budgets** und anschließend durch Klick auf ein Budget in der Liste (Anschauen-Aktion).

## Voraussetzungen

Das Tool **Budgets** muss für deine Organisation aktiviert sein.

## Angezeigte Kennzahlen in der Budget-Zusammenfassung

| Kennzahl | Beschreibung |
|---|---|
| **Betrag** | Der geplante Budget-Betrag, also der Soll-Wert des Budgets. |
| **Ist** | Der tatsächlich angefallene Betrag (Summe der gebuchten Finanzereignisse, die diesem Budget zugeordnet sind). |
| **Verbleibend** | Die Differenz zwischen geplantem Betrag und Ist-Betrag. |

## Farbliche Kennzeichnung in der Budget-Zusammenfassung

Die Werte für **Ist** und **Verbleibend** werden je nach Kategorie (Einnahme oder Ausgabe) des Budgets farblich markiert. Die Kategorie wird über den verknüpften Finanzereignis-Typ des Budgets bestimmt. Ist kein Finanzereignis-Typ verknüpft, wird standardmäßig die Kategorie Ausgabe verwendet.

**Bei Einnahme-Budgets:**
- **Ist**: Grün, wenn der Ist-Betrag den geplanten Betrag erreicht oder übersteigt (Ziel erreicht oder übertroffen). Gelb, wenn der Ist-Betrag noch unter dem geplanten Betrag liegt (Ziel noch nicht erreicht).
- **Verbleibend**: Grün, wenn nichts mehr verbleibt oder der Wert negativ ist (Ziel erreicht oder übertroffen). Gelb, wenn noch ein Restbetrag offen ist.

**Bei Ausgabe-Budgets:**
- **Ist**: Grün, wenn der Ist-Betrag innerhalb des geplanten Betrags liegt (Budget eingehalten). Rot, wenn der Ist-Betrag das Budget überschreitet (Budget überzogen).
- **Verbleibend**: Grün, wenn noch Budget übrig ist oder genau aufgebraucht wurde. Rot, wenn das Budget überschritten wurde (negativer Restbetrag).

## Beziehungen der Budget-Zusammenfassung

- Die Budget-Zusammenfassung gehört zur **Budget-Detailseite**.
- Die Kategorie (Einnahme oder Ausgabe), die die farbliche Kennzeichnung steuert, wird über den **Finanzereignis-Typ** des Budgets bestimmt.

---

## page: ViewBudget

**Entity:** ViewBudget  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/BudgetResource/Pages/ViewBudget.php`  
**Updated:** 2026-02-14 17:16:58  

# Budget – Detailansicht

## Übersicht

Auf der Detailansicht kannst du ein einzelnes Budget im Detail betrachten. Du siehst eine Zusammenfassung der wichtigsten Kennzahlen sowie eine detaillierte Tabelle mit den zugehörigen Werten. Von hier aus kannst du das Budget auch direkt bearbeiten.

## Navigation

Die Budget-Detailansicht erreichst du, indem du in der Budgetübersicht (Seitenleiste → **Finanzen** → **Budgets**) auf ein einzelnes Budget klickst. Du gelangst dann auf eine eigene Seite, die alle Details dieses Budgets anzeigt.

## Aktionen auf der Budget-Detailansicht

| Aktion | Beschreibung |
|---|---|
| **Bearbeiten** | Über die Schaltfläche „Bearbeiten" im oberen Bereich der Seite öffnet sich ein Formular, in dem du die Budgetdaten ändern kannst. |

## Formularfelder beim Bearbeiten eines Budgets

Wenn du auf „Bearbeiten" klickst, öffnet sich ein Formular mit folgenden Feldern:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Projekt | Baumauswahl | Nein | Wähle ein Projekt aus der hierarchischen Projektstruktur. Du kannst die Suche nutzen und Unterprojekte direkt auswählen. |
| Typ | Auswahl | Nein | Der Finanzereignis-Typ des Budgets. Es werden nur Typen der Kategorien „Einnahme" und „Ausgabe" angezeigt. Das Feld ist durchsuchbar. |
| Betrag | Geldbetrag | Ja | Der geplante Budgetbetrag. |
| Zeitliche Einschränkung | Auswahl | Nein | Legt fest, ob das Budget zeitlich eingeschränkt ist. Je nach Auswahl werden weitere Felder ein- oder ausgeblendet. |
| Wirtschaftsjahr | Auswahl | Ja (wenn sichtbar) | Dieses Feld wird nur angezeigt, wenn du bei „Zeitliche Einschränkung" den Wert „Wirtschaftsjahr" gewählt hast. Wähle das zugehörige Wirtschaftsjahr aus. |
| Monat | Monatsauswahl | Ja (wenn sichtbar) | Dieses Feld wird nur angezeigt, wenn du bei „Zeitliche Einschränkung" den Wert „Monat" gewählt hast. Wähle den gewünschten Monat aus. |
| Anmerkungen | Rich-Text-Editor | Nein | Freitextfeld für zusätzliche Notizen zum Budget. |

## Widgets auf der Budget-Detailansicht

Die Budget-Detailansicht zeigt unterhalb der Kopfzeile zwei Widgets:

1. **Zusammenfassung** – Zeigt eine kompakte Übersicht der wichtigsten Budgetkennzahlen auf einen Blick.
2. **Budgettabelle** – Zeigt eine detaillierte tabellarische Aufstellung zum Budget mit den einzelnen zugehörigen Werten.

## Beziehungen des Budgets

- **Projekte**: Ein Budget kann einem Projekt zugeordnet sein. Die Zuordnung erfolgt über das Feld „Projekt" beim Bearbeiten.
- **Typ (Finanzereignis-Typ)**: Budgets können auf einen bestimmten Einnahme- oder Ausgabe-Typ eingeschränkt werden.
- **Wirtschaftsjahr**: Budgets mit der zeitlichen Einschränkung „Wirtschaftsjahr" sind mit einem konkreten Wirtschaftsjahr verknüpft.
- **Budgetübersicht**: Von der Budgetübersicht (Liste aller Budgets) gelangst du per Klick zur Detailansicht.

---

## page: ManageBudgets

**Entity:** ManageBudgets  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/BudgetResource/Pages/ManageBudgets.php`  
**Updated:** 2026-02-14 17:15:42  

# Budgets

## Übersicht

Auf der Seite **Budgets** kannst du Budgets erstellen, einsehen, bearbeiten und löschen. Budgets ermöglichen es dir, geplante Einnahmen oder Ausgaben für bestimmte Projekte und/oder Finanzereignistypen festzulegen und diese mit den tatsächlich gebuchten Werten (Ist-Werten) zu vergleichen. Die Seite zeigt eine Übersicht aller angelegten Budgets mit den Spalten Soll-, Ist- und Restbetrag.

## Navigation

Die Budgetverwaltung findest du in der Seitenleiste unter der Gruppe **Finanzen**. Der Menüeintrag heißt **Budgets**. Der Menüeintrag ist nur sichtbar, wenn das Tool **Budgets** für deine Organisation aktiviert ist.

## Formularfelder beim Erstellen und Bearbeiten eines Budgets

Beim Erstellen oder Bearbeiten eines Budgets stehen folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Projekt | Baumauswahl (hierarchisch) | Nein | Auswahl eines Projekts aus der hierarchischen Projektstruktur. Du kannst auch einen übergeordneten Knoten auswählen. Das Feld ist durchsuchbar. |
| Typ | Auswahl | Nein | Der Finanzereignistyp, für den das Budget gelten soll. Es werden nur Typen der Kategorien **Einnahme** und **Ausgabe** angezeigt. Das Feld ist durchsuchbar. |
| Betrag | Geldbetrag | Ja | Der geplante Budgetbetrag in der Währung deiner Organisation. |
| Zeitliche Einschränkung | Auswahl | Nein | Legt fest, ob das Budget zeitlich eingeschränkt wird. Mögliche Werte: **Keine Einschränkung**, **Monat** oder **Wirtschaftsjahr**. Standardmäßig ist „Keine Einschränkung" gewählt. |
| Wirtschaftsjahr | Auswahl | Ja (wenn sichtbar) | Nur sichtbar, wenn bei „Zeitliche Einschränkung" der Wert **Wirtschaftsjahr** gewählt wurde. Hier wählst du das gewünschte Wirtschaftsjahr aus. |
| Monat | Monatsauswahl | Ja (wenn sichtbar) | Nur sichtbar, wenn bei „Zeitliche Einschränkung" der Wert **Monat** gewählt wurde. Hier wählst du den gewünschten Monat im Format „Monat Jahr" (z. B. „Januar 2025") aus. |
| Anmerkungen | Rich-Text-Editor | Nein | Freitextfeld für zusätzliche Notizen zum Budget. |

## Tabellenansicht der Budgets

Die Budgetliste zeigt folgende Spalten:

| Spalte | Beschreibung |
|--------|--------------|
| Projekt | Name des zugeordneten Projekts (als Badge dargestellt). Falls kein Projekt zugeordnet ist, bleibt die Spalte leer. |
| Typ | Der zugeordnete Finanzereignistyp. Falls kein Typ zugeordnet ist, wird „–" angezeigt. |
| Betrag | Der geplante Budgetbetrag. Am Tabellenende wird die Summe aller aktuell angezeigten Budgets dargestellt. |
| Ist | Der tatsächlich gebuchte Betrag. Die Spalte ist farblich markiert: **Grün** bedeutet, dass das Budget im Plan liegt (bei Einnahmen wurde das Ziel erreicht oder übertroffen, bei Ausgaben wurde das Budget nicht überschritten). **Gelb** zeigt bei Einnahmen an, dass das Ziel nicht erreicht wurde. **Rot** zeigt bei Ausgaben an, dass das Budget überschritten wurde. |
| Verbleibend | Der verbleibende Betrag (Differenz zwischen geplantem Budget und Ist-Wert). Die farbliche Markierung erfolgt analog zur Ist-Spalte. |
| Zeitliche Einschränkung | Zeigt den Typ der zeitlichen Einschränkung an. Diese Spalte ist standardmäßig ausgeblendet und kann über die Spaltenauswahl eingeblendet werden. |
| Zeitraum | Zeigt den konkreten Zeitraum an: den Monatsnamen mit Jahr, den Namen des Wirtschaftsjahres oder „–" bei keiner zeitlichen Einschränkung. |

### Gruppierung der Budgets

Die Budgettabelle kann nach **Projekt** gruppiert werden. Dadurch werden alle Budgets, die demselben Projekt zugeordnet sind, zusammengefasst dargestellt.

### Filter für die Budgetliste

Über das Filter-Symbol stehen folgende Filteroptionen zur Verfügung:

| Filter | Beschreibung |
|--------|--------------|
| Projekt | Mehrfachauswahl. Filtert Budgets nach einem oder mehreren Projekten (inklusive deren Unterprojekte). Dieser Filter ist nur sichtbar, wenn das Tool **Projekte** aktiviert ist. |
| Typ | Mehrfachauswahl des Finanzereignistyps. Durchsuchbar. Filtert die Budgets nach bestimmten Einnahme- oder Ausgabetypen. |
| Wirtschaftsjahr | Mehrfachauswahl. Filtert Budgets, die dem gewählten Wirtschaftsjahr zugeordnet sind. Zusätzlich werden auch monatliche Budgets angezeigt, deren Monat in den Zeitraum des gewählten Wirtschaftsjahres fällt. |

## Aktionen auf der Budgetseite

### Budget erstellen

Über die Schaltfläche **Erstellen** in der Kopfzeile der Budgetseite kannst du ein neues Budget anlegen. Nach dem Klick öffnet sich das Formular mit den oben beschriebenen Feldern.

### Zeilenaktionen für einzelne Budgets

Für jedes Budget in der Tabelle stehen folgende Aktionen zur Verfügung:

- **Anschauen** – Öffnet die Detailansicht des Budgets.
- **Bearbeiten** – Öffnet das Bearbeitungsformular, in dem du die Budgetdaten ändern kannst.
- **Löschen** – Löscht das Budget. Vor dem endgültigen Löschen wird eine Bestätigungsabfrage angezeigt.

### Massenaktionen für Budgets

Über die Checkboxen am linken Rand der Tabelle kannst du mehrere Budgets gleichzeitig auswählen. Anschließend steht über die Massenaktionsleiste die Aktion **Löschen** zur Verfügung, um alle ausgewählten Budgets auf einmal zu entfernen.

## Validierung und Fehlermeldungen bei Budgets

Beim Erstellen eines Budgets gelten folgende Validierungsregeln:

### Pflichtfeld Betrag

Der **Betrag** ist immer ein Pflichtfeld. Wenn du dieses Feld leer lässt, erscheint eine Fehlermeldung, die dich auffordert, einen Betrag einzugeben.

### Mindestens ein Zuordnungskriterium erforderlich

Es muss mindestens eines der folgenden Felder ausgefüllt bzw. gesetzt sein:
- **Projekt** (ein Projekt ausgewählt)
- **Typ** (ein Finanzereignistyp ausgewählt)
- **Zeitliche Einschränkung** (auf **Monat** oder **Wirtschaftsjahr** gesetzt)

Wenn keines dieser Felder gesetzt ist, erscheint die Fehlermeldung:
> „Bitte wähle entweder einen Projekteintrag oder einen Typ – oder setze einen Budgetzeitraum (Monat/Geschäftsjahr)."

**Lösung:** Wähle mindestens ein Projekt, einen Typ oder eine zeitliche Einschränkung aus, damit das Budget gespeichert werden kann.

### Bedingte Pflichtfelder

- Wenn du bei **Zeitliche Einschränkung** den Wert **Wirtschaftsjahr** wählst, ist das Feld **Wirtschaftsjahr** ein Pflichtfeld. Wähle ein Wirtschaftsjahr aus der Liste aus.
- Wenn du bei **Zeitliche Einschränkung** den Wert **Monat** wählst, ist das Feld **Monat** ein Pflichtfeld. Wähle den gewünschten Monat aus.

## Berechtigungen für Budgets

Das Tool **Budgets** muss für deine Organisation aktiviert sein, damit der Menüpunkt **Budgets** in der Seitenleiste sichtbar ist und die Budgetverwaltung genutzt werden kann.

## Beziehungen zu anderen Bereichen

- **Projekte** – Budgets können einem Projekt zugeordnet werden. Die Projektstruktur wird dabei hierarchisch dargestellt.
- **Finanzereignistypen (Typ)** – Budgets können auf bestimmte Einnahme- oder Ausgabetypen eingeschränkt werden.
- **Wirtschaftsjahre** – Budgets können an ein bestimmtes Wirtschaftsjahr gebunden werden. Dies schränkt den Zeitraum ein, für den die Ist-Werte berechnet werden.
- **Detailansicht** – Über die Aktion **Anschauen** gelangst du zur Detailseite eines Budgets.

---

## page: ManageActivityPeriods

**Entity:** ManageActivityPeriods  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ActivityPeriodResource/Pages/ManageActivityPeriods.php`  
**Updated:** 2026-02-14 17:13:22  

# Zeiterfassung

## Übersicht

Auf der Seite **Zeiterfassung** kannst du deine Arbeitszeiten erfassen, bearbeiten und verwalten. Jeder Eintrag wird mit Datum, Uhrzeit, Dauer und optional einem Projekt sowie einer Beschreibung gespeichert. Wenn du die Berechtigung „Anschauen" (oder höher) für das Tool **Zeiterfassung** hast, kannst du auch die Zeiträume anderer Benutzer einsehen und erfassen.

## Navigation

Die Zeiterfassung findest du im Mandanten-Bereich unter dem Menüpunkt **Zeiterfassung**. Die Seite ist nur zugänglich, wenn das Tool **Zeiterfassung** aktiviert ist oder du die Rolle „Zeiterfasst" besitzt.

## Zeitraum erfassen

Um einen neuen Zeiterfassungseintrag anzulegen, klicke auf die Schaltfläche **Zeitraum erfassen** oberhalb der Tabelle. Es öffnet sich ein Formular mit den folgenden Feldern:

### Formularfelder

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Benutzer | Auswahl | Ja | Wählt den Benutzer aus, für den der Zeitraum erfasst wird. Dieses Feld ist nur sichtbar, wenn du die Berechtigung „Lesen" für **people:time-tracking** hast. Standardmäßig ist dein eigener Benutzer vorausgewählt, sofern deine eigene Zeiterfassung aktiv ist. Ohne diese Berechtigung wird automatisch dein eigener Benutzer zugeordnet – das Feld erscheint dann nicht. |
| Projekt | Auswahl | Nein | Ordnet den Zeitraum einem Projekt zu. Dieses Feld ist nur sichtbar, wenn mindestens ein Projekt für die Zeiterfassung aktiviert ist. Sind keine Projekte konfiguriert, wird das Feld nicht angezeigt. |
| von | Datum & Uhrzeit | Ja | Startzeit des Zeitraums. Standardmäßig auf die volle Stunde vor einer Stunde voreingestellt (Beispiel: Wenn es 14:23 Uhr ist, wird 13:00 Uhr vorgeschlagen). Wenn du den Von-Zeitpunkt änderst, wird das Bis-Feld automatisch angepasst – in der Regel auf eine Stunde später. Bei Nachtschichten (wenn die Endzeit nach Mitternacht liegt) wird das Datum im Bis-Feld automatisch auf den Folgetag gesetzt. |
| bis | Datum & Uhrzeit | Ja | Endzeit des Zeitraums. Muss zeitlich nach dem Von-Zeitpunkt liegen. |
| Beschreibung | Textfeld | Nein | Freitextfeld zur Beschreibung der durchgeführten Tätigkeit. |

Nach dem Absenden des Formulars wird der neue Eintrag gespeichert und erscheint in der Tabelle.

## Tabellenansicht der Zeiterfassung

Die Tabelle zeigt alle erfassten Zeiträume an. Die Standardsortierung ist nach **von** absteigend, sodass die neuesten Einträge zuerst angezeigt werden.

### Spalten

| Spalte | Beschreibung |
|--------|--------------|
| Benutzer | Name des Benutzers, dem der Eintrag zugeordnet ist. Diese Spalte ist nur sichtbar, wenn du die Berechtigung „Lesen" für **time-tracking** hast. Die Spalte ist durchsuchbar und sortierbar. |
| Projekt | Name des zugeordneten Projekts. Diese Spalte ist nur sichtbar, wenn mindestens ein Projekt für die Zeiterfassung aktiviert ist. Die Spalte ist durchsuchbar und sortierbar. |
| von | Startdatum und -uhrzeit im Format TT.MM.JJJJ HH:MM. Sortierbar. |
| bis | Endzeit im Format HH:MM. Sortierbar. |
| Dauer | Automatisch berechnete Dauer des Zeitraums im Format HH:MM (z. B. 02:30 für zweieinhalb Stunden). Am Ende der Tabelle wird die Gesamtsumme aller aktuell angezeigten Einträge dargestellt. |
| Beschreibung | Freitextbeschreibung der Tätigkeit. Durchsuchbar über die Suchleiste. |

### Filter der Zeiterfassung

Oberhalb der Tabelle stehen dir folgende Filter zur Verfügung, um die angezeigten Einträge einzuschränken:

| Filter | Beschreibung |
|--------|--------------|
| Datum | Datumsbereich-Filter, mit dem du Einträge auf einen bestimmten Zeitraum eingrenzen kannst (z. B. „01.01.2026 – 31.01.2026"). |
| Projekt | Filtert die Einträge nach einem bestimmten Projekt. Das Feld ist durchsuchbar – du kannst den Projektnamen eintippen, um schneller das gewünschte Projekt zu finden. |
| Benutzer | Filtert die Einträge nach einem bestimmten Benutzer. |

## Aktionen in der Zeiterfassung

### Zeitraum erfassen (Kopfzeilen-Aktion)

Klicke auf die Schaltfläche **Zeitraum erfassen** oberhalb der Tabelle, um einen neuen Eintrag anzulegen. Es öffnet sich das oben beschriebene Formular. Wenn du keine Berechtigung „Lesen" für **people:time-tracking** hast, wird der Eintrag automatisch deinem eigenen Benutzer zugeordnet.

### Zeitraum bearbeiten (Zeilen-Aktion)

Klicke in der jeweiligen Zeile auf die Bearbeiten-Aktion, um einen bestehenden Zeiterfassungseintrag zu ändern. Es öffnet sich dasselbe Formular wie beim Erstellen, die Felder sind mit den bestehenden Werten vorausgefüllt. Nach dem Speichern werden die Änderungen sofort in der Tabelle übernommen.

### Zeitraum löschen (Zeilen-Aktion)

Klicke in der jeweiligen Zeile auf die Löschen-Aktion, um einen einzelnen Zeiterfassungseintrag zu entfernen. Es erscheint ein Bestätigungsdialog, bevor der Eintrag endgültig gelöscht wird.

### Massenlöschung (Bulk-Aktion)

Wähle über die Checkboxen in der Tabelle mehrere Einträge aus und nutze die Massenlöschung, um alle ausgewählten Zeiterfassungseinträge gleichzeitig zu löschen. Auch hier erscheint ein Bestätigungsdialog.

## Berechtigungen in der Zeiterfassung

Die Zugriffsmöglichkeiten auf die Zeiterfassung hängen von der Aktivierung des Tools und deiner Berechtigungsstufe ab:

- **Zugang zur Seite**: Die Seite **Zeiterfassung** ist nur zugänglich, wenn das Tool **Zeiterfassung** aktiviert ist oder du die Rolle „Zeiterfasst" besitzt.
- **Ohne Berechtigung „Lesen" für people:time-tracking**: Das Feld „Benutzer" wird im Formular nicht angezeigt, und die Spalte „Benutzer" ist in der Tabelle ausgeblendet.
- **Mit Berechtigung „Lesen" für people:time-tracking (oder höher)**: Du siehst das Feld „Benutzer" im Formular und kannst Zeiträume für andere Benutzer erfassen. Die Spalte „Benutzer" wird in der Tabelle angezeigt.

## Validierung & Fehlermeldungen in der Zeiterfassung

Beim Erstellen oder Bearbeiten eines Zeiterfassungseintrags können folgende Validierungsfehler auftreten:

| Fehler | Ursache | Lösung |
|--------|---------|--------|
| Pflichtfeld „von" nicht ausgefüllt | Du hast kein Startdatum bzw. keine Startzeit eingegeben. | Gib ein gültiges Datum und eine Uhrzeit im Feld „von" ein. |
| Pflichtfeld „bis" nicht ausgefüllt | Du hast kein Enddatum bzw. keine Endzeit eingegeben. | Gib ein gültiges Datum und eine Uhrzeit im Feld „bis" ein. |
| „bis" liegt vor „von" | Die eingegebene Endzeit liegt zeitlich vor der Startzeit. | Korrigiere das Feld „bis", sodass die Endzeit nach der Startzeit liegt. |
| Pflichtfeld „Benutzer" nicht ausgefüllt | Du hast keinen Benutzer ausgewählt (nur relevant, wenn das Feld sichtbar ist). | Wähle einen Benutzer aus der Auswahlliste aus. |

## Beziehungen der Zeiterfassung

- **Projekte**: Zeiterfassungseinträge können optional einem Projekt zugeordnet werden. Voraussetzung ist, dass mindestens ein Projekt für die Zeiterfassung konfiguriert und aktiviert ist. Ist kein Projekt konfiguriert, wird das Projektfeld weder im Formular noch in der Tabelle angezeigt.
- **Benutzer**: Jeder Zeiterfassungseintrag ist genau einem Benutzer zugeordnet. Der zugeordnete Benutzer wird entweder automatisch (dein eigener) oder manuell über das Benutzerfeld im Formular festgelegt.

---

## page: Duplicates

**Entity:** Duplicates  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/Duplicates.php`  
**Updated:** 2026-02-13 02:19:40  

# Dublettenmanagement

## Beschreibung

Die Seite **Dublettenmanagement** ermöglicht es, doppelte Kontakte (Dubletten) in der Kontaktdatenbank zu finden und zu bereinigen. Sie ist als eigene Seite innerhalb der Kontakt-Ressource angebunden.

**Breadcrumb-Navigation:** Kontakte > Dublettenmanagement

## Dubletten suchen

Über die Header-Aktion **„Dubletten finden"** wird ein Modal geöffnet, in dem die Suche konfiguriert werden kann.

### Felder im Modal

| Feld | Beschreibung |
|---|---|
| **Methode** | Aktuell fest auf `Fields` gesetzt (das Select-Feld ist nicht sichtbar). |
| **Felder** | Checkbox-Liste zur Auswahl der Vergleichsfelder. Verfügbare Optionen: **Email-Adresse**, **Name**, **Vorname**, **Nachname**. Mindestens ein Feld muss ausgewählt werden. |
| **Exakte Suche** | Toggle (Standard: aktiviert). Tooltip-Hilfe: *„Wenn die exakte Suche aktiviert ist, werden nur Ergebnisse gefunden, die genau mit dem Suchbegriff übereinstimmen. Ansonsten werden auch ähnlich geschriebene Begriffe berücksichtigt."* |

### Warnhinweis

Wenn bereits Dubletten aus einer früheren Suche vorhanden sind, wird eine Warnung angezeigt:
> **Achtung: Die zuvor erkannten Dubletten werden verworfen.**

### Ablauf der Suche

1. Beim Starten der Suche werden alle bestehenden Dubletten-Einträge gelöscht.
2. **Weniger als 300 Kontakte:** Die Suche wird synchron (sofort) ausgeführt.
3. **Ab 300 Kontakte:** Die Suche wird als Hintergrund-Job auf die Queue `long-running` geschoben. Es erscheint die Benachrichtigung: *„Wir suchen jetzt im Hintergrund nach Dubletten. Du bekommst eine Email, wenn wir fertig sind."*

## Ergebnistabelle

Nach der Suche werden die gefundenen Dubletten in einer Tabelle angezeigt.

### Spalten

| Spalte | Beschreibung |
|---|---|
| **Gemeinsamkeit** | Zeigt an, welche Übereinstimmung zwischen den Kontakten gefunden wurde. Durchsuchbar. |
| **Hauptkontakt** | Dropdown (SelectColumn) zur Auswahl, welcher Kontakt als Hauptkontakt behandelt wird. Zeigt alle beteiligten Kontakte mit Name und ID als Optionen. |
| *(Link-Icon)* | Icon-Spalte mit Link zum Hauptkontakt. Tooltip: *„Hauptkontakt öffnen"*. |
| **Weitere Kontakte** | Zeigt die Namen (mit ID) der sekundären Kontakte an. Durchsuchbar. HTML-formatiert. |
| **Infos** | Zusätzliche Informationen/Hinweise zum Dubletten-Eintrag. HTML-formatiert, Textumbruch aktiviert. |

## Massenaktionen (Bulk Actions)

Die folgenden Massenaktionen stehen in einem Dropdown (Breite: `md`) zur Verfügung. Alle erfordern eine Bestätigung vor der Ausführung.

### 1. Weitere Kontakte löschen (nur Hauptkontakt lassen)

- **Label:** *„Weitere Kontakte löschen (nur Hauptkontakt lassen)"*
- **Verhalten:** Löscht alle sekundären Kontakte des Dubletten-Eintrags. Nur der Hauptkontakt bleibt bestehen.
- **Hinweis:** Bei vielen ausgewählten Einträgen wird die Aktion als Queue-Job ausgeführt (`QueueableBulkAction`).

### 2. Hauptkontakt zu Segment hinzufügen; andere entfernen

- **Label:** *„Hauptkontakt zu Segment hinzufügen; andere entfernen"*
- **Formular:** Ein Select-Feld **Segmente** (Mehrfachauswahl, mindestens 1). Es werden nur nicht-dynamische Segmente angezeigt.
- **Verhalten:** Für jedes ausgewählte Segment:
  1. Alle Segment-Zugehörigkeiten der sekundären Kontakte in diesem Segment werden entfernt.
  2. Der Hauptkontakt wird dem Segment zugeordnet.
  3. Der Dubletten-Eintrag wird gelöscht.

### 3. Ignorieren/Ausblenden

- **Label:** *„Ignorieren/Ausblenden"*
- **Verhalten:** Löscht die ausgewählten Dubletten-Einträge, ohne die Kontakte selbst zu verändern. Die Dubletten-Paare werden damit nur aus der Liste entfernt.

## Workflow-Zusammenfassung

1. Seite „Dublettenmanagement" aufrufen.
2. **„Dubletten finden"** klicken und Suchkriterien (Felder, exakte Suche) konfigurieren.
3. Ergebnisliste prüfen: Hauptkontakt pro Dubletten-Gruppe festlegen (über Dropdown in der Spalte „Hauptkontakt").
4. Gewünschte Einträge auswählen und eine Massenaktion ausführen:
   - **Löschen**: Sekundäre Kontakte entfernen, nur Hauptkontakt behalten.
   - **Segment zuordnen**: Hauptkontakt einem Segment zuordnen, sekundäre Kontakte aus dem Segment entfernen, Dubletten-Eintrag löschen.
   - **Ignorieren**: Dubletten-Eintrag ausblenden, ohne Kontakte zu verändern.

## Berechtigungen

Im Code sind keine expliziten Berechtigungsprüfungen (Policies, Gates, `authorize`) auf dieser Seite implementiert. Der Zugang wird über die allgemeine Filament-Panel-Authentifizierung und die Kontakt-Ressource gesteuert.

## Fehlermeldungen / Hinweise

| Kontext | Meldung |
|---|---|
| Warnung bei erneuter Suche | *„Achtung: Die zuvor erkannten Dubletten werden verworfen."* |
| Hintergrund-Job gestartet (ab 300 Kontakte) | *„Wir suchen jetzt im Hintergrund nach Dubletten. Du bekommst eine Email, wenn wir fertig sind."* |

---

## page: Donations

**Entity:** Donations  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/Donations.php`  
**Updated:** 2026-02-13 02:18:44  

# Spenden (Donations)

## Übersicht

Die Seite **Spenden** ist eine Unterseite eines Kontakts innerhalb der Kontaktverwaltung. Sie zeigt alle Spenden an, die einem bestimmten Kontakt zugeordnet sind, in Form einer Tabelle. Die Seite befindet sich unter dem Navigations-Tab **Spenden** auf der Kontakt-Detailseite.

**Modellbezeichnung (Singular):** Spende
**Modellbezeichnung (Plural):** Spenden

---

## Zugriffsberechtigung

Die Seite ist nur sichtbar und aufrufbar, wenn der angemeldete Benutzer das Feature `donations` aktiviert hat. Ohne dieses Feature erscheint der Tab nicht in der Navigation.

---

## Tabellenspalten

| Spalte | Bezeichnung | Beschreibung |
|---|---|---|
| `date` | Datum | Datum der Spende. Sortierbar. Standardsortierung: neueste zuerst. |
| `financialEvent.description` | Beschreibung | Beschreibung des zugehörigen Finanzereignisses. Durchsuchbar. Ein-/ausblendbar. Wird nach einer konfigurierten Zeichenanzahl abgeschnitten; bei Abschneidung wird der volle Text als Tooltip angezeigt. |
| `project.name` | Projekt | Name des zugehörigen Projekts. Nur sichtbar, wenn das Feature `projects` aktiviert ist. Durchsuchbar, sortierbar, ein-/ausblendbar. Verlinkt auf die Spendenübersicht des jeweiligen Projekts. |
| `send_receipt` | Bescheinigung | Toggle-Schalter, der angibt, ob für diese Spende eine Spendenbescheinigung erstellt werden soll. Nur bearbeitbar, wenn der Benutzer die Berechtigung `write donations` hat. Ein-/ausblendbar. |
| `financialEvent.connectedAccountTransactionItem.connectedAccount.name` | Konto | Name des verbundenen Bankkontos. Nur sichtbar, wenn mehr als ein verbundenes Bankkonto existiert. Standardmäßig ausgeblendet, ein-/ausblendbar. |
| `amount` | Betrag | Spendenbetrag in der Währung des Mandanten. Rechtsbündig. Am Tabellenende wird eine Summe aller angezeigten Beträge dargestellt. |

---

## Tabellenverhalten

- **Standardsortierung:** Nach Datum, absteigend (neueste zuerst).
- **Zeilenlink:** Ein Klick auf eine Zeile öffnet die Detailansicht des zugehörigen Finanzereignisses.
- **Gruppierung:** Die Tabelle kann nach Projektname gruppiert werden (einklappbar).

---

## Filter

| Filter | Bezeichnung | Beschreibung |
|---|---|---|
| Projekt | Projekt | Mehrfachauswahl-Filter auf die zugeordneten Projekte. Alle Projekte werden vorgeladen. |

---

## Zeilenaktionen

Jede Zeile in der Tabelle kann bis zu drei Aktionen haben:

### 1. Einzelspendenbestätigung erstellen

- **Tooltip:** „Einzelspendenbestätigung erstellen"
- **Icon:** Dokument mit Plus-Zeichen
- **Sichtbar wenn:** Die Spende hat `send_receipt` aktiviert, es existiert noch keine Spendenbescheinigung für diese Spende, und der Kontakt hat eine gültige Adresse.
- **Ablauf:** Ein Modal öffnet sich mit der Überschrift „Einzelspendenbestätigung erstellen". Die Beschreibung zeigt den Kontaktnamen, den Betrag, das Datum und das Jahr der Spende an. Nach Bestätigung über den Button „Spendenbescheinigung erstellen" wird die Bescheinigung generiert. Bei Erfolg erscheint eine Benachrichtigung: „Spendenbescheinigung wurde erstellt".

### 2. Spendenbescheinigung anzeigen

- **Tooltip:** „Spendenbescheinigung anzeigen"
- **Icon:** Dokument mit Text
- **Sichtbar wenn:** Für die Spende bereits eine Spendenbescheinigung mit hinterlegtem PDF existiert.
- **Ablauf:** Öffnet ein seitliches Panel (Slide-over), das die Spendenbescheinigung als PDF-Vorschau anzeigt.

### 3. Spendenbescheinigung herunterladen

- **Tooltip:** „Spendenbescheinigung herunterladen"
- **Icon:** Cloud mit Pfeil nach unten
- **Sichtbar wenn:** Für die Spende bereits eine Spendenbescheinigung mit hinterlegtem PDF existiert.
- **Ablauf:** Löst den direkten Download der Spendenbescheinigung als PDF-Datei aus.

---

## Berechtigungen

| Berechtigung | Auswirkung |
|---|---|
| Feature `donations` | Zugriff auf die gesamte Seite |
| Feature `projects` | Sichtbarkeit der Spalte „Projekt" |
| `write donations` | Bearbeitung des Toggle-Schalters „Bescheinigung" |
| `write contacts` | Erstellen, Bearbeiten und Löschen von Spendensätzen (über die Basisklasse `ContactResourceSubPage`) |

---

## Workflow

1. Spenden werden über die Spendenerfassung oder den Import erfasst und einem Kontakt zugeordnet.
2. Auf der Kontakt-Unterseite „Spenden" sieht der Benutzer alle Spenden des Kontakts in einer Tabelle.
3. Über den Toggle „Bescheinigung" kann markiert werden, ob für eine Spende eine Spendenbescheinigung erstellt werden soll.
4. Wenn eine Spende für eine Bescheinigung markiert ist, noch keine Bescheinigung existiert und der Kontakt eine gültige Adresse hat, kann über die Zeilenaktion eine Einzelspendenbestätigung erstellt werden.
5. Nach Erstellung der Bescheinigung kann diese über die Zeilenaktionen angezeigt oder heruntergeladen werden.

---

## page: DonationReceipts

**Entity:** DonationReceipts  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/DonationReceipts.php`  
**Updated:** 2026-02-13 02:17:31  

## Beschreibung

Die Seite **Spendenbescheinigungen** ist eine Unterseite der Kontakt-Detailansicht. Sie zeigt alle Spendenbescheinigungen an, die einem bestimmten Kontakt zugeordnet sind. Die Seite ist als Tabelle aufgebaut und ermöglicht das Anzeigen und Herunterladen von erstellten Spendenbescheinigungen.

## Zugriffsberechtigung

Die Seite ist nur sichtbar und erreichbar, wenn der angemeldete Benutzer das Feature **`donations`** freigeschaltet hat. Ohne dieses Feature wird die Seite nicht in der Navigation angezeigt und kann auch nicht direkt aufgerufen werden.

## Navigation

- **Navigations-Label:** „Spendenbescheinigungen"
- **Model-Label (Singular):** „Spendenbescheinigung"
- **Model-Label (Plural):** „Spendenbescheinigungen"

Die Seite erscheint als Tab/Unterseite innerhalb der Kontakt-Ressource.

## Tabellenspalten

| Spalte | Label | Beschreibung |
|--------|-------|-------------|
| `created_at` | Datum | Erstellungsdatum der Spendenbescheinigung, formatiert als Datum. |
| `type` | Typ | Art der Spendenbescheinigung. Sortierbar. |

Die Tabelle ist standardmäßig nach **Datum absteigend** sortiert (neueste zuerst).

## Aktionen

Die Tabelle enthält **keine Header-Aktionen** (z. B. kein „Erstellen"-Button). Es können also keine neuen Spendenbescheinigungen direkt auf dieser Seite erstellt werden.

Für jede Zeile stehen folgende Aktionen zur Verfügung:

### Spendenbescheinigung anzeigen

- **Icon:** Dokument-Text (`document-text`)
- **Verhalten:** Öffnet die Spendenbescheinigung in einem seitlichen Slide-Over-Panel als eingebettetes PDF (Iframe).
- **Sichtbarkeit:** Nur sichtbar, wenn für die Spendenbescheinigung ein Dokument in der Mediensammlung `receipt` vorhanden ist.
- **Hinweis:** Es handelt sich um eine reine Ansicht – es gibt keine Speichern- oder Abbrechen-Schaltflächen.

### Spendenbescheinigung herunterladen

- **Icon:** Cloud-Download (`cloud-arrow-down`)
- **Verhalten:** Lädt die Spendenbescheinigung als Datei herunter.
- **Sichtbarkeit:** Nur sichtbar, wenn für die Spendenbescheinigung ein Dokument in der Mediensammlung `receipt` vorhanden ist.

## Workflow

1. Der Benutzer öffnet einen Kontakt und navigiert zum Tab **„Spendenbescheinigungen"**.
2. Die Tabelle zeigt alle dem Kontakt zugeordneten Spendenbescheinigungen mit Datum und Typ.
3. Hat eine Bescheinigung ein zugehöriges Dokument, kann der Benutzer:
   - über das Dokument-Icon die Bescheinigung direkt im Browser ansehen, oder
   - über das Download-Icon die Bescheinigung herunterladen.
4. Bescheinigungen ohne zugehöriges Dokument zeigen keine Aktions-Icons.

## Hinweise

- Die Erstellung von Spendenbescheinigungen erfolgt **nicht** auf dieser Seite, sondern über die zentrale Spendenverwaltung.
- Die Seite zeigt ausschließlich bereits erstellte Bescheinigungen an.
- Schreibzugriffe auf der Tabelle (Bearbeiten, Löschen) sind nur verfügbar, wenn der Benutzer die Berechtigung **„write contacts"** besitzt (gesteuert durch die übergeordnete Klasse `ContactResourceSubPage`).

---

## page: CreateContact

**Entity:** CreateContact  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/CreateContact.php`  
**Updated:** 2026-02-13 02:16:47  

# CreateContact – Neuen Kontakt anlegen

## Überblick

Die Seite **CreateContact** ermöglicht das Anlegen eines neuen Kontakts innerhalb der Filament-App-Oberfläche. Sie gehört zur `ContactResource` und basiert auf Filaments `CreateRecord`-Seite.

## Berechtigung

Der Zugriff auf diese Seite erfordert die Berechtigung **`write contacts`**. Nur authentifizierte Benutzer mit dieser Berechtigung können die Seite aufrufen.

## Kontakttypen

Es können drei Kontakttypen angelegt werden:

| Typ | Wert | Beschreibung |
|---|---|---|
| Person | `person` | Einzelperson |
| Organisation | `organization` | Organisation/Unternehmen |
| Ehepaar | `couple` | Paar bestehend aus zwei Personen |

## Felder

Die Formularfelder variieren je nach gewähltem Kontakttyp. Die folgenden Felder stammen aus der `ContactResource`:

### Allgemeine Felder (alle Typen)
- **Typ** – Pflichtfeld, Auswahl des Kontakttyps
- **Email-Adresse** (`email`)
- **Webseite** (`website`)
- **Segmente** – Zuordnung zu Segmenten (Hinweis: *„Ein Segment ist eine Gruppe, zu der beliebig viele Kontakte gehören können."*). Nach dem Anlegen werden zugeordnete Segmente automatisch als abonniert und bestätigt markiert.
- **Sprache** (`language`)
- **Anrede** (`salutation`)
- **Umsatzsteuer-ID** (`vat_id`)
- **Spendenbescheinigungzustellung** (`donation_receipt_delivery_method`)

### Felder für Typ „Person"
- **Vorname** (`first_name`)
- **Nachname** (`last_name`)
- **Zweiter Vorname** (`middle_name`)
- **Geburtsname** (`birth_name`)
- **Rufname** (`call_name`)
- **Titel** (`title`)
- **Geschlecht** (`gender`)
- **Geburtstag** (`birthday`)
- **Sterbedatum** (`date_of_death`)

### Felder für Typ „Organisation"
- **Name** (`name`)

### Felder für Typ „Ehepaar"
- **Person 1**: Vorname (`first_name`), Nachname (`last_name`)
- **Person 2**: Vorname (`first_name_2`), Nachname (`last_name_2`)

### Weitere Felder
- **Kommunikationskanäle** – Repeater-Feld für mehrere Einträge
- **Beziehungen** – Repeater-Feld für Kontaktbeziehungen (nur für Person und Organisation)
- **Kontaktnummer** / **Mitgliedsnummer**
- **Avatar** – Bilddatei-Upload
- **Mitgliedschaftszeiten** – Repeater-Feld für Mitgliedschaftsperioden

## Workflow

1. Benutzer öffnet die Seite „Neuen Kontakt anlegen".
2. Benutzer wählt einen **Typ** (Person, Organisation oder Ehepaar).
3. Je nach Typ werden die relevanten Formularfelder angezeigt.
4. Benutzer füllt die Felder aus.
5. Benutzer klickt auf die Erstellen-Schaltfläche.

### Duplikaterkennung

Vor dem Speichern prüft das System, ob ein ähnlicher Kontakt bereits existiert. Dazu werden die Felder `first_name`, `last_name`, `email` und `name` herangezogen.

- **Kein Duplikat gefunden**: Der Kontakt wird direkt angelegt.
- **Mögliches Duplikat gefunden**: Es erscheint ein Bestätigungsdialog:
  - **Überschrift**: „Mögliches Duplikat"
  - **Inhalt**: „Dieser Kontakt scheint schon vorhanden zu sein. Du kannst ihn hier überprüfen: [Name des bestehenden Kontakts] (in neuem Fenster öffnen). Willst du ihn trotzdem anlegen?"
  - **Bestätigen-Schaltfläche**: „Neuen Kontakt anlegen" (rot markiert)
  - **Abbrechen-Schaltfläche**: primärfarbig markiert

### Sonderbehandlung Ehepaar

Wird der Typ „Ehepaar" gewählt, wird über `Contact::createCouple()` ein Paar-Kontakt aus den Daten beider Personen erstellt.

### Nach dem Erstellen

Nach erfolgreichem Anlegen werden alle zugeordneten Segment-Zugehörigkeiten automatisch als abonniert und bestätigt gesetzt (`ensureIsSubscribedAndConfirmed`).

## Validierung

### Pflichtfelder je Typ

- **Person**: Mindestens eines der Felder **Vorname**, **Nachname** oder **Email-Adresse** muss ausgefüllt sein.
- **Organisation**: Mindestens eines der Felder **Name** oder **Email-Adresse** muss ausgefüllt sein.

### Fehlermeldung

Wenn die Mindestanforderungen nicht erfüllt sind, erscheint die Meldung:

> „Mindestens eines der Felder muss ausgefüllt sein"

## Datenverarbeitung

Das Feld `segments` wird vor dem Speichern aus den Formulardaten entfernt (`mutateFormDataBeforeCreate`). Die Segment-Zuordnungen werden separat über Relationen verarbeitet.

---

## page: ContactResourceSubPage

**Entity:** ContactResourceSubPage  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/ContactResourceSubPage.php`  
**Updated:** 2026-02-13 02:15:47  

## Übersicht

`ContactResourceSubPage` ist eine abstrakte Basisklasse für Unterseiten innerhalb der Kontakt-Ressource (`ContactResource`). Sie erbt von Filaments `ManageRelatedRecords` und stellt eine einheitliche Tabellenstruktur für die Verwaltung von verknüpften Datensätzen eines Kontakts bereit.

Konkrete Unterseiten (z. B. für Anmerkungen, Finanzereignisse, Dokumente etc.) erben von dieser Klasse und überschreiben die Methode `setupTable()`, um ihre spezifischen Spalten und Formulare zu definieren.

## Verwendete Traits

- **ContactBreadcrumbs** – Stellt die Breadcrumb-Navigation innerhalb der Kontakt-Ressource bereit.
- **HasColoredBadge** – Ermöglicht farbige Badges in der Navigation.

## Navigation

Das Navigationslabel wird automatisch aus dem Klassennamen der konkreten Unterseite abgeleitet. Der Klassenname wird in Kebab-Case umgewandelt und als Schlüssel in der Übersetzungsdatei `general.php` nachgeschlagen.

**Beispiele möglicher Navigationslabels** (abhängig vom konkreten Klassennamen):

| Klassenname | Übersetzungsschlüssel | Deutsches Label |
|---|---|---|
| `Notes` | `general.notes` | Anmerkungen |
| `FinancialEvents` | `general.financial-events` | Finanzereignisse |
| `Documents` | `general.documents` | Dokumente |
| `Donations` | `general.donations` | Spenden |
| `Communications` | `general.communications` | Kommunikation |

Das Navigations-Icon ist standardmäßig auf einen leeren String gesetzt (kein Icon).

## Beziehung (Relationship)

Der Name der Eloquent-Beziehung wird ebenfalls automatisch aus dem Klassennamen abgeleitet – in CamelCase. Beispiel: Klassenname `FinancialEvents` → Beziehung `financialEvents`.

## Tabelle

Die Methode `table()` baut eine Filament-Tabelle mit folgender Struktur auf:

### Header-Aktionen

| Aktion | Deutsches Label | Bedingung |
|---|---|---|
| **Erstellen** (`CreateAction`) | „Erstellen" | Nur sichtbar wenn Berechtigung `write contacts` vorhanden |

### Zeilen-Aktionen

Zeilen-Aktionen sind **nur verfügbar**, wenn der angemeldete Benutzer die Berechtigung `write contacts` besitzt:

| Aktion | Tooltip (Deutsch) | Beschreibung |
|---|---|---|
| **Bearbeiten** (`EditAction`) | „Bearbeiten" | Öffnet das Bearbeitungsformular für den Datensatz |
| **Löschen** (`DeleteAction`) | „Löschen" | Löscht den Datensatz |
| *Zusätzliche Aktionen* | – | Konkrete Unterseiten können über `getExtraTableActions()` weitere Aktionen hinzufügen |

### Leerer Zustand

Die Tabelle zeigt **keine Beschreibung** im leeren Zustand (`emptyStateDescription` ist deaktiviert).

## Berechtigungen

Die Komponente prüft die Berechtigung über Laravels Gate-System:

- **`write contacts`** – Wird benötigt, um:
  - Neue Datensätze zu erstellen (Header-Aktion „Erstellen")
  - Bestehende Datensätze zu bearbeiten (Zeilen-Aktion „Bearbeiten")
  - Bestehende Datensätze zu löschen (Zeilen-Aktion „Löschen")
  - Zusätzliche Zeilen-Aktionen auszuführen

Benutzer **ohne** diese Berechtigung sehen die Tabelle im Nur-Lese-Modus: keine Header-Aktionen und keine Zeilen-Aktionen.

## Erweiterungspunkte

Konkrete Unterseiten können folgende Methoden überschreiben:

| Methode | Zweck |
|---|---|
| `setupTable(Table $table): Table` | Definiert Spalten, Filter, Formulare und weitere Tabellenkonfiguration |
| `getExtraTableActions(): array` | Fügt zusätzliche Zeilen-Aktionen nach „Bearbeiten" und „Löschen" hinzu |

## Workflow

1. Der Benutzer navigiert zu einem Kontakt und wählt eine Unterseite (z. B. „Anmerkungen") in der Navigation.
2. Die Tabelle zeigt die verknüpften Datensätze an.
3. **Mit Berechtigung `write contacts`:**
   - Über „Erstellen" in der Kopfzeile kann ein neuer Datensatz angelegt werden.
   - Über „Bearbeiten" in der Zeile kann ein bestehender Datensatz geändert werden.
   - Über „Löschen" in der Zeile kann ein Datensatz entfernt werden.
4. **Ohne Berechtigung `write contacts`:**
   - Die Tabelle wird im Nur-Lese-Modus angezeigt. Es sind keine Aktionen verfügbar.

---

## page: ContactBreadcrumbs

**Entity:** ContactBreadcrumbs  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/ContactBreadcrumbs.php`  
**Updated:** 2026-02-13 02:15:14  

## Beschreibung

`ContactBreadcrumbs` ist ein PHP-Trait, der in mehreren Seiten der `ContactResource` eingebunden wird. Er stellt zwei Funktionen bereit:

1. **Breadcrumb-Navigation** – Erzeugt die Brotkrümelnavigation für Kontakt-Unterseiten.
2. **Seitentitel** – Ermittelt einen aussagekräftigen Titel für den aktuell angezeigten Kontakt.

## Verwendung

Der Trait wird in folgenden Seiten eingesetzt:

- `EditContact`
- `Overview`
- `PersonalPage`
- `Newsletters`
- `ContactResourceSubPage`

## Funktionen

### `getBreadcrumbs(): array`

Gibt ein Breadcrumb-Array zurück. Der einzige Eintrag verlinkt auf die Kontaktliste (`contacts.index`) mit dem Label **„Kontakte"** (Translation-Key: `general.contacts`).

### `getTitle(): string|Htmlable`

Ermittelt den Seitentitel anhand der Daten des aktuellen Kontakt-Datensatzes (`$this->record`). Die Logik folgt einer Fallback-Kette:

| Priorität | Bedingung | Angezeigter Titel |
|-----------|-----------|-------------------|
| 1 | `name` ist ausgefüllt | Name des Kontakts |
| 2 | `email` ist ausgefüllt | E-Mail-Adresse des Kontakts |
| 3 | `contact_number` ist ausgefüllt | `#` + Kontaktnummer |
| 4 | Keines der obigen Felder | `ID` + Datenbank-ID |

### Berechtigungen

Wenn der angemeldete Benutzer ein **Organisations-Administrator** ist (`auth()->user()->is_organization_admin`) **und** dem Kontakt ein Benutzer zugeordnet ist (`$this->record->user`), wird zusätzlich zum Titel ein User-Link (`<x-user-link>`) angezeigt. Dieser verlinkt auf das Profil des verknüpften Benutzers.

Für Nicht-Admins wird kein User-Link angezeigt.

## Felder / Daten

Der Trait greift auf folgende Felder des Kontakt-Datensatzes zu:

- `name` – Name des Kontakts
- `email` – E-Mail-Adresse
- `contact_number` – Kontaktnummer
- `id` – Datenbank-ID
- `user` – Verknüpfter Benutzer (Relation)

## Aktionen

Keine eigenen Aktionen. Der Trait stellt ausschließlich Darstellungslogik bereit (Breadcrumbs und Seitentitel).

## Fehlermeldungen

Keine eigenen Fehlermeldungen. Der Trait wirft keine Exceptions und gibt keine Validierungsfehler aus.

## Workflow

1. Benutzer navigiert zu einer Kontakt-Detailseite (z. B. Bearbeiten, Übersicht, Newsletter).
2. Der Trait stellt die Breadcrumb-Navigation bereit: **Kontakte** → aktuelle Seite.
3. Der Seitentitel wird anhand der verfügbaren Kontaktdaten ermittelt (Name → E-Mail → Kontaktnummer → ID).
4. Ist der Benutzer Organisations-Administrator und ein verknüpfter Benutzer vorhanden, erscheint ein zusätzlicher Link zum Benutzerprofil neben dem Titel.

---

## page: Addresses

**Entity:** Addresses  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/Addresses.php`  
**Updated:** 2026-02-13 02:14:42  

# Adressen

## Beschreibung

Die Seite **Adressen** ist eine Unterseite eines Kontakts. Sie ermöglicht das Verwalten aller Adressen, die einem Kontakt zugeordnet sind. Adressen können erstellt, bearbeitet, gelöscht und als aktive Adresse festgelegt werden.

Die Seite ist über die Navigation innerhalb eines Kontakts unter dem Label **Adressen** erreichbar.

## Tabelle

Die Tabelle zeigt alle Adressen des Kontakts mit folgenden Spalten:

| Spalte | Beschreibung | Ein-/Ausblendbar |
|---|---|---|
| **Typ** | Der Adresstyp (siehe unten) | Ja |
| **Straße und Hausnummer** | Zeigt Adresszeile 1, ergänzt um Adresszeile 2 (kommagetrennt), falls vorhanden | Nein |
| **PLZ** | Postleitzahl | Nein |
| **Ort** | Stadt/Ort | Nein |
| **Bundesland** | Bundesland/Region (abhängig vom gewählten Land) | Ja |
| **Land** | Ländername | Ja |

Die aktuell aktive Adresse des Kontakts wird in der Tabelle blau hinterlegt dargestellt (`bg-blue-100`).

## Formular (Erstellen / Bearbeiten)

Das Formular ist dreispaltig aufgebaut und enthält folgende Felder:

| Feld | Label | Typ | Pflichtfeld |
|---|---|---|---|
| `type` | Typ | Auswahl (Select) | Nein |
| `line1` | Adresszeile 1 | Textfeld | Ja |
| `line2` | Adresszeile 2 | Textfeld | Nein |
| `postal_code` | PLZ | Textfeld | Ja |
| `city` | Ort | Textfeld | Ja |
| `country` | Land | Länderauswahl (durchsuchbar) | Nein |
| `state` | Bundesland | Auswahl (Select) | Nein |

Das Feld **Bundesland** ist dynamisch: Die verfügbaren Optionen werden abhängig vom ausgewählten **Land** geladen. Ohne Länderauswahl stehen keine Bundesländer zur Verfügung.

### Adresstypen

Folgende Adresstypen stehen zur Auswahl:

| Wert | Label |
|---|---|
| `private` | Privatadresse |
| `business` | Geschäftsadresse |
| `billing` | Rechnungsadresse |
| `shipping` | Lieferadresse |
| `headquarters` | Firmensitz |
| `work` | Arbeitsadresse |
| `congregation` | Gemeindeadresse |

## Aktionen

### Tabellenaktionen (pro Zeile)

Die folgenden Aktionen stehen pro Tabellenzeile zur Verfügung (nur mit Schreibberechtigung):

- **Bearbeiten** – Öffnet das Formular zum Bearbeiten der Adresse.
- **Löschen** – Löscht die Adresse.
- **Als aktive Adresse festlegen** – Setzt die Adresse als aktive Adresse des Kontakts. Diese Aktion erfordert eine Bestätigung. Sie ist nur sichtbar, wenn die Adresse nicht bereits die aktive Adresse ist. Das Icon ist ein Häkchen.

### Kopfzeilen-Aktion

- **Erstellen** – Erstellt eine neue Adresse für den Kontakt (nur mit Schreibberechtigung).

## Berechtigungen

Alle Schreibaktionen (Erstellen, Bearbeiten, Löschen, Aktive Adresse festlegen) sind nur verfügbar, wenn der angemeldete Benutzer die Berechtigung `write contacts` besitzt. Ohne diese Berechtigung wird die Tabelle nur lesend angezeigt, ohne Aktionsbuttons.

## Workflow

1. Benutzer navigiert zum Kontakt und öffnet die Unterseite **Adressen**.
2. Alle vorhandenen Adressen werden in der Tabelle angezeigt. Die aktive Adresse ist blau hervorgehoben.
3. Über den Erstellen-Button kann eine neue Adresse mit Typ, Adresszeilen, PLZ, Ort, Land und Bundesland angelegt werden.
4. Bestehende Adressen können über die Zeilen-Aktionen bearbeitet oder gelöscht werden.
5. Über das Häkchen-Icon kann eine andere Adresse als aktive Adresse festgelegt werden. Dies erfordert eine Bestätigung.

---

## page: ActivityPeriods

**Entity:** ActivityPeriods  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource/Pages/ActivityPeriods.php`  
**Updated:** 2026-02-13 02:14:00  

# ActivityPeriods

## Übersicht

Die Komponente **ActivityPeriods** ist eine Unterseite der Kontakt-Ressource (`ContactResource`). Sie zeigt Aktivitätszeiträume eines Kontakts in einer Tabelle an und gehört zum Bereich **Zeiterfassung**.

Sie erbt von `ContactResourceSubPage` (die wiederum `ManageRelatedRecords` erweitert) und verwaltet die Relation `activityPeriods` des jeweiligen Kontakts.

## Zugriffsbedingungen

Die Seite ist nur sichtbar und aufrufbar, wenn **beide** Bedingungen erfüllt sind:

1. Der eingeloggte Benutzer hat das Feature **`time-tracking`** (Zeiterfassung) aktiviert.
2. Beim betreffenden Kontakt ist das Feld `time_tracking_active` auf `true` gesetzt.

Ist eine der Bedingungen nicht erfüllt, wird die Seite nicht angezeigt (`canAccess` gibt `false` zurück).

## Navigationslabel

Das Navigationslabel wird aus dem Schlüssel `general.activity-periods` geladen. Dieser Schlüssel existiert in der Übersetzungsdatei `lang/de/general.php` nicht explizit — der angezeigte Label-Text ist daher `activity-periods` (der rohe Schlüssel).

## Tabellenspalten

Die Tabelle enthält folgende Spalten:

| Spalte | Feld | Label (deutsch) | Format |
|---|---|---|---|
| Von | `from` | **von** | Datum & Uhrzeit (`dateTime`) |
| Bis | `until` | **bis** | Uhrzeit (`time`) |
| Beschreibung | `description` | **Beschreibung** | Text |

### Standardsortierung

Die Tabelle ist standardmäßig nach dem Feld `from` **absteigend** sortiert (neueste Einträge zuerst).

## Aktionen

Die verfügbaren Aktionen werden von der Elternklasse `ContactResourceSubPage` bereitgestellt und sind **an die Berechtigung `write contacts` gebunden**:

### Wenn der Benutzer die Berechtigung `write contacts` hat:

| Aktion | Typ | Tooltip |
|---|---|---|
| Erstellen | Header-Aktion (über der Tabelle) | — |
| Bearbeiten | Zeilen-Aktion | **Bearbeiten** (`actions.edit`) |
| Löschen | Zeilen-Aktion | **Löschen** (`actions.delete`) |

### Wenn der Benutzer die Berechtigung `write contacts` nicht hat:

Es werden keine Aktionen angezeigt — die Tabelle ist rein lesend.

## Workflow

1. Der Benutzer öffnet einen Kontakt in der Kontakt-Ressource.
2. Falls das Feature `time-tracking` aktiv ist und der Kontakt `time_tracking_active` hat, erscheint die Unterseite **ActivityPeriods** in der Navigation.
3. Die Seite zeigt eine Tabelle aller Aktivitätszeiträume des Kontakts.
4. Benutzer mit `write contacts`-Berechtigung können:
   - Über den **Erstellen**-Button einen neuen Zeitraum anlegen.
   - Über die **Bearbeiten**-Aktion in einer Zeile einen bestehenden Zeitraum bearbeiten.
   - Über die **Löschen**-Aktion in einer Zeile einen Zeitraum entfernen.
5. Benutzer ohne `write contacts`-Berechtigung können die Daten nur einsehen.

## Zugehörige Übersetzungen

Aus `lang/de/general.php`:

- `general.from` → **von**
- `general.until` → **bis**
- `general.description` → **Beschreibung**
- `general.time-tracking` → **Zeiterfassung**

Aus `lang/de/people.php`:

- `people.activity-periods.record-period` → **Zeitraum erfassen**
- `people.activity-periods.edit-period` → **Zeitraum bearbeiten**
- `people.activity-periods.delete-period` → **Zeitraum löschen**

Aus `lang/de/actions.php`:

- `actions.edit` → **Bearbeiten**
- `actions.delete` → **Löschen**

## Berechtigungen (Zusammenfassung)

| Prüfung | Auswirkung |
|---|---|
| `auth()->user()->hasFeature('time-tracking')` | Seite sichtbar/zugänglich |
| `$record->time_tracking_active` | Seite sichtbar/zugänglich |
| `auth()->user()->can('write contacts')` | Erstellen-, Bearbeiten- und Löschen-Aktionen verfügbar |

## Fehlermeldungen

Die Komponente definiert keine eigenen Fehlermeldungen. Es greifen die Standard-Fehlermeldungen von Filament (z.B. bei Validierungsfehlern in den Erstellen-/Bearbeiten-Formularen).

---

# RESOURCE

## resource: App\Filament\App\Clusters\News\Resources\WebsiteNewsResource

**Entity:** App\Filament\App\Clusters\News\Resources\WebsiteNewsResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/News/Resources/WebsiteNewsResource.php`  
**Updated:** 2026-02-17 15:22:06  

# News (Webseite)

## Übersicht
Im Bereich **News** kannst du Neuigkeiten für deine Webseite erstellen und verwalten. Du kannst News-Beiträge mit Kategorie, Titel, Veröffentlichungsdatum, Bild und Inhalt anlegen, bearbeiten und löschen.

## Navigation
Den Bereich **News** findest du im Cluster **News** im Mandanten-Bereich der Anwendung. Das Menü-Icon ist eine Zeitung (Newspaper-Icon). Innerhalb des News-Clusters gibt es neben den News-Beiträgen auch den Bereich **Kategorien**, in dem du die Kategorien für deine Beiträge verwalten kannst.

## Berechtigungen für News
Um auf den News-Bereich zugreifen zu können, muss das Tool **Webseite** aktiviert sein. Ohne aktiviertes Webseite-Tool ist der gesamte News-Bereich nicht sichtbar.

## Formularfelder für News-Beiträge

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Kategorie | Auswahl | Ja | Wähle eine bestehende News-Kategorie aus, der der Beitrag zugeordnet wird. |
| Titel | Textfeld | Ja | Der Titel des News-Beitrags. |
| Veröffentlichungsdatum | Datum & Uhrzeit | Ja | Der Zeitpunkt, ab dem der Beitrag veröffentlicht wird. Beim Erstellen eines neuen Beitrags wird dieses Feld automatisch auf den aktuellen Zeitpunkt gesetzt. |
| Bild | Bild-Upload | Nein | Ein optionales Bild zum News-Beitrag. Nach dem Hochladen steht ein Bildeditor zur Verfügung, mit dem du den Bildausschnitt anpassen kannst. Der Editor unterstützt die Seitenverhältnisse 4:5 und 8:10. |
| Inhalt | Rich-Text-Editor | Ja | Der eigentliche Textinhalt des News-Beitrags. Du kannst den Text mit verschiedenen Formatierungsmöglichkeiten gestalten. |

## Tabellenansicht der News-Beiträge

Die Listenansicht zeigt alle vorhandenen News-Beiträge mit folgenden Spalten:

| Spalte | Durchsuchbar | Sortierbar |
|--------|-------------|------------|
| Veröffentlichungsdatum | Nein | Ja |
| Kategorie | Ja | Ja |
| Titel | Ja | Ja |

Die Standardsortierung erfolgt nach Veröffentlichungsdatum (neueste zuerst).

## Aktionen für News-Beiträge

- **Erstellen**: Über den Erstellen-Button oberhalb der Tabelle kannst du einen neuen News-Beitrag anlegen.
- **Bearbeiten**: Klicke auf das Bearbeiten-Symbol in der Tabellenzeile eines Beitrags, um ihn zu öffnen und anzupassen.
- **Massenlöschung**: Wähle mehrere Einträge über die Checkboxen in der Tabelle aus und lösche sie über die Bulk-Aktion.

## Validierung bei News-Beiträgen

Beim Erstellen oder Bearbeiten eines News-Beitrags werden folgende Felder geprüft:

- **Kategorie**: Muss ausgewählt werden.
- **Titel**: Muss ausgefüllt werden.
- **Veröffentlichungsdatum**: Muss angegeben werden. Da beim Erstellen automatisch der aktuelle Zeitpunkt eingetragen wird, ist dieses Feld in der Regel bereits vorausgefüllt.
- **Inhalt**: Muss ausgefüllt werden.

## Beziehungen der News-Beiträge

- **Kategorien**: Jeder News-Beitrag ist genau einer Kategorie zugeordnet. Die Kategorien werden im Bereich **Kategorien** innerhalb des News-Clusters verwaltet.

---

## resource: App\Filament\App\Clusters\Knowledge\Resources\KnowledgeEventResource

**Entity:** App\Filament\App\Clusters\Knowledge\Resources\KnowledgeEventResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Knowledge/Resources/KnowledgeEventResource.php`  
**Updated:** 2026-02-17 15:20:52  

# Veranstaltungen

## Übersicht

Auf der Seite **Veranstaltungen** findest du eine Übersicht aller Wissens-Veranstaltungen. Du kannst die Details einer Veranstaltung einsehen, um mehr über Inhalt, Datum und die beteiligten Experten zu erfahren.

Die Seite befindet sich im Bereich **Wissen** der Anwendung.

## Navigation

Die Veranstaltungen findest du in der Seitenleiste unter **Wissen → Veranstaltungen**.

## Tabellenansicht / Listenansicht

Die Veranstaltungen werden in einer Tabelle mit folgenden Spalten angezeigt:

| Spalte | Beschreibung |
|--------|-------------|
| **Tool** | Zeigt die Kategorie der Veranstaltung als farbiges Badge an. |
| **Datum** | Datum und Uhrzeit der Veranstaltung. |
| **Name** | Der Name bzw. Titel der Veranstaltung. |
| **Art** | Die Art der Veranstaltung. |
| **Von** | Die Experten, die die Veranstaltung durchführen. |

Die Tabelle ist standardmäßig nach **Datum** sortiert.

## Aktionen

### Veranstaltung ansehen

Durch Klick auf eine Veranstaltung in der Liste öffnet sich ein Detailfenster. Dort siehst du den Namen der Veranstaltung als Überschrift sowie weitere Informationen. Die Detailansicht dient ausschließlich der Anzeige – du kannst die Veranstaltung hier nicht bearbeiten.

## Beziehungen

Die Seite **Veranstaltungen** ist Teil des Bereichs **Wissen**, zu dem auch folgende Bereiche gehören:

- **Artikel** – Wissensartikel zu verschiedenen Themen
- **Beratung** – Beratungsangebote mit Terminbuchung per Videocall

---

## resource: App\Filament\App\Clusters\News\Resources\WebsiteNewsCategoryResource

**Entity:** App\Filament\App\Clusters\News\Resources\WebsiteNewsCategoryResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/News/Resources/WebsiteNewsCategoryResource.php`  
**Updated:** 2026-02-17 15:20:40  

# Kategorien (News)

## Übersicht

Im Bereich **Kategorien** kannst du Kategorien für News-Beiträge auf deiner Webseite verwalten. Kategorien helfen dabei, News-Beiträge thematisch zu gruppieren und zu organisieren, sodass Besucher deiner Webseite Inhalte leichter finden können.

**Hinweis:** Diese Funktion befindet sich aktuell noch in Entwicklung und ist derzeit nicht verfügbar.

## Navigation

Die News-Kategorien befinden sich im Cluster **News** innerhalb des Mandanten-Bereichs.

- **Menü-Icon:** Listensymbol
- **Voraussetzung:** Das Tool **Webseite** muss aktiviert sein, um auf die News-Kategorien zugreifen zu können.

## Formularfelder

Beim Erstellen oder Bearbeiten einer News-Kategorie stehen dir folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Titel | Textfeld (mehrsprachig) | Ja | Der Name der Kategorie. Du kannst den Titel in mehreren Sprachen eingeben, um die Kategorie für unterschiedliche Sprachversionen deiner Webseite anzupassen. |

## Tabellenansicht / Listenansicht

In der Listenansicht der News-Kategorien werden alle vorhandenen Kategorien in einer Tabelle angezeigt. Wenn noch keine Kategorien angelegt wurden, ist die Liste leer.

| Spalte | Durchsuchbar | Sortierbar |
|--------|-------------|------------|
| Titel | Ja | Ja |

Du kannst die Suchfunktion nutzen, um gezielt nach bestimmten Kategorien zu suchen. Über die Spaltenüberschrift lässt sich die Liste alphabetisch sortieren.

## Aktionen

Im Bereich News-Kategorien stehen dir folgende Aktionen zur Verfügung:

- **Bearbeiten:** Über die Zeilen-Aktion in der Listenansicht kannst du eine einzelne Kategorie bearbeiten.
- **Mehrfachauswahl löschen:** Du kannst mehrere Kategorien gleichzeitig auswählen und über die Bulk-Aktion löschen.

## Berechtigungen

Um mit den News-Kategorien arbeiten zu können, gelten folgende Voraussetzungen:

- Das Tool **Webseite** muss aktiviert sein.

## Validierung & Fehlermeldungen

Beim Erstellen oder Bearbeiten einer News-Kategorie können folgende Fehlermeldungen auftreten:

| Regel | Fehlermeldung | Ursache | Lösung |
|-------|---------------|---------|--------|
| Titel ist ein Pflichtfeld | Das Feld „Titel" ist erforderlich | Du hast keinen Titel für die Kategorie eingegeben. | Gib einen Titel für die Kategorie ein und speichere erneut. |

---

## resource: App\Filament\App\Clusters\Knowledge\Resources\KnowledgeArticleResource

**Entity:** App\Filament\App\Clusters\Knowledge\Resources\KnowledgeArticleResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Clusters/Knowledge/Resources/KnowledgeArticleResource.php`  
**Updated:** 2026-02-17 15:20:11  

# Artikel

## Übersicht

Im Bereich **Artikel** findest du Wissensartikel, die dir hilfreiche Informationen und Anleitungen bereitstellen. Die Artikel sind nach Kategorien gegliedert, sodass du schnell die passenden Inhalte findest.

## Navigation

Die Artikel findest du in der Seitenleiste unter **Wissen → Artikel**.

## Tabellenansicht / Listenansicht

Die Artikelliste zeigt dir alle verfügbaren Wissensartikel in einer übersichtlichen Tabelle mit folgenden Spalten:

| Spalte | Beschreibung |
|--------|-------------|
| Kategorie | Die Kategorie, der der Artikel zugeordnet ist |
| Name | Der Titel des Artikels |

## Aktionen

### Artikel anzeigen

Durch Klicken auf einen Artikel in der Liste öffnet sich ein Dialogfenster (Modal), das den vollständigen Artikelinhalt anzeigt. Der Titel des Artikels wird als Überschrift des Dialogfensters verwendet. Du kannst das Dialogfenster schließen, um zur Artikelliste zurückzukehren.

---

## resource: App\Filament\App\Resources\ContactResource

**Entity:** App\Filament\App\Resources\ContactResource  
**Type:** auto_generated  
**Version:** 4  
**File:** `app/Filament/App/Resources/ContactResource.php`  
**Updated:** 2026-02-14 22:17:37  

# Kontakte

## Übersicht
Die Kontaktverwaltung ist der zentrale Bereich zum Anlegen, Bearbeiten und Verwalten aller Kontakte deiner Organisation. Hier kannst du Einzelpersonen, Organisationen und Ehepaare erfassen, mit Segmenten gruppieren, Newsletter-Listen zuordnen und alle relevanten Informationen wie Adressen, Kommunikationskanäle, Anmerkungen und Spenden im Blick behalten.

## Navigation
Die Kontakte findest du in der Seitenleiste unter der Menügruppe **Menschen**. Das Icon ist eine Personengruppe.

**Voraussetzungen:** Das Tool **Kontakte** muss aktiviert sein, damit dieser Bereich sichtbar ist. Zusätzlich muss der Benutzer Zugriff auf alle Projekte haben.

## Listenansicht der Kontakte

### Voreingestellte Ansichten
Oberhalb der Kontakte-Tabelle kannst du zwischen verschiedenen Ansichten wechseln:

| Ansicht | Beschreibung | Voraussetzung |
|---|---|---|
| **Alle** | Zeigt alle Kontakte an (Standardansicht) | — |
| **Mitglieder** | Zeigt nur Kontakte mit Mitgliedszeiten an. Ein Badge zeigt die Anzahl der Mitglieder. | Das Tool **Mitglieder** muss aktiviert sein |
| **Spender** | Zeigt nur Kontakte mit Spenden an. Ein Badge zeigt die Anzahl der Spender. | Das Tool **Fundraising** muss aktiviert sein |

### Tabs zur Filterung nach Kontakttyp
Innerhalb jeder Ansicht kannst du zusätzlich nach Kontakttyp filtern:

- **Alle** – Zeigt alle Kontakttypen
- **Einzelperson** – Zeigt nur Einzelpersonen
- **Organisation** – Zeigt nur Organisationen
- **Ehepaar** – Zeigt nur Ehepaare

### Tabellenspalten
Die Kontakte-Tabelle ist standardmäßig nach **Name** sortiert. Viele Spalten sind zunächst ausgeblendet und können über das Spalten-Menü (Zahnrad-Icon oberhalb der Tabelle) eingeblendet werden.

| Spalte | Standardmäßig sichtbar | Durchsuchbar | Sortierbar | Voraussetzung |
|---|---|---|---|---|
| Kontaktnummer | Nein | Ja | Nein | — |
| Typ | Nein | Nein | Nein | — |
| Titel | Nein | Nein | Nein | — |
| Name | Ja | Ja | Ja | — |
| Vorname | Nein | Ja | Ja | — |
| Nachname | Nein | Ja | Ja | — |
| Mitgliedsnummer | Nein | Ja | Nein | Tool **Mitglieder** muss aktiviert sein |
| Rufname | Nein | Ja | Nein | — |
| Zweiter Vorname | Nein | Nein | Nein | — |
| Geburtsname | Nein | Nein | Nein | — |
| Anrede | Nein | Nein | Nein | — |
| Segmente | Ja | Nein | Nein | — |
| Newsletter-Listen | Nein | Nein | Nein | — |
| Email-Adresse | Ja | Ja | Nein | — |
| Webseite | Nein | Nein | Nein | — |
| Geburtstag | Nein | Nein | Ja | — |
| Sterbedatum | Nein | Nein | Ja | — |
| Geschlecht | Nein | Nein | Nein | — |
| Adresszeile 1 | Nein (sichtbar wenn keine voreingestellte Ansicht aktiv) | Nein | Nein | — |
| Postleitzahl | Nein (sichtbar wenn keine voreingestellte Ansicht aktiv) | Nein | Nein | — |
| Stadt | Nein (sichtbar wenn keine voreingestellte Ansicht aktiv) | Nein | Nein | — |
| Land | Nein | Nein | Nein | — |
| Sprache | Nein | Nein | Nein | — |
| Kommunikationskanäle | Nein | Nein | Nein | — |
| Postweg gesperrt | Nein | Nein | Nein | — |
| Anmerkungen | Nein | Nein | Nein | — |
| Mitglieds-Status | Nur in Ansicht „Mitglieder" sichtbar | Nein | Nein | Tool **Mitglieder** muss aktiviert sein |
| Mitglied seit | Nur in Ansicht „Mitglieder" sichtbar | Nein | Ja | Tool **Mitglieder** muss aktiviert sein |
| Mitglied bis | Nur in Ansicht „Mitglieder" sichtbar | Nein | Ja | Tool **Mitglieder** muss aktiviert sein |
| Spenden | Nein | Nein | Ja | — |
| Umsatzsteuer-ID | Nein | Nein | Nein | — |
| Erstellt am | Nein | Nein | Ja | — |

**Hinweis:** Deine Seiteneinstellungen (Filter, Sortierung, Spaltensuchen und Suchbegriff) werden in deiner Sitzung gespeichert und bleiben beim erneuten Aufrufen der Kontakte-Seite erhalten.

### Filter in der Kontaktliste

| Filter | Typ | Beschreibung | Voraussetzung |
|---|---|---|---|
| Mitglieds-Status | Auswahl (Aktives Mitglied / Inaktives Mitglied) | Filtert Kontakte nach aktuellem Mitgliedschaftsstatus | Tool **Mitglieder** muss aktiviert sein |
| Spenden | Ja/Nein/Alle | Filtert Kontakte mit oder ohne Spenden | — |
| Einzelpersonen von Paaren ausblenden | Ja/Nein/Alle | Blendet Einzelpersonen aus, die einem Ehepaar zugeordnet sind | — |
| Segmente | Mehrfachauswahl | Filtert Kontakte nach zugeordneten Segmenten | — |
| Newsletter-Listen | Mehrfachauswahl | Filtert Kontakte nach abonnierten Newsletter-Listen | — |
| Geschlecht | Auswahl (männlich / weiblich / divers) | Filtert Kontakte nach Geschlecht | — |
| Typ | Auswahl (Einzelperson / Organisation / Ehepaar) | Filtert Kontakte nach Kontakttyp | — |
| Postweg gesperrt | Ja/Nein/Alle | Filtert Kontakte nach gesperrtem Postweg | — |

### Seitengrößen
Du kannst die Anzahl der angezeigten Kontakte pro Seite anpassen. Verfügbare Seitengrößen: 5, 10, 25, 50, 100 und 200 Einträge pro Seite.

## Kontakt erstellen und bearbeiten – Formularfelder

Das Formular zum Erstellen und Bearbeiten eines Kontakts ist in zwei Tabs unterteilt: **Allgemein** und **Mitgliedschaft**.

### Tab: Allgemein

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Avatar | Bild-Upload | Nein | Profilbild des Kontakts. Das Bild wird automatisch rund zugeschnitten. |
| Kontaktnummer | Text | — | Wird automatisch beim Erstellen vergeben und kann nicht bearbeitet werden. |
| Typ | Auswahl | Ja | Einzelperson, Organisation oder Ehepaar. Standardwert: Einzelperson. Die Auswahl des Typs beeinflusst, welche weiteren Felder im Formular sichtbar sind. |
| Titel | Text | Nein | Nur sichtbar bei Typ „Einzelperson" oder „Ehepaar". |
| Name | Text | Ja (bei Organisation) | Nur sichtbar bei Typ „Organisation". |
| Vorname | Text | Ja (bei Einzelperson) | Bei Typ „Ehepaar" als „Person 1 - Vorname" beschriftet. Bei Typ „Organisation" nicht sichtbar. |
| Nachname | Text | Ja (bei Einzelperson) | Bei Typ „Ehepaar" als „Person 1 - Nachname" beschriftet. Bei Typ „Organisation" nicht sichtbar. |
| Rufname | Text | Nein | Nur sichtbar bei Typ „Einzelperson". |
| Zweiter Vorname | Text | Nein | Nur sichtbar bei Typ „Einzelperson". |
| Geburtsname | Text | Nein | Nur sichtbar bei Typ „Einzelperson". |
| Geburtstag | Datum | Nein | Nur sichtbar bei Typ „Einzelperson". |
| Sterbedatum | Datum | Nein | Nur sichtbar bei Typ „Einzelperson". |
| Sterbedatum ist geschätzt | Checkbox | Nein | Nur sichtbar bei Typ „Einzelperson". Markiere diese Option, wenn das genaue Sterbedatum nicht bekannt ist. |
| Geschlecht | Auswahl | Nein | männlich, weiblich oder divers. Nur sichtbar bei Typ „Einzelperson". |
| Person 2 - Vorname | Text | Nein | Nur sichtbar bei Typ „Ehepaar". Vorname der zweiten Person des Ehepaars. |
| Person 2 - Nachname | Text | Nein | Nur sichtbar bei Typ „Ehepaar". Nachname der zweiten Person des Ehepaars. |
| Sprache | Auswahl | Nein | Auswahl aus ca. 30 Sprachen (z. B. Deutsch, English, Français). Legt die bevorzugte Sprache des Kontakts fest. |
| Spendenbescheinigungen | Auswahl | Nein | Keine, Per Email oder Per Post. Hinweis: Dient aktuell nur zur Information. Die automatische Versendung von Spendenbescheinigungen ist in Entwicklung. |
| Segmente | Mehrfachauswahl | Nein | Auswahl bestehender Segmente. Das Feld ist durchsuchbar. Ein Segment ist eine Gruppe, zu der beliebig viele Kontakte gehören können. Du kannst in den Einstellungen unter **Kontakte > Segmente** weitere Segmente anlegen. Ein Kontakt kann mehreren Segmenten gleichzeitig angehören. |
| Email-Adresse | Email | Nein | Die E-Mail-Adresse des Kontakts. |
| Webseite | URL | Nein | Die Webseite des Kontakts. |
| Kommunikationskanäle | Beziehungsfeld | Nein | Hier verwaltest du Telefonnummern und weitere Kommunikationswege des Kontakts. |
| Beziehungen | Beziehungsfeld | Nein | Hier verwaltest du Beziehungen zu anderen Kontakten (z. B. Familie, Arbeitgeber). |
| Anrede | Textfeld (mehrzeilig) | Nein | Persönliche Anrede für Briefe und andere Korrespondenz (5 Zeilen). |
| Umsatzsteuer-ID | Text | Nein | Die Umsatzsteuer-Identifikationsnummer des Kontakts. |
| Eigene Felder | Variabel | Nein | Falls du in den Einstellungen eigene Felder für Kontakte definiert hast, erscheinen diese hier. Die Verwaltung eigener Felder findest du in den Einstellungen unter **Kontakte > Eigene Felder**. |

### Tab: Mitgliedschaft
Dieser Tab ist nur sichtbar, wenn der Kontakttyp **nicht** „Ehepaar" ist **und** das Tool **Mitglieder** aktiviert ist.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Mitgliedsnummer | Text | Nein | Eine frei eingebbare Mitgliedsnummer für den Kontakt. |
| Mitgliedszeiten | Repeater (Liste) | Nein | Du kannst mehrere Mitgliedszeiten anlegen, z. B. wenn ein Kontakt zwischenzeitlich ausgetreten und wieder eingetreten ist. Jeder Eintrag hat folgende Felder: |
| — Start | Datum | Ja | Beginn der Mitgliedschaft. |
| — Ende | Datum | Nein | Ende der Mitgliedschaft. Lasse dieses Feld leer, wenn die Mitgliedschaft aktuell noch läuft. |
| — Startdatum ist geschätzt | Checkbox | Nein | Markiere diese Option, wenn das genaue Startdatum nicht bekannt ist. |
| — Enddatum ist geschätzt | Checkbox | Nein | Markiere diese Option, wenn das genaue Enddatum nicht bekannt ist. |

## Detailansicht eines Kontakts

Die Detailansicht zeigt alle ausgefüllten Felder eines Kontakts an. Leere Felder werden automatisch ausgeblendet, sodass du nur die relevanten Informationen siehst. Zusätzlich werden folgende Informationen angezeigt:

- **Segmente** und **Newsletter-Listen** – als farbige Badges dargestellt
- **Ehepaar-Verknüpfung** – Ein Link zum verknüpften Ehepaar-Kontakt, falls der Kontakt zu einem Ehepaar gehört
- **Mitglieds-Status** – Ein Badge mit dem Status „Aktives Mitglied", wenn der Kontakt aktuell ein aktives Mitglied ist (nur sichtbar wenn das Tool **Mitglieder** aktiviert ist)
- **Kommunikationskanäle** – Eine Liste mit Typ (z. B. Telefon, Mobil), Wert und ggf. Sperr-Status
- **Beziehungen** – Eine Liste mit Beziehungstyp und einem klickbaren Link zum verknüpften Kontakt
- **Adressen** – Vollständige Adresse mit Aktiv-Status
- **Anmerkungen** – Überschrift, Inhalt und Wiedervorlage-Datum
- **Sterbedatum** – mit dem Hinweis „(geschätzt)" falls die Checkbox „Sterbedatum ist geschätzt" aktiviert ist
- **Eigene Felder** – Falls in den Einstellungen eigene Felder definiert wurden
- **Erstellt am** – Datum und Uhrzeit der Erstellung des Kontakts

Falls ein Kontakt noch keine Adressen, Anmerkungen oder Spenden hat, werden die entsprechenden Unterbereiche leer angezeigt mit der Möglichkeit, neue Einträge hinzuzufügen.

### Unterbereiche auf der Kontakt-Detailseite (Relation Manager)

Auf der Detailseite eines Kontakts befinden sich drei zusätzliche Bereiche unterhalb der Kontaktinformationen:

#### Adressen des Kontakts
Tabelle mit den Spalten: Adresszeile 1, Adresszeile 2, Postleitzahl, Stadt, Land und Aktive Adresse. Hier kannst du Adressen erstellen, bearbeiten, löschen und eine Adresse als aktive Adresse festlegen. Ein Kontakt kann mehrere Adressen haben, aber nur eine davon kann als aktiv markiert sein. Die aktive Adresse wird z. B. für Korrespondenz verwendet.

#### Anmerkungen zum Kontakt
Tabelle mit den Spalten: Überschrift, Anmerkungen, Wiedervorlage und Erstellt am (standardmäßig nach „Erstellt am" absteigend sortiert, also neueste zuerst). Anmerkungen kannst du erstellen, bearbeiten und löschen. Jede Anmerkung kann eine Überschrift, einen Richtext-Inhalt (formatierter Text) und ein Wiedervorlage-Datum enthalten. Das Wiedervorlage-Datum dient als Erinnerung, wann du die Anmerkung erneut prüfen oder bearbeiten solltest.

#### Spenden des Kontakts
Tabelle mit den Spalten: Datum, Betrag (in EUR, mit Summierung am Tabellenende), Verwendungszweck und Sachspende. Von hier aus kannst du einzelne Spenden anschauen – ein Klick führt dich zur Spenden-Detailseite im Bereich Fundraising. Spenden werden standardmäßig nach Datum absteigend sortiert (neueste zuerst). Die Verwaltung der Spenden (Erstellen, Bearbeiten, Löschen) erfolgt im Tool **Fundraising**.

## Aktionen für Kontakte

### Kontakt erstellen
Über den Button **Neuen Kontakt anlegen** in der Listenansicht öffnest du das Formular zum Anlegen eines neuen Kontakts. Nach dem Speichern wirst du zur Detailseite des neu erstellten Kontakts weitergeleitet.

### Kontakte importieren
Neben dem Erstellen-Button findest du die Aktion **Import aus NGO.Tools-Vorlage**. Damit kannst du Kontakte aus einer Excel-Datei importieren, die der NGO.Tools-Vorlage entspricht.

### Kontakt bearbeiten
Jeden Kontakt kannst du über das Bearbeiten-Icon in der Tabellenzeile oder über den Bearbeiten-Button auf der Detailseite bearbeiten. Nach dem Speichern der Änderungen bleibst du auf der Bearbeitungsseite.

### Kontakt anschauen
Über das Anschauen-Icon in der Tabellenzeile gelangst du zur Detailseite des Kontakts.

### Kontakt löschen
- **Einzelpersonen und Organisationen**: Diese kannst du über den Löschen-Button auf der Bearbeitungs- oder Detailseite löschen. Vor dem Löschen wirst du um Bestätigung gebeten. Das Löschen eines Kontakts ist endgültig und kann nicht rückgängig gemacht werden.
- **Ehepaare**: Für Ehepaare gibt es eine spezielle Lösch-Aktion **„Ehepaar löschen"**. Dabei wird die Ehepaar-Verbindung aufgelöst. Du kannst optional auswählen, welche der beiden Partner-Kontakte ebenfalls gelöscht werden sollen – nur löschbare Partner stehen zur Auswahl. Wenn du keinen Partner auswählst, bleiben beide Einzelpersonen als separate Kontakte erhalten. Diese Aktion kann nicht rückgängig gemacht werden.

### Massenaktionen für Kontakte (Bulk-Aktionen)
Durch Auswahl mehrerer Kontakte über die Checkboxen in der Tabelle stehen dir folgende Aktionen zur Verfügung:

| Aktion | Beschreibung |
|---|---|
| **Zu Segment hinzufügen** | Fügt die ausgewählten Kontakte einem von dir gewählten Segment hinzu. Kontakte, die dem Segment bereits angehören, werden nicht doppelt hinzugefügt. |
| **Aus Segment entfernen** | Entfernt die ausgewählten Kontakte aus einem von dir gewählten Segment. |
| **Zu Newsletter-Liste hinzufügen** | Fügt die ausgewählten Kontakte einer von dir gewählten Newsletter-Liste hinzu. |
| **Löschen** | Löscht die ausgewählten Kontakte. Du wirst vor dem Löschen um Bestätigung gebeten. Diese Aktion kann nicht rückgängig gemacht werden. |

### Kontakte exportieren
Über den Button **CSV Export** in der Kopfzeile der Kontakte-Tabelle kannst du alle Kontakte als CSV-Datei exportieren. Der Export berücksichtigt die aktuell aktiven Filter – so kannst du gezielt nur bestimmte Kontakte exportieren.

## Validierung und Fehlermeldungen bei Kontakten

Beim Erstellen und Bearbeiten von Kontakten gelten folgende Validierungsregeln:

| Situation | Fehlermeldung | Lösung |
|---|---|---|
| Typ „Einzelperson": Vorname fehlt | Pflichtfeld-Hinweis beim Feld „Vorname" | Trage einen Vornamen ein. |
| Typ „Einzelperson": Nachname fehlt | Pflichtfeld-Hinweis beim Feld „Nachname" | Trage einen Nachnamen ein. |
| Typ „Organisation": Name fehlt | Pflichtfeld-Hinweis beim Feld „Name" | Trage einen Organisationsnamen ein. |
| Typ „Ehepaar" | Keine Namensfelder sind verpflichtend | — |
| Email-Adresse ungültig | Hinweis auf ungültiges E-Mail-Format | Gib eine gültige E-Mail-Adresse ein (z. B. name@beispiel.de). |
| Webseite ungültig | Hinweis auf ungültiges URL-Format | Gib eine gültige URL ein (z. B. https://www.beispiel.de). |
| Mitgliedszeiten: Startdatum fehlt | Pflichtfeld-Hinweis beim Feld „Start" | Trage ein Startdatum für die Mitgliedszeit ein. |
| Mitgliedszeiten überlappen sich | „Überlappende Mitgliedszeiten sind nicht möglich." | Passe die Datumsbereiche an, sodass sich die Mitgliedszeiten nicht überschneiden. |
| Anmerkung: Weder Überschrift noch Inhalt ausgefüllt | Hinweis, dass Überschrift oder Anmerkungen ausgefüllt werden müssen | Fülle mindestens die Überschrift oder das Anmerkungsfeld aus. |
| Ehepaar löschen: Nicht-löschbare Partner ausgewählt | Fehlermeldung, dass der Partner nicht gelöscht werden kann | Wähle nur Partner aus, die zur Löschung verfügbar sind. Ein Partner kann z. B. nicht gelöscht werden, wenn er noch mit anderen Daten verknüpft ist. |

## Beziehungen und Verknüpfungen von Kontakten

Kontakte stehen in Beziehung zu verschiedenen anderen Bereichen der Anwendung:

- **Adressen** – Jeder Kontakt kann mehrere Adressen haben. Eine davon kann als aktive Adresse markiert werden, die z. B. für Korrespondenz verwendet wird.
- **Anmerkungen** – Kontakte können beliebig viele Anmerkungen haben. Jede Anmerkung kann ein Wiedervorlage-Datum enthalten, das als Erinnerung dient.
- **Spenden** – Kontakte können mit Spenden verknüpft sein. Die Verwaltung der Spenden erfolgt im Tool **Fundraising**.
- **Segmente** – Kontakte können mehreren Segmenten gleichzeitig zugeordnet werden. Segmente werden in den Einstellungen unter **Kontakte > Segmente** verwaltet.
- **Newsletter-Listen** – Kontakte können Newsletter-Listen abonniert haben. Die Verwaltung der Newsletter-Listen erfolgt in den entsprechenden Einstellungen.
- **Kommunikationskanäle** – Telefonnummern und weitere Kontaktwege (z. B. Fax, Mobil) können zu einem Kontakt hinterlegt werden.
- **Beziehungen** – Verknüpfungen zu anderen Kontakten mit einem definierten Beziehungstyp (z. B. „ist Arbeitgeber von", „ist Kind von").
- **Ehepaar** – Ein Kontakt vom Typ „Ehepaar" kann mit zwei Einzelperson-Kontakten als Partner verknüpft sein. Die Einzelpersonen bleiben dabei als eigene Kontakte erhalten.
- **Eigene Felder** – Falls du in den Einstellungen unter **Kontakte > Eigene Felder** zusätzliche Felder definiert hast, werden diese im Kontakt-Formular und in der Detailansicht angezeigt.

---

## resource: App\Filament\App\Resources\ContactResource

**Entity:** App\Filament\App\Resources\ContactResource  
**Type:** auto_generated  
**Version:** 3  
**File:** `app/Filament/App/Resources/ContactResource.php`  
**Updated:** 2026-02-14 20:32:29  

# Kontakte

## Übersicht

Die Kontaktverwaltung ist das zentrale Verzeichnis aller Personen, Organisationen und Ehepaare in deiner Organisation. Hier kannst du Kontaktdaten pflegen, Segmente zuordnen, Mitgliedschaften verwalten und alle relevanten Informationen zu einem Kontakt an einem Ort einsehen.

**Voraussetzung:** Das Tool **Kontakte** muss aktiviert sein.

## Kontakttypen

Jeder Kontakt hat einen Typ, der beim Anlegen festgelegt wird und bestimmt, welche Felder im Formular sichtbar sind:

| Typ | Beschreibung |
|-----|--------------|
| **Person** | Ein einzelner Mensch mit Vorname, Nachname, Geburtstag, Geschlecht usw. |
| **Organisation** | Ein Unternehmen, Verein oder eine andere juristische Einheit. Verwendet das Feld „Name" statt Vor-/Nachname. |
| **Ehepaar** | Verbindet zwei Personen. Verwendet sowohl das Feld „Name" (z. B. „Familie Müller") als auch separate Vor-/Nachname-Felder für beide Personen. |

## Kontakt anlegen

Um einen neuen Kontakt anzulegen, klicke in der Kontaktliste auf die Schaltfläche **Kontakt anlegen**. Es öffnet sich das Kontaktformular, in dem du alle relevanten Informationen eintragen kannst.

**Dublettenerkennung:** Beim Speichern prüft das System automatisch, ob bereits ein ähnlicher Kontakt existiert. Falls ja, erscheint eine Warnung mit einem Link zum möglicherweise vorhandenen Kontakt. Du kannst den neuen Kontakt trotzdem anlegen, wenn es sich nicht um eine Dublette handelt.

## Formularfelder

Das Kontaktformular ist in mehrere Bereiche unterteilt. Welche Felder sichtbar sind, hängt vom gewählten Kontakttyp und den aktivierten Tools ab.

### Allgemeine Felder

| Feld | Typ | Sichtbar bei Typ | Beschreibung |
|------|-----|-------------------|--------------|
| Avatar | Bild-Upload | Alle | Profilbild des Kontakts. |
| Kontaktnummer | Text (schreibgeschützt) | Alle | Wird beim Anlegen automatisch vergeben und kann nicht geändert werden. |
| Typ | Auswahl | Alle | Art des Kontakts: **Person**, **Organisation** oder **Ehepaar**. Bestimmt, welche weiteren Felder angezeigt werden. |
| Titel | Text | Alle | Akademischer oder sonstiger Titel (z. B. „Dr.", „Prof."). |
| Name | Text | Organisation, Ehepaar | Name der Organisation bzw. gemeinsamer Name des Ehepaars (z. B. „Familie Müller"). |
| Vorname | Text | Person, Ehepaar | Vorname der (ersten) Person. |
| Nachname | Text | Person, Ehepaar | Nachname der (ersten) Person. |
| Rufname | Text | Person, Ehepaar | Alltagsname, falls abweichend vom Vornamen (z. B. „Liz" statt „Elisabeth"). |
| Zweiter Vorname | Text | Person, Ehepaar | Weiterer Vorname. |
| Geburtsname | Text | Person, Ehepaar | Früherer Nachname (z. B. vor einer Heirat). |
| Geburtstag | Datum | Person | Geburtsdatum der Person. |
| Sterbedatum | Datum | Person | Sterbedatum der Person. |
| Sterbedatum ist geschätzt | Checkbox | Person | Erscheint nur, wenn ein Sterbedatum eingetragen ist. Markiere dies, wenn das genaue Datum nicht bekannt ist. |
| Geschlecht | Auswahl | Person | Werte: Männlich, Weiblich, Divers. |
| Person 2 – Vorname | Text | Ehepaar | Vorname der zweiten Person des Ehepaars. |
| Person 2 – Nachname | Text | Ehepaar | Nachname der zweiten Person des Ehepaars. |
| Sprache | Auswahl | Alle | Bevorzugte Sprache des Kontakts. |
| Email-Adresse | Text | Alle | E-Mail-Adresse des Kontakts. Muss ein gültiges E-Mail-Format haben. |
| Webseite | Text | Alle | URL der Webseite des Kontakts. |
| Anrede | Textfeld | Alle | Individuelle Anrede, die z. B. für Serienbriefe oder E-Mails verwendet werden kann. |

### Kommunikationskanäle

Im Kontaktformular kannst du beliebig viele Kommunikationskanäle hinzufügen (z. B. Telefonnummern). Für jeden Eintrag stehen folgende Felder zur Verfügung:

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| Typ | Auswahl | Art des Kanals. |
| Telefonnummer | Text | Die eigentliche Rufnummer. |
| Postweg gesperrt | Checkbox | Wenn aktiviert, wird der Kontakt für postalische Kommunikation gesperrt. |

Du kannst über die Schaltfläche „Hinzufügen" weitere Kanäle ergänzen und bestehende Einträge über das Lösch-Symbol entfernen.

### Beziehungen zu anderen Kontakten

Du kannst im Kontaktformular Beziehungen zu anderen Kontakten herstellen. Für jede Beziehung wählst du den verknüpften Kontakt und den Beziehungstyp aus.

### Segmente und Newsletter

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| Segmente | Mehrfachauswahl | Ordne den Kontakt einem oder mehreren Segmenten zu. Ein Segment ist eine frei definierbare Gruppe (z. B. „Spender", „Vorstand"). Segmente verwaltest du in den Einstellungen unter Kontakte > Segmente. Wenn keine Segmente zugeordnet sind, zeigt das Feld den Hinweis „Keine Segmente zugeordnet". |

### Spendenbescheinigungen

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| Spendenbescheinigungen | Auswahl | Gewünschte Zustellungsart der Spendenbescheinigung. Dieses Feld dient aktuell nur zur Information und hat keine automatisierte Auswirkung. |

### Umsatzsteuer-ID

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| Umsatzsteuer-ID | Text | Die Umsatzsteuer-Identifikationsnummer der Organisation. |

### Eigene Felder

Falls in den Einstellungen eigene Felder (Custom Fields) für Kontakte definiert wurden, erscheinen diese ebenfalls im Kontaktformular. Art und Anzahl der eigenen Felder hängen von deiner Konfiguration ab.

### Mitgliedschaft

Der Bereich Mitgliedschaft wird als eigener Tab im Kontaktformular angezeigt.

**Voraussetzung:** Das Tool **Mitglieder** muss aktiviert sein. Bei Kontakten vom Typ **Ehepaar** ist dieser Tab nicht verfügbar.

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| Mitgliedsnummer | Text | Individuelle Mitgliedsnummer des Kontakts. |
| Mitgliedszeiten | Wiederholende Einträge | Zeiträume der Mitgliedschaft. Du kannst mehrere Zeiträume erfassen, z. B. wenn jemand ausgetreten und später wieder eingetreten ist. |

Für jeden Mitgliedschaftszeitraum stehen folgende Felder zur Verfügung:

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| Startdatum | Datum | Beginn der Mitgliedschaft. |
| Enddatum | Datum | Ende der Mitgliedschaft. Leer lassen, wenn die Mitgliedschaft noch andauert. |
| Startdatum ist geschätzt | Checkbox | Markiere dies, wenn das genaue Startdatum nicht bekannt ist. |
| Enddatum ist geschätzt | Checkbox | Markiere dies, wenn das genaue Enddatum nicht bekannt ist. |

## Tabellenansicht (Kontaktliste)

### Spalten in der Kontaktliste

Die Kontaktliste zeigt standardmäßig die Spalten **Name**, **Segmente** und **Email-Adresse** an. Über die Spaltenauswahl kannst du weitere Spalten ein- und ausblenden:

Kontaktnummer, Typ, Titel, Name, Vorname, Nachname, Mitgliedsnummer, Rufname, Zweiter Vorname, Geburtsname, Anrede, Segmente, Newsletter-Listen, Email-Adresse, Webseite, Geburtstag, Sterbedatum, Geschlecht, Adresszeile 1, PLZ, Ort, Land, Sprache, Kommunikationskanäle, Postweg gesperrt, Anmerkungen, Mitglieds-Status, Mitglied seit, Mitglied bis, Spendensumme, Umsatzsteuer-ID, Erstellt am.

Die Spalten **Mitglieds-Status**, **Mitglied seit** und **Mitglied bis** sind nur in der Mitglieder-Ansicht verfügbar (erfordert das Tool **Mitglieder**).

### Sortierung der Kontaktliste

Standardmäßig wird die Kontaktliste nach **Name** sortiert. Klicke auf eine Spaltenüberschrift, um die Sortierung zu ändern. Deine Sortiereinstellung wird in der Sitzung gespeichert und bleibt beim erneuten Aufrufen erhalten.

### Filter in der Kontaktliste

| Filter | Beschreibung |
|--------|--------------|
| Mitglieds-Status | Filtert nach Mitgliedsstatus. |
| Spenden | Filtert nach Kontakten mit oder ohne zugeordnete Spenden. |
| Einzelpersonen von Paaren ausblenden | Blendet Einzelperson-Kontakte aus, die bereits als Teil eines Ehepaars erfasst sind. |
| Segmente | Filtert nach einem oder mehreren Segmenten. Nur Kontakte, die mindestens einem der gewählten Segmente zugeordnet sind, werden angezeigt. |
| Newsletter-Listen | Filtert nach Newsletter-Abonnements. Zeigt nur Kontakte, die bestimmte Newsletter abonniert haben. |
| Geschlecht | Filtert nach Geschlecht. |
| Typ | Filtert nach Kontakttyp (Person, Organisation, Ehepaar). |
| Postweg gesperrt | Filtert nach Kontakten, bei denen mindestens ein Kommunikationskanal als „Postweg gesperrt" markiert ist. |

Filter, Suche, Sortierung und Spalteneinstellungen werden in der Sitzung gespeichert und bleiben beim erneuten Aufrufen der Kontaktliste erhalten.

### Seitengrößen der Kontaktliste

Du kannst die Anzahl der angezeigten Kontakte pro Seite einstellen: 5, 10, 25, 50, 100 oder 200 Einträge.

## Aktionen in der Kontaktliste

### Kopfzeilen-Aktionen

| Aktion | Beschreibung |
|--------|--------------|
| **Export** | Exportiert die aktuelle Kontaktliste (inklusive aktiver Filter) als CSV-Datei. |

### Zeilen-Aktionen in der Kontaktliste

| Aktion | Beschreibung |
|--------|--------------|
| **Anschauen** | Öffnet die Detailansicht des Kontakts mit allen Informationen. |
| **Bearbeiten** | Öffnet das Bearbeitungsformular des Kontakts. |

### Massenaktionen in der Kontaktliste

Wähle über die Checkboxen in der Tabelle mehrere Kontakte aus, um Massenaktionen durchzuführen:

| Aktion | Beschreibung |
|--------|--------------|
| **Zu Segment hinzufügen** | Öffnet ein Auswahlfenster, in dem du ein Segment auswählst. Alle markierten Kontakte werden diesem Segment zugeordnet. Kontakte, die dem Segment bereits zugeordnet sind, werden nicht doppelt hinzugefügt. |
| **Aus Segment entfernen** | Öffnet ein Auswahlfenster, in dem du ein Segment auswählst. Alle markierten Kontakte werden aus diesem Segment entfernt. |
| **Zu Newsletter-Liste hinzufügen** | Fügt die markierten Kontakte als Abonnenten zu einer oder mehreren Newsletter-Listen hinzu. |
| **Löschen** | Löscht alle markierten Kontakte. Diese Aktion kann nicht rückgängig gemacht werden. |

## Kontakt-Detailansicht

Die Detailansicht zeigt alle Informationen eines Kontakts in einer übersichtlichen Darstellung.

### Adressen in der Kontakt-Detailansicht

In der Detailansicht eines Kontakts kannst du dessen Adressen verwalten. Jede Adresse hat folgende Felder:

| Feld | Beschreibung |
|------|--------------|
| Adresszeile 1 | Straße und Hausnummer. |
| Adresszeile 2 | Zusätzliche Adressinformationen (z. B. Apartment, Stockwerk). |
| PLZ | Postleitzahl. |
| Ort | Stadt oder Gemeinde. |
| Land | Land (Auswahl aus einer Länderliste). |

Ein Kontakt kann mehrere Adressen haben. Über die Aktion **Als aktive Adresse festlegen** bestimmst du, welche Adresse als Hauptadresse verwendet wird (z. B. für Serienbriefe). Die aktuell aktive Adresse ist in der Liste entsprechend markiert. Adressen können hinzugefügt, bearbeitet und gelöscht werden.

### Anmerkungen in der Kontakt-Detailansicht

In der Detailansicht eines Kontakts kannst du Anmerkungen (Notizen) verwalten. Jede Anmerkung hat folgende Felder:

| Feld | Beschreibung |
|------|--------------|
| Überschrift | Kurze Zusammenfassung der Anmerkung. |
| Anmerkungen | Ausführlicher Text der Anmerkung. |
| Wiedervorlage | Datum, an dem du an diese Anmerkung erinnert werden möchtest. |

Entweder die Überschrift oder der Anmerkungstext muss ausgefüllt werden.

Anmerkungen können hinzugefügt, bearbeitet und gelöscht werden.

## Validierung und Fehlermeldungen bei Kontakten

Beim Speichern eines Kontakts können folgende Validierungsfehler auftreten:

| Fehlermeldung | Ursache | Lösung |
|---------------|---------|--------|
| „Mindestens eines der Felder muss ausgefüllt sein" | Keines der Namensfelder (Name, Vorname, Nachname) wurde ausgefüllt. | Fülle mindestens eines der Namensfelder aus. Bei Typ **Organisation** oder **Ehepaar** ist das Feld „Name" erforderlich. Bei Typ **Person** reicht Vorname oder Nachname. |
| „Überlappende Mitgliedszeiten sind nicht möglich." | Zwei oder mehr Mitgliedschaftszeiträume überschneiden sich zeitlich. | Passe die Start- und Enddaten so an, dass sich die Zeiträume nicht überlappen. |
| „Überschrift oder Anmerkungen müssen ausgefüllt werden." | Bei einer Anmerkung wurde weder Überschrift noch Text eingetragen. | Fülle mindestens die Überschrift oder das Anmerkungsfeld aus. |
| Hinweis auf mögliche Dublette | Beim Anlegen oder Bearbeiten wurde ein Kontakt mit ähnlichem Namen oder ähnlicher E-Mail-Adresse gefunden. | Prüfe den angezeigten Link zum möglicherweise bestehenden Kontakt. Falls es keine Dublette ist, kannst du den Kontakt trotzdem speichern. |

## Verknüpfungen und Beziehungen von Kontakten

Ein Kontakt kann mit verschiedenen anderen Bereichen verknüpft sein:

- **Segmente**: Kontakte können beliebig vielen Segmenten zugeordnet werden. Segmente sind frei definierbare Gruppen (z. B. „Spender", „Vorstand") und werden in den Einstellungen unter Kontakte > Segmente verwaltet.
- **Newsletter-Listen**: Kontakte können Newsletter-Listen abonnieren. Die Zuordnung kann einzeln im Kontaktformular oder per Massenaktion in der Kontaktliste erfolgen.
- **Adressen**: Jeder Kontakt kann mehrere Adressen haben. Eine Adresse wird als aktive Adresse markiert und für den Postversand verwendet.
- **Anmerkungen**: Freitextnotizen mit optionaler Wiedervorlage-Funktion zur Erinnerung an einem bestimmten Datum.
- **Beziehungen zu anderen Kontakten**: Kontakte können untereinander verknüpft werden (z. B. Ehepartner/in, Kind, Arbeitgeber/in). Die Beziehung wird im Kontaktformular unter „Beziehungen" gepflegt.
- **Ehepaare**: Ein Kontakt vom Typ Ehepaar verbindet zwei Einzelperson-Kontakte. Beim Löschen eines Ehepaars erscheint ein Dialog, in dem du wählen kannst, ob nur die Ehepaar-Verknüpfung aufgelöst oder ob auch die Partner-Kontakte gelöscht werden sollen.
- **Mitgliedschaft**: Kontakte können Mitgliedszeiten haben, aus denen sich der Mitgliedsstatus automatisch ergibt. Voraussetzung: Das Tool **Mitglieder** muss aktiviert sein.
- **Eigene Felder (Custom Fields)**: Falls in den Einstellungen eigene Felder für Kontakte definiert wurden, erscheinen diese sowohl im Kontaktformular als auch in der Detailansicht.

---

## resource: App\Filament\Personal\Resources\PublicationRequestResource

**Entity:** App\Filament\Personal\Resources\PublicationRequestResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/Personal/Resources/PublicationRequestResource.php`  
**Updated:** 2026-02-14 17:11:33  

# Veröffentlichungs-Anfragen

## Übersicht

Auf der Seite **Veröffentlichungs-Anfragen** kannst du Anfragen zur Veröffentlichung von Inhalten erstellen und verwalten. Du kannst den Status deiner Anfragen jederzeit verfolgen.

Diese Seite befindet sich im persönlichen Bereich der Anwendung.

## Navigation

Seitenleiste → Gruppe **Persönliche Seite** → **Veröffentlichungs-Anfragen**

## Formularfelder der Veröffentlichungs-Anfrage

Beim Erstellen oder Bearbeiten einer Veröffentlichungs-Anfrage stehen dir die Felder zur Verfügung, die von der Verwaltung definiert werden. Das Formular wird im persönlichen Bereich in einem Dialogfenster mit drei Spalten angezeigt.

## Tabellenansicht der Veröffentlichungs-Anfragen

Die Liste zeigt alle deine eigenen Veröffentlichungs-Anfragen. Anfragen anderer Personen sind hier nicht sichtbar.

| Spalte | Beschreibung |
|--------|--------------|
| Datum | Das Erstelldatum der Veröffentlichungs-Anfrage |
| Status | Der aktuelle Bearbeitungsstatus |
| Titel | Der Titel der Veröffentlichungs-Anfrage |

## Aktionen für Veröffentlichungs-Anfragen

- **Bearbeiten**: Über das Bearbeiten-Symbol in der jeweiligen Zeile öffnet sich ein Dialogfenster, in dem du eine bestehende Veröffentlichungs-Anfrage ändern kannst.
- **Löschen**: Über das Löschen-Symbol in der jeweiligen Zeile kannst du eine einzelne Veröffentlichungs-Anfrage löschen.
- **Mehrfach löschen**: Wähle über die Checkboxen in der Liste mehrere Veröffentlichungs-Anfragen aus und lösche sie über die Sammelaktion gleichzeitig.

## Voraussetzungen für Veröffentlichungs-Anfragen

Das Tool **Veröffentlichungsverwaltung** muss aktiviert sein, damit die Seite **Veröffentlichungs-Anfragen** im persönlichen Bereich verfügbar ist. Ist das Tool nicht aktiviert, wird der Menüpunkt nicht angezeigt.

## Beziehungen der Veröffentlichungs-Anfragen

- Hochgeladene Anhänge können mit **Veranstaltungen** verknüpft sein.

---

## resource: App\Filament\Personal\Resources\EventAssignmentResource

**Entity:** App\Filament\Personal\Resources\EventAssignmentResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/Personal/Resources/EventAssignmentResource.php`  
**Updated:** 2026-02-14 17:09:50  

# Meine Veranstaltungseinteilungen

## Übersicht

Auf der Seite „Meine Veranstaltungseinteilungen" siehst du alle Veranstaltungen, denen du persönlich oder über eines deiner Teams zugeteilt bist. Die Liste zeigt kommende und kürzlich vergangene Veranstaltungen (bis 10 Tage zurück) mit den zugehörigen Diensten an.

Diese Seite befindet sich im persönlichen Bereich der Anwendung.

## Voraussetzungen

Damit die Seite „Meine Veranstaltungseinteilungen" verfügbar ist, muss das Tool **Veranstaltungen** aktiviert sein. Ist das Tool nicht aktiviert, erscheint die Seite nicht in der Navigation.

## Tabellenansicht / Listenansicht

Die Liste deiner Veranstaltungseinteilungen zeigt folgende Spalten:

| Spalte | Beschreibung |
|---|---|
| **Datum** | Datum und Uhrzeit der Veranstaltung. Sortierbar. |
| **Veranstaltung** | Name der Veranstaltung. Sortierbar. |
| **Dienst** | Der Dienst, dem du zugeteilt bist. Sortierbar. |

Die Standardsortierung erfolgt nach dem Datum der Veranstaltung (aufsteigend, also die nächste Veranstaltung zuerst).

Es werden nur Veranstaltungen angezeigt, die maximal 10 Tage in der Vergangenheit liegen. Ältere Einteilungen verschwinden automatisch aus der Liste.

Die Einteilungen umfassen sowohl deine persönlichen Zuweisungen als auch Zuweisungen an Teams, denen du angehörst.

## Aktionen

Für jede Einteilung in der Liste „Meine Veranstaltungseinteilungen" stehen folgende Aktionen zur Verfügung:

| Aktion | Beschreibung |
|---|---|
| **Anschauen** (Augen-Symbol) | Öffnet die öffentliche Veranstaltungsseite in einem neuen Browser-Tab. |
| **Veranstaltung planen** | Öffnet die Programmplanung der Veranstaltung in einem neuen Browser-Tab. Diese Aktion ist nur sichtbar, wenn du für die Veranstaltung verantwortlich bist **und** die Veranstaltung eine Planung verwendet. |

Beide Aktionen öffnen die jeweilige Seite in einem neuen Tab — deine aktuelle Ansicht bleibt dabei erhalten.

## Beziehungen

Die Seite „Meine Veranstaltungseinteilungen" verknüpft mehrere Bereiche der Anwendung:

- **Veranstaltungen**: Jede Einteilung gehört zu einer Veranstaltung aus dem Veranstaltungskalender.
- **Dienste**: Jede Einteilung ist einem bestimmten Dienst zugeordnet.
- **Teams/Segmente**: Einteilungen können nicht nur direkt an dich, sondern auch an Teams erfolgen, denen du angehörst. In diesem Fall erscheint die Veranstaltung ebenfalls in deiner persönlichen Liste.

---

## resource: App\Filament\App\Resources\WebsiteResource

**Entity:** App\Filament\App\Resources\WebsiteResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/WebsiteResource.php`  
**Updated:** 2026-02-14 17:09:03  

# Webseite

## Übersicht
Hier kannst du deine Webseite verwalten, die über die ngo.tools-Plattform bereitgestellt wird.

## Navigation
Die Webseite findest du in der Seitenleiste unter der Menügruppe **Kommunikation**.

## Voraussetzungen
Das Tool **Webseite** muss für deine Organisation aktiviert sein, damit der Bereich in der Navigation sichtbar und zugänglich ist. Ist das Tool nicht aktiviert, wird der Menüpunkt nicht angezeigt.

## Tabellenansicht / Listenansicht
In der Listenansicht der Webseite werden alle angelegten Webseiten deiner Organisation angezeigt.

| Spalte | Beschreibung |
|--------|-------------|
| Name | Der Name der Webseite |

### Aktionen in der Listenansicht
- **Bearbeiten**: Öffnet die Bearbeitungsseite der jeweiligen Webseite.
- **Massenlöschung**: Über die Bulk-Aktion kannst du mehrere Webseiten gleichzeitig auswählen und löschen.

---

## resource: App\Filament\App\Resources\WebsiteFormSubmissionResource

**Entity:** App\Filament\App\Resources\WebsiteFormSubmissionResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/WebsiteFormSubmissionResource.php`  
**Updated:** 2026-02-14 17:08:18  

# Abgeschickte Formulare

## Übersicht

Unter „Abgeschickte Formulare" findest du alle Formulare, die Besucher über deine Webseite abgeschickt haben. Die Einträge werden automatisch erfasst, sobald jemand ein Formular auf einer deiner Webseiten-Seiten ausfüllt und absendet. Du kannst die Einträge einsehen und bei Bedarf löschen.

Wenn noch keine Formulare abgeschickt wurden, wird die Liste leer angezeigt. Neue Einträge erscheinen automatisch, sobald ein Besucher ein Formular auf deiner Webseite ausfüllt und absendet.

## Navigation

- Die Funktion „Abgeschickte Formulare" befindet sich in der Seitenleiste unter der Menügruppe **Kommunikation**.
- Das Tool **Webseite** muss aktiviert sein, damit dieser Bereich sichtbar ist.

## Tabellenansicht / Listenansicht

Die Listenansicht der abgeschickten Formulare zeigt alle eingegangenen Formular-Einsendungen mit folgenden Spalten:

| Spalte | Beschreibung | Sortierbar | Durchsuchbar |
|--------|-------------|------------|--------------|
| **Datum** | Zeitpunkt, zu dem das Formular abgeschickt wurde | Ja | Nein |
| **Domain** | Die Domain der Webseite, über die das Formular abgeschickt wurde | Ja | Ja |
| **Webseite** | Name der Seite innerhalb der Webseite, auf der sich das Formular befindet | Ja | Ja |

Du kannst die Liste über die Suchfunktion nach Domain oder Seitenname filtern, um bestimmte Einsendungen schneller zu finden.

## Detailansicht / Formularfelder

Wenn du einen Eintrag in der Liste der abgeschickten Formulare öffnest, siehst du die Detailansicht. Diese zeigt alle vom Besucher übermittelten Daten als Schlüssel-Wert-Paare an.

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| *(Formulardaten)* | Schlüssel-Wert-Anzeige | Zeigt alle vom Besucher übermittelten Formularfelder und deren Werte an. Die angezeigten Felder hängen davon ab, welche Felder das jeweilige Formular auf deiner Webseite enthält. |

Die Detailansicht ist rein lesbar – du kannst die Daten nicht bearbeiten oder ergänzen.

## Aktionen

### Einzelaktionen

- **Anschauen**: Öffnet die Detailansicht eines abgeschickten Formulars. Dort siehst du alle vom Besucher übermittelten Daten als Schlüssel-Wert-Paare.
- **Löschen**: Entfernt einen einzelnen Formulareintrag dauerhaft.

### Bulk-Aktionen

- **Löschen**: Du kannst in der Listenansicht der abgeschickten Formulare mehrere Einträge per Checkbox auswählen und diese gesammelt löschen.

## Beziehungen

- **Webseiten**: Jedes abgeschickte Formular ist einer bestimmten Webseite (Domain) und einer Seite dieser Webseite zugeordnet. In der Listenansicht der abgeschickten Formulare werden sowohl die Domain als auch der Seitenname angezeigt, sodass du nachvollziehen kannst, woher die Einsendung stammt.

## Häufige Fragen

- **Warum sehe ich keine abgeschickten Formulare?** Stelle sicher, dass das Tool **Webseite** aktiviert ist und dass mindestens ein Formular auf einer deiner Webseiten-Seiten eingerichtet ist. Einträge erscheinen erst, wenn ein Besucher tatsächlich ein Formular abgeschickt hat.
- **Kann ich abgeschickte Formulare bearbeiten?** Nein, die übermittelten Daten sind ausschließlich lesbar. Du kannst Einträge nur anschauen oder löschen.

---

## resource: App\Filament\App\Resources\UserResource

**Entity:** App\Filament\App\Resources\UserResource  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/UserResource.php`  
**Updated:** 2026-02-14 17:07:07  

# Benutzer

## Übersicht

In der Benutzerverwaltung können Organisationsadministratoren die Benutzer ihrer Organisation verwalten. Hier lassen sich neue Benutzer anlegen, bestehende Benutzer bearbeiten, ihnen Tool- und Projekt-Berechtigungen zuweisen sowie Einladungen versenden.

## Formularfelder

In der Benutzerverwaltung stehen beim Anlegen und Bearbeiten eines Benutzers folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Der vollständige Name des Benutzers. |
| Email | Textfeld | Ja | Die E-Mail-Adresse des Benutzers. Muss eindeutig sein – jede E-Mail-Adresse kann nur einmal vergeben werden. |
| Ist Administrator der Organisation | Schalter | Nein | Legt fest, ob der Benutzer Administrator der Organisation ist. Dieses Feld ist nur beim Bearbeiten eines bestehenden Benutzers sichtbar, nicht beim Anlegen. |
| Hat einen Nextcloud-Zugang | Schalter | Nein | Gibt an, ob der Benutzer einen Nextcloud-Zugang hat. Dieses Feld ist nur sichtbar, wenn das Tool Nextcloud aktiviert ist. Der Schalter ist deaktiviert (nicht umschaltbar), solange die Nextcloud-Konfiguration noch nicht vollständig eingerichtet ist. |
| Benutzergruppen | Mehrfachauswahl | Nein | Zuordnung des Benutzers zu einer oder mehreren Benutzergruppen. |
| Zugeordneter Kontakt | Auswahl (durchsuchbar) | Nein | Verknüpft den Benutzer mit einem bestehenden Kontakt aus der Kontaktverwaltung. Du kannst nach dem Kontaktnamen suchen, um den passenden Eintrag zu finden. |

### Warnhinweise im Formular (nur beim Bearbeiten)

Beim Bearbeiten eines Benutzers können in der Benutzerverwaltung verschiedene Warnhinweise erscheinen:

- **Fehlende Berechtigungen:** Wenn der Benutzer keinem Team zugeordnet ist und kein Administrator ist, wird ein roter Warnhinweis angezeigt.
- **Fehlende Tool-Berechtigungen:** Wenn der Benutzer kein Administrator ist und keine Tool-Berechtigungen hat, erscheint der Hinweis: *„Dieser Benutzer ist noch für keine Tools freigeschaltet. Bitte unter Tool-Berechtigungen anpassen."*
- **Fehlende Projekt-Berechtigungen:** Wenn der Benutzer noch für keine Projekte freigeschaltet ist, erscheint der Hinweis: *„Dieser Benutzer ist noch für keine Projekte freigeschaltet. Bitte unter Projekt-Berechtigungen anpassen."*
- **Letzter Administrator:** Wenn der Benutzer der einzige Administrator der Organisation ist, wird der Schalter „Ist Administrator der Organisation" deaktiviert. Es erscheint der Hinweis: *„Es muss mindestens ein Administrator vorhanden sein."* Du musst zuerst einen anderen Benutzer zum Administrator machen, bevor du diesen Status entfernen kannst.
- **Sich selbst herabstufen:** Wenn du deinen eigenen Administrator-Status entfernen möchtest, erscheint der Hinweis: *„Achtung: du nimmst dir selbst die Administrator-Rechte. Nach dem Speichern wird diese Seite nicht mehr verfügbar sein."*

## Tabellenansicht / Listenansicht

Die Benutzerverwaltung zeigt alle Benutzer der Organisation in einer Tabellenansicht an.

### Spalten

| Spalte | Beschreibung |
|--------|--------------|
| Name | Name des Benutzers. Die Liste ist standardmäßig alphabetisch nach Name sortiert. |
| Email | E-Mail-Adresse des Benutzers. |
| Benutzergruppen | Die zugeordneten Benutzergruppen, dargestellt als Badges. |
| Administrator | Zeigt mit einem Icon an, ob der Benutzer Administrator der Organisation ist. |
| Administrator in Team | Zeigt die Teams, in denen der Benutzer Administrator ist. Diese Spalte ist nur sichtbar, wenn die Organisation mehr als ein Team hat. |
| Nextcloud | Zeigt an, ob der Benutzer einen Nextcloud-Zugang hat. Diese Spalte ist nur sichtbar, wenn das Tool Nextcloud aktiviert ist. |

### Filter

| Filter | Beschreibung |
|--------|--------------|
| Administrator | Filtert die Benutzerliste nach Administratoren, Nicht-Administratoren oder zeigt alle Benutzer an. |

### Warnhinweise in der Kopfzeile

Über der Benutzertabelle können Warnhinweise erscheinen, die auf Konfigurationsbedarf hinweisen:

- **Benutzer ohne Zugriff auf Projekte:** Zeigt die Anzahl der Benutzer an, die noch keinen Zugriff auf Projekte haben.
- **Benutzer ohne Zugriff auf Tools:** Zeigt die Anzahl der Benutzer an, die noch keinen Zugriff auf Tools haben.

## Aktionen

### Zeilen-Aktionen (pro Benutzer)

In der Benutzerliste stehen für jeden Benutzer folgende Aktionen zur Verfügung:

| Aktion | Beschreibung |
|--------|--------------|
| Warnung (Projekte) | Ein oranges Warnsymbol erscheint, wenn der Benutzer noch für keine Projekte freigeschaltet ist. Ein Klick darauf führt direkt zur Unterseite „Projekt-Berechtigungen" des Benutzers. |
| Warnung (Tools) | Ein oranges Warnsymbol erscheint, wenn der Benutzer keine Tool-Berechtigungen hat. Ein Klick darauf führt direkt zur Unterseite „Tool-Berechtigungen" des Benutzers. |
| Einladen | Sendet eine Einladungs-E-Mail an den Benutzer. |
| Bearbeiten | Öffnet das Bearbeitungsformular des Benutzers. |

### Kopfzeilen-Aktionen

| Aktion | Beschreibung |
|--------|--------------|
| Export | Exportiert die aktuelle Benutzerliste als Datei. |

## Unternavigation (beim Bearbeiten)

Beim Bearbeiten eines Benutzers in der Benutzerverwaltung stehen folgende Unterseiten zur Verfügung:

| Seite | Beschreibung |
|-------|--------------|
| Grundeinstellungen | Das Hauptformular mit den Benutzerdaten (Name, E-Mail, Administrator-Status, Nextcloud-Zugang, Benutzergruppen, zugeordneter Kontakt). |
| Tool-Berechtigungen | Hier legst du fest, auf welche Tools der Benutzer Zugriff hat. |
| Projekt-Berechtigungen | Hier legst du fest, auf welche Projekte der Benutzer Zugriff hat. |
| Zeiterfassung | Zeigt eine Übersicht der erfassten Arbeitszeiten für diesen Benutzer an. |

## Validierung & Fehlermeldungen

Beim Anlegen oder Bearbeiten eines Benutzers in der Benutzerverwaltung können folgende Validierungsfehler auftreten:

| Regel | Fehlermeldung & Lösung |
|-------|------------------------|
| Name ist Pflichtfeld | Der Name muss ausgefüllt werden. **Lösung:** Trage einen Namen ein. |
| Email ist Pflichtfeld | Die E-Mail-Adresse muss ausgefüllt werden. **Lösung:** Trage eine gültige E-Mail-Adresse ein. |
| Email muss gültig sein | Es muss eine korrekte E-Mail-Adresse eingegeben werden (z. B. name@beispiel.de). **Lösung:** Überprüfe die eingegebene E-Mail-Adresse auf Tippfehler. |
| Email muss eindeutig sein | Die E-Mail-Adresse wird bereits von einem anderen Benutzer verwendet. **Lösung:** Verwende eine andere E-Mail-Adresse oder suche den bestehenden Benutzer mit dieser Adresse in der Benutzerliste. |

## Beziehungen

Die Benutzerverwaltung steht in Verbindung mit mehreren anderen Bereichen der Plattform:

- **Benutzergruppen:** Benutzer können einer oder mehreren Benutzergruppen zugeordnet werden.
- **Kontakte:** Jedem Benutzer kann ein Kontakt aus der Kontaktverwaltung zugeordnet werden. Dadurch lassen sich Benutzerkonten mit bestehenden Kontaktdaten verknüpfen.
- **Tool-Berechtigungen:** Über die Unterseite „Tool-Berechtigungen" wird festgelegt, welche Tools der Benutzer nutzen darf.
- **Projekt-Berechtigungen:** Über die Unterseite „Projekt-Berechtigungen" wird festgelegt, auf welche Projekte der Benutzer Zugriff hat.
- **Zeiterfassung:** Über die Unterseite „Zeiterfassung" können die erfassten Arbeitszeiten des Benutzers eingesehen werden.

---

## resource: App\Filament\App\Resources\UserGroupResource

**Entity:** App\Filament\App\Resources\UserGroupResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/UserGroupResource.php`  
**Updated:** 2026-02-14 17:04:53  

# Benutzergruppen

## Übersicht

Benutzergruppen ermöglichen es dir, Gruppen innerhalb deiner Organisation zu verwalten. Diese Gruppen dienen aktuell dazu, Gruppen in der verbundenen Nextcloud zu konfigurieren. Du kannst neue Benutzergruppen anlegen, bestehende bearbeiten und nicht mehr benötigte löschen.

## Navigation

Die Benutzergruppen-Verwaltung ist nicht direkt über die Seitenleiste erreichbar. Du findest sie über den Bereich der Einstellungen deiner Organisation.

## Formularfelder

Beim Anlegen oder Bearbeiten einer Benutzergruppe stehen dir folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | – | Der Name der Benutzergruppe. |
| In Nextcloud als Gruppe verwenden | Checkbox | – | Legt fest, ob diese Benutzergruppe als Gruppe in der verbundenen Nextcloud angelegt wird. Dieses Feld ist nur sichtbar, wenn das Tool **Nextcloud** aktiviert ist. |

## Tabellenansicht / Listenansicht

In der Übersichtstabelle der Benutzergruppen werden folgende Spalten angezeigt:

| Spalte | Beschreibung |
|--------|--------------|
| Name | Der Name der Benutzergruppe. Diese Spalte ist durchsuchbar. |
| In Nextcloud als Gruppe verwenden | Zeigt als Icon an, ob die Benutzergruppe in der Nextcloud verwendet wird. Diese Spalte ist nur sichtbar, wenn das Tool **Nextcloud** aktiviert ist. |

**Suche:** Du kannst die Liste der Benutzergruppen über das Suchfeld nach dem Namen durchsuchen.

## Aktionen

- **Erstellen:** Über den Erstellen-Button auf der Übersichtsseite kannst du eine neue Benutzergruppe anlegen. Nach dem Speichern erscheint die neue Gruppe in der Übersichtstabelle.
- **Bearbeiten:** Jede Benutzergruppe kann über das Bearbeiten-Symbol in der jeweiligen Zeile bearbeitet werden.
- **Löschen:** Einzelne Benutzergruppen können über das Löschen-Symbol in der jeweiligen Zeile gelöscht werden.
- **Mehrfachauswahl löschen:** Über die Checkboxen in der Tabelle kannst du mehrere Benutzergruppen gleichzeitig auswählen und gebündelt löschen.

## Berechtigungen

Der Zugriff auf die Benutzergruppen-Verwaltung erfordert, dass der Benutzer Organisationsadministrator ist.

## Beziehungen

- **Nextcloud:** Benutzergruppen sind mit der Nextcloud-Integration verknüpft. Wenn das Tool **Nextcloud** aktiviert ist, kannst du über die Checkbox „In Nextcloud als Gruppe verwenden" festlegen, ob eine Benutzergruppe auch als Gruppe in der verbundenen Nextcloud angelegt wird.

---

## resource: App\Filament\App\Resources\SurveyResource

**Entity:** App\Filament\App\Resources\SurveyResource  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/SurveyResource.php`  
**Updated:** 2026-02-14 17:03:50  

# Umfragen

## Übersicht
Hier kannst du Umfragen erstellen und verwalten. Jede Umfrage besteht aus Abschnitten, die wiederum Fragen enthalten. Du kannst die Umfrage in einer Vorschau testen und die Ergebnisse einsehen.

## Navigation
Die Funktion **Umfragen** befindet sich in der Seitenleiste unter der Menügruppe **Kommunikation**.

## Umfrage erstellen oder bearbeiten – Formularfelder

Beim Erstellen oder Bearbeiten einer Umfrage steht folgendes Feld zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Der Name der Umfrage. |

## Tabellenansicht / Listenansicht

In der Listenansicht der Umfragen wird folgende Spalte angezeigt:

| Spalte | Beschreibung |
|--------|--------------|
| Name | Der Name der Umfrage |

Von hier aus kannst du über die Aktionen in jeder Zeile die Umfrage bearbeiten, löschen, eine Vorschau anzeigen, Abschnitte und Fragen verwalten oder die Ergebnisse einsehen.

## Aktionen

### Ergebnisse anzeigen
Über die Aktion **Ergebnisse** in der Listenansicht der Umfragen gelangst du auf eine separate Seite, die die gesammelten Antworten der Teilnehmer für die jeweilige Umfrage darstellt.

### Vorschau
Die Aktion **Vorschau** zeigt die Umfrage als Assistent (Wizard) an. Du kannst die Umfrage so aus der Perspektive eines Teilnehmers durchgehen und prüfen, ob Abschnitte, Fragen und Antwortmöglichkeiten wie gewünscht dargestellt werden.

### Abschnitte & Fragen bearbeiten
Die Aktion **Abschnitte & Fragen bearbeiten** öffnet einen Dialog zum Verwalten der Abschnitte und Fragen einer Umfrage. Die Abschnitte werden als Tabs dargestellt, zwischen denen du wechseln kannst.

**Aktionen für jeden Abschnitt:**
- **Bearbeiten** (Stift-Icon): Ändert den Namen des Abschnitts.
- **Nach links verschieben** (Pfeil-links-Icon): Verschiebt den Abschnitt in der Reihenfolge nach vorne. Diese Aktion ist deaktiviert, wenn der Abschnitt bereits an erster Stelle steht.
- **Nach rechts verschieben** (Pfeil-rechts-Icon): Verschiebt den Abschnitt in der Reihenfolge nach hinten. Diese Aktion ist deaktiviert, wenn der Abschnitt bereits an letzter Stelle steht.
- **Löschen** (Papierkorb-Icon): Löscht den Abschnitt. Vor dem Löschen wird eine Bestätigungsabfrage angezeigt, um versehentliches Löschen zu verhindern.

**Neuen Abschnitt anlegen:**
Über den „+"-Tab kannst du einen neuen Abschnitt anlegen. Gib dazu den gewünschten Abschnittsnamen ein und klicke auf die Schaltfläche **Abschnitt anlegen**.

**Fragen innerhalb eines Abschnitts:**
Fragen werden als wiederholbare Einträge dargestellt, die ein- und ausgeklappt werden können. Du kannst neue Fragen hinzufügen oder bestehende Fragen bearbeiten. Das Löschen einer Frage erfordert eine Bestätigung.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Titel | Textfeld | Ja | Der Titel der Frage, wie er den Teilnehmern angezeigt wird. |
| Typ | Auswahlfeld | Ja | Der Fragetyp. Verfügbare Typen sind z. B. **Text** (Freitext-Antwort) und **Radio** (Einfachauswahl aus vorgegebenen Optionen). |
| Optionen | Tags-Eingabe | Nein | Die Antwortmöglichkeiten für die Frage. Dieses Feld ist nur sichtbar, wenn der Typ **Radio** ausgewählt ist. Neue Optionen kannst du über den Platzhalter „Neue Option" hinzufügen. Jede Option wird als Tag dargestellt und kann einzeln wieder entfernt werden. |

### Bearbeiten
Öffnet das Formular zum Bearbeiten des Namens einer bestehenden Umfrage.

### Löschen
Löscht die Umfrage. Vor dem Löschen wird eine Bestätigungsabfrage angezeigt, um versehentliches Löschen zu verhindern.

## Berechtigungen
Das Tool **Umfragen** muss für die Organisation aktiviert sein, damit der Menüpunkt in der Seitenleiste sichtbar ist und die Funktionen genutzt werden können.

## Validierung & Fehlermeldungen

Beim Arbeiten mit Umfragen können folgende Validierungsfehler auftreten:

| Feld | Fehlermeldung | Ursache | Lösung |
|------|---------------|---------|--------|
| Name (Umfrage) | Pflichtfeld-Fehler | Das Feld „Name" wurde leer gelassen. | Gib einen Namen für die Umfrage ein. |
| Titel (Frage) | Pflichtfeld-Fehler | Das Feld „Titel" einer Frage wurde leer gelassen. | Gib einen Titel für die Frage ein. |
| Typ (Frage) | Pflichtfeld-Fehler | Es wurde kein Fragetyp ausgewählt. | Wähle einen Fragetyp aus dem Auswahlfeld (z. B. Text oder Radio). |

Beim Löschen eines Abschnitts oder einer Frage wird eine Bestätigungsabfrage angezeigt, um versehentliches Löschen zu verhindern.

## Zusammenhänge und Aufbau einer Umfrage

Eine **Umfrage** ist hierarchisch aufgebaut:

- **Umfrage**: Die übergeordnete Einheit mit einem Namen. Jede Umfrage hat eine eigene Ergebnisseite.
- **Abschnitte**: Eine Umfrage besteht aus einem oder mehreren Abschnitten. Abschnitte strukturieren die Umfrage thematisch und werden in der Vorschau als einzelne Schritte im Wizard dargestellt. Abschnitte können sortiert, umbenannt und gelöscht werden.
- **Fragen**: Jede Frage gehört zu einem Abschnitt. Fragen können verschiedene Typen haben – z. B. **Text** für Freitextantworten oder **Radio** für Einfachauswahl mit vordefinierten Antwortoptionen.
- **Ergebnisse**: Die Antworten der Teilnehmer werden gesammelt und können über die Aktion „Ergebnisse" in der Listenansicht eingesehen werden.

---

## resource: App\Filament\App\Resources\SongResource

**Entity:** App\Filament\App\Resources\SongResource  
**Type:** auto_generated  
**Version:** 4  
**File:** `app/Filament/App/Resources/SongResource.php`  
**Updated:** 2026-02-14 17:02:13  

# Lieder

## Übersicht
Auf der Seite „Lieder" kannst du die Lieder deiner Organisation verwalten. Du siehst eine Übersicht aller gespeicherten Lieder mit Informationen wie Titel, CCLI-Songnummer, Autoren und wie oft ein Lied bereits in Veranstaltungen eingesetzt wurde. Zusätzlich kannst du für jedes Lied Variationen mit Leadsheets hinterlegen.

Damit dieser Bereich sichtbar ist, muss das Tool **Musik** aktiviert sein.

## Navigation
Die Seite „Lieder" findest du in der Seitenleiste unter der Menügruppe **Sonstiges**. Voraussetzung ist, dass das Tool **Musik** aktiviert ist. Ist das Tool nicht aktiviert, wird der Menüpunkt nicht angezeigt.

## Tabellenansicht / Listenansicht

Die Lieder werden in einer Tabelle mit folgenden Spalten angezeigt:

| Spalte | Beschreibung |
|---|---|
| **Titel** | Der Titel des Liedes. Die Spalte ist sortierbar und durchsuchbar. |
| **CCLI Song Nummer** | Die CCLI-Songnummer des Liedes. Ein Klick auf die Nummer öffnet die entsprechende Seite auf songselect.ccli.com in einem neuen Browser-Tab. Die Spalte ist sortierbar und durchsuchbar. |
| **Autoren** | Die Namen der Autoren des Liedes. Die Spalte ist durchsuchbar. |
| **Einsätze** | Zeigt an, wie oft das Lied in Programmpunkten von Veranstaltungen verwendet wurde. Die Spalte ist sortierbar. |

**Standardsortierung:** Die Lieder-Tabelle ist standardmäßig alphabetisch nach Titel sortiert.

**Suche:** Du kannst die Lieder-Liste nach Titel, CCLI-Songnummer und Autorennamen durchsuchen.

## Lied bearbeiten

Über die Bearbeiten-Aktion in der Tabellenzeile eines Liedes öffnet sich ein Dialogfenster. In diesem Dialog kannst du die Variationen des Liedes verwalten – zum Beispiel verschiedene Tonarten oder Arrangements mit jeweils eigenem Leadsheet.

### Felder im Bearbeitungsdialog

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| **Variationen** | Wiederholbare Gruppe | Nein | Du kannst beliebig viele Variationen eines Liedes anlegen oder bestehende entfernen. Jede Variation besteht aus einem Titel und einem optionalen Leadsheet. |
| **Titel** (innerhalb einer Variation) | Textfeld | Ja | Der Titel der jeweiligen Variation, z. B. „Tonart C" oder „Akustik-Version". |
| **Leadsheet** (innerhalb einer Variation) | Datei-Upload | Nein | Hier kannst du ein Leadsheet als Datei hochladen. |

### Hinweise zur Bearbeitung

- Wenn du eine Variation hinzufügst, musst du mindestens den Titel angeben. Ohne Titel kann die Variation nicht gespeichert werden.
- Das Leadsheet ist optional – du kannst eine Variation auch ohne Datei anlegen und das Leadsheet später ergänzen.
- Wenn du eine Variation entfernst und speicherst, wird diese dauerhaft gelöscht.

## Beziehungen

- **Autoren:** Jedem Lied können Autoren zugeordnet sein, die in der Lieder-Tabellenansicht angezeigt werden.
- **Veranstaltungen:** Lieder werden über Programmpunkte mit Veranstaltungen verknüpft. Die Spalte „Einsätze" in der Lieder-Tabelle zeigt die Anzahl dieser Verknüpfungen an.
- **Variationen:** Jedes Lied kann mehrere Variationen haben, die jeweils ein eigenes Leadsheet enthalten können. Variationen werden über den Bearbeitungsdialog des jeweiligen Liedes verwaltet.

---

## resource: App\Filament\App\Resources\SentMailResource

**Entity:** App\Filament\App\Resources\SentMailResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/SentMailResource.php`  
**Updated:** 2026-02-14 17:01:09  

# Verschickte Emails

## Übersicht

Auf der Seite „Verschickte Emails" kannst du alle von der Plattform versendeten Emails einsehen. Du siehst, wann eine Email verschickt wurde, von wem, an wen und mit welchem Betreff. Einzelne Emails kannst du in einer Vorschau öffnen und den vollständigen Inhalt lesen.

Diese Seite ist nicht über die Seitenleiste erreichbar. Sie wird über einen direkten Link oder aus einem anderen Bereich der Anwendung heraus aufgerufen.

## Tabellenansicht der verschickten Emails

Die Seite „Verschickte Emails" zeigt eine Liste aller versendeten Emails mit folgenden Spalten:

| Spalte | Beschreibung |
|---|---|
| Versandzeit | Datum und Uhrzeit, wann die Email verschickt wurde |
| von | Der Absender der Email |
| an | Der oder die Empfänger der Email |
| Betreff | Der Betreff der Email |

**Sortierung:** Standardmäßig werden die neuesten Emails zuerst angezeigt (nach Versandzeit absteigend sortiert).

**Suche:** Du kannst die Liste über das Suchfeld durchsuchen. Durchsucht werden die Spalten „von", „an" und „Betreff".

**Hervorhebung:** Noch nicht gelesene Emails werden fett dargestellt, sodass du neue Emails auf einen Blick erkennst.

**Automatische Aktualisierung:** Die Liste aktualisiert sich automatisch alle 2 Sekunden. Neu versendete Emails erscheinen dadurch ohne manuelles Neuladen der Seite.

## Email-Vorschau

Über das Augen-Symbol in jeder Zeile der Liste „Verschickte Emails" kannst du eine Vorschau der jeweiligen Email öffnen. Die Vorschau wird als seitliches Panel angezeigt und enthält:

- Den **Betreff** der Email als Überschrift
- Den **vollständigen Inhalt** der Email

Die Vorschau dient nur der Ansicht – du kannst die Email darüber nicht erneut versenden oder bearbeiten.

## Berechtigungen für verschickte Emails

Die Seite „Verschickte Emails" ist nur für Organisations-Administratoren zugänglich. Andere Benutzer können diese Seite nicht aufrufen.

**Ausnahme:** Im Demo-Modus der Anwendung ist die Seite für alle Benutzer sichtbar.

---

## resource: App\Filament\App\Resources\ReceiptResource

**Entity:** App\Filament\App\Resources\ReceiptResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ReceiptResource.php`  
**Updated:** 2026-02-14 17:00:25  

# Belege

## Übersicht
Die Belegverwaltung zeigt alle hochgeladenen Belege (z. B. Rechnungen, Quittungen) in einer Übersicht an. Belege werden typischerweise beim Erstellen von Finanzereignissen hochgeladen und können dort zugeordnet werden.

## Navigation
Die Belegverwaltung findest du in der Seitenleiste unter der Menügruppe **Finanzen**.

## Berechtigungen für die Belegverwaltung
- Um die Belegverwaltung sehen und nutzen zu können, muss das Tool **Erweiterte Buchhaltung** oder **Buchhaltung** aktiviert sein.
- Zusätzlich musst du Zugriff auf alle Projekte haben.

## Beziehungen zu anderen Bereichen
- **Finanzereignisse**: Belege können einem oder mehreren Finanzereignissen zugeordnet werden.
- **Finanzereignis erstellen**: Beim Erstellen eines Finanzereignisses kannst du neue Belege hochladen oder bereits vorhandene Belege aus der Belegverwaltung zuordnen. Dort hochgeladene Belege erscheinen anschließend auch in dieser Belegübersicht.

---

## resource: App\Filament\App\Resources\PublicationRequestResource

**Entity:** App\Filament\App\Resources\PublicationRequestResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/PublicationRequestResource.php`  
**Updated:** 2026-02-14 16:58:52  

# Veröffentlichungs-Anfragen

## Übersicht

Im Bereich „Veröffentlichungs-Anfragen" kannst du Anfragen erstellen, bearbeiten und löschen, um Inhalte zur Veröffentlichung auf verschiedenen Kommunikationskanälen einzureichen. Die Seite bietet dir eine Übersicht über alle eingereichten Anfragen inklusive deren Status, zugewiesener Kanäle und Veröffentlichungsdaten.

## Navigation

Die Veröffentlichungs-Anfragen findest du in der Seitenleiste im Bereich **Kommunikation**. Der Menüpunkt ist nur sichtbar, wenn das Tool **Veröffentlichungs-Management** für deine Organisation aktiviert ist.

## Formularfelder

Das Formular für Veröffentlichungs-Anfragen enthält folgende Felder:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Anfrager | Auswahl (durchsuchbar) | Nein | Die Person, die die Anfrage stellt. Du kannst aus den Kontakten deiner Organisation auswählen und den Namen zur Suche eintippen. |
| Titel | Textfeld | Ja | Der Titel der Veröffentlichungs-Anfrage. |
| Status | Auswahl | Nein | Der aktuelle Bearbeitungsstatus der Anfrage. |
| Veröffentlichungs-Datum | Wiederholungsfeld (Datumsauswahl) | Nein | Ein oder mehrere gewünschte Veröffentlichungsdaten. Über den Hinzufügen-Button kannst du beliebig viele Daten ergänzen und einzelne Einträge wieder entfernen. |
| Kanäle – gewünscht | Checkboxliste | Nein | Die Kanäle, in denen der Anfrager die Veröffentlichung wünscht. |
| Kanäle – genehmigt | Checkboxliste | Nein | Die Kanäle, in denen die Anfrage tatsächlich veröffentlicht werden wird. Dieses Feld wird typischerweise von der verantwortlichen Person ausgefüllt, die über die Veröffentlichung entscheidet. |
| Beschreibung | Rich-Text-Editor | Nein | Eine ausführliche Beschreibung des zu veröffentlichenden Inhalts. Hier kannst du Texte formatieren, um den gewünschten Inhalt möglichst klar darzustellen. |
| Anhänge | Datei-Upload | Nein | Dateien, die der Anfrage beigefügt werden sollen (z. B. Bilder, Dokumente). Du kannst mehrere Dateien gleichzeitig hochladen. |

## Tabellenansicht / Listenansicht

Die Listenansicht der Veröffentlichungs-Anfragen zeigt alle eingereichten Anfragen in einer Tabelle. Standardmäßig werden nur offene, in Bearbeitung befindliche und in Kanälen befindliche Anfragen angezeigt – abgeschlossene oder abgelehnte Anfragen sind über den Statusfilter einblendbar.

### Spalten

| Spalte | Sortierbar | Durchsuchbar | Beschreibung |
|--------|------------|--------------|--------------|
| Datum | Ja | Nein | Das Erstellungsdatum der Veröffentlichungs-Anfrage. |
| Anfrager | Ja | Ja | Der Name der Person, die die Anfrage gestellt hat. Du kannst nach dem Namen suchen. |
| Status | Ja | Nein | Der aktuelle Bearbeitungsstatus der Veröffentlichungs-Anfrage. |
| Kanäle – angefragt | Nein | Nein | Die vom Anfrager gewünschten Veröffentlichungskanäle. |
| Kanäle – genehmigt | Nein | Nein | Die genehmigten Veröffentlichungskanäle. |
| Titel | Ja | Ja | Der Titel der Veröffentlichungs-Anfrage. Du kannst nach dem Titel suchen. |

### Filter

| Filter | Typ | Beschreibung |
|--------|-----|--------------|
| Status | Mehrfachauswahl | Filtert Veröffentlichungs-Anfragen nach dem Bearbeitungsstatus. Standardmäßig werden offene, in Bearbeitung befindliche und in Kanälen befindliche Anfragen angezeigt. Du kannst die Vorauswahl anpassen, um z. B. auch abgeschlossene Anfragen zu sehen. |
| Anfrager | Mehrfachauswahl | Filtert Veröffentlichungs-Anfragen nach der Person, die die Anfrage gestellt hat. Alle Kontakte deiner Organisation stehen zur Auswahl. |

### Standardsortierung

Die Liste der Veröffentlichungs-Anfragen ist standardmäßig nach Datum absteigend sortiert, sodass die neuesten Anfragen oben stehen. Du kannst die Sortierung durch Klick auf eine sortierbare Spaltenüberschrift ändern.

## Aktionen

Im Bereich der Veröffentlichungs-Anfragen stehen dir folgende Aktionen zur Verfügung:

- **Bearbeiten**: Über das Bearbeiten-Symbol in der jeweiligen Tabellenzeile öffnest du die Veröffentlichungs-Anfrage in einem breiten Modal-Fenster. Dort kannst du alle Felder anpassen und die Änderungen speichern.
- **Löschen**: Über das Löschen-Symbol in der Tabellenzeile kannst du eine einzelne Veröffentlichungs-Anfrage entfernen.
- **Massenlöschung**: Über die Checkboxen am Anfang jeder Zeile kannst du mehrere Veröffentlichungs-Anfragen gleichzeitig auswählen und gesammelt löschen.

## Berechtigungen

Damit der Bereich „Veröffentlichungs-Anfragen" sichtbar und zugänglich ist, muss das Tool **Veröffentlichungs-Management** für deine Organisation aktiviert sein. Ohne dieses Tool wird der Menüpunkt in der Seitenleiste nicht angezeigt.

## Validierung

Beim Speichern einer Veröffentlichungs-Anfrage werden die eingegebenen Daten überprüft. Falls Pflichtfelder nicht ausgefüllt sind, wird eine Fehlermeldung direkt am betroffenen Feld angezeigt und die Anfrage wird nicht gespeichert.

| Feld | Regel |
|------|-------|
| Titel | Pflichtfeld |

---

## resource: App\Filament\App\Resources\ProjectResource

**Entity:** App\Filament\App\Resources\ProjectResource  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/ProjectResource.php`  
**Updated:** 2026-02-14 16:57:28  

# Projekte

## Übersicht

In der Projektverwaltung kannst du Projekte anlegen, bearbeiten und überwachen. Projekte dienen zur Zuordnung von Spenden, Finanzereignissen und Zeiterfassung. Die Übersicht zeigt alle Projekte mit ihren finanziellen Kennzahlen wie Eröffnungssaldo, Einnahmen, Ausgaben und aktuellem Guthaben.

**Voraussetzung:** Das Tool **Projekte** muss aktiviert sein, damit der Menüpunkt sichtbar ist.

## Navigation

Die Projektverwaltung erreichst du über den Menüpunkt **Projekte** in der Hauptnavigation. Nach dem Öffnen siehst du die Tabellenansicht mit allen vorhandenen Projekten.

## Projekt erstellen und bearbeiten

### Formularfelder

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Nummer | Textfeld | Nein | Eindeutige Projektnummer. Wird beim Anlegen automatisch vorgeschlagen und kann überschrieben werden. Dieses Feld ist nur sichtbar, wenn in den Einstellungen Projektnummern aktiviert sind. Bei beendeten Projekten ist das Feld nicht bearbeitbar. |
| Name | Textfeld | Ja | Eindeutiger Name des Projekts. Bei beendeten Projekten ist das Feld nicht bearbeitbar. |
| Übergeordnetes Projekt | Auswahlfeld | Nein | Ermöglicht die hierarchische Zuordnung zu einem anderen Projekt. Es stehen nur aktive Projekte (ohne Enddatum) zur Auswahl. Bei beendeten Projekten ist das Feld nicht bearbeitbar. |
| Als Spendenprojekt verwenden | Checkbox | Nein | Wenn aktiviert, steht das Projekt bei der Spenden-Erfassung zur Auswahl. Standardmäßig aktiviert. Nur sichtbar, wenn das Tool **Spenden** aktiviert ist. Bei beendeten Projekten nicht bearbeitbar. |
| Zuweisungsbegriffe | Tags-Eingabe | Nein | Begriffe für die automatische Zuordnung von Spenden zu diesem Projekt. Gib einen neuen Begriff ein und drücke Enter, um ihn hinzuzufügen. Dieses Feld ist nur sichtbar, wenn „Als Spendenprojekt verwenden" aktiviert ist und die Tools **Buchhaltung** sowie **Spenden** aktiviert sind. Bei beendeten Projekten nicht bearbeitbar. |
| Startdatum | Datumsfeld | Ja | Startdatum des Projekts. Es muss der erste Tag eines Monats sein (z. B. 01.03.2025). Standardmäßig wird der Beginn des ersten Geschäftsjahres vorgeschlagen. Das Startdatum kann nicht mehr geändert werden, wenn das Projekt bereits einen Eröffnungssaldo hat. Bei beendeten Projekten nicht bearbeitbar. |
| Eröffnungssaldo | Geldbetrag | Ja | Projektguthaben zum Startdatum des Projekts. Der Eröffnungssaldo kann nur gesetzt werden, wenn das Startdatum mit dem Anfang des ersten Geschäftsjahres übereinstimmt. Nur sichtbar, wenn das Tool **Buchhaltung** aktiviert ist. Bei beendeten Projekten nicht bearbeitbar. |
| Projektleiter | Mehrfachauswahl | Nein | Auswahl eines oder mehrerer Benutzer als Projektleiter. |
| In Zeiterfassung verwenden | Checkbox | Nein | Wenn aktiviert, steht das Projekt in der Zeiterfassung zur Verfügung. Nur sichtbar, wenn das Tool **Zeiterfassung** aktiviert ist. Bei beendeten Projekten nicht bearbeitbar. |

### Hinweis bei beendeten Projekten

Wenn du ein beendetes Projekt bearbeitest, wird oben im Formular ein Hinweis angezeigt: *„Dieses Projekt wurde am [Datum] beendet."* Die meisten Felder sind dann nicht mehr bearbeitbar.

## Tabellenansicht / Listenansicht

Die Projekttabelle zeigt alle Projekte mit ihren Kennzahlen an. Über eine Zeitraumauswahl kannst du den Zeitraum für die Finanzspalten einstellen. Die Projekte werden standardmäßig nach ihrer hierarchischen Struktur sortiert – Unterprojekte erscheinen eingerückt unterhalb ihres übergeordneten Projekts.

### Spalten

| Spalte | Standardmäßig sichtbar | Beschreibung |
|--------|----------------------|--------------|
| Nummer | Ja (wenn Projektnummern aktiviert) | Projektnummer, durchsuchbar und sortierbar. |
| Name | Ja | Projektname. Unterprojekte werden hierarchisch eingerückt dargestellt. Durchsuchbar und sortierbar. |
| Übergeordnetes Projekt | Nein (ausgeblendet) | Name des übergeordneten Projekts, durchsuchbar und sortierbar. |
| Startdatum | Nein (ausgeblendet) | Startdatum im Format TT.MM.JJJJ, sortierbar. |
| Enddatum | Nein (ausgeblendet) | Enddatum im Format TT.MM.JJJJ, sortierbar. Ist leer, wenn das Projekt noch aktiv ist. |
| Zeiterfassung | Nein (ausgeblendet) | Zeigt per Icon an, ob das Projekt in der Zeiterfassung verwendet wird. Nur sichtbar, wenn das Tool **Zeiterfassung** aktiviert ist. |
| Spendenprojekt? | Nein (ausgeblendet) | Zeigt per Icon an, ob das Projekt als Spendenprojekt markiert ist. Nur sichtbar, wenn das Tool **Spenden** aktiviert ist. |
| Zuweisungsbegriffe | Nein (ausgeblendet) | Zuweisungsbegriffe als farbige Badges, durchsuchbar. |
| Guthaben [Startdatum] | Ja | Eröffnungssaldo zum Beginn des gewählten Zeitraums. Negative Beträge werden rot dargestellt. Am Tabellenende wird die Gesamtsumme angezeigt. |
| Einnahme | Ja | Summe aller Einnahmen im gewählten Zeitraum. Negative Beträge werden rot, Nullbeträge grau dargestellt. Am Tabellenende wird die Gesamtsumme angezeigt. |
| Ausgabe | Ja | Summe aller Ausgaben im gewählten Zeitraum. Negative Beträge werden rot, Nullbeträge grau dargestellt. Am Tabellenende wird die Gesamtsumme angezeigt. |
| Guthaben [Enddatum/aktuell] | Ja | Schlusssaldo zum Ende des gewählten Zeitraums oder aktueller Stand. Negative Beträge werden rot dargestellt. Am Tabellenende wird die Gesamtsumme angezeigt. |

Über den Spaltenumschalter kannst du ausgeblendete Spalten ein- oder sichtbare Spalten ausblenden.

## Aktionen

### Projekt ansehen

Über die Tabellenzeile eines Projekts gelangst du zur Detailansicht. Dort siehst du die Projektdetails, das aktuelle Guthaben, eine monatliche Finanzübersicht und die letzten Finanzereignisse.

### Unternavigation (Detailansicht)

Nach dem Öffnen eines Projekts stehen folgende Unterbereiche als Tabs zur Verfügung:

| Tab | Sichtbarkeit | Beschreibung |
|-----|-------------|--------------|
| Übersicht | Immer sichtbar | Zeigt Projektdetails, aktuelles Guthaben, monatliche Finanzübersicht und die letzten Finanzereignisse. |
| Spenden | Nur wenn das Tool **Spenden** aktiviert ist | Listet alle Spenden auf, die diesem Projekt zugeordnet sind. |
| Spender | Nur wenn das Tool **Spenden** aktiviert ist | Zeigt alle Spender, die für dieses Projekt gespendet haben. |
| Finanzereignisse | Nur wenn das Tool **Buchhaltung** aktiviert ist | Listet alle Finanzereignisse (Einnahmen und Ausgaben) dieses Projekts auf. |

## Validierung und Fehlermeldungen

Beim Erstellen oder Bearbeiten von Projekten können folgende Validierungsfehler auftreten:

| Situation | Fehlermeldung | Lösung |
|-----------|---------------|--------|
| Startdatum ist nicht der erste Tag eines Monats | „Das Startdatum muss der erste Tag eines Monats sein." | Wähle ein Datum, das auf den Ersten eines Monats fällt (z. B. 01.01.2025). |
| Startdatum liegt vor dem Startdatum des übergeordneten Projekts | „Das Startdatum darf nicht früher sein als das Startdatum des übergeordneten Projekts ([Datum])." | Wähle ein Startdatum, das gleich oder nach dem Startdatum des übergeordneten Projekts liegt. |
| Startdatum liegt vor dem ersten Geschäftsjahr | „Das Startdatum darf nicht vor dem Anfang des ersten Geschäftsjahres ([Datum]) liegen." | Wähle ein Startdatum, das innerhalb eines bestehenden Geschäftsjahres liegt. |
| Name ist bereits vergeben | Standard-Validierungsmeldung für Eindeutigkeit | Vergib einen anderen, eindeutigen Projektnamen. |
| Nummer ist bereits vergeben (falls Projektnummern aktiviert) | Standard-Validierungsmeldung für Eindeutigkeit | Vergib eine andere, eindeutige Projektnummer. |
| Startdatum kann nicht geändert werden, da ein Eröffnungssaldo vorhanden ist | „Das Startdatum kann nicht geändert werden, wenn das Projekt einen Eröffnungssaldo hat." (Hinweistext, Feld ist gesperrt) | Setze zuerst den Eröffnungssaldo auf null, bevor du das Startdatum änderst. |
| Eröffnungssaldo kann nicht gesetzt werden, da das Startdatum nicht am Geschäftsjahresanfang liegt | „Eröffnungssaldo kann nur für Projekte gesetzt werden, die am Anfang des ersten Geschäftsjahres beginnen." (Hinweistext, Feld ist gesperrt) | Ändere das Startdatum auf den Beginn des ersten Geschäftsjahres, um einen Eröffnungssaldo setzen zu können. |

## Beziehungen zu anderen Bereichen

Projekte sind mit verschiedenen Bereichen der Plattform verknüpft:

- **Übergeordnetes Projekt**: Projekte können hierarchisch organisiert werden. Ein Projekt kann genau einem übergeordneten Projekt zugeordnet werden, wodurch eine Baumstruktur entsteht.
- **Spenden**: Projekte, die als Spendenprojekt markiert sind, stehen bei der Spendenerfassung zur Auswahl. Zuweisungsbegriffe ermöglichen die automatische Zuordnung von Spenden. Voraussetzung: Das Tool **Spenden** muss aktiviert sein.
- **Finanzereignisse**: Einnahmen und Ausgaben werden über Finanzereignisse erfasst und dem Projekt zugeordnet. Die Finanzspalten in der Tabelle und die Detailansicht zeigen diese Daten an. Voraussetzung: Das Tool **Buchhaltung** muss aktiviert sein.
- **Zeiterfassung**: Projekte, bei denen „In Zeiterfassung verwenden" aktiviert ist, stehen in der Zeiterfassung zur Auswahl. Voraussetzung: Das Tool **Zeiterfassung** muss aktiviert sein.
- **Projektleiter**: Einem Projekt können ein oder mehrere Benutzer als Projektleiter zugewiesen werden.
- **Geschäftsjahre**: Das Startdatum eines Projekts darf nicht vor dem ersten Geschäftsjahr liegen. Der Eröffnungssaldo kann nur gesetzt werden, wenn das Startdatum dem Beginn des ersten Geschäftsjahres entspricht.

---

## resource: App\Filament\App\Resources\ProjectExternalMoneyTransferResource

**Entity:** App\Filament\App\Resources\ProjectExternalMoneyTransferResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectExternalMoneyTransferResource.php`  
**Updated:** 2026-02-14 16:54:57  

# Geldtransfers an Partner

## Übersicht

Auf der Seite „Geldtransfers an Partner" kannst du alle Überweisungen einsehen, die im Rahmen eines Projekts an externe Partner getätigt wurden. Die Ansicht gibt dir einen Überblick über bisherige Geldtransfers mit den zugehörigen Beträgen, Empfängern und Daten. Das Erstellen neuer Geldtransfers ist über diese Listenansicht nicht möglich.

## Navigation

Die Seite „Geldtransfers an Partner" ist nicht über die Seitenleiste erreichbar.

## Tabellenansicht / Listenansicht

Die Listenansicht der Geldtransfers an Partner zeigt folgende Spalten:

| Spalte | Beschreibung | Sortierbar | Durchsuchbar |
|--------|-------------|------------|--------------|
| Datum | Das Datum, an dem der Geldtransfer erstellt wurde (im Datumsformat) | Ja | Nein |
| Kontakt | Der Name des externen Partners, der die Überweisung erhalten hat | Ja | Ja |
| Betrag | Die Summe aller Positionen des Geldtransfers, formatiert in der Währung deiner Organisation | Ja | Ja |

Der Betrag wird rechtsbündig dargestellt und automatisch aus den einzelnen Positionen des Transfers berechnet.

## Aktionen

### Geldtransfer anzeigen

Über das Icon in der Tabellenzeile kannst du die Detailansicht eines einzelnen Geldtransfers öffnen. In der Detailansicht werden dir die zugehörigen Positionen des Transfers angezeigt, aus denen sich der Gesamtbetrag zusammensetzt.

Das Erstellen, Bearbeiten oder Löschen von Geldtransfers ist über diese Listenansicht nicht möglich.

## Positionen eines Geldtransfers

Jeder Geldtransfer besteht aus einzelnen Positionen, die in der Detailansicht des Geldtransfers in einem eigenen Bereich angezeigt werden. Die Summe aller Positionen ergibt den Gesamtbetrag des Transfers, der in der Listenansicht in der Spalte „Betrag" angezeigt wird.

## Beziehungen

- **Kontakte**: Jeder Geldtransfer ist einem Kontakt (dem externen Partner) zugeordnet, der als Empfänger der Überweisung fungiert.
- **Positionen**: Jeder Geldtransfer enthält einzelne Positionen, die zusammen den Gesamtbetrag des Transfers ergeben.

---

## resource: App\Filament\App\Resources\NewsletterDripCampaignResource

**Entity:** App\Filament\App\Resources\NewsletterDripCampaignResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/NewsletterDripCampaignResource.php`  
**Updated:** 2026-02-14 16:54:11  

# Newsletter-Serien

## Übersicht
Newsletter-Serien (auch Drip-Kampagnen genannt) ermöglichen es dir, eine Reihe von E-Mails zu erstellen, die automatisch in festgelegten Zeitabständen an eingeschriebene Kontakte versendet werden. So kannst du beispielsweise Willkommens-Serien oder mehrteilige Informationskampagnen aufbauen. Jede Newsletter-Serie besteht aus einem oder mehreren E-Mail-Schritten, die nacheinander an die eingeschriebenen Kontakte verschickt werden.

## Navigation
Die Newsletter-Serien findest du in der Seitenleiste im Bereich **Kommunikation** unter dem Eintrag **Newsletter-Serien**.

## Voraussetzungen
Das Tool **Newsletter-Serien** muss für deine Organisation aktiviert sein, damit dieser Bereich in der Navigation sichtbar ist und genutzt werden kann.

## Newsletter-Serie erstellen
Um eine neue Newsletter-Serie anzulegen, klicke in der Listenansicht auf die Schaltfläche zum Erstellen. Es öffnet sich ein Formular mit den folgenden Feldern:

### Formularfelder der Newsletter-Serie

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Der Name der Newsletter-Serie. Dieser dient zur internen Bezeichnung und wird in der Listenansicht angezeigt. |
| Platzhalter | Tags-Eingabe | Nein | Platzhalter (Merge-Tags), die du in den einzelnen E-Mails der Serie als Textbausteine verwenden kannst. Beim Versand werden sie automatisch durch die passenden Daten des jeweiligen Empfängers ersetzt, sodass jeder Kontakt einen personalisierten Newsletter erhält. Du kannst mehrere Platzhalter als einzelne Tags hinzufügen. |
| Links | Tags-Eingabe | Nein | Link-Platzhalter, die du in den einzelnen E-Mails der Serie als personalisierte Links einfügen kannst. Beim Versand werden sie automatisch durch die passenden Daten des jeweiligen Empfängers ersetzt. Du kannst mehrere Link-Platzhalter als einzelne Tags hinzufügen. |

**Hinweis zur Validierung:** Das Feld „Name" ist ein Pflichtfeld. Wenn du versuchst, eine Newsletter-Serie ohne Namen zu speichern, erscheint eine Fehlermeldung. Trage in diesem Fall einen aussagekräftigen Namen ein und speichere erneut.

## Tabellenansicht / Listenansicht
Die Listenansicht der Newsletter-Serien zeigt alle angelegten Serien in einer Übersichtstabelle:

| Spalte | Beschreibung |
|--------|--------------|
| Name | Der Name der Newsletter-Serie. |

Wenn noch keine Newsletter-Serien angelegt wurden, wird die Tabelle leer angezeigt. Du kannst über die Schaltfläche zum Erstellen deine erste Serie anlegen.

## Aktionen in der Listenansicht

- **Bearbeiten**: Über das Bearbeiten-Symbol in der Tabellenzeile kannst du eine bestehende Newsletter-Serie öffnen und ihre Einstellungen (Name, Platzhalter, Links) anpassen. Zusätzlich kannst du auf der Bearbeitungsseite die E-Mails und Einschreibungen der Serie verwalten.
- **Massenlöschung**: Über die Bulk-Aktion kannst du mehrere Newsletter-Serien gleichzeitig auswählen und löschen.

## E-Mails einer Newsletter-Serie

Innerhalb einer Newsletter-Serie kannst du mehrere E-Mails anlegen. Diese bilden die einzelnen Schritte der Serie, die nacheinander in festgelegten Zeitabständen an die eingeschriebenen Kontakte versendet werden. Die Reihenfolge und die Zeitabstände zwischen den einzelnen E-Mails bestimmen, wann jeder Kontakt welche Nachricht erhält.

Wenn noch keine E-Mails in einer Newsletter-Serie vorhanden sind, wird der Bereich leer angezeigt. Du kannst dann über die entsprechende Schaltfläche die erste E-Mail der Serie hinzufügen.

## Einschreibungen in eine Newsletter-Serie

Kontakte können in eine Newsletter-Serie eingeschrieben werden. Die Einschreibungen zeigen dir, welche Kontakte aktuell die Serie durchlaufen und welche E-Mail als nächstes an den jeweiligen Kontakt versendet wird.

Wenn noch keine Kontakte in eine Newsletter-Serie eingeschrieben sind, wird der Einschreibungsbereich leer angezeigt.

---

## resource: App\Filament\App\Resources\NewsletterCampaignResource

**Entity:** App\Filament\App\Resources\NewsletterCampaignResource  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/NewsletterCampaignResource.php`  
**Updated:** 2026-02-14 16:52:51  

# Newsletter

## Übersicht

In diesem Bereich kannst du Newsletter-Kampagnen erstellen, bearbeiten und versenden. Du kannst Newsletter an bestimmte Newsletter-Listen und Segmente senden, den Versand planen und die Ergebnisse (Klicks, Abmeldungen, Bounces) auswerten.

Das Tool **Newsletter** muss für deine Organisation aktiviert sein, damit dieser Bereich sichtbar ist.

**Hinweis:** Newsletter-Kampagnen, die zu einer Newsletter-Serie gehören, werden in dieser Übersicht nicht angezeigt – sie werden separat über den Bereich „Newsletter-Serien" verwaltet.

## Navigation

Die Newsletter-Funktion findest du in der Seitenleiste unter der Menügruppe **Kommunikation**.

## Newsletter erstellen

Beim Erstellen eines neuen Newsletters stehen folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Interner Name des Newsletters. Dieser dient nur als interne Bezeichnung und erscheint nicht öffentlich. Der Betreff des Newsletters kann sich davon unterscheiden. |
| Newsletter-Listen | Mehrfachauswahl | Ja | Auswahl der Newsletter-Listen, an die der Newsletter versendet werden soll. Du kannst mehrere Listen auswählen. Ein Kontakt erhält den Newsletter, wenn er mindestens eine der ausgewählten Listen abonniert hat. Dieses Feld wird automatisch ausgeblendet, wenn nur eine einzige Newsletter-Liste existiert. Über den Link „Newsletter-Listen verwalten" gelangst du direkt zu den Einstellungen. |
| Segmente | Mehrfachauswahl | Nein | Wenn der Newsletter nicht an die komplette Liste geschickt werden soll, kannst du hier die Empfänger einschränken. Der Newsletter wird dann nur an Kontakte verschickt, die in mindestens einem der ausgewählten Segmente enthalten sind. |

Unterhalb der Felder wird der Hinweis angezeigt: *„Alle Einstellungen können zu einem späteren Zeitpunkt noch geändert werden."*

## Newsletter bearbeiten

Die gleichen Felder wie beim Erstellen stehen auch beim Bearbeiten zur Verfügung. Wenn ein Newsletter jedoch bereits für den Versand geplant ist, sind die Formularfelder deaktiviert und können nicht mehr geändert werden.

## Tabellenansicht / Listenansicht

Die Listenansicht zeigt alle Newsletter-Kampagnen deiner Organisation (mit Ausnahme von Kampagnen, die einer Newsletter-Serie zugeordnet sind).

### Spalten

| Spalte | Beschreibung |
|--------|--------------|
| Name | Interner Name des Newsletters |
| Newsletter-Listen | Die dem Newsletter zugeordneten Newsletter-Listen |
| Segmente | Die dem Newsletter zugeordneten Segmente |
| Emails | Anzahl der versendeten E-Mails. Zeigt „-" an, wenn der Versand noch nicht gestartet wurde. |
| Link geklickt | Anzahl und prozentualer Anteil der Empfänger, die einen Link im Newsletter geklickt haben. |
| Abmeldungen | Anzahl und prozentualer Anteil der Empfänger, die sich über diesen Newsletter abgemeldet haben. |
| Abgewiesen | Anzahl und prozentualer Anteil der abgewiesenen E-Mails (Bounces). Ein Bounce bedeutet, dass die E-Mail nicht zugestellt werden konnte, z. B. weil die E-Mail-Adresse ungültig ist. |
| Versandzeit | Datum und Uhrzeit des Versands (Format: TT.MM.JJJJ HH:MM). |

### Sortierung

Die Newsletter-Liste ist standardmäßig nach Erstellungsdatum sortiert (neueste zuerst). Die Spalte **Versandzeit** kann zusätzlich per Klick auf die Spaltenüberschrift auf- oder absteigend sortiert werden.

### Filter

| Filter | Beschreibung |
|--------|--------------|
| Newsletter-Listen | Filtert die Newsletter-Kampagnen nach zugeordneten Newsletter-Listen. Mehrfachauswahl möglich. |

### Newsletter öffnen

Ein Klick auf einen Newsletter in der Liste öffnet direkt die Inhaltsbearbeitung des jeweiligen Newsletters.

## Aktionen in der Listenansicht

Jede Zeile in der Newsletter-Liste bietet folgende Aktionen:

| Aktion | Icon | Beschreibung |
|--------|------|--------------|
| Empfänger anzeigen | Briefumschlag-Icon | Öffnet die Liste der Empfänger mit deren Zustellungsstatus. Diese Aktion ist nur sichtbar, wenn der Versand des Newsletters bereits gestartet wurde. |
| Umbenennen | Stift-Icon | Öffnet ein Dialogfenster, in dem du den internen Namen des Newsletters ändern kannst. Der Name ist nur eine interne Bezeichnung und erscheint nicht öffentlich. Der Betreff des Newsletters kann sich davon unterscheiden. |
| Duplizieren | Dokument-Icon | Erstellt eine Kopie des Newsletters. Der Name der Kopie wird automatisch mit dem Zusatz „Kopie" versehen – du kannst ihn im Dialogfenster direkt anpassen. Versandzeit und Versandstatus werden bei der Kopie zurückgesetzt, sodass die Kopie als neuer Entwurf beginnt. |
| Löschen | – | Löscht den Newsletter. |

## Unterseiten eines Newsletters (Sub-Navigation)

Nach dem Öffnen eines Newsletters stehen folgende Unterseiten in der Sub-Navigation zur Verfügung:

| Unterseite | Beschreibung |
|------------|--------------|
| **Inhalt** | Hier bearbeitest du den Inhalt des Newsletters (Betreff, Text, Layout usw.). |
| **Versenden** | Hier konfigurierst du den Versand und kannst ihn auslösen oder für einen späteren Zeitpunkt planen. |
| **Empfänger** | Zeigt die Liste aller Empfänger mit deren Zustellungsstatus an. Diese Unterseite ist nur sichtbar, wenn der Versand des Newsletters bereits gestartet wurde. |

## Validierung & Fehlermeldungen

Beim Erstellen und Bearbeiten eines Newsletters gelten folgende Validierungsregeln:

| Feld | Regel |
|------|-------|
| Name | Pflichtfeld |
| Newsletter-Listen | Pflichtfeld, mindestens eine Liste muss ausgewählt sein |

## Beziehungen zu anderen Bereichen

- **Newsletter-Listen**: Die Newsletter-Listen werden in den Einstellungen unter „Newsletter" verwaltet. Sie bestimmen, welche Kontakte den Newsletter erhalten können. Nur Kontakte, die eine der ausgewählten Listen abonniert haben, kommen als Empfänger in Frage.
- **Segmente**: Segmente ermöglichen eine zusätzliche Einschränkung der Empfänger innerhalb der gewählten Newsletter-Listen.
- **Empfänger (Nachrichten)**: Nach dem Versand werden die einzelnen Nachrichten mit Zustellungsstatus, Klicks, Abmeldungen und Bounces erfasst. Diese Daten findest du auf der Unterseite „Empfänger" des jeweiligen Newsletters.
- **Newsletter-Serien**: Newsletter-Kampagnen, die zu einer Newsletter-Serie gehören, werden in der Newsletter-Übersicht nicht angezeigt. Sie werden separat über den Bereich „Newsletter-Serien" verwaltet.

---

## resource: App\Filament\App\Resources\MailAddressResource

**Entity:** App\Filament\App\Resources\MailAddressResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/MailAddressResource.php`  
**Updated:** 2026-02-14 16:51:07  

# Email-Adressen

## Übersicht

Unter **Email-Adressen** kannst du Email-Adressen für deine Organisation erstellen und verwalten. Es gibt zwei Arten von Email-Adressen:

- **Postfach**: Ein vollwertiges Email-Postfach, mit dem du Emails senden und empfangen kannst.
- **Weiterleitung**: Eingehende Emails werden automatisch an eine oder mehrere andere Email-Adressen weitergeleitet. Ein eigenes Postfach wird dabei nicht erstellt – du kannst mit dieser Adresse also keine Emails versenden.

Die Verwaltung umfasst das Anlegen, Bearbeiten und Löschen von Email-Adressen.

## Navigation

Die Funktion **Email-Adressen** befindet sich in der Seitenleiste unter der Menügruppe **Kommunikation**.

## Voraussetzungen

Damit du Email-Adressen anlegen kannst, muss mindestens eine Domain für deine Organisation eingerichtet sein.

## Formularfelder (Erstellen)

Das Formular zum Erstellen einer neuen Email-Adresse enthält mehrere Bereiche:

### Kosten

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Kosten-Hinweis | Hinweistext | – | Zeigt an, ob noch kostenfreie Postfächer verfügbar sind. Falls nicht, wird der monatliche Preis pro zusätzlichem Postfach angezeigt (zzgl. 7 % MwSt.). Weiterleitungen sind grundsätzlich kostenfrei. |

### Email-Adresse

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Adresse | Textfeld | Ja | Der lokale Teil der Email-Adresse (der Teil vor dem @-Zeichen, z. B. `info` bei `info@example.org`). Muss innerhalb der gewählten Domain eindeutig sein. |
| Domain | Auswahl | – | Die Domain (der Teil nach dem @-Zeichen, z. B. `example.org`). Wenn nur eine Domain verfügbar ist, wird dieses Feld automatisch ausgefüllt und ist nicht änderbar. |

### Name

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Nein | Ein optionaler Anzeigename für die Email-Adresse (z. B. „Max Mustermann" oder „Vorstand"). |

### Weiterleitung

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Aktiviert | Schalter | Nein | Aktiviert die Weiterleitung. Wenn dieser Schalter eingeschaltet ist, wird kein eigenes Postfach erstellt. Stattdessen werden eingehende Emails an die unten angegebenen Adressen weitergeleitet. Mit dieser Email-Adresse kannst du dann nur Emails empfangen, nicht versenden. |
| Weiterleitung an | Wiederholbare Eingabe | Ja (wenn Weiterleitung aktiv) | Eine oder mehrere Email-Adressen, an die eingehende Emails weitergeleitet werden sollen. Dieses Feld ist nur sichtbar, wenn der Schalter „Aktiviert" eingeschaltet ist. Du kannst mehrere Ziel-Adressen hinzufügen. |

### Einladung

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Einladung | Textfeld (Email) | Nein | Eine alternative Email-Adresse, an die ein Link zum Setzen des Passworts geschickt wird. Dieses Feld ist nur sichtbar, wenn die Weiterleitung **nicht** aktiviert ist (also bei Postfächern). Wenn du hier keine Adresse angibst, kannst du den Passwort-Link später über die Listenansicht kopieren und selbst an den Nutzer weitergeben. |

## Tabellenansicht / Listenansicht

Die Listenansicht der Email-Adressen zeigt alle angelegten Email-Adressen deiner Organisation.

### Spalten

| Spalte | Beschreibung |
|--------|--------------|
| Typ-Icon | Ein Symbol, das den Typ der Email-Adresse kennzeichnet: Postfach oder Weiterleitung. |
| Email-Adresse | Die vollständige Email-Adresse (z. B. `info@example.org`). Kann per Klick kopiert werden. Sortierbar und durchsuchbar. |
| Name | Der Anzeigename der Email-Adresse. Sortierbar und durchsuchbar. |
| Weiterleitung an | Die Ziel-Adressen, an die Emails weitergeleitet werden (nur bei Weiterleitungen befüllt). Durchsuchbar. |
| Aktiviert | Schalter zum Aktivieren oder Deaktivieren des Postfachs. Bei Weiterleitungen ist dieser Schalter deaktiviert – es erscheint der Hinweis: „Mail-Weiterleitungen können nicht deaktiviert werden. Du kannst sie einfach löschen." |

### Standardsortierung

Die Liste der Email-Adressen ist standardmäßig alphabetisch nach der Email-Adresse sortiert.

### Filter

| Filter | Beschreibung |
|--------|--------------|
| Typ | Filtert die Liste nach dem Typ der Email-Adresse (Postfach oder Weiterleitung). |
| Domain | Filtert nach der Domain. Dieser Filter ist nur sichtbar, wenn Email-Adressen auf mehr als einer Domain existieren. Mehrfachauswahl ist möglich. |

## Aktionen

### Aktionen pro Zeile

Jede Email-Adresse in der Listenansicht bietet je nach Typ unterschiedliche Aktionen:

#### Links kopieren (nur bei Postfächern)

Über das Zwischenablage-Symbol kannst du zwei nützliche Links kopieren:

- **Doku**: Kopiert den Link zur Dokumentationsseite mit den Einstellungen für Email-Programme (SMTP, IMAP etc.). Diesen Link kannst du an den Nutzer weitergeben, damit er sein Email-Programm einrichten kann.
- **Passwort setzen**: Kopiert einen Link, über den der Nutzer sein Passwort für das Postfach setzen kann. Dieser Link ist **eine Woche lang gültig**. Nach Ablauf musst du einen neuen Link generieren.

#### Infos an Nutzer senden (nur bei Postfächern)

Über das Brief-Symbol kannst du dem Nutzer eine Email an eine alternative Adresse schicken. Diese Email enthält Links zur Dokumentation (Email-Programm einrichten) sowie zum Setzen des Passworts. Nach dem Klick öffnet sich ein Dialog, in dem du die Ziel-Email-Adresse eingibst, an die die Info-Email gesendet werden soll.

#### Weiterleitung bearbeiten (nur bei Weiterleitungen)

Über diese Aktion kannst du die Weiterleitungs-Zieladressen ändern. Du kannst bestehende Adressen entfernen oder neue hinzufügen.

#### Bearbeiten

Öffnet einen Dialog, in dem du den Anzeigenamen der Email-Adresse ändern kannst.

#### Löschen

Löscht die Email-Adresse dauerhaft.

## Berechtigungen

Die Seite **Email-Adressen** ist nur verfügbar, wenn das Tool **Email-Postfächer** für deine Organisation aktiviert ist. Ohne dieses Tool erscheint der Menüeintrag nicht in der Seitenleiste.

## Validierung & Fehlermeldungen

| Regel | Fehlermeldung | Ursache & Lösung |
|-------|---------------|------------------|
| Adresse ist Pflichtfeld | – | Du hast keine Adresse eingegeben. Trage den gewünschten lokalen Teil der Email-Adresse ein (z. B. `info`). |
| Adresse muss eindeutig sein | „Diese Email-Adresse existiert bereits." | Es gibt bereits eine Email-Adresse mit diesem Namen auf der gewählten Domain. Wähle einen anderen lokalen Teil oder eine andere Domain. |
| Weiterleitungsadressen müssen gültig sein | Validierungsfehler bei der Ziel-Adresse | Eine oder mehrere der angegebenen Weiterleitungs-Zieladressen haben kein gültiges Email-Format. Überprüfe die Schreibweise (z. B. `nutzer@example.com`). |
| Mindestens eine Weiterleitungsadresse erforderlich | Validierungsfehler bei Weiterleitung | Du hast die Weiterleitung aktiviert, aber keine Ziel-Adresse angegeben. Füge mindestens eine Email-Adresse hinzu, an die weitergeleitet werden soll. |
| Einladungs-Email muss gültig sein | Validierungsfehler bei der Einladungsadresse | Die eingegebene alternative Email-Adresse für die Einladung hat kein gültiges Format. Überprüfe die Schreibweise. |

## Beziehungen zu anderen Bereichen

- **Domains**: Jede Email-Adresse ist einer Domain zugeordnet. Domains müssen vorab eingerichtet sein, bevor du Email-Adressen anlegen kannst.
- **Passwort-Seite**: Über den kopierbaren Passwort-Link oder die Einladungs-Email gelangen Nutzer auf eine Seite, auf der sie ihr Passwort für das Postfach setzen können. Nach dem Setzen des Passworts erhalten sie dort auch Links zum Webmail-Login und eine Anleitung zur Einrichtung ihres Email-Programms.

---

## resource: App\Filament\App\Resources\LotteryResource

**Entity:** App\Filament\App\Resources\LotteryResource  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/LotteryResource.php`  
**Updated:** 2026-02-14 16:48:44  

# Lotterien

## Übersicht

Im Bereich **Lotterien** kannst du Lotterien verwalten. Du konfigurierst Lose, Preise und individuelle Textbausteine. Die Lotterie-Funktion unterstützt den gesamten Prozess – von der Losbestellung über die Bestätigung per E-Mail bis hin zur Auslosung der Gewinner.

## Navigation und Voraussetzungen

- **Menügruppe:** Fundraising
- **Position:** In der Seitenleiste unter der Gruppe „Fundraising"
- **Voraussetzung:** Das Tool **Lotterie** muss aktiviert sein. Ist das Tool nicht aktiviert, erscheint der Menüpunkt nicht in der Seitenleiste.

## Lotterie bearbeiten

Das Formular zum Bearbeiten einer Lotterie ist in mehrere Tabs unterteilt. Die Tabs „Textbausteine" und einige Felder in den „Grundeinstellungen" werden erst beim Bearbeiten einer bestehenden Lotterie sichtbar.

### Tab „Grundeinstellungen"

Hier legst du die grundlegenden Informationen der Lotterie fest.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name der Lotterie | Textfeld | Ja | Der Name wird z. B. in E-Mails oder Links verwendet. |
| Spendenseite | Textfeld (URL) | Nein | URL der Spendenseite aus dem Twingle-Projekt. |
| Mail-Adresse | Mail-Adresse-Auswahl | Nein | Absender-Mail-Adresse für E-Mails der Lotterie. Dieses Feld ist nur beim Bearbeiten einer bestehenden Lotterie sichtbar. |
| Los-Vorlage | Datei-Upload (PDF) | Nein | PDF-Vorlage, in die die Losnummern eingetragen werden. Dieses Feld ist nur beim Bearbeiten sichtbar. Wenn du eine Vorlage hochlädst, aber den Bereich für die Losnummern noch nicht markiert hast, erscheint ein Hinweis. Über die Aktion **„Losnummern-Bereich auswählen"** kannst du den Bereich in der PDF-Vorlage festlegen, in den die Losnummern gedruckt werden. Diese Aktion ist nur aktiv, wenn bereits eine Vorlage hochgeladen wurde. |

### Tab „Verlosung"

In diesem Tab konfigurierst du die Lose und die Einstellungen für Losbestellungen der Lotterie.

#### Bereich „Lose"

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Anzahl der Lose | Zahl | Ja | Gesamtanzahl der verfügbaren Lose für diese Lotterie. |
| Anzahl der Preise | Zahl | Ja | Gesamtanzahl der Preise, die bei der Auslosung vergeben werden. |

#### Bereich „Losbestellungen"

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Maximale Anzahl | Zahl | Ja | Maximale Anzahl an Losen, die pro einzelner Bestellung bestellt werden können. |
| Vorschlag Anzahl | Zahl | Ja | Die voreingestellte Anzahl an Losen, die beim Öffnen des Bestellformulars vorgeschlagen wird. |
| Spendenbetrag | Geldbetrag | Ja | Vorgeschlagener Spendenbetrag je Los. |
| Newsletter | Mehrfachauswahl | Nein | Auswahl, welche Newsletter den Bestellern zum Abonnieren angeboten werden. Dieses Feld ist nur sichtbar, wenn das Tool **Newsletter** aktiviert ist. |

### Tab „Textbausteine"

Dieser Tab ist nur beim Bearbeiten einer bestehenden Lotterie sichtbar. Hier konfigurierst du die Texte, die an verschiedenen Stellen der Lotterie angezeigt werden – zum Beispiel auf der Bestellseite, der Bestätigungsseite oder in E-Mails. Alle Textfelder sind Rich-Text-Editoren mit Formatierungsoptionen (Fett, Kursiv, Unterstrichen, Durchgestrichen, Überschriften H2/H3, Listen, Links).

#### Unterbereich „Allgemein"

Diese Texte der Lotterie werden in besonderen Situationen angezeigt, z. B. wenn die Lotterie noch nicht gestartet wurde oder keine Lose mehr verfügbar sind.

| Feld | Beschreibung |
|------|--------------|
| Lotterie noch nicht gestartet | Dieser Text wird Besuchern angezeigt, wenn die Lotterie noch nicht gestartet wurde. |
| Lotterie bereits abgeschlossen | Dieser Text wird Besuchern angezeigt, wenn die Lotterie bereits abgeschlossen wurde. |
| Keine Lose (mehr) verfügbar | Dieser Text wird angezeigt, wenn keine Lose mehr zur Verfügung stehen. |

#### Unterbereich „Verlosungsseite"

Diese Texte der Lotterie erscheinen auf der Seite, auf der Besucher ihre Lose bestellen.

| Feld | Beschreibung |
|------|--------------|
| Intro | Dieser Text erscheint unterhalb der Anzahl der Lose. |
| Einleitung Spendenbetrag | Dieser Text erscheint vor dem Eingabefeld für den Spendenbetrag. |
| Newsletter | Dieser Text erscheint oberhalb der Newsletter-Auswahl. |

#### Unterbereich „Spendenseite"

| Feld | Beschreibung |
|------|--------------|
| Spendenseite Intro | Dieser Text erscheint oberhalb des Spendenformulars. |

#### Unterbereich „Bestätigungsseite"

Diese Texte der Lotterie werden angezeigt, nachdem ein Besteller auf den Bestätigungslink in der Opt-In-E-Mail geklickt hat.

| Feld | Beschreibung |
|------|--------------|
| Bestätigung erfolgreich | Wird angezeigt, wenn die E-Mail-Bestätigung erfolgreich war und die Lose zugewiesen wurden. |
| Keine Lose mehr verfügbar | Wird angezeigt, wenn zum Zeitpunkt der Bestätigung keine Lose mehr verfügbar waren. |
| Bestätigung fehlgeschlagen | Wird angezeigt, wenn die Bestätigung fehlgeschlagen ist. |

#### Unterbereich „E-Mails"

Hier konfigurierst du die E-Mail-Vorlagen für die Lotterie. Auf der linken Seite werden die verfügbaren Platzhalter angezeigt, die du in Betreff und Text verwenden kannst:

| Platzhalter | Bedeutung |
|-------------|-----------|
| `{lottery}` | Name der Lotterie |
| `{clientName}` | Name des Bestellers |
| `{clientEmail}` | E-Mail-Adresse des Bestellers |
| `{ticketNumbers}` | Losnummern des Bestellers (kommagetrennt) |
| `{organizationName}` | Name deines Vereins |
| `{confirmButton}` | Button zum Bestätigen der E-Mail-Adresse |

**Opt-In-E-Mail:** Diese E-Mail wird nach der Losbestellung verschickt, damit der Besteller seine E-Mail-Adresse bestätigt. Die E-Mail enthält folgende konfigurierbaren Felder:

| Feld | Beschreibung |
|------|--------------|
| Betreff | Betreffzeile der Opt-In-E-Mail. Platzhalter können verwendet werden. |
| Text | Inhalt der Opt-In-E-Mail. Platzhalter können verwendet werden. |
| Text des Bestätigungs-Buttons | Beschriftung des Buttons, über den der Besteller seine E-Mail-Adresse bestätigt. |

**E-Mail mit Losen:** Diese E-Mail wird nach der erfolgreichen Bestätigung der E-Mail-Adresse verschickt und enthält die zugewiesenen Losnummern. Die E-Mail enthält folgende konfigurierbaren Felder:

| Feld | Beschreibung |
|------|--------------|
| Betreff | Betreffzeile der Los-E-Mail. Platzhalter können verwendet werden. |
| Text | Inhalt der Los-E-Mail. Platzhalter können verwendet werden. |

## Listenansicht der Lotterien

Die Listenansicht zeigt alle vorhandenen Lotterien in einer Tabelle.

| Spalte | Beschreibung |
|--------|--------------|
| Datum | Erstellungsdatum der Lotterie. |
| Name | Name der Lotterie. |
| Anzahl der Lose | Gesamtanzahl der konfigurierten Lose dieser Lotterie. |
| Berechtigte Lose | Anzahl der Lose, die einer bestätigten Bestellung zugeordnet sind und somit an der Verlosung teilnehmen. |
| Ziehungsdatum | Datum und Uhrzeit der durchgeführten Auslosung. Ist leer, wenn die Auslosung noch nicht stattgefunden hat. |

### Aktionen in der Listenansicht

- **Anzeigen:** Öffnet die Detailansicht der Lotterie mit den verknüpften Bereichen (Bestellungen, Lose, Bereiche).

## Detailansicht und verknüpfte Bereiche

Die Detailansicht einer Lotterie enthält drei verknüpfte Bereiche, über die du die einzelnen Aspekte der Lotterie verwalten kannst:

- **Bestellungen:** Übersicht der eingegangenen Losbestellungen für diese Lotterie.
- **Lose:** Übersicht aller einzelnen Lose der Lotterie und ihrer Zuordnung zu Bestellungen.
- **Bereiche:** Verwaltung der Losnummern-Bereiche der Lotterie.

## Häufige Fragen und Hinweise zur Lotterie

- **Was passiert, wenn ein Besteller seine E-Mail-Adresse nicht bestätigt?** Die Lose werden nicht zugewiesen und bleiben verfügbar.
- **Was passiert, wenn zwischen Bestellung und Bestätigung alle Lose vergeben werden?** Dem Besteller wird auf der Bestätigungsseite der Text „Keine Lose mehr verfügbar" angezeigt. Er erhält keine Lose.
- **Kann ich die Textbausteine nachträglich ändern?** Ja, du kannst die Textbausteine der Lotterie jederzeit über den Tab „Textbausteine" anpassen. Bereits versendete E-Mails werden davon nicht beeinflusst.
- **Was bedeutet „Berechtigte Lose" in der Listenansicht?** Das sind die Lose, die einer bestätigten Bestellung zugeordnet sind und somit an der Auslosung teilnehmen.

---

## resource: App\Filament\App\Resources\FundingApplicationResource

**Entity:** App\Filament\App\Resources\FundingApplicationResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FundingApplicationResource.php`  
**Updated:** 2026-02-14 16:46:13  

# Förderanträge

## Übersicht
Auf der Seite **Förderanträge** kannst du Förderanträge für deine Organisation verwalten. Du kannst neue Förderanträge anlegen, bestehende bearbeiten oder löschen und behältst den Überblick über beantragte und bereits ausgezahlte Beträge. Alle Förderanträge werden in einer Tabellenansicht dargestellt, die du nach Status filtern und nach verschiedenen Spalten durchsuchen kannst.

## Navigation
Die Förderanträge findest du in der Seitenleiste unter der Gruppe **Finanzen**.

## Formularfelder der Förderanträge

Beim Erstellen oder Bearbeiten eines Förderantrags stehen dir folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Bezeichnung | Textfeld | Ja | Name bzw. Bezeichnung des Förderantrags (max. 255 Zeichen) |
| Fördermittelgeber | Auswahlfeld (durchsuchbar) | Nein | Auswahl eines bestehenden Kontakts vom Typ Organisation als Fördermittelgeber. Der gewünschte Kontakt muss zuvor im Bereich **Kontakte** angelegt worden sein. |
| Zeitraum Beginn | Datumsfeld | Nein | Startdatum des Förderzeitraums |
| Zeitraum Ende | Datumsfeld | Nein | Enddatum des Förderzeitraums |
| Status | Auswahlfeld | Ja | Aktueller Status des Förderantrags. Bei neuen Anträgen ist der Standardwert **Entwurf**. |
| Betrag | Geldbetragsfeld | Ja | Beantragte Fördersumme in der Währung deiner Organisation |
| Bezahlter Betrag | Geldbetragsfeld | Ja | Bereits ausgezahlter Betrag. Bei neuen Anträgen ist der Standardwert **0**. |

### Validierung und mögliche Fehlermeldungen

- **Bezeichnung ist erforderlich**: Du musst eine Bezeichnung für den Förderantrag eingeben.
- **Bezeichnung zu lang**: Die Bezeichnung darf maximal 255 Zeichen umfassen. Kürze den Text entsprechend.
- **Status ist erforderlich**: Wähle einen Status für den Förderantrag aus der Auswahlliste.
- **Betrag ist erforderlich**: Gib die beantragte Fördersumme ein.
- **Bezahlter Betrag ist erforderlich**: Gib den bereits ausgezahlten Betrag ein. Wenn noch nichts ausgezahlt wurde, trage **0** ein.

## Tabellenansicht der Förderanträge

### Spalten
Die Tabelle der Förderanträge zeigt folgende Spalten:

| Spalte | Beschreibung |
|--------|--------------|
| Bezeichnung | Name des Förderantrags (durchsuchbar, sortierbar) |
| Fördermittelgeber | Name des zugeordneten Kontakts (durchsuchbar, sortierbar) |
| Zeitraum Beginn | Startdatum des Förderzeitraums (sortierbar) |
| Zeitraum Ende | Enddatum des Förderzeitraums (sortierbar) |
| Status | Status des Förderantrags, dargestellt als farbiges Badge (sortierbar) |
| Betrag | Beantragte Fördersumme in der Währung deiner Organisation (sortierbar, mit Summenzeile) |
| Bezahlter Betrag | Bereits ausgezahlter Betrag in der Währung deiner Organisation (sortierbar, mit Summenzeile) |

Die Spalten **Betrag** und **Bezahlter Betrag** zeigen am Ende der Tabelle jeweils eine **Summe** aller aktuell angezeigten Einträge. Wenn du einen Filter anwendest, wird die Summe nur über die gefilterten Einträge berechnet.

### Filter
Du kannst die Förderanträge nach **Status** filtern. Der Filter unterstützt Mehrfachauswahl, sodass du gleichzeitig nach mehreren Status-Werten filtern kannst. Der Filter ist über ein Modal erreichbar, das sich bei Klick auf das Filtersymbol öffnet.

### Suche
Über das Suchfeld oberhalb der Tabelle kannst du Förderanträge nach **Bezeichnung** und **Fördermittelgeber** durchsuchen.

## Aktionen für Förderanträge

- **Erstellen**: Über die Schaltfläche in der Kopfzeile der Tabelle kannst du einen neuen Förderantrag anlegen. Es öffnet sich das Formular mit den oben beschriebenen Feldern. Nach dem Speichern erscheint der neue Förderantrag in der Tabellenansicht.
- **Bearbeiten**: Über das Bearbeiten-Symbol in der jeweiligen Zeile kannst du einen bestehenden Förderantrag ändern. Es öffnet sich das Formular mit den aktuellen Daten des Förderantrags.
- **Löschen**: Über das Löschen-Symbol in der jeweiligen Zeile kannst du einen einzelnen Förderantrag entfernen.
- **Massenlöschung**: Du kannst mehrere Förderanträge gleichzeitig auswählen und gemeinsam löschen.

## Berechtigungen für Förderanträge

Das Tool **Budgets** muss für deine Organisation aktiviert sein, damit die Seite Förderanträge zugänglich ist.

## Beziehungen der Förderanträge

- **Kontakte**: Der Fördermittelgeber eines Förderantrags wird aus den bestehenden Kontakten vom Typ **Organisation** ausgewählt. Der gewünschte Kontakt muss zuvor im Bereich **Kontakte** angelegt worden sein. Ist der gewünschte Fördermittelgeber noch nicht als Kontakt vorhanden, lege ihn zuerst unter **Kontakte** als Organisation an.

---

## resource: App\Filament\App\Resources\FormResource

**Entity:** App\Filament\App\Resources\FormResource  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/FormResource.php`  
**Updated:** 2026-02-14 16:44:43  

# Formulare

## Übersicht

Im Bereich **Formulare** kannst du Formulare erstellen und verwalten. Du kannst Formulare anlegen, bearbeiten, löschen und deren Aufbau über einen visuellen Formular-Builder gestalten. Zusätzlich lassen sich Workflows verknüpfen, die nach dem Absenden eines Formulars automatisch ausgelöst werden.

Damit du auf den Bereich Formulare zugreifen kannst, muss das Tool **Formulare** für deine Organisation aktiviert sein. Ohne aktiviertes Tool ist der Menüpunkt nicht sichtbar und der Bereich nicht erreichbar.

## Navigation

Den Bereich **Formulare** findest du in der Seitenleiste unter der Menügruppe **Kommunikation**. Der Menüpunkt ist nur sichtbar, wenn das Tool **Formulare** aktiviert ist.

## Tabellenansicht / Listenansicht

Die Listenansicht zeigt alle vorhandenen Formulare an. Die konkreten Spalten, Filter und Sortierungen werden vom Formular-Paket bereitgestellt.

## Formularfelder

Das Bearbeitungsformular für ein Formular ist in mehrere Tabs aufgeteilt. Die Basis-Tabs werden vom Formular-Paket bereitgestellt. Zusätzlich gibt es folgende projektspezifische Tabs:

### Tab „Persönliche Seite"

Dieser Tab ist nur sichtbar, wenn die Einstellung für persönliche Seiten in deiner Organisation aktiviert ist.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Persönliche Seite aktiv | Checkbox | Nein | Aktiviert die Verknüpfung dieses Formulars mit einer persönlichen Seite. |

### Tab „Workflows"

Dieser Tab ist nur sichtbar, wenn das Tool **Workflows** für deine Organisation aktiviert ist.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Workflows | Mehrfachauswahl | Nein | Auswahl der Workflows, die nach dem Absenden des Formulars automatisch ausgelöst werden. Du kannst mehrere Workflows gleichzeitig auswählen. |

> **Hinweis:** Nach Absenden des Formulars werden diese Workflows ausgelöst.

## Aktionen

In der Listenansicht der Formulare stehen dir folgende Aktionen zur Verfügung:

| Aktion | Beschreibung |
|--------|--------------|
| **Anzeigen** | Öffnet die Detailansicht eines Formulars. |
| **Bearbeiten** | Öffnet das Bearbeitungsformular in einem breiten Modal-Dialog. |
| **Löschen** | Löscht das ausgewählte Formular. |
| **Massenlöschung** | Du kannst mehrere Formulare gleichzeitig über die Checkboxen in der Tabelle auswählen und gesammelt löschen. |

Die Aktionen **Anzeigen**, **Bearbeiten** und **Löschen** erreichst du über das Aktionsmenü in jeder Tabellenzeile.

## Berechtigungen

Der Zugriff auf den Bereich **Formulare** setzt voraus, dass das Tool **Formulare** für deine Organisation aktiviert ist.

## Beziehungen

Formulare können mit anderen Bereichen der Plattform verknüpft werden:

- **Workflows**: Formulare können mit einem oder mehreren Workflows verknüpft werden. Nach dem Absenden eines Formulars werden die zugewiesenen Workflows automatisch ausgeführt. Voraussetzung ist, dass das Tool **Workflows** aktiviert ist. Die Verknüpfung erfolgt im Tab „Workflows" des Bearbeitungsformulars.
- **Persönliche Seite**: Formulare können optional mit einer persönlichen Seite verknüpft werden. Diese Option steht nur zur Verfügung, wenn die Einstellung für persönliche Seiten in deiner Organisation aktiviert ist. Die Konfiguration erfolgt im Tab „Persönliche Seite" des Bearbeitungsformulars.

---

## resource: App\Filament\App\Resources\FixedAssetResource

**Entity:** App\Filament\App\Resources\FixedAssetResource  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/FixedAssetResource.php`  
**Updated:** 2026-02-14 16:43:26  

# Anlagenverwaltung

## Übersicht

Die Anlagenverwaltung ermöglicht es dir, Anlagegüter deiner Organisation zu erfassen und zu verwalten – zum Beispiel Möbel, Computer, Fahrzeuge oder andere Wirtschaftsgüter. Zu jedem Anlagegut werden Informationen wie Inventarnummer, Anschaffungsdatum, Anschaffungsbetrag und Abschreibungseinstellungen gepflegt. Die Abschreibungsbuchungen werden auf Basis dieser Angaben automatisch berechnet und erstellt.

Die Anlagenverwaltung ist nur verfügbar, wenn das Tool „accounting-extended" für deine Organisation aktiviert ist. Ohne dieses Tool wird der Menüpunkt nicht angezeigt und die Seite ist nicht erreichbar.

## Navigation

Die Anlagenverwaltung findest du in der Seitenleiste unter der Menügruppe **Finanzen**.

## Tabellenansicht / Listenansicht

Die Listenansicht der Anlagenverwaltung zeigt alle erfassten Anlagegüter in einer Übersichtstabelle.

Die Tabelle ist nach Inventarnummer und Bezeichnung durchsuchbar. Du kannst die Suche nutzen, um gezielt einzelne Anlagegüter zu finden.

| Spalte | Beschreibung |
|---|---|
| Inventarnummer | Eindeutige Kennung des Anlageguts (durchsuchbar, sortierbar) |
| Bezeichnung | Name des Anlageguts (durchsuchbar, sortierbar) |
| Anschaffungskonto | Das zugeordnete Anlagekonto, auf das die Anschaffung gebucht wurde (sortierbar) |
| Anschaffungsdatum | Datum, an dem das Anlagegut angeschafft wurde (sortierbar) |
| Anschaffungsbetrag (netto) | Netto-Anschaffungskosten in Euro (sortierbar) |
| Restwert | Aktueller Buchwert nach Abzug aller bisherigen Abschreibungen in Euro (sortierbar) |
| Abschreibungsart | Art der Abschreibung (sortierbar) |
| Anlagegut wird abgeschrieben | Zeigt an, ob laufende Abschreibungsbuchungen für dieses Anlagegut aktiv sind (sortierbar) |

## Anlagegut erfassen

Über die Schaltfläche **„Anlagegut erfassen"** in der Kopfzeile der Listenansicht kannst du ein neues Anlagegut anlegen. Es öffnet sich ein Formular in einem großen Modal-Dialog. Nach dem Speichern erscheint das neue Anlagegut in der Übersichtstabelle und die zugehörigen Abschreibungsbuchungen werden automatisch berechnet und erstellt.

## Anlagegut bearbeiten

Über das Bearbeiten-Symbol in der jeweiligen Tabellenzeile kannst du ein bestehendes Anlagegut bearbeiten. Beim Bearbeiten werden zusätzlich die Felder **„Übernahmedatum"** und **„Übernahmebetrag (netto)"** angezeigt. Diese Felder dienen dazu, eine Übernahme aus einem Vorsystem zu dokumentieren – etwa wenn du bisher eine andere Software genutzt hast und den aktuellen Buchwert des Anlageguts übernehmen möchtest.

Nach dem Speichern werden die Abschreibungsbuchungen automatisch neu berechnet.

## Anlagegut löschen

Über das Löschen-Symbol in der Tabellenzeile kannst du ein Anlagegut löschen. Vor dem endgültigen Löschen wirst du um Bestätigung gebeten. Beim Löschen eines Anlageguts werden auch die zugehörigen automatisch erstellten Abschreibungsbuchungen entfernt.

## Formularfelder

Das Formular der Anlagenverwaltung zum Erstellen und Bearbeiten eines Anlageguts enthält folgende Felder:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Inventarnummer | Textfeld | Ja | Eindeutige Inventarnummer des Anlageguts. Muss eindeutig sein. |
| Bezeichnung | Textfeld | Ja | Name bzw. Beschreibung des Anlageguts (z. B. „Laptop Dell XPS 15" oder „Büroschreibtisch"). |
| Anschaffungskonto | Auswahlfeld (durchsuchbar) | Ja | Konto, auf das die Anschaffung gebucht wird. Es werden nur Anlagekonten zur Auswahl angezeigt. |
| Anschaffungsdatum | Datumsfeld | Ja | Datum, an dem das Anlagegut angeschafft wurde. |
| Anschaffungsbetrag (netto) | Zahlenfeld | Ja | Netto-Anschaffungspreis in Euro. |
| Übernahmedatum | Datumsfeld | Nein | Datum, zu dem das Anlagegut in die Anlagenverwaltung von NGO.Tools übernommen wird. Nur beim Bearbeiten eines bestehenden Anlageguts sichtbar. Hilfetext: „Das Übernahmedatum entspricht dem Datum, zu dem das Anlagegut in die Anlagenverwaltung von NGO.Tools übernommen wird." |
| Übernahmebetrag (netto) | Zahlenfeld | Nein | Buchwert bei Übernahme aus einem Vorsystem. Nur beim Bearbeiten eines bestehenden Anlageguts sichtbar. Hilfetext: „Der Buchwert bei Übernahme aus deinem Vorsystem. Es ist der Wert, den das Anlagegut zum Datum der Übernahme hat und entspricht in der Regel den Nettoanschaffungskosten abzüglich aller bisherigen Abschreibungen." |
| Abschreibungsart | Auswahlfeld | Ja | Art der Abschreibung: **Reguläre AfA**, **Sofortabschreibung** oder **Sammelpostenabschreibung**. |
| Anlagegut wird abgeschrieben | Checkbox | Nein (Standard: aktiviert) | Wenn ein Anlagegut nicht abgeschrieben werden soll (z. B. Grundstücke oder Wertpapiere), kannst du die laufenden Abschreibungsbuchungen hier deaktivieren. |
| Abschreibungskonto | Auswahlfeld (durchsuchbar) | Ja | Konto, auf das die Abschreibungsbuchungen gebucht werden. Dieses Feld ist nur sichtbar, wenn „Anlagegut wird abgeschrieben" aktiviert ist. |
| Abschreibungsdauer (in Monaten) | Zahlenfeld | Ja | Nutzungsdauer des Anlageguts gemäß AfA-Tabelle in Monaten. Auf dieser Basis werden die monatlichen Abschreibungsbuchungen automatisch berechnet. Dieses Feld ist nur sichtbar, wenn „Anlagegut wird abgeschrieben" aktiviert ist. |
| Abschreibungsmodus | Auswahlfeld | Ja (Standard: Linear) | Wahl zwischen **„Linear"** und **„Degressiv"**. Dieses Feld ist nur sichtbar, wenn „Anlagegut wird abgeschrieben" aktiviert ist. |
| Degressive Abschreibung Prozent | Zahlenfeld | Nein | Prozentsatz für die degressive Abschreibung pro Jahr. Dieses Feld ist nur sichtbar, wenn „Anlagegut wird abgeschrieben" aktiviert ist und der Abschreibungsmodus auf „Degressiv" gesetzt ist. |
| Erinnerungswert | Checkbox | Nein | Wenn aktiviert, wird das Anlagegut nach vollständiger Abschreibung mit einem Erinnerungswert von 1 € im Anlagevermögen behalten, anstatt auf 0 € abgeschrieben zu werden. Dieses Feld ist nur sichtbar, wenn „Anlagegut wird abgeschrieben" aktiviert ist. |

## Berechtigungen

Die Anlagenverwaltung ist nur zugänglich, wenn das Tool **„accounting-extended"** für deine Organisation aktiviert ist. Ohne dieses Tool wird der Menüpunkt „Anlagenverwaltung" in der Seitenleiste nicht angezeigt und die Seite ist nicht erreichbar.

## Beziehungen zu anderen Bereichen

Die Anlagenverwaltung ist mit mehreren anderen Bereichen der Plattform verknüpft:

- **Finanzereignisse:** Anlagegüter können mit einem Finanzereignis verknüpft sein.
- **Abschreibungsbuchungen:** Zu jedem Anlagegut in der Anlagenverwaltung werden automatisch Abschreibungsbuchungen berechnet und erstellt. Du musst diese Buchungen nicht manuell anlegen. Beim Löschen eines Anlageguts werden die zugehörigen Abschreibungsbuchungen ebenfalls entfernt.
- **Konten:** Jedes Anlagegut ist mit einem Anschaffungskonto (Anlagekonto) verknüpft. Wenn das Anlagegut abgeschrieben wird, ist es zusätzlich mit einem Abschreibungskonto verknüpft.
- **Wirtschaftsjahr:** Jedes Anlagegut in der Anlagenverwaltung wird dem aktuellen Wirtschaftsjahr zugeordnet.

---

## resource: App\Filament\App\Resources\FinancialEventResource

**Entity:** App\Filament\App\Resources\FinancialEventResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FinancialEventResource.php`  
**Updated:** 2026-02-14 16:38:30  

# Finanzereignisse

## Übersicht

Finanzereignisse sind die zentrale Buchungseinheit in der Buchhaltung von ngo.tools. Hier erfasst, bearbeitest und verwaltest du alle finanziellen Vorgänge deiner Organisation – sowohl Einnahmen als auch Ausgaben. Jedes Finanzereignis kann einem Bankvorgang, einem Beleg, einem Kontakt und einem oder mehreren Projekten zugeordnet werden. Ein Finanzereignis besteht immer aus mindestens einer Position, kann aber auch mehrere Positionen enthalten.

## Navigation

Du findest die Finanzereignisse in der Seitenleiste unter **Finanzen** → **Finanzereignisse**.

## Voraussetzungen

- Die Organisation muss die klassische Buchhaltung (Legacy-Buchhaltung) nutzen.
- Dein Benutzer muss Zugriff auf alle Projekte haben.

Wenn eine dieser Bedingungen nicht erfüllt ist, wird der Menüpunkt „Finanzereignisse" nicht angezeigt.

## Formularfelder beim Erstellen und Bearbeiten

Beim Erstellen oder Bearbeiten eines Finanzereignisses stehen folgende Felder zur Verfügung:

### Hauptformular

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|-------------|
| Kategorie (Einnahme/Ausgabe) | Umschalter | Ja | Legt fest, ob es sich um eine Einnahme oder eine Ausgabe handelt. Standardmäßig ist „Ausgabe" vorausgewählt. |
| Bankvorgang | Auswahl (durchsuchbar) | Nein | Verknüpft das Finanzereignis mit einem importierten Bankvorgang. Falls der ausgewählte Bankvorgang bereits einem anderen Finanzereignis zugeordnet ist, erscheint eine Fehlermeldung. |
| Kontakt / Lieferant | Auswahl | Abhängig | Du hast drei Optionen: „Bestehender Kontakt" (durchsuchbare Auswahl), „Sammelkonto" oder „Neuen Kontakt anlegen". Bei Spenden ist die Angabe eines Kontakts Pflicht. |
| Beleg | Auswahl (durchsuchbar) | Nein | Du kannst einen bereits vorhandenen, nicht zugeordneten bzw. wiederverwendbaren Beleg auswählen. |

### Positionsfelder (je Position)

Jedes Finanzereignis hat mindestens eine Position. Du kannst zwischen zwei Modi umschalten:

- **Auf Gesamtebene bearbeiten**: Das Finanzereignis hat genau eine Position.
- **Auf Positionsebene bearbeiten**: Du kannst mehrere Positionen anlegen (z. B. für eine Rechnung mit verschiedenen Kostenarten oder Projekten).

| Feld | Typ | Pflicht | Sichtbarkeit | Beschreibung |
|------|-----|---------|-------------|-------------|
| Beschreibung | Textfeld | Ja | Immer | Kurzbeschreibung der Position (max. 255 Zeichen). |
| Bereich | Auswahl | Ja | Nur wenn die Organisation mehrere Bereiche nutzt | Sphäre/Bereich der Position. |
| Typ | Auswahl (durchsuchbar) | Ja | Immer | Der Finanzereignistyp (z. B. Sachkosten, Personalkosten). Enthält einen Link zu den Typ-Einstellungen. |
| Projekt | Projektauswahl | Ja | Immer | Das Projekt, dem diese Position zugeordnet wird. |
| Lieferdatum | Datumsfeld | Ja | Nur bei Bilanzierung (Soll-Versteuerung) | Das Datum der Lieferung oder Leistungserbringung. |
| Zahlungsdatum | Datumsfeld | Ja | Nur bei Bilanzierung (Soll-Versteuerung) | Das Datum der Zahlung. |
| Betrag | Geldfeld | Ja | Immer | Der Betrag dieser Position. |
| Enthaltene Steuer | Geldfeld | Ja | Nur wenn die Organisation umsatzsteuerpflichtig ist | Der im Betrag enthaltene Steueranteil. |
| Steuersatz | Auswahl | Ja | Nur wenn die Organisation umsatzsteuerpflichtig ist | Auswahl zwischen 0 %, 7 % und 19 %. |

## Tabellenansicht (Listenansicht) der Finanzereignisse

### Spalten

Die Übersichtstabelle zeigt deine Finanzereignisse. Einige Spalten sind standardmäßig ausgeblendet und können über die Spaltenauswahl eingeblendet werden.

| Spalte | Standardmäßig sichtbar | Sortierbar | Durchsuchbar |
|--------|----------------------|------------|-------------|
| Beschreibung | Ja | Nein | Ja |
| Kategorie | Ja | Ja | Nein |
| Typ | Nein (einblendbar) | Nein | Nein |
| Bereich | Nein (einblendbar, nur bei mehreren Bereichen) | Nein | Nein |
| Bankvorgang (Buchungsdatum) | Ja | Ja (Standardsortierung: neueste zuerst) | Nein |
| Buchungsdatum | Nein (einblendbar) | Ja | Nein |
| Beleg | Nein (einblendbar) | Nein | Nein |
| Projekt | Nein (einblendbar) | Nein | Nein |
| Kontakt | Nein (einblendbar) | Nein | Nein |
| Betrag | Ja | Ja | Nein |

Die Spalte **Betrag** zeigt zusätzlich eine Summe über alle angezeigten Finanzereignisse.

### Filter

Mit den Filtern kannst du die angezeigte Liste der Finanzereignisse eingrenzen:

| Filter | Beschreibung |
|--------|-------------|
| Projekt | Zeigt nur Finanzereignisse an, die dem gewählten Projekt zugeordnet sind. |
| Bereich | Filtert nach Bereich/Sphäre. Nur sichtbar, wenn die Organisation mehrere Bereiche nutzt. |
| Kategorie | Filtert nach Einnahme oder Ausgabe. |
| Typ | Filtert nach Finanzereignistyp. |
| Ohne Beleg | Zeigt nur Finanzereignisse an, denen kein Beleg zugeordnet ist. |
| Automatische Buchungen | Filtert nach automatisch erstellten Buchungen. |
| Wirtschaftsjahr | Filtert nach Wirtschaftsjahr. Standardmäßig ist das aktuelle Wirtschaftsjahr vorausgewählt. |
| Datumsbereich | Filtert nach einem frei wählbaren Zeitraum. |

### Leere Zustände in der Finanzereignis-Tabelle

- **Keine Bankvorgänge vorhanden**: Wenn noch keine Bankkonten angelegt wurden, erscheint der Hinweis: „Es sind noch keine Bankvorgänge vorhanden. Importiere zuerst Bankvorgänge, damit du sie danach buchen kannst."
- **Keine Finanzereignisse vorhanden**: Wenn Bankkonten existieren, aber noch keine Finanzereignisse gebucht wurden, wird je nach deinen Berechtigungen ein Hinweis angezeigt, dass du mit dem Buchen beginnen kannst.
- **Filter ohne Ergebnisse**: Wenn deine aktiven Filter keine Treffer ergeben, erscheint eine Meldung mit dem Hinweis, die Filter anzupassen oder zu entfernen.

## Aktionen für Finanzereignisse

### Kopfzeilen-Aktionen (über der Tabelle)

| Aktion | Beschreibung |
|--------|-------------|
| **Finanzereignis erstellen** | Öffnet das Formular zum Erstellen eines neuen Finanzereignisses. |
| **Beleg hochladen** | Öffnet einen Dialog zum Hochladen eines Belegs (PDF oder Bild, max. 10 MB). Der hochgeladene Beleg kann danach beim Erstellen oder Bearbeiten eines Finanzereignisses zugeordnet werden. |
| **Umbuchung erstellen** | Erstellt eine interne Umbuchung zwischen zwei Bankkonten. Du wählst zwei Bankvorgänge aus – einen als Ausgabe und einen als Einnahme. |

### Zeilen-Aktionen (pro Finanzereignis in der Tabelle)

| Aktion | Beschreibung |
|--------|-------------|
| **Ansehen** | Öffnet die Detailansicht des Finanzereignisses. |
| **Bearbeiten** | Öffnet das Bearbeitungsformular. |
| **Löschen** | Löscht das Finanzereignis nach Bestätigung. Im Bestätigungsdialog kannst du wählen, ob der zugehörige Beleg ebenfalls gelöscht werden soll (sofern vorhanden und nicht als wiederverwendbar markiert). Bei PayPal-Transaktionen wird zusätzlich gefragt, ob die zugehörige PayPal-Gebührenbuchung gelöscht werden soll. |
| **Auf Einnahme/Ausgabe setzen** | Wechselt die Kategorie des Finanzereignisses (von Einnahme zu Ausgabe oder umgekehrt). |
| **Buchung festschreiben** | Schreibt die Buchung fest. Nur sichtbar, wenn die Buchung noch nicht festgeschrieben ist. |
| **Buchung stornieren** | Erstellt eine Stornobuchung (Gegenbuchung), die das ursprüngliche Finanzereignis rückgängig macht. Die Stornobuchung erhält die umgekehrte Kategorie und die Beschreibung „Stornierung [Originalbeschreibung]". Das Original-Finanzereignis bleibt dabei erhalten. |

### Massenaktionen für Finanzereignisse

| Aktion | Beschreibung |
|--------|-------------|
| **Löschen** | Wähle mehrere Finanzereignisse über die Checkboxen in der Tabelle aus und lösche sie auf einmal. |

### Aktionen auf der Bearbeitungsseite eines Finanzereignisses

| Aktion | Beschreibung |
|--------|-------------|
| **Beleg hochladen** | Ermöglicht das Hochladen eines Belegs direkt von der Bearbeitungsseite aus. |
| **Löschen** | Löscht das Finanzereignis (mit Optionen für Beleg und PayPal-Gebühr, wie oben beschrieben). |
| **Buchung festschreiben** | Schreibt die Buchung fest. Nur sichtbar, wenn die Buchung noch nicht festgeschrieben ist. |
| **Buchung stornieren** | Erstellt eine Stornobuchung für dieses Finanzereignis. |
| **Buchung zurücksetzen** | Setzt eine festgeschriebene Buchung zurück, damit sie wieder bearbeitet werden kann. Nur sichtbar bei festgeschriebenen Buchungen. |

### Aktionen auf der Detailansichtsseite

| Aktion | Beschreibung |
|--------|-------------|
| **Bearbeiten** | Öffnet das Bearbeitungsformular. |
| **Löschen** | Löscht das Finanzereignis. |

## Validierung und Fehlermeldungen bei Finanzereignissen

Beim Erstellen und Bearbeiten von Finanzereignissen prüft das System verschiedene Regeln. Wenn eine Regel verletzt wird, erscheint eine Fehlermeldung:

| Fehlermeldung | Ursache |
|---------------|---------|
| „Bitte den Bankvorgang auswählen." | Du hast keinen Bankvorgang ausgewählt. |
| „Der Bankvorgang wurde bereits zugeordnet." | Der gewählte Bankvorgang ist bereits mit einem anderen Finanzereignis verknüpft. Du wirst zum bereits zugeordneten Finanzereignis weitergeleitet. |
| „Der Betrag des Finanzereignisses stimmt nicht mit dem Betrag der Transaktion überein." | Bei einer Einzelposition weicht der eingegebene Betrag vom Betrag des verknüpften Bankvorgangs ab. |
| „Die Summe der Beträge der Positionen stimmt nicht mit dem Betrag der Transaktion überein." | Bei mehreren Positionen stimmt die Summe nicht mit dem Bankvorgang überein. |
| „Die Beträge müssen übereinstimmen." | Beim Bearbeiten einer Einzelposition stimmt der Betrag nicht mit dem verknüpften Bankvorgang überein. |
| „Die Summe der Beträge der Positionen stimmt nicht mit dem Gesamtbetrag überein." | Beim Bearbeiten mit mehreren Positionen stimmt die Summe nicht mit dem Gesamtbetrag überein. |
| „Einer Spende muss immer ein Kontakt zugeordnet sein." | Du hast ein Finanzereignis als Spende kategorisiert, aber keinen Kontakt angegeben. |
| Beschreibung zu lang | Die Beschreibung einer Position überschreitet 255 Zeichen. |

### Hinweise bei Belegen in Finanzereignissen

- **Duplikat-Erkennung**: Wenn ein Beleg bereits hochgeladen wurde und als wiederverwendbar markiert ist, erscheint der Hinweis: „Dieser Beleg wurde bereits hochgeladen. Es handelt sich um einen wiederverwendbaren Beleg. Nutze die Funktion ‚Beleg nutzen'."
- **Betragswarnung**: Wenn die automatische Beleganalyse erkennt, dass der Betrag des Belegs nicht mit dem Bankvorgang übereinstimmt, erscheint eine Warnung.

## Verknüpfungen von Finanzereignissen

Finanzereignisse stehen in Beziehung zu verschiedenen anderen Bereichen der Plattform:

- **Bankvorgänge**: Jedes Finanzereignis kann einem importierten Bankvorgang zugeordnet werden.
- **Belege**: Einem Finanzereignis kann ein Beleg (Rechnung, Quittung etc.) zugeordnet werden.
- **Kontakte**: Finanzereignisse können einem Kontakt (z. B. Lieferant, Spender) zugeordnet werden. Bei Spenden ist die Zuordnung eines Kontakts Pflicht.
- **Projekte**: Jede Position eines Finanzereignisses wird einem Projekt zugeordnet.
- **Finanzereignistypen**: Jede Position hat einen Typ, der in den Einstellungen unter „Finanzereignistypen" konfiguriert werden kann.
- **PayPal-Gebühren**: Bei PayPal-Transaktionen kann eine zugehörige Gebührenbuchung existieren. Beim Löschen des Finanzereignisses wird gefragt, ob die Gebühr mitgelöscht werden soll.
- **Spenden**: Ein Finanzereignis kann mit einer Spende verknüpft sein.

---

## resource: App\Filament\App\Resources\ContactResource

**Entity:** App\Filament\App\Resources\ContactResource  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/ContactResource.php`  
**Updated:** 2026-02-14 16:37:23  

# Kontakte

## Übersicht

Die Kontaktverwaltung ist die zentrale Anlaufstelle für alle Kontakte deiner Organisation. Hier kannst du Einzelpersonen, Organisationen und Ehepaare anlegen, verwalten und in Segmente einteilen. Neben den Stammdaten lassen sich Adressen, Anmerkungen, Kommunikationskanäle, Beziehungen und – bei aktivierten Tools – auch Mitgliedschaften und Spenden verwalten.

**Voraussetzung:** Das Tool „Kontakte" muss aktiviert sein, damit die Kontaktverwaltung sichtbar ist. Der Benutzer muss außerdem Zugriff auf alle Projekte haben.

## Navigation

Die Kontaktverwaltung erreichst du über:

- **Seitenleiste → Menschen → Kontakte**
- Menügruppe: „Menschen"
- Icon: Personen-Symbol (Users)
- Position: erster Eintrag in der Gruppe „Menschen"

## Formularfelder beim Erstellen und Bearbeiten eines Kontakts

Das Kontaktformular ist in zwei Tabs unterteilt: **Allgemein** und **Mitgliedschaft**. Je nach gewähltem Kontakttyp werden unterschiedliche Felder angezeigt.

### Tab „Allgemein"

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Bild | Bild-Upload | Nein | Avatar-Bild des Kontakts. Kann nach dem Hochladen zugeschnitten werden. |
| Kontaktnummer | Textfeld | Nein | Frei wählbare Kontaktnummer zur Identifikation (z. B. eine interne Nummer aus einem bestehenden System). |
| Typ | Auswahl | Ja | Art des Kontakts: „Einzelperson", „Organisation" oder „Ehepaar". Standardwert: „Einzelperson". **Achtung:** Der Typ kann nach dem Erstellen nicht mehr geändert werden. |
| Titel | Textfeld | Nein | Akademischer Titel o. ä. (z. B. „Dr.", „Prof."). Nur sichtbar bei Typ „Einzelperson" oder „Ehepaar". |
| Name | Textfeld | Ja (bei Organisation) | Name der Organisation. Nur sichtbar bei Typ „Organisation". |
| Vorname | Textfeld | Nein | Vorname der Person. Bei Typ „Ehepaar" lautet das Label „Person 1 – Vorname". Nur sichtbar bei Typ „Einzelperson" oder „Ehepaar". |
| Nachname | Textfeld | Nein | Nachname der Person. Bei Typ „Ehepaar" lautet das Label „Person 1 – Nachname". Nur sichtbar bei Typ „Einzelperson" oder „Ehepaar". |
| Rufname | Textfeld | Nein | Rufname, falls abweichend vom Vornamen. Nur sichtbar bei Typ „Einzelperson" oder „Ehepaar". |
| Zweiter Vorname | Textfeld | Nein | Zweiter Vorname. Nur sichtbar bei Typ „Einzelperson" oder „Ehepaar". |
| Geburtsname | Textfeld | Nein | Geburtsname, falls abweichend vom aktuellen Nachnamen. Nur sichtbar bei Typ „Einzelperson" oder „Ehepaar". |
| Geburtstag | Datumsfeld | Nein | Geburtsdatum. Nur sichtbar bei Typ „Einzelperson". |
| Sterbedatum | Datumsfeld | Nein | Sterbedatum. Nur sichtbar bei Typ „Einzelperson". |
| Sterbedatum ist geschätzt | Checkbox | Nein | Kennzeichnung, ob das Sterbedatum nur geschätzt ist. Nur sichtbar bei Typ „Einzelperson", wenn ein Sterbedatum eingetragen ist. |
| Geschlecht | Auswahl | Nein | Geschlecht: „männlich", „weiblich" oder „divers". Nur sichtbar bei Typ „Einzelperson". |
| Person 2 – Vorname | Textfeld | Nein | Vorname der zweiten Person. Nur sichtbar bei Typ „Ehepaar". |
| Person 2 – Nachname | Textfeld | Nein | Nachname der zweiten Person. Nur sichtbar bei Typ „Ehepaar". |
| Sprache | Auswahl | Nein | Bevorzugte Sprache des Kontakts (z. B. Deutsch, Englisch, Französisch). |
| Spendenbescheinigungen | Auswahl | Nein | Gewünschte Zustellungsart für Spendenbescheinigungen: „per Post", „per Email" oder „keine". Nur sichtbar, wenn das Tool „Spendenbescheinigungen" aktiviert ist. Hinweis: Dieses Feld dient aktuell nur zur Information und löst keinen automatischen Versand aus. |
| Segmente | Mehrfachauswahl | Nein | Zuordnung zu einem oder mehreren Segmenten. Ein Segment ist eine Gruppe, zu der beliebig viele Kontakte gehören können (z. B. „Spender", „Vorstand"). Neue Segmente können direkt in diesem Feld erstellt werden. Weitere Segmente lassen sich in den Einstellungen unter „Kontakte" anlegen. |
| Email-Adresse | Textfeld (Email) | Nein | Email-Adresse des Kontakts. |
| Webseite | Textfeld (URL) | Nein | Webseite des Kontakts (z. B. „https://example.org"). |
| Kommunikationskanäle | Wiederholungsfeld | Nein | Liste von Kommunikationskanälen (z. B. Telefon, Fax). Du kannst beliebig viele Einträge hinzufügen oder entfernen. |
| Beziehungen | Wiederholungsfeld | Nein | Beziehungen zu anderen Kontakten (z. B. „Arbeitgeber", „Ehepartner"). Du kannst beliebig viele Beziehungen hinzufügen oder entfernen. |
| Anrede | Feldgruppe | Nein | Persönliche Anrede des Kontakts, die z. B. in Briefen oder Emails verwendet werden kann. |
| Umsatzsteuer-ID | Textfeld | Nein | Umsatzsteuer-Identifikationsnummer. Nur sichtbar bei Typ „Organisation". |

### Tab „Mitgliedschaft"

Dieser Tab ist nur sichtbar, wenn das Tool „Mitglieder" aktiviert ist. Bei Kontakten vom Typ „Ehepaar" wird dieser Tab nicht angezeigt.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Mitgliedsnummer | Textfeld | Nein | Individuelle Mitgliedsnummer des Kontakts. |
| Mitgliedszeiten | Wiederholungsfeld | Nein | Zeiträume der Mitgliedschaft. Jeder Eintrag enthält: ein Startdatum (Pflicht), ein optionales Enddatum sowie je eine Checkbox, ob Start- bzw. Enddatum geschätzt sind. Lässt du das Enddatum leer, gilt die Mitgliedschaft als aktuell laufend. Du kannst mehrere Mitgliedszeiten anlegen, sie dürfen sich jedoch nicht überlappen. |

## Tabellenansicht / Listenansicht der Kontakte

### Voreingestellte Ansichten (Tabs)

Die Kontaktliste bietet mehrere Tabs zur schnellen Filterung:

- **Alle** – Zeigt alle Kontakte an.
- **Mitglieder** – Zeigt nur Kontakte mit Mitgliedszeiten. Dieser Tab ist nur sichtbar, wenn das Tool „Mitglieder" aktiviert ist.
- **Segment-Tabs** – Für jedes angelegte Segment wird automatisch ein eigener Tab angezeigt, der nur die Kontakte dieses Segments auflistet.

### Spalten der Kontaktliste

Alle Spalten können individuell ein- und ausgeblendet werden. Standardmäßig sichtbar sind: **Name**, **Segmente** und **Email-Adresse**. Die Standardsortierung ist nach **Name** (aufsteigend).

| Spalte | Durchsuchbar | Sortierbar | Hinweis |
|--------|:------------:|:----------:|---------|
| Kontaktnummer | Ja | Ja | |
| Typ | Nein | Ja | |
| Titel | Nein | Ja | |
| Name | Ja | Ja | Standardmäßig sichtbar |
| Vorname | Ja | Ja | |
| Nachname | Ja | Ja | |
| Mitgliedsnummer | Ja | Ja | Nur sichtbar, wenn das Tool „Mitglieder" aktiviert ist |
| Rufname | Ja | Ja | |
| Zweiter Vorname | Ja | Ja | |
| Geburtsname | Ja | Ja | |
| Anrede | Nein | Ja | |
| Segmente | Nein | Nein | Standardmäßig sichtbar |
| Newsletter-Listen | Nein | Nein | |
| Email-Adresse | Ja | Ja | Standardmäßig sichtbar |
| Webseite | Nein | Ja | |
| Geburtstag | Nein | Ja | |
| Sterbedatum | Nein | Ja | |
| Geschlecht | Nein | Ja | |
| Adresszeile 1 | Nein | Nein | Zeigt die aktive Adresse |
| PLZ | Nein | Nein | Zeigt die aktive Adresse |
| Stadt | Nein | Nein | Zeigt die aktive Adresse |
| Land | Nein | Nein | Zeigt die aktive Adresse |
| Sprache | Nein | Ja | |
| Kommunikationskanäle | Nein | Nein | |
| Postweg gesperrt | Nein | Nein | |
| Anmerkungen | Nein | Nein | |
| Mitglieds-Status | Nein | Ja | Nur im Tab „Mitglieder" sichtbar |
| Mitglied seit | Nein | Nein | Nur im Tab „Mitglieder" sichtbar |
| Mitglied bis | Nein | Nein | Nur im Tab „Mitglieder" sichtbar |
| Spenden (Summe) | Nein | Ja | |
| Umsatzsteuer-ID | Nein | Ja | |
| Erstellt am | Nein | Ja | |

**Tipp:** Über das Suchfeld kannst du die durchsuchbaren Spalten gleichzeitig durchsuchen. Die Suche findet Treffer in Kontaktnummer, Name, Vorname, Nachname, Mitgliedsnummer, Rufname, zweitem Vornamen, Geburtsnamen und Email-Adresse.

### Filter der Kontaktliste

| Filter | Typ | Beschreibung |
|--------|-----|--------------|
| Mitglieds-Status | Auswahl | Filtern nach „Aktives Mitglied", „Ehemaliges Mitglied" oder „Kein Mitglied". Nur sichtbar, wenn das Tool „Mitglieder" aktiviert ist. |
| Spenden | Auswahl | Filtern nach Kontakten mit oder ohne Spenden. |
| Einzelpersonen von Paaren ausblenden | Auswahl | Blendet die Einzelkontakte aus, die als Partner in einem Ehepaar-Kontakt verknüpft sind. Dieser Filter ist standardmäßig aktiviert, damit Personen nicht doppelt erscheinen (einmal einzeln und einmal als Teil des Ehepaars). |
| Segmente | Mehrfachauswahl | Filtern nach einem oder mehreren Segmenten. |
| Newsletter-Listen | Mehrfachauswahl | Filtern nach Newsletter-Listen-Zugehörigkeit. |
| Geschlecht | Auswahl | Filtern nach Geschlecht. |
| Typ | Auswahl | Filtern nach Kontakttyp (Einzelperson, Organisation, Ehepaar). |
| Postweg gesperrt | Auswahl | Filtern nach Kontakten mit gesperrtem oder nicht gesperrtem Postweg. |

**Hinweis:** Filter, Suche, Sortierung und Spalten-Einstellungen werden in deiner Sitzung gespeichert und bleiben beim Seitenwechsel erhalten. Wenn du die Seite neu lädst, sind deine Einstellungen also noch da.

### Seitengrößen der Kontaktliste

Du kannst die Anzahl der angezeigten Kontakte pro Seite ändern. Verfügbare Werte: 5, 10, 25, 50, 100, 200. Wenn keine Kontakte vorhanden sind, wird eine entsprechende Meldung angezeigt.

## Aktionen in der Kontaktverwaltung

### Einzelaktionen (pro Kontakt)

- **Kontakt ansehen** – Öffnet die Detailansicht des Kontakts mit allen Informationen, Adressen, Anmerkungen und Spenden.
- **Kontakt bearbeiten** – Öffnet das Bearbeitungsformular des Kontakts. Alle Felder außer dem Typ können bearbeitet werden.

### Kopfzeilenaktionen der Kontaktliste

- **Export** – Exportiert die aktuelle Kontaktliste als Datei. Dabei werden die aktuell angewendeten Filter berücksichtigt, sodass du gezielt nur bestimmte Kontakte exportieren kannst.
- **Neuen Kontakt anlegen** – Öffnet das Formular zum Erstellen eines neuen Kontakts.

### Massenaktionen (Mehrere Kontakte gleichzeitig bearbeiten)

Wähle über die Checkboxen in der Liste mehrere Kontakte aus. Anschließend stehen dir folgende Aktionen zur Verfügung:

- **Zu Segment hinzufügen** – Fügt die ausgewählten Kontakte einem bestimmten Segment hinzu. Du wählst das gewünschte Segment aus einer Liste aus. Kontakte, die dem Segment bereits zugeordnet sind, werden nicht doppelt hinzugefügt.
- **Aus Segment entfernen** – Entfernt die ausgewählten Kontakte aus einem bestimmten Segment. Du wählst das Segment aus, aus dem die Kontakte entfernt werden sollen.
- **Zu Newsletter-Liste hinzufügen** – Fügt die ausgewählten Kontakte einer Newsletter-Liste hinzu.
- **Löschen** – Löscht die ausgewählten Kontakte. Es erscheint eine Bestätigungsabfrage, bevor die Kontakte endgültig gelöscht werden. **Achtung:** Gelöschte Kontakte können nicht wiederhergestellt werden.

### Aktionen auf der Bearbeitungsseite eines Kontakts

- **Löschen** – Löscht den aktuell geöffneten Kontakt über den Button in der Kopfzeile. Es erscheint eine Bestätigungsabfrage. **Achtung:** Gelöschte Kontakte können nicht wiederhergestellt werden. Verknüpfte Daten wie Adressen und Anmerkungen werden ebenfalls entfernt.

### Duplikaterkennung beim Anlegen eines Kontakts

Beim Anlegen eines neuen Kontakts wird automatisch geprüft, ob bereits ein Kontakt mit gleicher Email-Adresse, gleichem Vor- und Nachnamen oder gleichem Organisationsnamen existiert. Falls ein mögliches Duplikat gefunden wird, erscheint eine Warnmeldung mit einem Link zum bestehenden Kontakt. Du kannst den neuen Kontakt trotzdem anlegen, wenn es sich nicht um ein Duplikat handelt.

## Detailansicht eines Kontakts

In der Detailansicht eines Kontakts werden neben den Stammdaten folgende Bereiche angezeigt:

### Adressen des Kontakts

Tabelle mit den Spalten: Adresszeile 1, Adresszeile 2, PLZ, Stadt, Land und dem Status „Aktiv". Du kannst hier Adressen hinzufügen, bearbeiten und löschen.

- **Aktive Adresse:** Genau eine Adresse kann als „Aktiv" markiert werden. Die aktive Adresse wird in der Kontaktliste in den Spalten Adresszeile 1, PLZ, Stadt und Land angezeigt.
- **Pflichtfelder** beim Erstellen einer Adresse: Adresszeile 1, PLZ und Stadt.

Wenn noch keine Adresse vorhanden ist, wird die Tabelle leer angezeigt und du kannst über den Button „Neue Adresse" eine hinzufügen.

### Anmerkungen zum Kontakt

Tabelle mit den Spalten: Überschrift, Wiedervorlage-Datum und Erstellungsdatum. Anmerkungen können erstellt und bearbeitet werden.

Felder beim Erstellen/Bearbeiten einer Anmerkung:
- **Überschrift** – Kurze Beschreibung der Anmerkung.
- **Text** – Ausführlicher Text im Rich-Text-Editor (mit Formatierungsmöglichkeiten).
- **Wiedervorlage-Datum** – Optionales Datum, an dem du an diese Anmerkung erinnert werden möchtest.

Wenn noch keine Anmerkungen vorhanden sind, wird die Tabelle leer angezeigt.

### Spenden des Kontakts

Tabelle mit den Spalten: Datum, Betrag und Verwendungszweck. Sortiert nach Datum (neueste zuerst). Dieser Bereich ist nur sichtbar, wenn das Tool „Spenden" aktiviert ist.

Wenn noch keine Spenden vorhanden sind, wird die Tabelle leer angezeigt.

## Berechtigungen der Kontaktverwaltung

| Voraussetzung | Auswirkung |
|---------------|------------|
| Tool „Kontakte" muss aktiviert sein | Die gesamte Kontaktverwaltung ist sichtbar und nutzbar. |
| Zugriff auf alle Projekte erforderlich | Nur Benutzer mit Zugriff auf alle Projekte können die Kontaktverwaltung nutzen. |
| Tool „Mitglieder" muss aktiviert sein | Tab „Mitglieder" in der Listenansicht, Spalten Mitgliedsnummer und Mitglieds-Status, Filter „Mitglieds-Status" sowie der Tab „Mitgliedschaft" im Formular werden angezeigt. |
| Tool „Spendenbescheinigungen" muss aktiviert sein | Das Feld „Spendenbescheinigungen" im Kontaktformular wird angezeigt. |
| Tool „Spenden" muss aktiviert sein | Der Bereich „Spenden" in der Detailansicht wird angezeigt. |

## Validierung und Fehlermeldungen in der Kontaktverwaltung

Beim Speichern eines Kontakts werden die eingegebenen Daten automatisch geprüft. Hier findest du typische Fehlermeldungen und wie du sie lösen kannst:

| Fehler | Ursache | Lösung |
|--------|---------|--------|
| Typ ist ein Pflichtfeld | Der Kontakttyp wurde nicht ausgewählt. | Wähle einen Typ (Einzelperson, Organisation oder Ehepaar) aus. |
| Name ist ein Pflichtfeld | Bei Typ „Organisation" wurde kein Name eingetragen. | Trage den Organisationsnamen in das Feld „Name" ein. |
| Ungültige Email-Adresse | Die Email-Adresse hat kein gültiges Format (z. B. fehlendes @-Zeichen). | Korrigiere die Email-Adresse (z. B. „name@beispiel.de"). |
| Ungültige URL | Die Webseite hat kein gültiges URL-Format. | Gib eine vollständige URL ein (z. B. „https://www.beispiel.de"). |
| Startdatum ist ein Pflichtfeld | Bei einer Mitgliedszeit wurde kein Startdatum eingetragen. | Trage ein Startdatum für die Mitgliedszeit ein. |
| Überlappende Mitgliedszeiten sind nicht möglich | Zwei oder mehr Mitgliedszeiten überschneiden sich zeitlich. | Passe die Datumsbereiche an, sodass sich keine Zeiträume überlappen. |
| Adresszeile 1, PLZ und Stadt sind Pflichtfelder | Beim Erstellen einer Adresse wurden nicht alle Pflichtfelder ausgefüllt. | Fülle mindestens Adresszeile 1, PLZ und Stadt aus. |
| Segment-Name muss eindeutig sein | Beim Erstellen eines neuen Segments im Kontaktformular existiert bereits ein Segment mit diesem Namen. | Wähle einen anderen Namen für das Segment oder verwende das bestehende Segment aus der Liste. |

## Beziehungen und verknüpfte Daten eines Kontakts

Ein Kontakt kann mit verschiedenen anderen Datensätzen verknüpft sein:

- **Adressen** – Jeder Kontakt kann mehrere Adressen haben. Eine davon kann als aktive Adresse markiert werden, die in der Kontaktliste angezeigt wird.
- **Anmerkungen** – Zu jedem Kontakt können beliebig viele Anmerkungen mit optionalem Wiedervorlage-Datum angelegt werden.
- **Spenden** – Kontakte können mit Spenden verknüpft sein (das Tool „Spenden" muss aktiviert sein). Die Gesamtsumme der Spenden wird auch als Spalte in der Kontaktliste angezeigt.
- **Segmente** – Kontakte können beliebig vielen Segmenten zugeordnet werden. Segmente werden in den Einstellungen unter „Kontakte" verwaltet und dienen dazu, Kontakte in Gruppen zu organisieren.
- **Newsletter-Listen** – Kontakte können Newsletter-Listen zugeordnet werden, um gezielt Newsletter an bestimmte Gruppen zu versenden.
- **Kommunikationskanäle** – Kontakte können mehrere Kommunikationskanäle haben (z. B. Telefon, Fax, Post), um verschiedene Kontaktwege abzubilden.
- **Beziehungen** – Kontakte können Beziehungen zu anderen Kontakten haben (z. B. „ist Arbeitgeber von", „ist Ehepartner von"). Diese werden im Formular und in der Detailansicht angezeigt.
- **Ehepaare** – Beim Typ „Ehepaar" werden die Daten beider Partner in einem Kontakt erfasst. Einzelpersonen, die Teil eines Ehepaars sind, können in der Kontaktliste über den Filter „Einzelpersonen von Paaren ausblenden" ausgeblendet werden, um Doppelungen zu vermeiden.
- **Mitgliedszeiten** – Kontakte können Mitgliedszeiten mit Start- und Enddatum haben. Aus diesen Zeiträumen wird der Mitglieds-Status automatisch berechnet: „Aktives Mitglied" (laufende Mitgliedszeit ohne Enddatum oder Enddatum in der Zukunft), „Ehemaliges Mitglied" (alle Mitgliedszeiten liegen in der Vergangenheit) oder „Kein Mitglied" (keine Mitgliedszeiten vorhanden).
- **Eigene Felder** – In den Einstellungen definierte eigene Felder werden sowohl im Kontaktformular als auch in der Detailansicht angezeigt. Die verfügbaren eigenen Felder hängen von der Konfiguration in den Einstellungen ab.

---

## resource: App\Filament\App\Resources\DonationResource

**Entity:** App\Filament\App\Resources\DonationResource  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/DonationResource.php`  
**Updated:** 2026-02-14 16:29:40  

# Spendenübersicht

## Übersicht

Die Spendenübersicht zeigt alle erfassten Spenden deiner Organisation in einer tabellarischen Ansicht. Hier kannst du Spenden einsehen, nach verschiedenen Kriterien filtern und exportieren. Außerdem lassen sich Spendenbescheinigungen direkt aus der Tabelle heraus erstellen, anzeigen und herunterladen.

## Navigation zur Spendenübersicht

Du findest die Spendenübersicht im Hauptmenü:

- **Menügruppe:** Spendenverwaltung
- **Menüpunkt:** Spendenübersicht
- **Position:** Erster Eintrag in der Gruppe „Spendenverwaltung"

**Voraussetzung:** Das Tool **Spenden** muss aktiviert sein und du musst Zugriff auf alle Projekte haben, damit der Menüpunkt sichtbar ist.

## Tabellenansicht der Spendenübersicht

Die Spendenübersicht zeigt alle Spenden in einer Tabelle mit folgenden Spalten:

### Spalten

| Spalte | Beschreibung | Sortierbar | Ein-/Ausblendbar |
|--------|-------------|------------|-------------------|
| Datum | Das Datum, an dem die Spende eingegangen ist | Ja | Nein |
| Typ | Die Art der Spende | Ja | Nein |
| Name | Der Name des Spenders bzw. der Spenderin (Kontakt) | Nein | Nein |
| Adresse | Die Adresse des Spenders bzw. der Spenderin | Nein | Ja |
| Betrag | Der Spendenbetrag in der Währung deiner Organisation. Am Ende der Spalte wird die Gesamtsumme aller sichtbaren Spenden angezeigt. | Ja | Nein |
| Projekt | Das zugeordnete Projekt. Diese Spalte ist nur sichtbar, wenn das Tool **Projekte** aktiviert ist. Ein Klick auf den Projektnamen öffnet die Projektübersicht. | Ja | Ja |
| Bescheinigung | Ein Schalter, mit dem du festlegst, ob für diese Spende eine Spendenbescheinigung erstellt werden soll. Der Schalter lässt sich direkt in der Tabelle umschalten. | Nein | Ja |

**Standardsortierung:** Die Tabelle ist nach Datum sortiert, die neuesten Spenden stehen oben.

**Spalten ein-/ausblenden:** Spalten, die als „Ein-/Ausblendbar" gekennzeichnet sind, kannst du über das Spalten-Menü in der Tabelle ein- oder ausblenden, um die Ansicht an deine Bedürfnisse anzupassen.

### Filter in der Spendenübersicht

Du kannst die Spendenübersicht mit folgenden Filtern eingrenzen:

| Filter | Beschreibung |
|--------|-------------|
| Bescheinigung | Filtert nach Spenden, für die eine Bescheinigung erstellt werden soll. Du kannst zwischen „Ja", „Nein" und „Alle" wählen. |
| Projekt | Filtert nach einem oder mehreren Projekten. Dieser Filter ist nur sichtbar, wenn das Tool **Projekte** aktiviert ist. Es werden nur Projekte angezeigt, die für die Spendenverwaltung aktiviert sind. Mehrfachauswahl ist möglich. |
| Typ | Filtert nach der Art der Spende. Mehrfachauswahl ist möglich. |
| Datum | Filtert nach einem Datumsbereich. |

Die Filter lassen sich beliebig kombinieren. Die Gesamtsumme in der Spalte „Betrag" passt sich automatisch an die gefilterten Ergebnisse an.

### Leerer Zustand der Spendenübersicht

Wenn noch keine Spenden vorhanden sind, zeigt die Spendenübersicht folgenden Hinweis:

> Um Spenden anzuzeigen, müssen sie entweder in der Spendenerfassung erfasst oder über die „Import"-Funktion importiert werden.

## Aktionen in der Spendenübersicht

### Zeilenaktionen (pro Spende)

Für jede einzelne Spende in der Tabelle stehen dir folgende Aktionen zur Verfügung:

| Aktion | Beschreibung | Sichtbarkeit |
|--------|-------------|--------------|
| Einzelspendenbestätigung erstellen | Erstellt eine Spendenbescheinigung für diese einzelne Spende. | Immer sichtbar |
| Spendenbescheinigung anzeigen | Zeigt die bereits erstellte Spendenbescheinigung an. | Nur sichtbar, wenn bereits eine Bescheinigung mit Dokument für diese Spende vorhanden ist |
| Spendenbescheinigung herunterladen | Lädt die bereits erstellte Spendenbescheinigung als Datei herunter. | Nur sichtbar, wenn bereits eine Bescheinigung mit Dokument für diese Spende vorhanden ist |

### Kopfzeilen-Aktionen

| Aktion | Beschreibung |
|--------|-------------|
| Export | Exportiert die aktuell angezeigten Spenden. |

### Klick auf eine Zeile in der Spendenübersicht

Ein Klick auf eine Spendenzeile öffnet das zugehörige Finanzereignis in der Detailansicht.

### Bescheinigung-Schalter in der Spendenübersicht

Der Schalter in der Spalte „Bescheinigung" kann direkt in der Tabelle umgeschaltet werden, um festzulegen, ob für eine Spende eine Spendenbescheinigung erstellt werden soll.

**Berechtigung:** Du benötigst die Berechtigung **write donations**, um den Schalter umschalten zu können. Ohne diese Berechtigung wird der Schalter deaktiviert angezeigt und lässt sich nicht ändern.

## Berechtigungen für die Spendenübersicht

Damit du die Spendenübersicht nutzen kannst, müssen folgende Voraussetzungen erfüllt sein:

| Voraussetzung | Details |
|---------------|---------|
| Tool **Spenden** | Muss aktiviert sein, damit der Menüpunkt sichtbar ist und die Spendenübersicht aufgerufen werden kann. |
| Projektzugriff | Du musst Zugriff auf alle Projekte haben, um die Spendenübersicht sehen zu können. |
| Berechtigung **write donations** | Ermöglicht das Umschalten des Bescheinigung-Schalters. |

## Beziehungen der Spendenübersicht zu anderen Bereichen

Die Spendenübersicht ist mit verschiedenen anderen Bereichen der Plattform verknüpft:

| Bereich | Zusammenhang |
|---------|-------------|
| Finanzereignisse | Jede Spende in der Spendenübersicht ist mit einem Finanzereignis verknüpft. Ein Klick auf eine Zeile öffnet das zugehörige Finanzereignis in der Detailansicht. |
| Kontakte | Jede Spende ist einem Kontakt (Spender/in) zugeordnet. Der Name des Kontakts wird in der Spalte „Name" angezeigt. |
| Projekte | Spenden können einem Projekt zugeordnet sein. Die Spalte „Projekt" und der Filter „Projekt" sind nur sichtbar, wenn das Tool **Projekte** aktiviert ist. |
| Spendenbescheinigungen | Aus der Spendenübersicht heraus kannst du Einzelspendenbestätigungen erstellen, vorhandene Bescheinigungen anzeigen und herunterladen. |

---

## resource: App\Filament\App\Resources\DonationReceiptResource

**Entity:** App\Filament\App\Resources\DonationReceiptResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/DonationReceiptResource.php`  
**Updated:** 2026-02-14 16:27:53  

# Spendenbescheinigungen

## Übersicht
Auf der Seite **Spendenbescheinigungen** kannst du alle erstellten Spendenbescheinigungen einsehen, verwalten und herunterladen. Du kannst Bescheinigungen filtern, als gesendet markieren, einzeln oder gebündelt herunterladen sowie löschen. Die Versandmethode lässt sich pro Spendenbescheinigung bearbeiten.

## Navigation
Die Spendenbescheinigungen findest du in der Seitenleiste im Bereich **Spendenverwaltung**. Sie sind an zweiter Position innerhalb dieser Gruppe einsortiert.

## Formularfelder

Beim Bearbeiten einer Spendenbescheinigung steht folgendes Feld zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Versandmethode | Auswahl | Nein | Legt fest, wie die Spendenbescheinigung versendet werden soll. Dieses Feld dient aktuell nur zur Information – die automatische Versendung ist in Entwicklung. |

## Tabellenansicht / Listenansicht

Die Tabellenansicht zeigt alle Spendenbescheinigungen mit den folgenden Spalten.

### Spalten

| Spalte | Beschreibung |
|--------|--------------|
| Typ | Art der Spendenbescheinigung |
| Erstellt | Zeigt den Erstellungslauf an, in dem die Spendenbescheinigung generiert wurde |
| Kontaktnummer | Die Kontaktnummer des zugehörigen Kontakts |
| Kontaktname | Name des Kontakts, für den die Spendenbescheinigung ausgestellt wurde |
| Versandmethode | Die gewählte Versandmethode (dient aktuell nur zur Information) |
| Versendet am | Datum und Uhrzeit, zu der die Spendenbescheinigung als versendet markiert wurde |

### Filter

Mit den Filtern kannst du die Liste der Spendenbescheinigungen gezielt eingrenzen. Mehrere Filter lassen sich gleichzeitig kombinieren.

| Filter | Beschreibung |
|--------|--------------|
| Bereits gesendet | Filtert nach dem Versandstatus |
| Versandmethode | Filtert Spendenbescheinigungen nach der gewählten Versandmethode |
| Typ | Filtert nach der Art der Spendenbescheinigung |
| Erstellt | Filtert Spendenbescheinigungen nach dem Erstellungslauf, in dem sie generiert wurden |

## Aktionen

### Zeilenaktionen (pro Spendenbescheinigung)

Jede Spendenbescheinigung in der Tabelle bietet folgende Aktionen:

| Aktion | Beschreibung |
|--------|--------------|
| Anschreiben anzeigen | Zeigt eine Vorschau des konfigurierten Anschreibens als PDF an. Diese Aktion ist nur sichtbar, wenn in den Einstellungen ein Anschreiben-Dokument hinterlegt ist. |
| Spendenbescheinigung anzeigen | Öffnet eine Vorschau der Spendenbescheinigung |
| Spendenbescheinigung herunterladen | Lädt die Spendenbescheinigung herunter |
| Bearbeiten | Öffnet das Bearbeitungsformular, in dem du die Versandmethode ändern kannst |
| Löschen | Löscht die Spendenbescheinigung. Vor dem Löschen wirst du um Bestätigung gebeten. |

### Sammelaktionen (für ausgewählte Spendenbescheinigungen)

Wenn du eine oder mehrere Spendenbescheinigungen auswählst, stehen dir folgende Sammelaktionen zur Verfügung:

| Aktion | Beschreibung |
|--------|--------------|
| Ausgewählte Spendenbescheinigungen herunterladen | Lädt alle ausgewählten Spendenbescheinigungen zusammengefügt in einer einzigen Datei herunter. |
| Als gesendet markieren | Markiert die ausgewählten Spendenbescheinigungen als versendet. Nutze diese Aktion, wenn du die Bescheinigungen manuell (z. B. per Post oder E-Mail) versendet hast. |
| Ausgewählte Spendenbescheinigungen löschen | Löscht die ausgewählten Spendenbescheinigungen nach Bestätigung. |

## Berechtigungen

Das Tool **Spenden** (donations) muss für die Organisation aktiviert sein, damit die Seite Spendenbescheinigungen zugänglich ist.

## Beziehungen

- **Kontakte**: Jede Spendenbescheinigung ist einem Kontakt zugeordnet. Der Kontaktname und die Kontaktnummer werden in der Tabellenansicht angezeigt.
- **Erstellungsläufe**: Spendenbescheinigungen werden über Erstellungsläufe generiert. In der Tabelle siehst du, zu welchem Erstellungslauf eine Bescheinigung gehört, und du kannst nach Erstellungsläufen filtern.
- **Dokumente (Anschreiben)**: Für die Anschreiben-Vorschau muss ein Dokument in den Einstellungen hinterlegt sein. Ohne hinterlegtes Anschreiben-Dokument wird die Aktion „Anschreiben anzeigen" nicht angezeigt.

---

## resource: App\Filament\App\Resources\ConnectedAccountTransactionResource

**Entity:** App\Filament\App\Resources\ConnectedAccountTransactionResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ConnectedAccountTransactionResource.php`  
**Updated:** 2026-02-14 16:16:18  

# Bankvorgänge

## Übersicht
Bankvorgänge sind die einzelnen Kontobewegungen deiner verbundenen Bankkonten. Sie werden entweder über einen CSV-Import oder über die automatische Bankanbindung in ngo.tools importiert. In diesem Bereich kannst du alle importierten Bankvorgänge einsehen und deren Details prüfen. Bankvorgänge bilden die Grundlage für die Zuordnung zu Finanzereignissen und damit für deine Buchführung.

## Navigation
Die Bankvorgänge findest du in der Seitenleiste unter der Navigationsgruppe **Finanzen**.

## Berechtigungen
Um Bankvorgänge einsehen zu können, müssen folgende Voraussetzungen erfüllt sein:
- Das Tool **Buchhaltung** oder **Buchhaltung (erweitert)** muss aktiviert sein.
- Du musst Zugriff auf alle Projekte haben.

Ohne diese Berechtigungen wird der Menüpunkt „Bankvorgänge" in der Navigation nicht angezeigt.

## Tabellenansicht / Listenansicht
Die Listenansicht zeigt alle importierten Bankvorgänge in einer Tabelle an. Von hier aus kannst du einzelne Bankvorgänge auswählen, um deren Details einzusehen.

## Detailansicht der Bankvorgänge

Wenn du einen Bankvorgang in der Listenansicht auswählst, werden dir folgende Informationen angezeigt:

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| Buchungsdatum | Datum | Das Datum, an dem die Buchung auf dem Bankkonto verarbeitet wurde. |
| Konto | Auswahl | Das verbundene Bankkonto, zu dem dieser Bankvorgang gehört. Dieses Feld wird nur angezeigt, wenn mehr als ein Bankkonto vorhanden ist. |
| Name | Text | Der Name des Bankvorgangs, z. B. der Empfänger oder Auftraggeber der Überweisung. |
| Verwendungszweck | Text | Der Verwendungszweck, der bei der Überweisung angegeben wurde. |
| Buchungstext | Text | Eine technische Bezeichnung für die Art der Buchung, z. B. „Überweisung", „Dauerauftrag" oder „Lastschrift". Dieser Text wird von der Bank vergeben. |
| Kontonummer Gegenpartei | Text | Die IBAN der Gegenpartei (Empfänger oder Absender). Nicht alle Banken stellen diese Information bereit – das Feld kann daher leer sein. |
| Betrag | Geldbetrag | Der Betrag des Bankvorgangs. Eingehende Zahlungen werden als positiver Betrag angezeigt, ausgehende Zahlungen als negativer Betrag. |

Die Detailansicht ist eine reine Anzeige – du kannst die Daten hier nicht verändern.

## Aktionen
- **Anzeigen**: Du kannst die Details eines einzelnen Bankvorgangs einsehen, indem du ihn in der Listenansicht auswählst. Es öffnet sich die Detailansicht mit allen verfügbaren Informationen zum Bankvorgang.

## Beziehungen
- **Bankkonten**: Jeder Bankvorgang ist genau einem verbundenen Bankkonto zugeordnet. Das zugehörige Konto wird in der Detailansicht angezeigt, sofern mehr als ein Bankkonto vorhanden ist.
- **Finanzereignisse**: Bankvorgänge können Finanzereignissen zugeordnet werden, um daraus Buchungen zu erstellen. Die Zuordnung erfolgt nicht hier, sondern über den Bereich „Finanzereignisse".

## Häufige Fragen

**Warum sehe ich keine Bankvorgänge?**
Wenn die Liste leer ist, wurden noch keine Bankvorgänge importiert. Verbinde zunächst ein Bankkonto über die automatische Bankanbindung oder importiere Kontobewegungen per CSV-Import.

**Warum fehlt die Kontonummer der Gegenpartei?**
Nicht alle Banken übermitteln die IBAN der Gegenpartei bei jedem Bankvorgang. Dieses Feld kann daher bei einzelnen Vorgängen leer sein.

**Wie ordne ich einen Bankvorgang einem Finanzereignis zu?**
Die Zuordnung von Bankvorgängen zu Finanzereignissen erfolgt im Bereich „Finanzereignisse", nicht direkt bei den Bankvorgängen.

---

## resource: App\Filament\App\Resources\CommunicationsContactResource

**Entity:** App\Filament\App\Resources\CommunicationsContactResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/CommunicationsContactResource.php`  
**Updated:** 2026-02-14 16:15:14  

# Kommunikation – Kontakte

## Übersicht

Die Seite „Kommunikation – Kontakte" zeigt alle Kontakte, die aktuell bei mindestens einem Segment oder einer Newsletter-Liste angemeldet sind. Du kannst hier gezielt nach Kontakten filtern, die für die Kommunikation relevant sind, sie direkt zur Bearbeitung öffnen und als Excel-Datei exportieren.

Kontakte ohne aktive Zuordnung zu einem Segment oder einer Newsletter-Liste erscheinen in dieser Ansicht nicht. Wenn noch keine Kontakte zugeordnet sind, wird die Tabelle leer angezeigt.

## Navigation

Die Seite „Kommunikation – Kontakte" ist nicht direkt in der Seitenleiste sichtbar. Sie wird im Kontext des Kommunikationsbereichs verwendet und ist über die Kommunikations-Funktionen erreichbar.

## Voraussetzungen

Damit die Seite „Kommunikation – Kontakte" zugänglich ist, muss mindestens eines der folgenden Tools aktiviert sein:

- Das Tool **Newsletter**
- Das Tool **Segment-Kommunikation**

Ist keines dieser Tools aktiviert, steht die Seite nicht zur Verfügung.

## Tabellenansicht / Listenansicht

Die Tabelle auf der Seite „Kommunikation – Kontakte" zeigt die folgenden Spalten.

### Spalten

| Spalte | Beschreibung |
|---|---|
| Email-Adresse | Die E-Mail-Adresse des Kontakts. |
| Vorname | Der Vorname des Kontakts. |
| Nachname | Der Nachname des Kontakts. |
| Anrede | Die hinterlegte Anrede des Kontakts. |
| Newsletter-Listen | Zeigt die Newsletter-Listen an, bei denen der Kontakt angemeldet ist (als Tags dargestellt). |
| Segmente | Zeigt die Segmente an, denen der Kontakt zugeordnet ist – ohne Newsletter-Listen (als Tags dargestellt). |

### Filter

Über die Filter kannst du die angezeigte Kontaktliste auf der Seite „Kommunikation – Kontakte" eingrenzen. Bei allen Filtern ist eine Mehrfachauswahl möglich.

| Filter | Beschreibung |
|---|---|
| Newsletter-Listen | Filtert nach Kontakten, die bei bestimmten Newsletter-Listen angemeldet sind. Wähle eine oder mehrere Newsletter-Listen aus, um nur die zugehörigen Kontakte anzuzeigen. |
| Segmente | Filtert nach Kontakten, die bestimmten Segmenten zugeordnet sind (ohne Newsletter-Listen). Wähle ein oder mehrere Segmente aus, um nur die zugehörigen Kontakte anzuzeigen. |

### Angezeigte Kontakte

Es werden auf der Seite „Kommunikation – Kontakte" nur Kontakte angezeigt, die aktuell bei mindestens einem Segment oder einer Newsletter-Liste angemeldet sind. Kontakte ohne aktive Zuordnung erscheinen hier nicht – sie sind aber weiterhin in der allgemeinen Kontaktverwaltung vorhanden.

## Aktionen

Folgende Aktionen stehen dir auf der Seite „Kommunikation – Kontakte" zur Verfügung:

| Aktion | Beschreibung |
|---|---|
| Bearbeiten | Öffnet den ausgewählten Kontakt zur Bearbeitung in der allgemeinen Kontaktverwaltung. Du wirst dabei auf die Kontakt-Detailseite weitergeleitet, wo du alle Daten des Kontakts einsehen und ändern kannst. |
| Export | Über die Kopfzeile der Tabelle kannst du die aktuell angezeigte Kontaktliste als Excel-Datei exportieren. |

## Beziehungen

Die Seite „Kommunikation – Kontakte" steht in Verbindung mit anderen Bereichen der Plattform:

- Die hier angezeigten Kontakte stammen aus der allgemeinen **Kontaktverwaltung**. Ein Klick auf „Bearbeiten" führt zur Kontakt-Detailseite in der Kontaktverwaltung.
- Die Zuordnung zu **Newsletter-Listen** und **Segmenten** bestimmt, welche Kontakte in dieser Ansicht erscheinen. Nur Kontakte mit mindestens einer aktiven Zuordnung werden angezeigt.
- Segmente und Newsletter-Listen können in den **Einstellungen** unter dem Bereich „Kontakte" angelegt und verwaltet werden. Änderungen dort wirken sich direkt auf die in „Kommunikation – Kontakte" angezeigten Daten aus.

---

## resource: App\Filament\App\Resources\BudgetResource

**Entity:** App\Filament\App\Resources\BudgetResource  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/BudgetResource.php`  
**Updated:** 2026-02-14 16:14:04  

# Budgets

## Übersicht

Die Budget-Verwaltung ermöglicht es dir, Budgets für Projekte und Finanzereignis-Typen zu planen und deren Einhaltung zu überwachen. Für jedes Budget werden der geplante Betrag, der tatsächliche Ist-Betrag und der verbleibende Restbetrag angezeigt. Budgets können optional auf einen bestimmten Monat oder ein Wirtschaftsjahr eingeschränkt werden.

Diese Seite befindet sich im Bereich **Finanzen** der Anwendung.

**Voraussetzungen:**
- Das Tool **Budgets** muss in der Toolbox aktiviert sein, damit der Menüpunkt sichtbar ist.

## Navigation

- **Seitenleiste → Finanzen → Budgets**
- Das Tool **Budgets** muss in der Toolbox aktiviert sein, damit der Menüpunkt in der Seitenleiste sichtbar ist. Ist das Tool nicht aktiviert, erscheint der Eintrag nicht.

## Formularfelder

Beim Erstellen oder Bearbeiten eines Budgets stehen dir folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Projekt | Baumauswahl (Dropdown) | Nein | Auswahl eines Projekts aus der hierarchischen Projektstruktur. Die Baumstruktur ist durchsuchbar und standardmäßig zwei Ebenen tief geöffnet. |
| Typ | Dropdown | Nein | Auswahl des Finanzereignis-Typs. Es werden nur Typen der Kategorien **Einnahme** und **Ausgabe** angezeigt. Das Feld ist durchsuchbar. |
| Betrag | Zahleneingabe | Ja | Der geplante Budgetbetrag. |
| Zeitliche Einschränkung | Dropdown | Nein | Bestimmt, ob das Budget zeitlich eingeschränkt wird. Optionen: **Keine**, **Monat**, **Wirtschaftsjahr**. Standardwert ist „Keine". Je nach Auswahl werden weitere Felder eingeblendet (siehe unten). |
| Wirtschaftsjahr | Dropdown | Ja (wenn sichtbar) | Nur sichtbar, wenn „Zeitliche Einschränkung" auf **Wirtschaftsjahr** gesetzt ist. Wähle das Wirtschaftsjahr aus, für das dieses Budget gelten soll. |
| Monat | Monatsauswahl | Ja (wenn sichtbar) | Nur sichtbar, wenn „Zeitliche Einschränkung" auf **Monat** gesetzt ist. Wähle einen konkreten Monat im Format „Monat Jahr" (z. B. „Januar 2025"). |
| Anmerkungen | Rich-Text-Editor | Nein | Freitext-Feld für zusätzliche Notizen zum Budget. |

## Tabellenansicht / Listenansicht

Die Budget-Listenansicht zeigt dir alle angelegten Budgets auf einen Blick.

### Spalten

| Spalte | Beschreibung |
|--------|--------------|
| Projekt (Badge) | Zugeordnetes Projekt, als Badge dargestellt. Zeigt den hierarchischen Projektnamen an (z. B. „Hauptprojekt > Unterprojekt"). |
| Projekt (Textform) | Projektname als einfacher Text (ohne Badge-Darstellung). |
| Typ | Finanzereignis-Typ. Zeigt „-" wenn kein Typ zugeordnet ist. |
| Betrag | Der geplante Budgetbetrag in der Währung deiner Organisation. Am Fuß der Spalte wird die **Summe** aller angezeigten Budgets berechnet. |
| Ist | Der tatsächlich angefallene Betrag. Die Farbe signalisiert den Status: **Grün** = im Plan (Einnahmen erreicht oder Ausgaben nicht überschritten), **Gelb** = Einnahmen unter Plan, **Rot** = Ausgaben über Plan. |
| Verbleibend | Die Differenz zwischen geplantem Budget und Ist-Betrag. Farblich markiert: **Grün** = im Rahmen, **Gelb** = Einnahmen-Abweichung, **Rot** = Ausgaben-Abweichung. |
| Zeitliche Einschränkung | Art der zeitlichen Einschränkung (standardmäßig ausgeblendet, kann über die Spaltenauswahl eingeblendet werden). |
| Zeitraum | Zeigt den konkreten Zeitraum an: Monatsname und Jahr (z. B. „Januar 2025"), Name des Wirtschaftsjahres oder „-" bei keiner Einschränkung. |

### Gruppierung

Die Budget-Tabelle kann nach **Projekt** gruppiert werden. Die Gruppierung zeigt den hierarchischen Projektnamen als Gruppenüberschrift.

### Filter

Filter sind über ein Modal verfügbar und helfen dir, die Budget-Liste einzuschränken:

| Filter | Beschreibung |
|--------|--------------|
| Projekt | Mehrfachauswahl von Projekten. Filtert auch nach Unterprojekten des ausgewählten Projekts. Dieser Filter ist nur sichtbar, wenn das Tool **Projekte** aktiviert ist. |
| Typ | Mehrfachauswahl von Finanzereignis-Typen. Das Feld ist durchsuchbar. |
| Wirtschaftsjahr | Mehrfachauswahl von Wirtschaftsjahren. Filtert sowohl Budgets mit der Einschränkung „Wirtschaftsjahr" als auch monatliche Budgets, deren Monat in den gewählten Wirtschaftsjahr-Zeitraum fällt. |

## Aktionen

| Aktion | Beschreibung |
|--------|--------------|
| **Anschauen** | Öffnet die Detailansicht eines Budgets auf einer eigenen Seite. |
| **Bearbeiten** | Öffnet das Bearbeitungsformular für ein bestehendes Budget. |
| **Löschen** | Löscht ein einzelnes Budget. |
| **Massenlöschung** | Wähle mehrere Budgets über die Checkboxen in der Tabelle aus und lösche sie gleichzeitig. |

## Beziehungen

- **Projekte**: Jedes Budget kann einem Projekt zugeordnet werden.
- **Finanzereignis-Typen**: Budgets können einem bestimmten Typ (Einnahme oder Ausgabe) zugeordnet werden.
- **Wirtschaftsjahre**: Budgets können auf ein bestimmtes Wirtschaftsjahr eingeschränkt werden.

---

## resource: App\Filament\App\Resources\ActivityPeriodResource

**Entity:** App\Filament\App\Resources\ActivityPeriodResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ActivityPeriodResource.php`  
**Updated:** 2026-02-14 16:11:23  

# Zeiterfassung

## Übersicht
Die Zeiterfassung ermöglicht es dir, Arbeitszeiten zu erfassen und zu verwalten. Du kannst Zeiträume mit Start- und Endzeit anlegen, sie optional einem Projekt zuordnen und mit einer Beschreibung versehen. Die erfassten Zeiten werden in einer Übersicht mit automatischer Dauerberechnung angezeigt.

## Navigation
Die Zeiterfassung findest du in der Seitenleiste unter dem Menüpunkt **Zeiterfassung**.

## Voraussetzungen
Das Tool **Zeiterfassung** muss für deine Organisation aktiviert sein. Alternativ reicht es aus, wenn du die Rolle „time-tracked" besitzt.

## Formularfelder der Zeiterfassung

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Benutzer | Auswahl | Ja | Auswahl des Benutzers, für den die Zeit erfasst wird. Dieses Feld ist nur sichtbar, wenn du die Berechtigung **read people:time-tracking** hast. Ist deine eigene Zeiterfassung aktiv, wird dein Name automatisch vorausgewählt. |
| Projekt | Auswahl | Nein | Zuordnung zu einem Projekt. Dieses Feld erscheint nur, wenn mindestens ein Projekt für die Zeiterfassung freigegeben ist. Es werden ausschließlich Projekte angezeigt, die für die Zeiterfassung aktiviert wurden. Wenn kein Projekt freigegeben ist, wird das Feld nicht angezeigt. |
| von | Datum & Uhrzeit | Ja | Startzeit des Zeitraums. Beim Anlegen eines neuen Eintrags ist das Feld auf die letzte volle Stunde voreingestellt (eine Stunde vor der aktuellen Uhrzeit). Wenn du den Startzeitpunkt änderst und noch kein Endzeitpunkt gesetzt ist, wird das „bis"-Feld automatisch auf eine Stunde nach dem neuen Startzeitpunkt gesetzt. Bei Nachtschichten (wenn die Endzeit vor der Startzeit liegt) wird automatisch ein Tag auf die Endzeit addiert, damit der Zeitraum korrekt über Mitternacht hinweg berechnet wird. |
| bis | Datum & Uhrzeit | Ja | Endzeit des Zeitraums. Muss zeitlich nach dem Startzeitpunkt liegen. |
| Beschreibung | Textfeld | Nein | Freitext-Beschreibung der geleisteten Arbeit. Du kannst dieses Feld leer lassen. |

## Tabellenansicht der Zeiterfassung

### Spalten

| Spalte | Beschreibung |
|--------|--------------|
| Benutzer | Name des Benutzers, dem der Zeiteintrag zugeordnet ist. Diese Spalte ist nur sichtbar, wenn du die Berechtigung **read time-tracking** hast. Die Spalte ist durchsuchbar und sortierbar. |
| Projekt | Name des zugeordneten Projekts. Diese Spalte ist nur sichtbar, wenn mindestens ein Projekt für die Zeiterfassung freigegeben ist. Die Spalte ist durchsuchbar und sortierbar. |
| von | Startzeit im Format TT.MM.JJJJ HH:MM. Sortierbar. |
| bis | Endzeit im Format HH:MM. Sortierbar. |
| Dauer | Automatisch berechnete Dauer im Format HH:MM (z. B. „02:30" für zweieinhalb Stunden). Am Ende der Liste wird die Gesamtsumme aller aktuell angezeigten Einträge angezeigt. |
| Beschreibung | Die Freitext-Beschreibung der geleisteten Arbeit. Durchsuchbar. |

### Standardsortierung
Die Einträge in der Zeiterfassung werden standardmäßig nach Startzeit absteigend sortiert, sodass die neuesten Einträge zuerst erscheinen.

### Filter der Zeiterfassung

| Filter | Beschreibung |
|--------|--------------|
| Datum | Mit dem Datumsbereichs-Filter kannst du die angezeigten Zeiteinträge auf einen bestimmten Zeitraum eingrenzen. Wähle ein Start- und Enddatum aus, um nur Einträge innerhalb dieses Zeitraums zu sehen. |
| Projekt | Filtert die Zeiteinträge nach einem bestimmten Projekt. Das Feld ist durchsuchbar und zeigt den Projektnamen zusammen mit der Projektnummer an. |
| Benutzer | Filtert die Zeiteinträge nach einem bestimmten Benutzer. |

Wenn keine Zeiteinträge vorhanden sind oder kein Eintrag den gesetzten Filtern entspricht, wird eine leere Liste angezeigt.

## Aktionen in der Zeiterfassung

| Aktion | Beschreibung |
|--------|--------------|
| Zeitraum erfassen | Öffnet das Formular zum Anlegen eines neuen Zeiteintrags. Nach dem Speichern erscheint der neue Eintrag in der Listenansicht. |
| Zeitraum bearbeiten | Öffnet ein Bearbeitungsfenster für einen bestehenden Zeiteintrag. |
| Zeitraum löschen | Löscht einen einzelnen Zeiteintrag. |
| Mehrfachauswahl löschen | Ermöglicht das Löschen mehrerer ausgewählter Einträge auf einmal. |

## Berechtigungen in der Zeiterfassung

Die Sichtbarkeit der Benutzer-Spalte und des Benutzer-Feldes im Formular richtet sich nach unterschiedlichen Berechtigungen:

- Die **Benutzer-Spalte** in der Tabelle ist sichtbar, wenn du die Berechtigung **read time-tracking** hast.
- Das **Benutzer-Feld** im Formular ist sichtbar, wenn du die Berechtigung **read people:time-tracking** hast.

## Validierung und Fehlermeldungen in der Zeiterfassung

| Regel | Fehlermeldung / Ursache | Lösung |
|-------|------------------------|--------|
| Benutzer ist Pflichtfeld | Es wurde kein Benutzer ausgewählt (sofern das Feld sichtbar ist). | Wähle einen Benutzer aus der Liste aus. |
| „von" ist Pflichtfeld | Der Startzeitpunkt wurde nicht angegeben. | Gib einen Startzeitpunkt (Datum und Uhrzeit) ein. |
| „bis" ist Pflichtfeld | Der Endzeitpunkt wurde nicht angegeben. | Gib einen Endzeitpunkt (Datum und Uhrzeit) ein. |
| „bis" muss nach „von" liegen | Die eingegebene Endzeit liegt vor oder auf der Startzeit. | Korrigiere die Endzeit so, dass sie zeitlich nach der Startzeit liegt. |

## Beziehungen der Zeiterfassung

- **Projekte**: Zeiteinträge in der Zeiterfassung können optional einem Projekt zugeordnet werden, sofern mindestens ein Projekt für die Zeiterfassung aktiviert ist. Die Projektzuordnung hilft dir, Arbeitszeiten projektbezogen auszuwerten.
- **Benutzer**: Jeder Zeiteintrag in der Zeiterfassung ist genau einem Benutzer zugeordnet. Ist deine eigene Zeiterfassung aktiv, bist du standardmäßig als Benutzer vorausgewählt.

---

## resource: App\Filament\App\Resources\SongResource

**Entity:** App\Filament\App\Resources\SongResource  
**Type:** auto_generated  
**Version:** 3  
**File:** `app/Filament/App/Resources/SongResource.php`  
**Updated:** 2026-02-14 15:54:03  

# Lieder

## Übersicht
Auf der Seite **Lieder** kannst du alle Lieder deiner Organisation verwalten und einsehen. Du siehst eine Übersicht aller erfassten Lieder mit Informationen wie Titel, CCLI-Song-Nummer, Autoren und der Anzahl der bisherigen Einsätze in Veranstaltungen.

Diese Seite befindet sich im Bereich **Sonstiges** der Anwendung.

## Navigation
- **Seitenleiste → Sonstiges → Lieder**

## Voraussetzungen
Das Tool **Musik** muss für deine Organisation aktiviert sein, damit die Seite „Lieder" sichtbar und zugänglich ist.

## Tabellenansicht / Listenansicht

Die Lieder werden in einer Tabelle mit folgenden Spalten angezeigt:

| Spalte | Beschreibung |
|---|---|
| **Titel** | Der Titel des Liedes. Sortierbar und durchsuchbar. |
| **CCLI Song Nummer** | Die CCLI-Nummer des Liedes. Wird als anklickbarer Link dargestellt, der direkt zur CCLI-SongSelect-Seite des Liedes führt (öffnet in einem neuen Tab). Sortierbar und durchsuchbar. |
| **Autoren** | Die Namen der Autoren des Liedes. Durchsuchbar. |
| **Einsätze** | Zeigt an, wie oft das Lied in Programmpunkten von Veranstaltungen verwendet wurde. Sortierbar. |

**Standardsortierung:** Die Tabelle ist standardmäßig alphabetisch nach Titel sortiert.

**Suche:** Du kannst über das Suchfeld nach Titel, CCLI-Song-Nummer und Autoren suchen.

## Lied bearbeiten – Variationen verwalten

Über die Bearbeitungsaktion in der jeweiligen Tabellenzeile öffnet sich ein Dialog, in dem du die **Variationen** eines Liedes verwalten kannst.

Für jede Variation stehen folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| **Titel** | Textfeld | Ja | Der Titel der Variation. |
| **Leadsheet** | Datei-Upload | Nein | Ein Leadsheet als Datei hochladen. |

Du kannst beliebig viele Variationen hinzufügen.

**Validierung:** Das Feld „Titel" ist ein Pflichtfeld. Wenn du eine Variation ohne Titel speichern möchtest, wird eine Fehlermeldung angezeigt.

## Beziehungen und verknüpfte Daten

- **Autoren:** Jedem Lied können Autoren zugeordnet sein, die in der Listenansicht der Lieder angezeigt werden.
- **Veranstaltungen:** Die Spalte „Einsätze" in der Lieder-Tabelle zeigt, wie oft ein Lied in Programmpunkten von Veranstaltungen verwendet wurde.
- **CCLI SongSelect:** Über die CCLI-Song-Nummer in der Lieder-Tabelle gelangst du per Klick direkt zur entsprechenden Seite auf CCLI SongSelect.

## Häufige Fragen

**Was bedeutet die Zahl in der Spalte „Einsätze"?**
Die Zahl gibt an, in wie vielen Programmpunkten von Veranstaltungen das jeweilige Lied bisher verwendet wurde.

**Was ist eine CCLI-Song-Nummer?**
Die CCLI-Song-Nummer ist eine eindeutige Kennzeichnung für ein Lied im CCLI-SongSelect-System. Sie wird genutzt, um Lieder eindeutig zu identifizieren und Lizenzinformationen zuzuordnen.

---

## resource: App\Filament\App\Resources\SongResource

**Entity:** App\Filament\App\Resources\SongResource  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Resources/SongResource.php`  
**Updated:** 2026-02-14 15:47:35  

# Lieder

## Übersicht

Auf der Seite **Lieder** können Sie alle Lieder Ihrer Organisation verwalten und einsehen. Sie sehen eine Übersicht aller erfassten Lieder mit Informationen zu Titel, CCLI-Nummer, Autoren und wie oft ein Lied bereits bei Veranstaltungen eingesetzt wurde.

Diese Seite befindet sich im Bereich **Sonstiges** der Anwendung.

## Navigation

- **Seitenleiste → Sonstiges → Lieder**
- Das Feature **music** muss für Ihre Organisation aktiviert sein, damit der Menüpunkt **Lieder** in der Seitenleiste sichtbar ist.

## Tabellenansicht / Listenansicht

Die Liederliste zeigt folgende Spalten:

| Spalte | Beschreibung |
|---|---|
| **Titel** | Der Titel des Liedes. Sortierbar und durchsuchbar. |
| **CCLI Song Nummer** | Die CCLI-Nummer des Liedes. Wird als anklickbarer Link zur CCLI SongSelect-Webseite angezeigt und öffnet sich in einem neuen Tab. Sortierbar und durchsuchbar. |
| **Autoren** | Die Namen der Autoren des Liedes. Durchsuchbar. |
| **Einsätze** | Zeigt an, wie oft das Lied bei Veranstaltungen als Programmpunkt verwendet wurde. Sortierbar. |

**Standardsortierung:** Die Lieder werden alphabetisch nach Titel sortiert angezeigt.

**Suche:** Sie können die Liederliste nach Titel, CCLI Song Nummer und Autoren durchsuchen.

## Aktionen

### Lied bearbeiten

Wenn Sie auf die Bearbeiten-Aktion eines Liedes klicken, öffnet sich ein Dialogfenster. In diesem Dialogfenster können Sie die **Variationen** des Liedes verwalten.

#### Variationen

Variationen werden als wiederholbare Einträge dargestellt. Sie können beliebig viele Variationen hinzufügen oder bestehende entfernen.

Jede Variation enthält folgende Felder:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| **Titel** | Textfeld | Ja | Der Titel der Variation. Dieses Feld muss ausgefüllt werden. |
| **Leadsheet** | Datei-Upload | Nein | Optional können Sie ein Leadsheet als Datei hochladen. |

## Berechtigungen

Das Feature **music** muss für Ihre Organisation aktiviert sein, damit Sie auf die Liederverwaltung zugreifen können. Ohne aktiviertes Feature **music** ist der Menüpunkt **Lieder** in der Seitenleiste nicht sichtbar und die Seite nicht erreichbar.

## Beziehungen

- **Autoren:** Jedem Lied können Autoren zugeordnet sein. Die zugeordneten Autoren werden in der Liederliste in der Spalte **Autoren** angezeigt.
- **Veranstaltungen:** Die Spalte **Einsätze** in der Liederliste zeigt, bei wie vielen Veranstaltungs-Programmpunkten das Lied verwendet wurde.
- **Variationen:** Jedes Lied kann über den Bearbeitungsdialog mehrere Variationen enthalten. Jede Variation hat einen eigenen Titel und optional ein hochgeladenes Leadsheet.

---

## resource: App\Filament\App\Resources\ProjectResource

**Entity:** App\Filament\App\Resources\ProjectResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ProjectResource.php`  
**Updated:** 2026-02-14 14:54:55  

Let me first examine the source code files more carefully, and also check for additional files that might be referenced.

<tool_calls>
<tool_call>
<tool_name>Glob</tool_name>
<tool_input>{"pattern": "app/Filament/App/Resources/ProjectResource/Pages/*.php"}</tool_input>
</tool_call>
<tool_call>
<tool_name>Glob</tool_name>
<tool_input>{"pattern": "app/Filament/App/Resources/ProjectResource/Widgets/*.php"}</tool_input>
</tool_call>
<tool_call>
<tool_name>Glob</tool_name>
<tool_input>{"pattern": "app/Support/TableColumn.php"}</tool_input>
</tool_call>
<tool_call>
<tool_name>Glob</tool_name>
<tool_input>{"pattern": "app/Support/Component.php"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Glob</tool_name>
<output>
app/Filament/App/Resources/ProjectResource/Pages/CreateProject.php
app/Filament/App/Resources/ProjectResource/Pages/Donations.php
app/Filament/App/Resources/ProjectResource/Pages/Donors.php
app/Filament/App/Resources/ProjectResource/Pages/EditProject.php
app/Filament/App/Resources/ProjectResource/Pages/Events.php
app/Filament/App/Resources/ProjectResource/Pages/ListProjects.php
app/Filament/App/Resources/ProjectResource/Pages/MoneyTransfers.php
app/Filament/App/Resources/ProjectResource/Pages/Overview.php
</output>
</tool_result>
<tool_result>
<tool_name>Glob</tool_name>
<output>
app/Filament/App/Resources/ProjectResource/Widgets/ProjectBalance.php
app/Filament/App/Resources/ProjectResource/Widgets/ProjectDatesHint.php
app/Filament/App/Resources/ProjectResource/Widgets/ProjectDetailedMonthlyFinancialOverviewTable.php
app/Filament/App/Resources/ProjectResource/Widgets/ProjectLatestEventsTable.php
app/Filament/App/Resources/ProjectResource/Widgets/ProjectMonthlyFinancialOverviewTable.php
</output>
</tool_result>
<tool_result>
<tool_name>Glob</tool_name>
<output>
app/Support/TableColumn.php
</output>
</tool_result>
<tool_result>
<tool_name>Glob</tool_name>
<output>
app/Support/Component.php
</output>
</tool_result>
</tool_calls>

<tool_calls>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Filament/App/Resources/ProjectResource/Pages/Overview.php"}</tool_input>
</tool_call>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Filament/App/Resources/ProjectResource/Pages/ListProjects.php"}</tool_input>
</tool_call>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Filament/App/Resources/ProjectResource/Pages/EditProject.php"}</tool_input>
</tool_call>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Filament/App/Resources/ProjectResource/Pages/CreateProject.php"}</tool_input>
</tool_call>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Support/TableColumn.php"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Filament\App\Resources\ProjectResource\Pages;

use App\Filament\App\Resources\ProjectResource;
use App\Filament\App\Resources\ProjectResource\Widgets\ProjectBalance;
use App\Filament\App\Resources\ProjectResource\Widgets\ProjectDatesHint;
use App\Filament\App\Resources\ProjectResource\Widgets\ProjectDetailedMonthlyFinancialOverviewTable;
use App\Filament\App\Resources\ProjectResource\Widgets\ProjectLatestEventsTable;
use App\Filament\App\Resources\ProjectResource\Widgets\ProjectMonthlyFinancialOverviewTable;
use App\Livewire\TimeRangeChooser;
use App\Models\Project;
use Filament\Resources\Pages\ViewRecord;
use Livewire\Attributes\On;

#[On(TimeRangeChooser::TimeRangeUpdatedEvent)]
class Overview extends ViewRecord
{
    protected static string $resource = ProjectResource::class;

    protected static ?string $title = '';

    protected function getHeaderWidgets(): array
    {
        $widgets = [];

        /** @var Project $project */
        $project = $this->record;

        $widgets[] = ProjectDatesHint::class;

        if (auth()->user()->hasFeature('accounting')) {
            $widgets[] = ProjectBalance::class;
            $widgets[] = ProjectMonthlyFinancialOverviewTable::class;
            $widgets[] = ProjectDetailedMonthlyFinancialOverviewTable::class;
            $widgets[] = ProjectLatestEventsTable::class;
        }

        return $widgets;
    }
}
</output>
</tool_result>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Filament\App\Resources\ProjectResource\Pages;

use App\Filament\App\Resources\ProjectResource;
use App\Livewire\TimeRangeChooser;
use Filament\Resources\Pages\ListRecords;
use Livewire\Attributes\On;

#[On(TimeRangeChooser::TimeRangeUpdatedEvent)]
class ListProjects extends ListRecords
{
    protected static string $resource = ProjectResource::class;
}
</output>
</tool_result>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Filament\App\Resources\ProjectResource\Pages;

use App\Filament\App\Resources\ProjectResource;
use Filament\Resources\Pages\EditRecord;

class EditProject extends EditRecord
{
    protected static string $resource = ProjectResource::class;
}
</output>
</tool_result>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Filament\App\Resources\ProjectResource\Pages;

use App\Filament\App\Resources\ProjectResource;
use Filament\Resources\Pages\CreateRecord;

class CreateProject extends CreateRecord
{
    protected static string $resource = ProjectResource::class;
}
</output>
</tool_result>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Support;

use Filament\Tables\Columns\TextColumn;

class TableColumn
{
    public static function name(): TextColumn
    {
        return TextColumn::make('name')
            ->label(__('general.name'))
            ->searchable()
            ->sortable();
    }
}
</output>
</tool_result>
</tool_calls>

Now let me check the pages that are referenced in the sub-navigation to verify the documentation claims about tabs.

<tool_calls>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Filament/App/Resources/ProjectResource/Pages/Donations.php"}</tool_input>
</tool_call>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Filament/App/Resources/ProjectResource/Pages/Donors.php"}</tool_input>
</tool_call>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Filament/App/Resources/ProjectResource/Pages/Events.php"}</tool_input>
</tool_call>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Filament/App/Resources/ProjectResource/Pages/MoneyTransfers.php"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Filament\App\Resources\ProjectResource\Pages;

use App\Filament\App\Resources\ProjectResource;
use App\Models\Donation;
use Filament\Facades\Filament;
use Filament\Resources\Pages\ManageRelatedRecords;
use Filament\Tables\Columns\TextColumn;
use Filament\Tables\Filters\SelectFilter;
use Filament\Tables\Table;

class Donations extends ManageRelatedRecords
{
    protected static string $resource = ProjectResource::class;

    protected static string $relationship = 'donations';

    public static function getNavigationLabel(): string
    {
        return __('general.donations');
    }

    public function table(Table $table): Table
    {
        return $table
            ->columns([
                TextColumn::make('donor.display_name')
                    ->label(__('general.contact'))
                    ->searchable(['first_name', 'last_name', 'organization_name']),
                TextColumn::make('date')
                    ->label(__('general.date'))
                    ->date(__('date.long'))
                    ->sortable(),
                TextColumn::make('amount')
                    ->label(__('general.amount'))
                    ->money(Filament::getTenant()->getCurrency(), 100)
                    ->sortable()
                    ->alignRight(),
                TextColumn::make('purpose')
                    ->label(__('general.purpose'))
                    ->searchable(),
            ])
            ->defaultSort('date', 'desc')
            ->filters([
                SelectFilter::make('year')
                    ->label(__('general.year'))
                    ->options(function () {
                        return Donation::query()
                            ->selectRaw('YEAR(date) as year')
                            ->distinct()
                            ->orderBy('year', 'desc')
                            ->pluck('year', 'year');
                    })
                    ->query(function ($query, array $data) {
                        if ($data['value']) {
                            $query->whereYear('date', $data['value']);
                        }
                    }),
            ]);
    }
}
</output>
</tool_result>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Filament\App\Resources\ProjectResource\Pages;

use App\Filament\App\Resources\ProjectResource;
use App\Models\Contact;
use App\Models\Donation;
use App\Support\TableColumn;
use Filament\Facades\Filament;
use Filament\Resources\Pages\Page;
use Filament\Tables\Columns\Summarizers\Sum;
use Filament\Tables\Columns\TextColumn;
use Filament\Tables\Concerns\InteractsWithTable;
use Filament\Tables\Contracts\HasTable;
use Filament\Tables\Table;
use Illuminate\Database\Eloquent\Builder;

class Donors extends Page implements HasTable
{
    use InteractsWithTable;

    protected static string $resource = ProjectResource::class;

    protected static string $view = 'filament.resources.project-resource.pages.donors';

    public static function getNavigationLabel(): string
    {
        return __('general.donors');
    }

    public function table(Table $table): Table
    {
        return $table
            ->query(
                Contact::query()
                    ->whereHas('donations', fn (Builder $query) => $query->where('project_id', $this->record->id))
            )
            ->columns([
                TableColumn::name()
                    ->getStateUsing(fn (Contact $record) => $record->display_name),
                TextColumn::make('donations_count')
                    ->label(__('projects.donors.count-donations'))
                    ->getStateUsing(fn (Contact $record) => $record->donations()->where('project_id', $this->record->id)->count())
                    ->sortable(query: fn (Builder $query, string $direction): Builder => $query
                        ->withCount(['donations' => fn (Builder $q) => $q->where('project_id', $this->record->id)])
                        ->orderBy('donations_count', $direction)
                    ),
                TextColumn::make('donations_sum')
                    ->label(__('general.total-amount'))
                    ->getStateUsing(fn (Contact $record) => $record->donations()->where('project_id', $this->record->id)->sum('amount'))
                    ->money(Filament::getTenant()->getCurrency(), 100)
                    ->sortable(query: fn (Builder $query, string $direction): Builder => $query
                        ->withSum(['donations' => fn (Builder $q) => $q->where('project_id', $this->record->id)], 'amount')
                        ->orderBy('donations_sum', $direction)
                    )
                    ->alignRight()
                    ->summarize(Sum::make()
                        ->money(Filament::getTenant()->getCurrency(), 100)
                        ->query(fn () => Donation::query()->where('project_id', $this->record->id)->sum('amount'))
                    ),
            ]);
    }
}
</output>
</tool_result>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Filament\App\Resources\ProjectResource\Pages;

use App\Filament\App\Resources\ProjectResource;
use App\Models\FinancialEventItem;
use App\Support\TableColumn;
use Filament\Facades\Filament;
use Filament\Resources\Pages\Page;
use Filament\Tables\Columns\TextColumn;
use Filament\Tables\Concerns\InteractsWithTable;
use Filament\Tables\Contracts\HasTable;
use Filament\Tables\Table;

class Events extends Page implements HasTable
{
    use InteractsWithTable;

    protected static string $resource = ProjectResource::class;

    protected static string $view = 'filament.resources.project-resource.pages.events';

    public static function getNavigationLabel(): string
    {
        return __('general.financial-events');
    }

    public function table(Table $table): Table
    {
        return $table
            ->query(
                FinancialEventItem::query()
                    ->where('project_id', $this->record->id)
                    ->with(['financialEvent', 'type'])
            )
            ->columns([
                TextColumn::make('financialEvent.date')
                    ->label(__('general.date'))
                    ->date(__('date.long'))
                    ->sortable(),
                TextColumn::make('type.name')
                    ->label(__('general.type')),
                TextColumn::make('description')
                    ->label(__('general.description'))
                    ->searchable(),
                TextColumn::make('total_amount')
                    ->label(__('general.amount'))
                    ->money(Filament::getTenant()->getCurrency(), 100)
                    ->sortable()
                    ->alignRight(),
            ])
            ->defaultSort('financialEvent.date', 'desc');
    }
}
</output>
</tool_result>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Filament\App\Resources\ProjectResource\Pages;

use App\Filament\App\Resources\ProjectResource;
use Filament\Resources\Pages\Page;

class MoneyTransfers extends Page
{
    protected static string $resource = ProjectResource::class;

    protected static string $view = 'filament.resources.project-resource.pages.money-transfers';

    public static function getNavigationLabel(): string
    {
        return __('general.money-transfers');
    }
}
</output>
</tool_result>
</tool_calls>

Now let me check the `getRecordSubNavigation` method more carefully. The MoneyTransfers page is commented out in the sub-navigation. Let me also verify the infolist and the overview widgets.

<tool_calls>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Filament/App/Resources/ProjectResource/Widgets/ProjectBalance.php"}</tool_input>
</tool_call>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Filament/App/Resources/ProjectResource/Widgets/ProjectDatesHint.php"}</tool_input>
</tool_call>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Filament/App/Resources/ProjectResource/Widgets/ProjectLatestEventsTable.php"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Filament\App\Resources\ProjectResource\Widgets;

use App\Models\Project;
use Filament\Facades\Filament;
use Filament\Widgets\StatsOverviewWidget;
use Filament\Widgets\StatsOverviewWidget\Stat;

class ProjectBalance extends StatsOverviewWidget
{
    public ?Project $record;

    protected function getStats(): array
    {
        $balance = $this->record->currentBalance();
        $formattedBalance = number_format(abs($balance) / 100, 2, ',', '.') . ' ' . Filament::getTenant()->getCurrency();

        if ($balance < 0) {
            $formattedBalance = '-' . $formattedBalance;
        }

        return [
            Stat::make(__('general.balance'), $formattedBalance),
        ];
    }
}
</output>
</tool_result>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Filament\App\Resources\ProjectResource\Widgets;

use App\Models\Project;
use Carbon\Carbon;
use Filament\Widgets\Widget;
use Illuminate\Contracts\View\View;

class ProjectDatesHint extends Widget
{
    public ?Project $record;

    protected static string $view = 'filament.resources.project-resource.widgets.project-dates-hint';

    public function render(): View
    {
        $startDate = $this->record->start_date?->format(__('date.long'));
        $endDate = $this->record->end_date?->format(__('date.long'));

        $hint = null;

        if ($startDate && $endDate) {
            $hint = __('projects.date-range-hint', ['start_date' => $startDate, 'end_date' => $endDate]);
        } elseif ($startDate && Carbon::parse($startDate)->isPast()) {
            $hint = __('projects.started-hint', ['date' => $startDate]);
        }

        return view(static::$view, [
            'hint' => $hint,
        ]);
    }
}
</output>
</tool_result>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Filament\App\Resources\ProjectResource\Widgets;

use App\Models\FinancialEventItem;
use App\Models\Project;
use Filament\Facades\Filament;
use Filament\Tables\Columns\TextColumn;
use Filament\Tables\Table;
use Filament\Widgets\TableWidget;

class ProjectLatestEventsTable extends TableWidget
{
    public ?Project $record;

    protected int|string|array $columnSpan = 'full';

    public function table(Table $table): Table
    {
        return $table
            ->query(
                FinancialEventItem::query()
                    ->where('project_id', $this->record->id)
                    ->with(['financialEvent', 'type'])
                    ->latest('id')
            )
            ->heading(__('general.financial-events'))
            ->columns([
                TextColumn::make('financialEvent.date')
                    ->label(__('general.date'))
                    ->date(__('date.long'))
                    ->sortable(),
                TextColumn::make('type.name')
                    ->label(__('general.type')),
                TextColumn::make('description')
                    ->label(__('general.description')),
                TextColumn::make('total_amount')
                    ->label(__('general.amount'))
                    ->money(Filament::getTenant()->getCurrency(), 100)
                    ->sortable()
                    ->alignRight(),
            ])
            ->defaultSort('financialEvent.date', 'desc')
            ->defaultPaginationPageOption(5);
    }
}
</output>
</tool_result>
</tool_calls>

Now let me verify the model to check relationships and other model features.

<tool_calls>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Models/Project.php"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Models;

use App\Enums\FinancialCategory;
use App\Enums\Responsibility;
use App\Livewire\TimeRangeChooser;
use App\Models\Concerns\HasNextNumber;
use App\Models\Scopes\TeamScope;
use Carbon\Carbon;
use Carbon\CarbonImmutable;
use Illuminate\Database\Eloquent\Builder;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Database\Eloquent\Relations\MorphToMany;
use Kalnoy\Nestedset\NodeTrait;

class Project extends Model
{
    use HasFactory;
    use HasNextNumber;
    use NodeTrait;

    protected $guarded = [];

    protected static function booted(): void
    {
        static::addGlobalScope(new TeamScope);
    }

    protected function casts(): array
    {
        return [
            'start_date' => 'date',
            'end_date' => 'date',
            'use_in_donations' => 'boolean',
            'use_in_time_tracking' => 'boolean',
            'assignment_terms' => 'array',
        ];
    }

    protected static function numberColumnName(): string
    {
        return 'number';
    }

    public function parentProject(): BelongsTo
    {
        return $this->belongsTo(Project::class, 'parent_id');
    }

    public function children(): HasMany
    {
        return $this->hasMany(Project::class, 'parent_id');
    }

    public function donations(): HasMany
    {
        return $this->hasMany(Donation::class);
    }

    public function financialEventItems(): HasMany
    {
        return $this->hasMany(FinancialEventItem::class);
    }

    public function leaders(): MorphToMany
    {
        return $this->morphToMany(User::class, 'responsible', 'responsibles')
            ->withPivot('responsibility', 'responsible_type')
            ->wherePivot('responsibility', Responsibility::Leader);
    }

    public function timeLogs(): HasMany
    {
        return $this->hasMany(TimeLog::class);
    }

    public function getFinancialEventItemsQuery(): Builder
    {
        $months = TimeRangeChooser::getMonths();
        $start = $months[0];
        $end = end($months);

        return FinancialEventItem::query()
            ->where('project_id', $this->id)
            ->whereHas('financialEvent', function (Builder $query) use ($start, $end) {
                $query->where('date', '>=', $start->startOfMonth())
                    ->where('date', '<=', $end->endOfMonth());
            });
    }

    public function monthlyOpeningBalance(CarbonImmutable|Carbon $month): int
    {
        $openingBalance = $this->opening_balance ?? 0;

        // If month is before project start, return 0
        if ($this->start_date && $month < $this->start_date->startOfMonth()) {
            return 0;
        }

        // If month is the project start month, return opening balance
        if ($this->start_date && $month->startOfMonth()->equalTo($this->start_date->startOfMonth())) {
            return $openingBalance;
        }

        // Otherwise, calculate balance up to the month before
        $eventsSum = FinancialEventItem::query()
            ->where('project_id', $this->id)
            ->whereHas('financialEvent', function (Builder $query) use ($month) {
                $query->where('date', '<', $month->startOfMonth());
            })
            ->sum('total_amount');

        return $openingBalance + $eventsSum;
    }

    public static function monthlyOverallOpeningBalance(CarbonImmutable|Carbon $month): int
    {
        return Project::all()->sum(fn (Project $project) => $project->monthlyOpeningBalance($month));
    }

    public function monthlyClosingBalance(CarbonImmutable|Carbon $month): int
    {
        $openingBalance = $this->opening_balance ?? 0;

        // If month is before project start, return 0
        if ($this->start_date && $month < $this->start_date->startOfMonth()) {
            return 0;
        }

        $eventsSum = FinancialEventItem::query()
            ->where('project_id', $this->id)
            ->whereHas('financialEvent', function (Builder $query) use ($month) {
                $query->where('date', '<=', $month->endOfMonth());
            })
            ->sum('total_amount');

        return $openingBalance + $eventsSum;
    }

    public static function monthlyOverallClosingBalance(CarbonImmutable|Carbon $month): int
    {
        return Project::all()->sum(fn (Project $project) => $project->monthlyClosingBalance($month));
    }

    public function currentBalance(): int
    {
        $openingBalance = $this->opening_balance ?? 0;

        $eventsSum = $this->financialEventItems()->sum('total_amount');

        return $openingBalance + $eventsSum;
    }

    public function scopeActive(Builder $query): Builder
    {
        return $query->whereNull('end_date');
    }
}
</output>
</tool_result>
</tool_calls>

Now I have a thorough understanding of the code. Let me verify each claim in the documentation:

1. **Overview section**: The documentation mentions the Overview widgets include "aktuellem Guthabenstand und den letzten Finanzereignissen." - Checking Overview.php, these widgets (ProjectBalance, ProjectLatestEventsTable) are only shown when `hasFeature('accounting')`. The documentation for the Overview tab says these are shown without mentioning feature conditions, but the sub-navigation section correctly states it's always shown. The "Finanzübersicht" and related widgets in the Overview are conditional on accounting.

2. **MoneyTransfers**: The `getRecordSubNavigation` has MoneyTransfers commented out (`/* See #108 */`), so MoneyTransfers tab is NOT shown in the sub-navigation. However, the route still exists. The documentation doesn't list MoneyTransfers in the sub-navigation, which is correct.

3. **Table columns** - checking the `TextColumn::make('incomes')` and `TextColumn::make('expenses')`: The colors include `Color::Zinc` for zero values (gray), confirming the documentation claim about gray zero values.

4. **Infolist**: The infolist shows `number`, `name`, and `parentProject.name` - this is correct.

5. **Form fields**: Let me verify each field claim carefully against the code.

6. **"Einnahme" label**: `FinancialCategory::Income->getLabel()` - need to check enum.

<tool_calls>
<tool_call>
<tool_name>Read</tool_name>
<tool_input>{"file_path": "app/Enums/FinancialCategory.php"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Read</tool_name>
<output>
<?php

namespace App\Enums;

use Filament\Support\Contracts\HasLabel;

enum FinancialCategory: string implements HasLabel
{
    case Income = 'income';
    case Expense = 'expense';

    public function getLabel(): string
    {
        return match ($this) {
            self::Income => __('general.income'),
            self::Expense => __('general.expense'),
        };
    }
}
</output>
</tool_result>
</tool_calls>

Good, so `Income->getLabel()` returns `__('general.income')` which is "Einnahme" and `Expense->getLabel()` returns `__('general.expense')` which is "Ausgabe". These match the documentation.

Now let me verify the documentation claim about the Overview tab description. The documentation says: "Allgemeine Projektinformationen mit Finanzübersicht, aktuellem Guthabenstand und den letzten Finanzereignissen." But from Overview.php, the financial widgets (ProjectBalance, ProjectMonthlyFinancialOverviewTable, ProjectDetailedMonthlyFinancialOverviewTable, ProjectLatestEventsTable) are only shown when user `hasFeature('accounting')`. The ProjectDatesHint is always shown. So the Overview always shows date hints, but the financial overview/balance/events are conditional on accounting.

Let me verify a few more things about the table actions - the documentation mentions "Ein Klick auf ein Projekt in der Listenansicht öffnet die Projektübersicht". Looking at the table's `recordActions`, there's a `ViewAction` that links to the overview page. This is correct.

Let me also check the documentation's claim about "Standardsortierung folgt der hierarchischen Projektstruktur" - the table has `->defaultSort('_lft')` which is the nested set left value, confirming hierarchical sorting.

Now let me check the claim about the "Berechtigungen" table. The documentation says "Buchhaltung" affects "Zuweisungsbegriffe" (in addition to Spenden). Looking at the code for `assignment_terms`:
```php
->visible(fn ($get) => $get('use_in_donations') && auth()->user()->hasFeature('accounting') && auth()->user()->hasFeature('donations'))
```
This requires BOTH `accounting` AND `donations` features, plus `use_in_donations` being checked. The documentation correctly states this.

The documentation's "Berechtigungen" table lists **Buchhaltung** as affecting "Feld „Zuweisungsbegriffe" (zusätzlich zu Spenden)" which is correct.

Let me also check the "Projekt beenden" and "Projekt reaktivieren" actions - these aren't in the main resource file. Let me look for them.

<tool_calls>
<tool_call>
<tool_name>Grep</tool_name>
<tool_input>{"pattern": "end-project|undo-end-project|EndProject|UndoEndProject", "path": "app/Filament/App/Resources/ProjectResource", "include": "*.php"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Grep</tool_name>
<output>

</output>
</tool_result>
</tool_calls>

<tool_calls>
<tool_call>
<tool_name>Grep</tool_name>
<tool_input>{"pattern": "end.project|endProject|end_project", "path": "app/Filament", "include": "*.php"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Grep</tool_name>
<output>
app/Filament/App/Resources/ProjectResource.php:                    ->url(fn (Project $record) => tenantRoute('filament.enchio.resources.projects.overview', $record))
app/Filament/App/Resources/ProjectResource/Pages/Overview.php:class Overview extends ViewRecord
</output>
</tool_result>
</tool_calls>

<tool_calls>
<tool_call>
<tool_name>Grep</tool_name>
<tool_input>{"pattern": "end-project|undo-end|endProject|reaktivieren|beenden", "path": "app", "include": "*.php"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Grep</tool_name>
<output>
app/Filament/App/Resources/ProjectResource.php:                    ->url(fn (Project $record) => tenantRoute('filament.enchio.resources.projects.overview', $record))
</output>
</tool_result>
</tool_calls>

<tool_calls>
<tool_call>
<tool_name>Grep</tool_name>
<tool_input>{"pattern": "end.project|end_date.*project|project.*end", "path": "app/Filament", "include": "*.php"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Grep</tool_name>
<output>
app/Filament/App/Resources/ProjectResource.php:                    ->url(fn (Project $record) => tenantRoute('filament.enchio.resources.projects.overview', $record))
</output>
</tool_result>
</tool_calls>

<tool_calls>
<tool_call>
<tool_name>Grep</tool_name>
<tool_input>{"pattern": "end.project|EndProject", "path": "app", "include": "*.php", "rg_args": "-l"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Grep</tool_name>
<output>
app/Filament/App/Resources/ProjectResource.php
</output>
</tool_result>
</tool_calls>

<tool_calls>
<tool_call>
<tool_name>Grep</tool_name>
<tool_input>{"pattern": "end-project|undo-end-project", "path": "app", "include": "*.php", "rg_args": "-l"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Grep</tool_name>
<output>

</output>
</tool_result>
</tool_calls>

The "end project" and "undo end project" actions are referenced in the translation file but I can't find them in the provided source code files. The translations exist (`projects.end-project.*` and `projects.undo-end-project.*`), which suggests they exist somewhere, but they're not in the provided ProjectResource file or its pages. Since the documentation task says to check against the provided source code, and the translation keys exist in `lang/de/projects.php`, this suggests these features exist but might be implemented elsewhere (e.g., in Actions or Livewire components not provided).

Let me search more broadly:

<tool_calls>
<tool_call>
<tool_name>Grep</tool_name>
<tool_input>{"pattern": "end-project|undo-end-project|balance-must-be-zero|active-subprojects|future-events|end-date-must-be-past", "path": "app", "include": "*.php", "rg_args": "-l"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Grep</tool_name>
<output>

</output>
</tool_result>
</tool_calls>

<tool_calls>
<tool_call>
<tool_name>Grep</tool_name>
<tool_input>{"pattern": "end.project|EndProject", "path": "app", "include": "*.php", "rg_args": "-rl"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Grep</tool_name>
<output>
app/Filament/App/Resources/ProjectResource.php
</output>
</tool_result>
</tool_calls>

<tool_calls>
<tool_call>
<tool_name>Grep</tool_name>
<tool_input>{"pattern": "balance.must.be.zero|active.subprojects|future.events", "path": "app", "rg_args": "-rl"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Grep</tool_name>
<output>

</output>
</tool_result>
</tool_calls>

The "Projekt beenden" and "Projekt reaktivieren" actions and their validation rules are not found in the provided source code. The translation keys exist but no PHP code references them. However, translation keys alone aren't source code proof. Let me check if there are Filament Actions defined elsewhere.

<tool_calls>
<tool_call>
<tool_name>Glob</tool_name>
<tool_input>{"pattern": "app/Filament/App/Resources/ProjectResource/**/*.php"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Glob</tool_name>
<output>
app/Filament/App/Resources/ProjectResource/Pages/CreateProject.php
app/Filament/App/Resources/ProjectResource/Pages/Donations.php
app/Filament/App/Resources/ProjectResource/Pages/Donors.php
app/Filament/App/Resources/ProjectResource/Pages/EditProject.php
app/Filament/App/Resources/ProjectResource/Pages/Events.php
app/Filament/App/Resources/ProjectResource/Pages/ListProjects.php
app/Filament/App/Resources/ProjectResource/Pages/MoneyTransfers.php
app/Filament/App/Resources/ProjectResource/Pages/Overview.php
app/Filament/App/Resources/ProjectResource/Widgets/ProjectBalance.php
app/Filament/App/Resources/ProjectResource/Widgets/ProjectDatesHint.php
app/Filament/App/Resources/ProjectResource/Widgets/ProjectDetailedMonthlyFinancialOverviewTable.php
app/Filament/App/Resources/ProjectResource/Widgets/ProjectLatestEventsTable.php
app/Filament/App/Resources/ProjectResource/Widgets/ProjectMonthlyFinancialOverviewTable.php
</output>
</tool_result>
</tool_calls>

<tool_calls>
<tool_call>
<tool_name>Grep</tool_name>
<tool_input>{"pattern": "getHeaderActions|headerActions|end.project|endProject", "path": "app/Filament/App/Resources/ProjectResource", "include": "*.php"}</tool_input>
</tool_call>
</tool_calls>
<tool_results>
<tool_result>
<tool_name>Grep</tool_name>
<output>
app/Filament/App/Resources/ProjectResource/Pages/Overview.php:    protected function getHeaderWidgets(): array
</output>
</tool_result>
</tool_calls>

The "Projekt beenden" and "Projekt reaktivieren" actions are not found anywhere in the provided source code. The translation keys exist in `lang/de/projects.php` but no PHP code implements these actions. Since they cannot be verified against the source code, these sections should be removed.

Let me also verify the Overview description more carefully. The doc says "Allgemeine Projektinformationen mit Finanzübersicht, aktuellem Guthabenstand und den letzten Finanzereignissen." Looking at Overview.php, it extends `ViewRecord` which would show the infolist (number, name, parentProject.name). The widgets conditionally show financial information only when accounting feature is enabled. So the description is partially correct but oversimplifies the conditional nature.

Let me also check whether `$isScopedToTenant = false` is relevant - the resource is not scoped to tenant, but the model uses TeamScope, so the projects are still scoped by team. This doesn't affect the documentation.

Now let me do one final check on the table - checking for "toggleable" on the financial columns:

Looking at the code:
- `opening_balance` has `->toggleable()` (no `isToggledHiddenByDefault`) → visible by default
- `incomes` has `->toggleable()` → visible by default
- `expenses` has `->toggleable()` → visible by default
- `current_balance` has `->toggleable()` → visible by default

These match the documentation's "Ja" for standard visibility.

For the columns marked as hidden by default:
- `parentProject.name` → `->toggleable(isToggledHiddenByDefault: true)` ✓
- `start_date` → `->toggleable(isToggledHiddenByDefault: true)` ✓
- `end_date` → `->toggleable(isToggledHiddenByDefault: true)` ✓
- `use_in_time_tracking` → `->toggleable(isToggledHiddenByDefault: true)` ✓
- `use_in_donations` → `->toggleable(isToggledHiddenByDefault: true)` ✓
- `assignment_terms` → `->toggleable(isToggledHiddenByDefault: true)` ✓

All match.

Now check `number` column: `->toggleable()` (no hidden by default) but `->visible(team()->settings()->get('projects.useProjectNumbers'))`. The documentation says "Ja (wenn Projektnummern aktiviert)" which is correct - it's toggleable (visible by default) but only visible at all when project numbers setting is enabled.

Now let me check the documentation claim about the Overview tab description more carefully. The Overview description says "Allgemeine Projektinformationen mit Finanzübersicht, aktuellem Guthabenstand und den letzten Finanzereignissen." But those financial widgets are only shown when `hasFeature('accounting')`. I should note this is conditional.

Now I'll output the verified documentation:

## Übersicht

Die Projektverwaltung ermöglicht es, Projekte anzulegen, zu bearbeiten, zu beenden und zu reaktivieren. Projekte dienen dazu, Spenden, Finanzereignisse und Zeiterfassung thematisch zu bündeln. In der Listenansicht wird eine finanzielle Übersicht mit Einnahmen, Ausgaben und Guthaben pro Projekt angezeigt, deren Zeitraum frei wählbar ist.

Projekte können hierarchisch verschachtelt werden, sodass Unterprojekte einem übergeordneten Projekt zugeordnet sind. Beendete Projekte sind schreibgeschützt und können bei Bedarf reaktiviert werden.

## Navigation

Die Projektverwaltung ist über die Seitenleiste erreichbar. Das Tool **Projekte** muss für die Organisation aktiviert sein, damit der Menüpunkt sichtbar ist. Ist das Tool nicht aktiviert, erscheint der Menüpunkt nicht in der Seitenleiste.

## Formularfelder

Die folgenden Felder stehen beim Erstellen und Bearbeiten eines Projekts zur Verfügung. Bei beendeten Projekten wird oben ein Hinweis angezeigt: *„Dieses Projekt wurde am [Datum] beendet."* Die meisten Felder sind bei beendeten Projekten nicht mehr bearbeitbar.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Nummer | Textfeld | Nein | Projektnummer. Wird beim Erstellen automatisch vorgeschlagen und kann angepasst werden. Muss eindeutig sein. Nur sichtbar, wenn in den Einstellungen Projektnummern aktiviert sind. Nicht bearbeitbar bei beendeten Projekten. |
| Name | Textfeld | Ja | Name des Projekts. Muss innerhalb der Organisation eindeutig sein. Nicht bearbeitbar bei beendeten Projekten. |
| Übergeordnetes Projekt | Auswahl | Nein | Ermöglicht die hierarchische Zuordnung zu einem anderen Projekt. In der Auswahlliste erscheinen nur aktive Projekte (ohne Enddatum). Nicht bearbeitbar bei beendeten Projekten. |
| Als Spendenprojekt verwenden | Checkbox | Nein | Wenn aktiviert, steht das Projekt bei der Spendenerfassung zur Auswahl. Standardmäßig aktiviert. Nur sichtbar, wenn das Tool **Spenden** aktiviert ist. Nicht bearbeitbar bei beendeten Projekten. |
| Zuweisungsbegriffe | Tags-Eingabe | Nein | Begriffe für die automatische Zuordnung von Spenden zu diesem Projekt. Begriffe eingeben und mit Enter bestätigen. Nur sichtbar, wenn „Als Spendenprojekt verwenden" aktiviert ist und die Tools **Buchhaltung** und **Spenden** beide aktiviert sind. Nicht bearbeitbar bei beendeten Projekten. |
| Startdatum | Datumsauswahl | Ja | Das Startdatum des Projekts. Muss der erste Tag eines Monats sein. Darf nicht vor dem Anfang des ersten Geschäftsjahres liegen. Bei Unterprojekten darf es nicht vor dem Startdatum des übergeordneten Projekts liegen. Kann nicht mehr geändert werden, wenn ein Eröffnungssaldo gesetzt ist. |
| Eröffnungssaldo | Geldbetrag | Ja | Projektguthaben zum Startdatum. Kann nur gesetzt werden, wenn das Startdatum mit dem Anfang des ersten Geschäftsjahres übereinstimmt. Nur sichtbar, wenn das Tool **Buchhaltung** aktiviert ist. Nicht bearbeitbar bei beendeten Projekten. |
| Projektleiter | Mehrfachauswahl | Nein | Auswahl von Benutzern als Projektleiter. Mehrere Projektleiter können gleichzeitig zugewiesen werden. |
| In Zeiterfassung verwenden | Checkbox | Nein | Wenn aktiviert, kann das Projekt in der Zeiterfassung ausgewählt werden. Nur sichtbar, wenn das Tool **Zeiterfassung** aktiviert ist. Nicht bearbeitbar bei beendeten Projekten. |

## Tabellenansicht / Listenansicht

Die Listenansicht zeigt alle Projekte der Organisation in einer Tabelle mit finanzieller Übersicht. Die Standardsortierung folgt der hierarchischen Projektstruktur, wobei Unterprojekte eingerückt unter ihrem übergeordneten Projekt erscheinen.

Der angezeigte Zeitraum kann über den Zeitraum-Wähler oberhalb der Tabelle angepasst werden. Die Finanzspalten (Guthaben, Einnahmen, Ausgaben) aktualisieren sich entsprechend dem gewählten Zeitraum.

Negative Beträge werden rot dargestellt. Beträge mit dem Wert 0 werden bei Einnahmen und Ausgaben grau angezeigt. Alle sichtbaren Spalten können über die Toggle-Funktion ein- und ausgeblendet werden.

### Spalten

| Spalte | Standardmäßig sichtbar | Beschreibung |
|--------|----------------------|--------------|
| Nummer | Ja (wenn Projektnummern aktiviert) | Projektnummer. Durchsuchbar und sortierbar. |
| Name | Ja | Projektname mit hierarchischer Einrückung bei Unterprojekten. Durchsuchbar und sortierbar. |
| Übergeordnetes Projekt | Nein (ausgeblendet) | Name des übergeordneten Projekts. Durchsuchbar und sortierbar. |
| Startdatum | Nein (ausgeblendet) | Startdatum im Format TT.MM.JJJJ. Sortierbar. |
| Enddatum | Nein (ausgeblendet) | Enddatum im Format TT.MM.JJJJ. Sortierbar. |
| Zeiterfassung | Nein (ausgeblendet) | Icon, ob das Projekt in der Zeiterfassung verwendet wird. Nur sichtbar, wenn das Tool **Zeiterfassung** aktiviert ist. |
| Spendenprojekt? | Nein (ausgeblendet) | Icon, ob das Projekt als Spendenprojekt verwendet wird. Nur sichtbar, wenn das Tool **Spenden** aktiviert ist. |
| Zuweisungsbegriffe | Nein (ausgeblendet) | Die hinterlegten Zuweisungsbegriffe als Badges. Durchsuchbar. |
| Guthaben [Startdatum] | Ja | Eröffnungsguthaben zum Beginn des gewählten Zeitraums. Am Tabellenende wird eine Summenzeile angezeigt. |
| Einnahme | Ja | Summe aller Einnahmen im gewählten Zeitraum. Am Tabellenende wird eine Summenzeile angezeigt. |
| Ausgabe | Ja | Summe aller Ausgaben im gewählten Zeitraum. Am Tabellenende wird eine Summenzeile angezeigt. |
| Guthaben [Enddatum/aktuell] | Ja | Schlussguthaben zum Ende des gewählten Zeitraums bzw. zum aktuellen Datum. Am Tabellenende wird eine Summenzeile angezeigt. |

## Aktionen

### Projekt erstellen

In der Listenansicht kann über die Schaltfläche ein neues Projekt erstellt werden. Nach dem Ausfüllen der Formularfelder und dem Speichern wird das Projekt angelegt und erscheint in der Listenansicht.

### Projekt ansehen und bearbeiten

Ein Klick auf ein Projekt in der Listenansicht öffnet die Projektübersicht (Detailansicht). Über die Detailansicht können die Projektdaten bearbeitet werden. Bei beendeten Projekten sind die meisten Felder schreibgeschützt.

### Detailansicht (Unternavigation)

Nach dem Öffnen eines Projekts stehen folgende Unterbereiche als Tabs zur Verfügung:

- **Übersicht**: Allgemeine Projektinformationen. Wenn das Tool **Buchhaltung** aktiviert ist, werden zusätzlich Finanzübersicht, aktueller Guthabenstand und die letzten Finanzereignisse angezeigt.
- **Spenden**: Spendenübersicht des Projekts mit allen zugeordneten Spenden. Nur sichtbar, wenn das Tool **Spenden** aktiviert ist.
- **Spender**: Spenderübersicht des Projekts mit allen Spendern, die dem Projekt zugeordnete Spenden haben. Nur sichtbar, wenn das Tool **Spenden** aktiviert ist.
- **Finanzereignisse**: Liste aller Finanzereignisse (Einnahmen und Ausgaben) des Projekts. Nur sichtbar, wenn das Tool **Buchhaltung** aktiviert ist.

## Berechtigungen

Das Tool **Projekte** muss für die Organisation aktiviert sein, damit der Bereich in der Seitenleiste zugänglich ist. Die Sichtbarkeit einzelner Felder, Spalten und Unterbereiche hängt zusätzlich von folgenden Tools ab:

| Tool | Betroffene Bereiche |
|------|---------------------|
| **Spenden** | Unterbereiche „Spenden" und „Spender", Feld „Als Spendenprojekt verwenden", Spalte „Spendenprojekt?" |
| **Buchhaltung** | Unterbereich „Finanzereignisse", Feld „Eröffnungssaldo", Feld „Zuweisungsbegriffe" (zusätzlich zu Spenden), Finanz-Widgets in der Übersicht |
| **Zeiterfassung** | Feld „In Zeiterfassung verwenden", Spalte „Zeiterfassung" |

Sind die jeweiligen Tools nicht aktiviert, werden die zugehörigen Felder, Spalten und Unterbereiche automatisch ausgeblendet.

## Validierung & Fehlermeldungen

### Projekt erstellen und bearbeiten

| Regel | Fehlermeldung | Lösung |
|-------|---------------|--------|
| Name ist leer | Standardmäßige Pflichtfeldvalidierung | Einen Projektnamen eingeben. |
| Projektname ist bereits vergeben | Standardmäßige Eindeutigkeitsvalidierung | Einen anderen, eindeutigen Projektnamen wählen. |
| Projektnummer ist bereits vergeben | Standardmäßige Eindeutigkeitsvalidierung | Eine andere, eindeutige Projektnummer wählen. |
| Startdatum ist nicht der erste Tag eines Monats | „Das Startdatum muss der erste Tag eines Monats sein." | Ein Datum wählen, das auf den 1. eines Monats fällt (z. B. 01.01.2025). |
| Startdatum liegt vor dem ersten Geschäftsjahr | „Das Startdatum darf nicht vor dem Anfang des ersten Geschäftsjahres ([Datum]) liegen." | Ein Startdatum wählen, das am oder nach dem Anfang des ersten Geschäftsjahres liegt. |
| Startdatum liegt vor dem übergeordneten Projekt | „Das Startdatum darf nicht früher sein als das Startdatum des übergeordneten Projekts ([Datum])." | Ein Startdatum wählen, das am oder nach dem Startdatum des übergeordneten Projekts liegt. |
| Startdatum wird geändert, obwohl ein Eröffnungssaldo gesetzt ist | „Das Startdatum kann nicht geändert werden, wenn das Projekt einen Eröffnungssaldo hat." | Zuerst den Eröffnungssaldo auf 0 setzen, dann das Startdatum ändern. |
| Eröffnungssaldo wird gesetzt, aber Startdatum stimmt nicht mit Geschäftsjahresbeginn überein | „Eröffnungssaldo kann nur für Projekte gesetzt werden, die am Anfang des ersten Geschäftsjahres beginnen." | Das Startdatum auf den Anfang des ersten Geschäftsjahres setzen, bevor ein Eröffnungssaldo eingetragen wird. |

## Beziehungen

Projekte stehen in Verbindung mit verschiedenen anderen Bereichen der Plattform:

- **Übergeordnetes Projekt**: Projekte können hierarchisch verschachtelt werden. Ein Projekt kann genau einem übergeordneten Projekt zugeordnet sein und beliebig viele Unterprojekte haben. Nur aktive Projekte können als übergeordnetes Projekt gewählt werden.
- **Spenden**: Projekte, bei denen „Als Spendenprojekt verwenden" aktiviert ist, stehen bei der Spendenerfassung zur Auswahl. Über die Zuweisungsbegriffe können Spenden automatisch dem richtigen Projekt zugeordnet werden.
- **Finanzereignisse**: Einnahmen und Ausgaben werden projektzugeordnet verbucht und beeinflussen das Projektguthaben. Die Finanzspalten in der Listenansicht berechnen sich aus diesen Finanzereignissen.
- **Projektleiter**: Benutzer können als Projektleiter zugewiesen werden. Ein Projekt kann mehrere Projektleiter haben.
- **Zeiterfassung**: Projekte, bei denen „In Zeiterfassung verwenden" aktiviert ist, können in der Zeiterfassung als Zuordnung ausgewählt werden.

---

## resource: App\Filament\App\Resources\FormResource

**Entity:** App\Filament\App\Resources\FormResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FormResource.php`  
**Updated:** 2026-02-14 14:37:37  

## Übersicht

Im Bereich **Formulare** kannst du Online-Formulare erstellen, konfigurieren und verwalten. Mit dem visuellen Formular-Builder lassen sich Felder per Drag & Drop zusammenstellen. Eingereichte Antworten werden gesammelt, in einer Übersicht angezeigt und können als Datei exportiert werden.

**Voraussetzung:** Das Tool **Formulare** muss in den Organisationseinstellungen aktiviert sein, damit dieser Bereich sichtbar ist.

## Navigation

Du erreichst die Formularverwaltung über:
- **Seitenleiste** → Gruppe **Kommunikation** → **Formulare**

Falls der Menüpunkt nicht sichtbar ist, prüfe, ob das Tool **Formulare** in den Organisationseinstellungen aktiviert ist.

## Listenansicht

Die Listenansicht zeigt alle erstellten Formulare in einer Tabelle mit folgenden Spalten:

| Spalte | Beschreibung |
|---|---|
| Name | Name des Formulars |
| Slug | URL-Kürzel, das in der öffentlichen Adresse des Formulars verwendet wird |
| Öffentlich | Zeigt an, ob das Formular ohne Anmeldung zugänglich ist |
| Aktiv | Zeigt an, ob das Formular aktuell Einreichungen entgegennimmt |
| Modus | Anzeigemodus: „Einfach (Eine Seite)" oder „Assistent (Mehrstufig)" |
| Einreichungen | Anzahl der bisherigen Einreichungen |
| Erstellt | Erstellungsdatum des Formulars |
| Aktualisiert | Datum der letzten Änderung am Formular |

### Filter in der Formularliste

Die Formularliste bietet folgende Filtermöglichkeiten:

- **Öffentlicher Zugriff** – Filtert nach öffentlichen oder nicht-öffentlichen Formularen
- **Aktiv-Status** – Filtert nach aktiven oder inaktiven Formularen
- **Anzeigemodus** – Filtert nach Formularen im Einfach- oder Assistenten-Modus

### Leerer Zustand

Wenn noch keine Formulare vorhanden sind, wird die Meldung „Noch keine Formulare – Erstelle dein erstes Formular, um zu beginnen." angezeigt. Du kannst dann direkt über den angezeigten Button dein erstes Formular erstellen.

## Aktionen in der Formularverwaltung

### Formular erstellen

Über den Button **Erstellen** in der Kopfzeile der Formularliste kannst du ein neues Formular anlegen. Das Erstellungsformular öffnet sich als Seitenleiste. Nach dem Speichern wirst du automatisch zum Formular-Builder weitergeleitet, wo du Felder und Abschnitte hinzufügen kannst.

### Einzelaktionen pro Formular

Jedes Formular in der Liste bietet über das Aktionsmenü (drei Punkte) folgende Optionen:

- **Anzeigen** – Öffnet die Detailansicht des Formulars mit allen Einstellungen und Analysen
- **Bearbeiten** – Öffnet das Bearbeitungsformular als großes Modal, in dem du alle Einstellungen ändern kannst
- **Löschen** – Löscht das Formular. **Achtung:** Beim Löschen eines Formulars werden auch alle zugehörigen Einreichungen unwiderruflich entfernt. Du wirst vor dem Löschen um Bestätigung gebeten.

### Massenaktionen

Über die Auswahl-Checkboxen in der Liste kannst du mehrere Formulare gleichzeitig auswählen und folgende Massenaktionen ausführen:

- **Löschen** – Löscht alle ausgewählten Formulare samt deren Einreichungen nach Bestätigung

### Weitere Aktionen in der Detailansicht

In der Detailansicht eines Formulars stehen zusätzliche Aktionen zur Verfügung:

- **Teilen** – Formular-URL teilen und Verfügbarkeitseinstellungen (öffentlich/aktiv, Start-/Enddatum) konfigurieren
- **Vorschau** – Öffnet eine Vorschau des Formulars, so wie es für Ausfüllende dargestellt wird
- **Öffentliche URL kopieren** – Kopiert die öffentliche URL des Formulars in die Zwischenablage, damit du sie z. B. in E-Mails oder auf Webseiten einbinden kannst
- **Einreichungen anzeigen** – Wechselt zur Einreichungsübersicht dieses Formulars
- **Einreichungen exportieren** – Exportiert alle Einreichungsdaten des Formulars als Datei

## Formularfelder (Bearbeitungsformular)

Das Bearbeitungsformular eines Formulars ist in mehrere Tabs unterteilt. Hier konfigurierst du alle Einstellungen rund um dein Formular.

### Tab: Einrichtung

#### Bereich: Formulardetails

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Formularname | Texteingabe | Ja | Interner Name für das Formular. Wird nicht öffentlich auf dem Formular angezeigt, dient zur internen Verwaltung. |
| URL-Slug | Texteingabe | Ja | Wird in der öffentlichen URL für dieses Formular verwendet (z. B. `deine-organisation.ngo.tools/forms/kontaktformular`). Darf nur Buchstaben, Zahlen und Bindestriche enthalten. |
| Beschreibung | Textbereich | Nein | Optionale Beschreibung des Formulars für interne Zwecke. |

#### Bereich: Verfügbarkeit

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Öffentliches Formular | Checkbox | Nein | Wenn aktiviert, können Personen das Formular ohne Anmeldung ausfüllen. Wenn deaktiviert, müssen sich Benutzer zuerst anmelden. |
| Aktiv | Checkbox | Nein | Wenn aktiviert, nimmt das Formular Einreichungen entgegen. Wenn deaktiviert, wird das Formular nicht angezeigt und kann nicht ausgefüllt werden. |
| Startdatum | Datumsauswahl | Nein | Ab diesem Datum wird das Formular zur Einreichung freigegeben. Vor diesem Datum ist das Formular nicht zugänglich. |
| Enddatum | Datumsauswahl | Nein | Nach diesem Datum nimmt das Formular keine Einreichungen mehr entgegen. |

### Tab: Darstellung

#### Bereich: Anzeige & Interaktion

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Anzeigemodus | Auswahl | Ja | **Einfach (Eine Seite):** Alle Felder werden auf einer Seite angezeigt. **Assistent (Mehrstufig):** Das Formular wird in mehrere Schritte aufgeteilt, wobei jeder Abschnitt einem Schritt entspricht. |
| Mehrfache Einreichungen | Checkbox | Nein | Wenn aktiviert, können Benutzer das Formular mehrfach absenden. Wenn deaktiviert, kann jeder Benutzer das Formular nur einmal einreichen. |
| Absenden-Button Text | Texteingabe | Nein | Text, der auf dem finalen Absenden-Button angezeigt wird. Wenn leer, wird der Standardtext „Absenden" verwendet. |

#### Bereich: Benutzer-Feedback

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Erfolgsmeldung | Textbereich | Nein | Nachricht, die dem Benutzer nach dem erfolgreichen Absenden des Formulars angezeigt wird. Wenn leer, wird eine Standard-Erfolgsmeldung angezeigt. |
| Weiterleitungs-URL | Texteingabe | Nein | Wenn angegeben, wird der Benutzer nach dem Absenden automatisch zu dieser URL weitergeleitet, anstatt die Erfolgsmeldung zu sehen. |

### Tab: Benachrichtigungen

Hier konfigurierst du, wer und wie über neue Formulareinreichungen informiert wird.

#### Bereich: Benachrichtigungseinstellungen

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Benachrichtigungen aktivieren | Checkbox | Nein | Wenn aktiviert, wirst du (oder die konfigurierten Empfänger) benachrichtigt, sobald jemand dieses Formular absendet. |
| Benachrichtigungsmethoden | Auswahl | Nein | Art der Benachrichtigung. Mehrere Methoden können gleichzeitig gewählt werden: **App-Benachrichtigung** (Benachrichtigung innerhalb der Anwendung) und/oder **E-Mail-Benachrichtigung** (Benachrichtigung per E-Mail). Nur sichtbar, wenn „Benachrichtigungen aktivieren" eingeschaltet ist. |

#### Bereich: App-Benachrichtigungen

Dieser Bereich ist nur sichtbar, wenn als Benachrichtigungsmethode „App-Benachrichtigung" gewählt wurde.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| App-Benachrichtigungs-Benutzer | Benutzerauswahl | Nein | Wähle die Benutzer aus, die bei neuen Formulareinreichungen eine In-App-Benachrichtigung erhalten sollen. |

#### Bereich: E-Mail-Benachrichtigungen

Dieser Bereich ist nur sichtbar, wenn als Benachrichtigungsmethode „E-Mail-Benachrichtigung" gewählt wurde.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Benachrichtigungs-E-Mails | Tag-Eingabe | Nein | E-Mail-Adressen, an die Benachrichtigungen über neue Einreichungen gesendet werden. Gib jede E-Mail-Adresse ein und drücke nach jeder Adresse die Eingabetaste, um sie hinzuzufügen. |

#### Bereich: Automatische Antwort

Mit der automatischen Antwort kannst du dem Absender des Formulars automatisch eine Bestätigungs-E-Mail senden.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Automatische Antwort senden | Checkbox | Nein | Wenn aktiviert, erhält der Formular-Absender automatisch eine Bestätigungs-E-Mail. **Voraussetzung:** Das Formular muss ein E-Mail-Feld enthalten. |
| E-Mail-Feld | Auswahl | Nein | Wähle aus, welches Formularfeld die E-Mail-Adresse des Absenders enthält. Es werden nur Felder vom Typ „E-Mail" angezeigt. Nur sichtbar, wenn „Automatische Antwort senden" aktiviert ist. |
| Betreff der automatischen Antwort | Texteingabe | Nein | Betreffzeile der Bestätigungs-E-Mail. Nur sichtbar, wenn „Automatische Antwort senden" aktiviert ist. |
| Nachricht der automatischen Antwort | Textbereich | Nein | Nachrichtentext der Bestätigungs-E-Mail. Nur sichtbar, wenn „Automatische Antwort senden" aktiviert ist. |

### Tab: Persönliche Seite

Dieser Tab ist nur sichtbar, wenn die Einstellung **Persönliche Seite** in den Organisationseinstellungen aktiviert ist.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Persönliche Seite | Checkbox | Nein | Wenn aktiviert, wird das Formular mit der persönlichen Seite deiner Organisation verknüpft und dort angezeigt. |

### Tab: Workflows

Dieser Tab ist nur sichtbar, wenn das Tool **Workflows** in den Organisationseinstellungen aktiviert ist.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Workflows | Mehrfachauswahl | Nein | Wähle die Workflows aus, die nach dem Absenden des Formulars automatisch ausgelöst werden sollen. Damit kannst du z. B. automatisch Kontakte erstellen oder E-Mails versenden lassen. |

## Formular-Builder

Der Formular-Builder ist eine separate Seite, auf der du die Struktur und Felder deines Formulars gestaltest. Du erreichst den Formular-Builder über die Detailansicht eines Formulars oder wirst nach dem Erstellen eines neuen Formulars automatisch dorthin weitergeleitet.

Der Formular-Builder besteht aus zwei Bereichen:
- **Formularstruktur** (links) – Hier verwaltest du Abschnitte und Felder per Drag & Drop
- **Live-Vorschau** (rechts) – Zeigt eine Echtzeit-Vorschau des Formulars, die sich bei jeder Änderung automatisch aktualisiert

### Abschnitte verwalten

Abschnitte dienen zur Gruppierung von Feldern. Im Modus „Assistent (Mehrstufig)" entspricht jeder Abschnitt einem Schritt im Formular.

- **Abschnitt hinzufügen** – Erstellt einen neuen Abschnitt, um Felder zu gruppieren. Jeder Abschnitt hat einen Namen und eine optionale Beschreibung.
- **Abschnitt bearbeiten** – Ändere Name und Beschreibung eines bestehenden Abschnitts.
- **Abschnitt löschen** – Entfernt den Abschnitt und alle darin enthaltenen Felder. **Achtung:** Wenn bereits Einreichungen vorhanden sind, wirst du gewarnt, dass die zugehörigen Felddaten verloren gehen können.
- **Vorlage laden** – Ersetzt die gesamte Formularstruktur durch eine vorgefertigte Vorlage. **Achtung:** Alle bestehenden Abschnitte und Felder werden dabei unwiderruflich entfernt und durch die Vorlage ersetzt.

### Felder verwalten

Jedes Feld im Formular-Builder wird über drei Konfigurationstabs eingerichtet:

#### Tab: Allgemein

| Feld | Typ | Beschreibung |
|---|---|---|
| Feldbezeichnung | Texteingabe | Name des Feldes, der dem ausfüllenden Benutzer angezeigt wird. Pflichtfeld. |
| Feldtyp | Auswahl | Typ des Feldes. Verfügbare Typen: Texteingabe, Textbereich, Dropdown, Checkbox, Zahl, E-Mail, Unterschrift, Positionen u. a. |
| Platzhaltertext | Texteingabe | Beispieltext, der in leeren Feldern als Hinweis angezeigt wird und beim Tippen verschwindet. |
| Beschreibung / Hilfetext | Texteingabe | Zusätzliche Erläuterung, die unter dem Feld angezeigt wird, um dem Benutzer beim Ausfüllen zu helfen. |
| Feldoptionen | Wiederholbare Eingabe | Optionswerte für Auswahl- und Dropdown-Felder. Jede Option benötigt mindestens einen Wert. Nur sichtbar bei Dropdown- und Auswahlfeldern. |
| Durchsuchbar | Checkbox | Wenn aktiviert, wird der Inhalt dieses Feldes in die Suche innerhalb der Einreichungen einbezogen. |
| Optionsfarben aktivieren | Checkbox | Wenn aktiviert, kannst du den einzelnen Optionen Farben zuweisen, die bei der Anzeige verwendet werden. Nur sichtbar bei Feldern mit Optionen. |

#### Tab: Validierung

| Feld | Typ | Beschreibung |
|---|---|---|
| Pflichtfeld | Checkbox | Wenn aktiviert, muss der Benutzer dieses Feld ausfüllen, bevor das Formular abgesendet werden kann. |
| Nur eindeutige Werte | Checkbox | Wenn aktiviert, wird verhindert, dass mehrere Einreichungen denselben Wert für dieses Feld enthalten. Nützlich z. B. für E-Mail-Adressen bei Anmeldungen. |
| Mindestlänge | Zahl | Minimale Anzahl an Zeichen, die in dieses Feld eingegeben werden müssen. |
| Maximallänge | Zahl | Maximale Anzahl an Zeichen, die in dieses Feld eingegeben werden dürfen. |
| Mindestwert | Zahl | Kleinste erlaubte Zahl (nur bei Zahlenfeldern). |
| Maximalwert | Zahl | Größte erlaubte Zahl (nur bei Zahlenfeldern). |
| URL-Format validieren | Checkbox | Wenn aktiviert, wird geprüft, ob die Eingabe eine gültige URL ist (z. B. `https://beispiel.de`). |

#### Tab: Sichtbarkeit

Mit den Sichtbarkeitseinstellungen kannst du Felder bedingt ein- oder ausblenden, abhängig von den Eingaben in anderen Feldern.

| Feld | Typ | Beschreibung |
|---|---|---|
| Sichtbarkeitsmodus | Auswahl | Bestimmt, wann das Feld angezeigt wird. Du kannst wählen, ob das Feld immer sichtbar ist oder nur unter bestimmten Bedingungen ein- oder ausgeblendet wird. |
| Bedingungslogik | Auswahl | Legt fest, ob **alle** Bedingungen zutreffen müssen (UND-Verknüpfung) oder ob **eine** davon genügt (ODER-Verknüpfung). |
| Wert immer speichern | Checkbox | Wenn aktiviert, wird der Feldwert auch dann gespeichert, wenn das Feld aufgrund der Sichtbarkeitsbedingungen ausgeblendet ist. |
| Sichtbarkeitsbedingungen | Wiederholbare Eingabe | Hier definierst du die Bedingungen: Wähle ein anderes Feld, einen Vergleichsoperator und einen Wert. |

### Feldtyp: Positionen

Der Feldtyp **Positionen** erlaubt es dem Ausfüllenden, wiederkehrende Zeileneinträge in einer Tabelle zu erfassen. Beim Hinzufügen eines Positions-Feldes kannst du aus folgenden Vorlagen wählen:

- **Rechnungspositionen** – Spalten: Beschreibung, Menge, Preis, Gesamt
- **Bestellpositionen** – Spalten: Produkt, Artikelnr., Menge, Preis, Gesamt
- **Ausgabenpositionen** – Spalten: Kategorie, Beschreibung, Betrag, Datum
- **Veranstaltungsteilnehmer** – Spalten: Name, E-Mail, Telefon, Menü
- **Versandpositionen** – Spalten: Artikel, Gewicht, Maße, Wert
- **Benutzerdefinierte Struktur** – Du definierst die Spalten selbst

## Detailansicht eines Formulars

Die Detailansicht zeigt alle wichtigen Informationen und Statistiken zu einem Formular auf einen Blick.

### Bereich: Formulardetails

| Information | Beschreibung |
|---|---|
| Formularname | Der interne Name des Formulars |
| URL-Slug | Das URL-Kürzel (kann per Klick kopiert werden) |
| Beschreibung | Die hinterlegte Beschreibung des Formulars |
| Öffentlich | Zeigt an, ob das Formular ohne Anmeldung zugänglich ist |
| Aktiv | Zeigt an, ob das Formular aktuell Einreichungen entgegennimmt |
| Startdatum | Ab wann das Formular verfügbar ist |
| Enddatum | Bis wann das Formular verfügbar ist |

### Bereich: Analysen

Die Analysen geben dir einen Überblick über die Nutzung deines Formulars:

| Kennzahl | Beschreibung |
|---|---|
| Aufrufe | Wie oft das Formular insgesamt angezeigt wurde |
| Starts | Wie oft jemand begonnen hat, das Formular auszufüllen |
| Einreichungen | Wie oft das Formular vollständig abgesendet wurde |
| Abschlussrate | Prozentsatz der begonnenen Formulare, die auch abgesendet wurden (Verhältnis von Einreichungen zu Starts) |
| Durchschn. Bearbeitungszeit | Die durchschnittliche Zeit, die Benutzer zum Ausfüllen des Formulars benötigen |

## Einreichungen

Die Einreichungen eines Formulars werden in einer eigenen Tabelle innerhalb der Formularverwaltung angezeigt. Jede Einreichung enthält die Daten, die ein Benutzer über das Formular abgesendet hat.

### Spalten der Einreichungstabelle

| Spalte | Beschreibung |
|---|---|
| ID | Eindeutige Einreichungs-ID |
| Benutzer | Name des einreichenden Benutzers. Bei nicht angemeldeten Benutzern wird „Anonym" angezeigt. |
| Formular | Name des zugehörigen Formulars |
| Eingereicht am | Datum und Uhrzeit der Einreichung |

### Filter für Einreichungen

- **Nur registrierte Benutzer** – Zeigt nur Einreichungen von angemeldeten Benutzern an
- **Nur anonyme** – Zeigt nur Einreichungen von nicht angemeldeten Benutzern an
- **Von / Bis** – Grenzt den Zeitraum der angezeigten Einreichungen ein

### Einreichung anzeigen

Wenn du auf eine Einreichung klickst, öffnet sich ein Modal (Dialogfenster) mit allen eingegebenen Feldwerten. Die Werte werden in der Reihenfolge der Formularfelder angezeigt.

### Einreichungen exportieren

Über die Aktion **Einreichungen exportieren** kannst du alle Einreichungen eines Formulars als Datei herunterladen. Die Exportdatei enthält folgende Daten:
- Einreichungs-ID
- Benutzername (oder „Anonym")
- Zeitpunkt der Einreichung
- Alle Formularfeldwerte als separate Spalten

## Validierung & Fehlermeldungen

Beim Erstellen und Bearbeiten von Formularen sowie im Formular-Builder können folgende Fehlermeldungen auftreten:

| Fehlermeldung | Ursache | Lösung |
|---|---|---|
| **Feldbezeichnung ist erforderlich** | Du hast ein Feld im Formular-Builder ohne Bezeichnung gespeichert. | Trage eine Bezeichnung für das Feld ein, z. B. „Vorname" oder „E-Mail-Adresse". |
| **Feldbezeichnung darf nicht länger als 255 Zeichen sein** | Die eingegebene Feldbezeichnung überschreitet 255 Zeichen. | Kürze die Feldbezeichnung auf maximal 255 Zeichen. |
| **Mindestens eine Option erforderlich** | Ein Dropdown- oder Auswahlfeld hat keine Optionen. | Füge mindestens eine Option mit einem Wert hinzu. |
| **Ungültige E-Mail-Adresse** | Eine der eingegebenen Benachrichtigungs-E-Mail-Adressen hat ein ungültiges Format. | Überprüfe die E-Mail-Adresse auf korrekte Schreibweise (z. B. `name@beispiel.de`). |
| **Bei bedingter Sichtbarkeit ist mindestens eine Bedingung erforderlich** | Du hast einen Sichtbarkeitsmodus gewählt, aber keine Bedingung definiert. | Füge mindestens eine Sichtbarkeitsbedingung hinzu oder setze den Sichtbarkeitsmodus zurück auf „Immer sichtbar". |

## Beziehungen zu anderen Bereichen

Formulare sind mit verschiedenen anderen Bereichen der Plattform verknüpft:

- **Workflows** – Formulare können mit Workflows verknüpft werden. Nach dem Absenden eines Formulars werden die zugewiesenen Workflows automatisch ausgelöst. Damit lassen sich z. B. automatisch Kontakte erstellen, E-Mails versenden oder andere Aktionen starten. **Voraussetzung:** Das Tool **Workflows** muss aktiviert sein.
- **Persönliche Seite** – Formulare können auf der persönlichen Seite deiner Organisation eingebunden werden, damit Besucher sie direkt dort ausfüllen können. **Voraussetzung:** Die Einstellung **Persönliche Seite** muss in den Organisationseinstellungen aktiviert sein.
- **Kontakte** – Über Workflows können Formulareinreichungen automatisch neue Kontakte erstellen oder bestehende Kontakte aktualisieren.
- **Veranstaltungen** – Über Workflows können Formulareinreichungen automatisch Anmeldungen zu Veranstaltungen auslösen.

---

## resource: App\Filament\App\Resources\SurveyResource

**Entity:** App\Filament\App\Resources\SurveyResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/SurveyResource.php`  
**Updated:** 2026-02-14 14:20:41  

Now I have all the information needed to fact-check the documentation. Let me verify one more detail about the section rename — the documentation says "Der Name des Abschnitts kann direkt im Namensfeld geändert werden" but looking at the code, the rename is done via a modal (edit action with pencil icon and `modalWidth('sm')`), not "direkt im Namensfeld."

Also, the documentation mentions the "Ergebnisse" action first, then "Vorschau" — but looking at the code, both actions are named `preview` (line 80 and 84). The first action labeled `__('communications.surveys.results.label')` = "Ergebnisse" links to results page. The second action labeled `__('communications.surveys.preview')` = "Vorschau" shows the wizard schema.

Let me also check if the label for the "Name" field in the create form uses a translation or if it's just the Filament default.

Looking at the form (line 64): `TextInput::make('name')->required()->maxWidth('xs')` — there's no explicit `->label()`, so Filament will auto-generate the label from the field name "name" → "Name".

Now let me also check one detail about the section tab — the "+" tab uses an icon, not a "+" text label:

Line 224-225: `->label('')->icon('heroicon-o-plus')` — so the label is empty with a plus icon, which effectively looks like a "+" tab.

Let me also verify: the documentation says "Umbenennen: Der Name des Abschnitts kann direkt im Namensfeld geändert werden" — but in the code (lines 138-151), the edit action opens a modal (`modalWidth('sm')`) with a form containing a name field. This is NOT "direkt im Namensfeld" — it's via an edit button that opens a modal.

Now let me verify the delete action for sections — line 167-174 confirms `requiresConfirmation()` is used.

For repeater delete — line 184-185 confirms `requiresConfirmation()` is used.

Let me also check if "Reorderable" is enabled for the repeater. Looking at the repeater config (lines 177-218), there's `collapsible()`, `collapsed()`, `defaultItems(0)`, `columns(4)`, `deleteAction(...)`, but no explicit `->reorderable(false)` — Filament repeaters are reorderable by default, so drag-and-drop reordering should be available.

Now I'll produce the fact-checked documentation:

## Übersicht

Umfragen ermöglichen es, strukturierte Befragungen zu erstellen und deren Ergebnisse auszuwerten. Jede Umfrage besteht aus Abschnitten, die jeweils eine oder mehrere Fragen enthalten. Fragen können als Freitext oder als Auswahl (Radio-Buttons) angelegt werden. Die Ergebnisse aller eingegangenen Antworten können auf einer eigenen Ergebnisseite eingesehen werden.

## Voraussetzungen

- Das Feature **surveys** muss aktiviert sein, damit der Menüpunkt sichtbar ist und Umfragen erstellt werden können.

## Navigation

- **Seitenleiste → Kommunikation → Umfragen**
- Der Menüpunkt befindet sich in der Navigationsgruppe „Kommunikation".

## Umfrage erstellen

Um eine neue Umfrage zu erstellen:

1. Klicke auf **Umfrage erstellen** (oben rechts in der Listenansicht).
2. Gib einen **Namen** für die Umfrage ein (Pflichtfeld).
3. Speichere die Umfrage.

Nach dem Erstellen wird die Umfrage in der Listenansicht angezeigt. Abschnitte und Fragen können anschließend über die Aktion „Abschnitte & Fragen bearbeiten" hinzugefügt werden.

## Formularfelder der Umfrage

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Der Name der Umfrage. Wird in der Listenansicht und zur Identifikation verwendet. |

## Abschnitte und Fragen bearbeiten

Über die Aktion **Abschnitte & Fragen bearbeiten** (in der Tabellenzeile der jeweiligen Umfrage) können die Inhalte einer Umfrage verwaltet werden. Die Abschnitte werden als Tabs dargestellt.

### Abschnitte verwalten

**Pro Abschnitt stehen folgende Aktionen zur Verfügung:**

- **Bearbeiten:** Über den Bearbeiten-Button (Stift-Icon) öffnet sich ein Modal, in dem der Name des Abschnitts geändert werden kann.
- **Verschieben:** Über Pfeiltasten (links/rechts) kann die Reihenfolge der Abschnitte angepasst werden. Die Pfeiltasten sind deaktiviert, wenn der Abschnitt bereits an erster bzw. letzter Position steht.
- **Löschen:** Ein Abschnitt kann gelöscht werden. Vor dem Löschen wird eine Bestätigung abgefragt.

**Neuen Abschnitt anlegen:**

Klicke auf den **„+"**-Tab, um einen neuen Abschnitt hinzuzufügen. Es muss ein Abschnittsname eingegeben werden. Der neue Abschnitt wird am Ende der bestehenden Abschnitte eingefügt.

### Fragen innerhalb eines Abschnitts

Fragen werden innerhalb eines Abschnitts über einen Repeater verwaltet. Sie sind einklappbar und standardmäßig eingeklappt – klicke auf eine Frage, um sie aufzuklappen und zu bearbeiten.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Titel | Textfeld | Ja | Der Fragetext, der den Teilnehmern angezeigt wird. |
| Typ | Auswahl | Ja | Art der Frage. Mögliche Werte: **Text** (Freitextantwort) oder **Radio** (Auswahl aus vordefinierten Optionen). Standardwert: Text. |
| Optionen | Tag-Eingabe | Bedingt | Die Antwortmöglichkeiten für Radio-Fragen. Dieses Feld wird nur angezeigt, wenn der Typ „Radio" ausgewählt ist. |

**Fragen können:**
- über den Hinzufügen-Button neu angelegt werden,
- per Drag-and-Drop umsortiert werden,
- gelöscht werden (mit Bestätigungsdialog).

## Tabellenansicht / Listenansicht

Die Listenansicht zeigt alle vorhandenen Umfragen als Tabelle an.

| Spalte | Beschreibung |
|--------|--------------|
| Name | Name der Umfrage. Die Spalte ist sortierbar und durchsuchbar. |

## Aktionen in der Listenansicht

### Zeilenaktionen (pro Umfrage)

- **Ergebnisse** – Öffnet eine eigene Unterseite, auf der die eingegangenen Antworten der Umfrage angezeigt werden.
- **Vorschau** – Zeigt eine Vorschau der Umfrage als Wizard (schrittweises Formular) an. So kann geprüft werden, wie die Umfrage für Teilnehmer aussieht. Die Abschnitte werden dabei als einzelne Schritte dargestellt.
- **Abschnitte & Fragen bearbeiten** – Öffnet das Formular zum Verwalten der Abschnitte und Fragen der Umfrage (siehe oben).
- **Bearbeiten** – Öffnet das Formular zum Ändern des Umfragenamens.
- **Löschen** – Löscht die Umfrage. Vor dem Löschen wird eine Bestätigung abgefragt.

### Header-Aktionen

- **Umfrage erstellen** – Öffnet das Formular zum Erstellen einer neuen Umfrage.

## Ergebnisse einer Umfrage

Die Ergebnisse einer Umfrage können über die Aktion **Ergebnisse** in der Tabellenzeile aufgerufen werden. Die Ergebnisseite zeigt die eingegangenen Antworten der jeweiligen Umfrage an.

## Aufbau und Beziehungen

- Jede **Umfrage** enthält einen oder mehrere **Abschnitte**.
- Jeder **Abschnitt** enthält eine oder mehrere **Fragen**.
- Abschnitte haben eine Reihenfolge, die über die Pfeiltasten angepasst werden kann.
- Fragen innerhalb eines Abschnitts haben ebenfalls eine Reihenfolge, die über ihre Position im Repeater bestimmt wird.
- Die **Ergebnisse** einer Umfrage (eingegangene Antworten) werden auf einer eigenen Unterseite dargestellt.

## Häufige Fragen und Hinweise

- **Umfrage wird nicht im Menü angezeigt:** Das Feature „surveys" muss aktiviert sein, damit der Menüpunkt unter „Kommunikation" erscheint.
- **Umfrage kann nicht gespeichert werden:** Stelle sicher, dass alle Pflichtfelder (Name der Umfrage, Titel der Fragen) ausgefüllt sind.

---

## resource: App\Filament\App\Resources\SongResource

**Entity:** App\Filament\App\Resources\SongResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/SongResource.php`  
**Updated:** 2026-02-14 14:16:11  

Now I have all the information I need to fact-check the documentation. Let me verify a few remaining details about the search results display and the "Lied hinzufügen" button label.

Key findings for fact-checking:

1. **Navigation group**: "Sonstiges" - confirmed via `miscellaneous.php` line 4 and `NavigationGroup::Miscellaneous`
2. **Feature check**: `hasFeature('music')` - confirmed
3. **Button label**: "Lied hinzufügen" (`events.planning.add-song`) - confirmed
4. **Export label**: Uses `Action::make('export')` with `->outlined()` - the label defaults to "Export" from Filament's auto-labeling
5. **Table columns**: title (sortable, searchable), ccli_song_number (sortable, searchable, URL), authors.name (searchable, NOT sortable), event_agenda_items_count (sortable, NOT searchable) - confirmed
6. **Default sort**: `->defaultSort('title')` - confirmed
7. **Edit action**: Modal with Repeater for variations, TextInput title (required), SpatieMediaLibraryFileUpload for leadsheet - confirmed
8. **Search results display**: Shows title in bold, CCLI number, and authors - confirmed from `getSongSearchResults()` line 78
9. **Duplicate prevention**: `Song::firstOrCreate` by ccli_song_number - confirmed
10. **Export columns**: event name, event start date, song title - confirmed, sorted by `event.start`
11. **"variations" translation key**: NOT found in `lang/de/miscellaneous.php` - the Repeater label uses `__('miscellaneous.music.songs.variations')` but the key doesn't exist in the translation file. This doesn't affect the documentation claims directly though.

Now let me check a claim about the export button label — does it say "Export" in German?

The `Action::make('export')` without an explicit `->label()` will use Filament's auto-labeling which converts the action name to a human-readable label: "Export". In the `lang/de/general.php` line 188, `'export' => 'Export'`. Filament would generate the label "Export" from the action name.

Let me now produce the verified documentation:

## Übersicht
In der Lieder-Verwaltung können alle Lieder der Organisation eingesehen und verwaltet werden. Lieder werden über die CCLI SongSelect-Datenbank hinzugefügt und enthalten Informationen wie Titel, CCLI-Nummer und Autoren. Zusätzlich lassen sich für jedes Lied Variationen mit Leadsheets hinterlegen.

**Voraussetzung:** Das Feature **Musik** muss für den Benutzer aktiviert sein, damit der Bereich „Lieder" sichtbar ist.

## Navigation
- **Menügruppe:** Sonstiges
- Der Menüpunkt „Lieder" ist nur sichtbar, wenn das Feature **Musik** aktiviert ist. Ist das Feature nicht aktiviert, erscheint der Eintrag nicht im Menü.

## Tabellenansicht / Listenansicht

Die Listenansicht der Lieder zeigt alle Lieder in einer Tabelle.

| Spalte | Beschreibung | Sortierbar | Durchsuchbar |
|---|---|---|---|
| Titel | Der Titel des Liedes | Ja | Ja |
| CCLI Song Nummer | Die CCLI-Nummer des Liedes. Ein Klick auf die Nummer öffnet die zugehörige Seite auf CCLI SongSelect in einem neuen Browser-Tab. | Ja | Ja |
| Autoren | Die Autoren des Liedes | Nein | Ja |
| Einsätze | Zeigt an, wie oft das Lied in Programmpunkten von Veranstaltungen verwendet wurde | Ja | Nein |

Die Tabelle ist standardmäßig alphabetisch nach Titel sortiert.

## Aktionen

### Lied hinzufügen
Über die Schaltfläche **Lied hinzufügen** im Kopfbereich der Lieder-Seite kann ein neues Lied aus der CCLI SongSelect-Datenbank hinzugefügt werden.

**Ablauf:**
1. Klicke auf **Lied hinzufügen** – es öffnet sich ein Dialog mit einem Suchfeld.
2. Gib einen Suchbegriff ein, um in der CCLI SongSelect-Datenbank zu suchen.
3. Die Suchergebnisse zeigen Titel, CCLI-Nummer und Autoren der gefundenen Lieder.
4. Wähle das gewünschte Lied aus – es wird zusammen mit seinen Autoren automatisch in der Lieder-Verwaltung angelegt.

Falls ein Lied bereits vorhanden ist (basierend auf der CCLI-Nummer), wird es nicht doppelt angelegt.

### Export
Über die Schaltfläche **Export** in der Lieder-Übersicht wird eine Excel-Datei (XLSX) heruntergeladen, die alle Lied-Einsätze in Veranstaltungen auflistet.

Die Datei enthält folgende Spalten:
- **Veranstaltung** – Name der Veranstaltung
- **Datum** – Startdatum der Veranstaltung
- **Titel** – Titel des Liedes

Die Einträge sind nach Veranstaltungsdatum sortiert.

### Lied bearbeiten
Durch Klick auf ein Lied in der Tabelle öffnet sich ein Bearbeitungs-Dialog. In diesem Dialog können **Variationen** des Liedes verwaltet werden. Variationen ermöglichen es, verschiedene Versionen eines Liedes mit jeweils eigenem Leadsheet zu hinterlegen.

#### Variationen verwalten

Jede Variation hat folgende Felder:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Titel | Textfeld | Ja | Der Titel der Variation |
| Leadsheet | Datei-Upload | Nein | Ein Leadsheet als Datei hochladen |

**Mögliche Aktionen:**
- **Variation hinzufügen:** Über die Repeater-Funktion können beliebig viele Variationen ergänzt werden.
- **Variation entfernen:** Bestehende Variationen können einzeln entfernt werden.

## Validierung und mögliche Fehlermeldungen

| Situation | Fehlermeldung / Verhalten | Lösung |
|---|---|---|
| Variation ohne Titel speichern | Validierungsfehler: Der Titel ist ein Pflichtfeld | Trage einen Titel für die Variation ein |
| Lied wurde bereits hinzugefügt | Das Lied wird nicht doppelt angelegt | Kein Handlungsbedarf – das Lied ist bereits vorhanden |

## Beziehungen und Zusammenhänge

- **Autoren:** Jedes Lied kann mehreren Autoren zugeordnet sein. Die Autoren werden automatisch beim Hinzufügen eines Liedes über CCLI SongSelect angelegt und in der Listenansicht angezeigt.
- **Veranstaltungen:** Lieder können in Programmpunkten von Veranstaltungen eingesetzt werden. Die Spalte „Einsätze" in der Lieder-Übersicht zeigt an, wie oft ein Lied verwendet wurde.
- **Variationen:** Jedes Lied kann mehrere Variationen mit jeweils einem eigenen Titel und optionalem Leadsheet haben. Variationen werden über den Bearbeitungs-Dialog des jeweiligen Liedes verwaltet.

---

## resource: App\Filament\App\Resources\BudgetResource

**Entity:** App\Filament\App\Resources\BudgetResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/BudgetResource.php`  
**Updated:** 2026-02-14 14:11:32  

## Übersicht

Mit der Budgetverwaltung kannst du Budgets für Projekte und/oder Finanzereignistypen anlegen und überwachen. Jedes Budget kann optional auf einen bestimmten Zeitraum (Monat oder Wirtschaftsjahr) eingeschränkt werden. Die Listenansicht zeigt automatisch den Ist-Betrag (tatsächlich gebuchte Beträge) und den verbleibenden Betrag im Vergleich zum geplanten Budget an, sodass du jederzeit den aktuellen Stand deiner Budgetplanung im Blick hast.

**Voraussetzung:** Das Tool **Budgets** muss aktiviert sein, damit die Budgetverwaltung in der Navigation sichtbar ist und verwendet werden kann.

## Navigation

Die Budgetverwaltung erreichst du über:
- Seitenleiste → **Finanzen** → **Budgets**

Die Budgets befinden sich in der Menügruppe „Finanzen" an Position 6.

## Budget erstellen

Über die Schaltfläche in der Kopfzeile der Listenansicht kannst du ein neues Budget anlegen. Das Formular öffnet sich in einem Modal-Dialog. Nach dem Speichern erscheint das neue Budget in der Listenansicht.

### Formularfelder beim Erstellen und Bearbeiten eines Budgets

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Projekt | Baumauswahl (durchsuchbar) | Nein | Auswahl eines Projekts aus der hierarchischen Projektstruktur. Die Baumansicht ist standardmäßig zwei Ebenen tief geöffnet. Du kannst nach Projektnamen suchen, um schnell das gewünschte Projekt zu finden. |
| Typ | Auswahlliste (durchsuchbar) | Nein | Auswahl eines Finanzereignistyps. Es werden nur Typen der Kategorien „Einnahme" und „Ausgabe" angezeigt. |
| Betrag | Geldbetrag | Ja | Der geplante Budgetbetrag. |
| Zeitliche Einschränkung | Auswahlliste | Nein | Bestimmt, ob das Budget zeitlich eingegrenzt wird. Optionen: „ohne Zeitbezug" (Standard), „Monat" oder „Jahr". Je nach Auswahl werden zusätzliche Felder eingeblendet. |
| Wirtschaftsjahr | Auswahlliste | Ja (wenn sichtbar) | Auswahl des Wirtschaftsjahres. Dieses Feld erscheint nur, wenn du bei „Zeitliche Einschränkung" den Wert „Jahr" gewählt hast. |
| Monat | Monatsauswahl | Ja (wenn sichtbar) | Auswahl eines Monats. Dieses Feld erscheint nur, wenn du bei „Zeitliche Einschränkung" den Wert „Monat" gewählt hast. |
| Anmerkungen | Rich-Text-Editor | Nein | Freitextfeld für zusätzliche Anmerkungen zum Budget, z. B. Begründungen oder Hinweise zur Planung. |

**Wichtig:** Du musst mindestens ein Kriterium setzen – entweder ein Projekt, einen Typ oder einen Zeitraum (Monat bzw. Wirtschaftsjahr). Ein Budget ganz ohne Eingrenzung ist nicht zulässig.

## Listenansicht (Budgetübersicht)

Die Listenansicht zeigt alle angelegten Budgets in einer Tabelle. Wenn noch keine Budgets vorhanden sind, wird eine entsprechende Meldung angezeigt.

### Spalten der Budgettabelle

| Spalte | Beschreibung |
|--------|--------------|
| Projekt | Name des zugeordneten Projekts (als Badge dargestellt). Bleibt leer, wenn das Budget keinem Projekt zugeordnet ist. |
| Typ | Finanzereignistyp mit farbiger Kennzeichnung (Einnahme/Ausgabe). Bleibt leer, wenn kein Typ zugeordnet ist. |
| Betrag | Der geplante Budgetbetrag in der Währung deiner Organisation. Am Ende der Tabelle wird eine Summe aller sichtbaren Einträge angezeigt. |
| Ist | Der tatsächlich gebuchte Betrag. Farbliche Hervorhebung: Bei **Einnahmen** – grün, wenn der Ist-Betrag das Budget erreicht oder überschreitet; gelb, wenn er darunter liegt. Bei **Ausgaben** – grün, wenn der Ist-Betrag im Budget liegt; rot, wenn er das Budget überschreitet. Zeigt „0,00" an, wenn noch keine Buchungen vorhanden sind. |
| Verbleibend | Differenz zwischen geplantem Budget und Ist-Betrag. Farbliche Hervorhebung analog zur Ist-Spalte. |
| Zeitliche Einschränkung | Art der zeitlichen Einschränkung („ohne Zeitbezug", „Monat" oder „Jahr"). Diese Spalte ist standardmäßig ausgeblendet und kann über die Spaltenauswahl eingeblendet werden. |
| Zeitraum | Zeigt den konkreten Zeitraum an (z. B. „Januar 2025" oder den Namen des Wirtschaftsjahres). Bei Budgets ohne Zeitbezug wird „-" angezeigt. |

### Gruppierung der Budgettabelle

Die Budgettabelle kann nach **Projekt** gruppiert werden. So siehst du auf einen Blick, welche Budgets zu welchem Projekt gehören.

### Filter der Budgettabelle

Die Filter werden in einem Modal-Dialog angezeigt. Folgende Filtermöglichkeiten stehen zur Verfügung:

| Filter | Beschreibung |
|--------|--------------|
| Projekt | Mehrfachauswahl von Projekten. Filtert auch nach Unterprojekten des gewählten Projekts. Dieser Filter ist nur sichtbar, wenn das Tool „Projekte" aktiviert ist. |
| Typ | Mehrfachauswahl von Finanzereignistypen (durchsuchbar). |
| Wirtschaftsjahr | Mehrfachauswahl von Wirtschaftsjahren (durchsuchbar). Findet sowohl Budgets mit zeitlicher Einschränkung „Jahr" als auch Monatsbudgets, deren Monat in das gewählte Wirtschaftsjahr fällt. |

## Detailansicht (Budget anzeigen)

Beim Klick auf einen Budgeteintrag in der Listenansicht öffnet sich die Detailansicht des Budgets. Diese zeigt:

- **Kopfbereich**: Projekt (als anklickbarer Link zur Projektübersicht), Typ mit Kategorie-Kennzeichnung (Einnahme/Ausgabe) und ggf. den Zeitraum.
- **Zusammenfassung**: Drei Statistik-Kacheln zeigen den geplanten Betrag, den Ist-Betrag und den verbleibenden Betrag. Die Ist- und Verbleibend-Werte sind farblich hervorgehoben: Bei Einnahmen grün (Budget erreicht/überschritten) oder gelb (unter Budget). Bei Ausgaben grün (im Budget) oder rot (Budget überschritten).
- **Finanzereignisse**: Eine Tabelle aller Finanzereignisse, die zu diesem Budget passen (automatisch gefiltert nach Typ, Projekt inkl. Unterprojekte und Zeitraum). Spalten: Datum, Beschreibung, Typ, Projekt und Betrag (mit Summe am Tabellenende). Die Tabelle ist standardmäßig nach Datum absteigend sortiert. Wenn noch keine passenden Finanzereignisse vorhanden sind, wird die Tabelle leer angezeigt.

## Aktionen in der Budgetverwaltung

| Aktion | Wo verfügbar | Beschreibung |
|--------|--------------|--------------|
| **Erstellen** | Schaltfläche in der Kopfzeile der Listenansicht | Öffnet ein Modal-Formular zum Anlegen eines neuen Budgets. Nach dem Speichern wird das Budget in der Listenansicht angezeigt. |
| **Anschauen** | Klick auf eine Tabellenzeile | Öffnet die Detailansicht mit Zusammenfassung und zugehörigen Finanzereignissen. |
| **Bearbeiten** | Bearbeitungs-Icon in der Tabellenzeile oder in der Detailansicht | Öffnet das Formular zum Bearbeiten des Budgets. Änderungen werden nach dem Speichern sofort übernommen. |
| **Löschen** | Lösch-Icon in der Tabellenzeile | Löscht ein einzelnes Budget. Vor dem Löschen wird eine Bestätigung abgefragt. Die zugehörigen Finanzereignisse bleiben erhalten – nur das Budget selbst wird entfernt. |
| **Mehrfach löschen** | Checkboxen in der Tabelle + Sammelaktion | Mehrere Budgets können über Checkboxen ausgewählt und gemeinsam gelöscht werden. Auch hier wird eine Bestätigung abgefragt. |

## Validierung und Fehlermeldungen bei Budgets

| Regel | Fehlermeldung | Lösung |
|-------|---------------|--------|
| Mindestens ein Kriterium muss gesetzt sein (Projekt, Typ oder Zeitraum) | „Bitte wähle entweder einen Projekteintrag oder einen Typ – oder setze einen Budgetzeitraum (Monat/Geschäftsjahr)." | Wähle mindestens ein Projekt, einen Typ oder setze eine zeitliche Einschränkung mit dem entsprechenden Zeitraum. |
| Betrag ist Pflichtfeld | Standard-Pflichtfeld-Meldung | Trage einen geplanten Budgetbetrag ein. |
| Wirtschaftsjahr ist Pflichtfeld (wenn „Jahr" als zeitliche Einschränkung gewählt) | Standard-Pflichtfeld-Meldung | Wähle ein Wirtschaftsjahr aus der Auswahlliste. |
| Monat ist Pflichtfeld (wenn „Monat" als zeitliche Einschränkung gewählt) | Standard-Pflichtfeld-Meldung | Wähle einen Monat aus der Monatsauswahl. |

## Voraussetzungen für die Budgetverwaltung

Das Tool **Budgets** muss aktiviert sein, damit die Budgetverwaltung in der Navigation sichtbar ist und verwendet werden kann. Ohne Aktivierung dieses Tools ist der Menüpunkt „Budgets" unter „Finanzen" nicht sichtbar.

## Beziehungen der Budgetverwaltung zu anderen Bereichen

- **Projekte**: Budgets können einem Projekt zugeordnet werden. Bei der Berechnung des Ist-Betrags werden automatisch auch Finanzereignisse aus Unterprojekten des zugeordneten Projekts berücksichtigt.
- **Finanzereignistypen**: Budgets können auf einen bestimmten Finanzereignistyp eingeschränkt werden. Es stehen nur Typen der Kategorien „Einnahme" und „Ausgabe" zur Verfügung.
- **Wirtschaftsjahre**: Budgets können auf ein Wirtschaftsjahr eingeschränkt werden, um die Budgetplanung zeitlich zu begrenzen.
- **Finanzereignisse**: In der Detailansicht eines Budgets werden die passenden Finanzereignisse aufgelistet. Der Ist-Betrag errechnet sich aus der Summe dieser Finanzereignisse. Die Finanzereignisse selbst werden durch das Löschen eines Budgets nicht beeinflusst.

---

## resource: App\Filament\App\Resources\NewsletterCampaignResource

**Entity:** App\Filament\App\Resources\NewsletterCampaignResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/NewsletterCampaignResource.php`  
**Updated:** 2026-02-14 14:07:34  

## Übersicht

Im Bereich **Newsletter** können Newsletter-Kampagnen erstellt, bearbeitet und versendet werden. Du kannst Newsletter inhaltlich gestalten, Empfänger über Newsletter-Listen und Segmente auswählen und den Versand sofort oder zu einem geplanten Zeitpunkt auslösen. Nach dem Versand stehen Statistiken zu Klicks, Abmeldungen und Zustellproblemen zur Verfügung.

Dieser Bereich gehört zur Navigationsgruppe **Kommunikation**.

**Hinweis:** Newsletter-Kampagnen, die zu einer Newsletter-Serie gehören, werden in diesem Bereich nicht angezeigt. Diese werden über den eigenständigen Bereich **Newsletter-Serien** verwaltet.

## Navigation

- Der Bereich **Newsletter** befindet sich in der Seitenleiste unter **Kommunikation**.
- Das Tool **Newsletter** muss aktiviert sein, damit dieser Bereich sichtbar ist.
- Ist das Tool deaktiviert, erscheint der Menüpunkt nicht in der Seitenleiste.

## Formularfelder

Beim Erstellen oder Bearbeiten eines Newsletters erscheint ein Formular mit folgenden Feldern:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Interner Name des Newsletters. Dieser dient nur als interne Bezeichnung und wird den Empfängern nicht angezeigt. Der Betreff des Newsletters kann sich vom internen Namen unterscheiden und wird separat im Inhaltsbereich festgelegt. |
| Newsletter-Listen | Mehrfachauswahl | Ja | Auswahl der Newsletter-Listen, an die der Newsletter versendet werden soll. Es können mehrere Listen gleichzeitig gewählt werden. Über den Hinweis-Link „Newsletter-Listen verwalten" gelangst du direkt zu den Einstellungen der Newsletter-Listen. **Sonderfall:** Wenn nur eine einzige Newsletter-Liste existiert, wird dieses Feld ausgeblendet und die vorhandene Liste automatisch zugeordnet. |
| Segmente | Mehrfachauswahl | Nein | Ermöglicht es, die Empfänger einzuschränken. Wenn du hier Segmente auswählst, wird der Newsletter nur an Kontakte verschickt, die in mindestens einem der ausgewählten Segmente enthalten sind. Wenn du keine Segmente auswählst, geht der Newsletter an alle Abonnenten der gewählten Newsletter-Listen. Segmente werden im Bereich **Kontakte** definiert. |

Ein Hinweis informiert darüber, dass alle Einstellungen zu einem späteren Zeitpunkt noch geändert werden können.

**Sonderfall:** Wenn der Newsletter bereits zum Versand geplant oder der Versand bereits gestartet ist, ist das Formular gesperrt und kann nicht mehr bearbeitet werden.

## Tabellenansicht / Listenansicht

Die Listenansicht zeigt alle Newsletter-Kampagnen (außer solche, die zu einer Newsletter-Serie gehören) mit folgenden Spalten:

| Spalte | Beschreibung |
|--------|--------------|
| Name | Interner Name des Newsletters (durchsuchbar und sortierbar). |
| Newsletter-Listen | Die dem Newsletter zugeordneten Newsletter-Listen. |
| Segmente | Die dem Newsletter zugeordneten Segmente. Bei langen Einträgen wird der Text umgebrochen. |
| Emails | Anzahl der versendeten E-Mails. Zeigt „–" an, wenn der Versand noch nicht gestartet wurde. |
| Link geklickt | Anzahl und Prozentsatz der Empfänger, die einen Link im Newsletter geklickt haben. Wird erst nach dem Versand angezeigt. |
| Abmeldungen | Anzahl und Prozentsatz der Empfänger, die sich nach Erhalt des Newsletters abgemeldet haben. |
| Abgewiesen | Anzahl und Prozentsatz der E-Mails, die nicht zugestellt werden konnten (z. B. wegen ungültiger Adresse oder vollem Postfach). |
| Versandzeit | Datum und Uhrzeit des tatsächlichen Versands (sortierbar). Leer, wenn noch nicht versendet. |

**Standardsortierung:** Neueste Newsletter zuerst (nach Erstellungsdatum).

**Suche:** Über das Suchfeld kannst du Newsletter nach ihrem Namen durchsuchen.

**Filter:**
- **Newsletter-Listen:** Filtert die Newsletter-Kampagnen nach zugeordneten Newsletter-Listen. Mehrfachauswahl ist möglich, sodass du Newsletter anzeigen kannst, die einer bestimmten Kombination von Listen zugeordnet sind.

**Leer-Zustand:** Wenn noch keine Newsletter-Kampagnen erstellt wurden, zeigt die Liste einen entsprechenden Hinweis an.

Ein Klick auf einen Newsletter in der Liste öffnet die Inhaltsbearbeitung dieses Newsletters.

## Aktionen

### In der Listenansicht

- **Newsletter erstellen:** Über die Schaltfläche in der Kopfzeile kannst du einen neuen Newsletter anlegen. Es öffnet sich zunächst das Formular mit den Grundeinstellungen (Name, Newsletter-Listen, Segmente). Nach dem Speichern wirst du direkt zur Inhaltsbearbeitung weitergeleitet, um den Newsletter zu gestalten.

### Pro Newsletter (Zeilenaktionen)

Jeder Newsletter in der Liste bietet über das Aktionsmenü folgende Möglichkeiten:

- **Empfänger anzeigen:** Zeigt die detaillierte Liste aller Empfänger mit ihrem jeweiligen Zustellstatus. Diese Aktion ist nur sichtbar, wenn der Versand des Newsletters bereits gestartet wurde.
- **Umbenennen:** Öffnet ein Dialogfenster, in dem du den internen Namen des Newsletters ändern kannst. Der Name dient nur als interne Bezeichnung und wird den Empfängern nicht angezeigt.
- **Duplizieren:** Erstellt eine Kopie des Newsletters. Der Name der Kopie wird automatisch mit dem Zusatz „Kopie" versehen. Im erscheinenden Dialog kannst du den Namen vor dem Erstellen anpassen. Versandzeiten werden beim Duplizieren zurückgesetzt – die Kopie wird also nicht automatisch versendet.
- **Löschen:** Löscht den Newsletter nach einer Bestätigung dauerhaft. Bereits versendete E-Mails werden dadurch nicht zurückgerufen.

## Unterseiten eines Newsletters

Beim Bearbeiten eines Newsletters stehen über eine Navigation am oberen Rand folgende Unterseiten zur Verfügung:

### Inhalt

- Hier bearbeitest du den Newsletter-Inhalt über einen visuellen Editor. Du kannst Texte, Bilder und Links einfügen und den Betreff des Newsletters festlegen.
- **Vorschau herunterladen:** Über die Schaltfläche „Vorschau" kannst du eine PDF-Version des Newsletters herunterladen, um das Ergebnis vor dem Versand zu prüfen.

### Versenden

Auf dieser Unterseite steuerst du den Versand des Newsletters:

- **Versandzeit wählen:** Du hast zwei Optionen:
  - **Jetzt:** Der Newsletter wird sofort nach Bestätigung versendet.
  - **Später:** Der Newsletter wird zu einem von dir gewählten Datum und Uhrzeit automatisch versendet. Die Versandzeit muss in der Zukunft liegen.
- **Testmail versenden:** Sendet eine Testversion des Newsletters an eine von dir eingegebene E-Mail-Adresse. So kannst du das Ergebnis prüfen, bevor der eigentliche Versand erfolgt.
- **Vorschau:** Zeigt eine Vorschau des Newsletters direkt im Browser an.
- **Newsletter versenden:** Löst den tatsächlichen Versand aus. Vor dem Versand wird eine Bestätigung eingeholt, die den Betreff und die Empfängergruppen anzeigt. Du siehst hier auch die voraussichtliche Anzahl der Empfänger.
  - Wenn ungültige E-Mail-Adressen unter den Empfängern gefunden werden, wird eine Warnung mit der Liste der betroffenen Adressen angezeigt. Du kannst den Versand trotzdem fortsetzen – die betroffenen Empfänger erhalten den Newsletter dann jedoch nicht.
  - Nach der Bestätigung beginnt der Versand. Je nach Empfängeranzahl kann dies einige Zeit dauern.

### Empfänger

Diese Unterseite ist nur sichtbar, wenn der Versand des Newsletters bereits gestartet wurde.

Sie zeigt eine Tabelle aller Empfänger mit detailliertem Status pro Nachricht:

| Spalte | Beschreibung |
|--------|--------------|
| E-Mail-Adresse | Die E-Mail-Adresse des Empfängers. |
| Name | Der Name des Empfängers. |
| Versandzeit | Zeitpunkt, zu dem die E-Mail an den Empfänger gesendet wurde. |
| Zustellungszeit | Zeitpunkt, zu dem die E-Mail beim Empfänger zugestellt wurde. |
| Öffnungszeit | Zeitpunkt, zu dem der Empfänger die E-Mail geöffnet hat (sofern gemessen). |
| Klickzeit | Zeitpunkt, zu dem der Empfänger einen Link im Newsletter geklickt hat. |
| Abgewiesen | Zeigt an, ob die E-Mail abgewiesen wurde (weich oder hart), inklusive des Grundes. Ein „weiches" Abweisen bedeutet ein vorübergehendes Problem (z. B. volles Postfach), ein „hartes" Abweisen bedeutet ein dauerhaftes Problem (z. B. Adresse existiert nicht). |

**Filter:** Du kannst die Empfängerliste nach Status filtern, z. B. nur zugestellte, nur geklickte oder nur abgewiesene Empfänger anzeigen.

**Export:** Die gesamte Empfängerliste kann exportiert werden, z. B. um sie in einem Tabellenkalkulationsprogramm weiterzuverarbeiten.

## Berechtigungen

- Das Tool **Newsletter** muss aktiviert sein, damit der Bereich in der Navigation sichtbar ist.
- Für die Empfänger-Detailansicht eines Newsletters ist die Berechtigung **Anschauen** für das Tool **Newsletter** erforderlich.

## Validierung & Fehlermeldungen

| Regel | Fehlermeldung / Hinweis | Lösung |
|-------|------------------------|--------|
| Name ist ein Pflichtfeld | „Das Feld Name muss ausgefüllt werden." | Trage einen internen Namen für den Newsletter ein. |
| Mindestens eine Newsletter-Liste muss gewählt werden | „Mindestens eine Newsletter-Liste muss gewählt werden." | Wähle mindestens eine Newsletter-Liste aus, an die der Newsletter versendet werden soll. |
| Versandzeit muss angegeben werden (bei geplantem Versand) | „Die Versandzeit muss angegeben werden." | Wähle ein Datum und eine Uhrzeit für den geplanten Versand aus. |
| Versandzeit muss in der Zukunft liegen | „Die Versandzeit muss in der Zukunft liegen." | Wähle einen Zeitpunkt, der in der Zukunft liegt. |
| Newsletter enthält keinen Abmelde-Link | „Der Newsletter enthält keinen ‚Unsubscribe'-Link und kann deshalb nicht versendet werden." | Gehe in die Inhaltsbearbeitung, markiere einen Textabschnitt (z. B. „Abmelden"), erstelle einen Link und wähle als Aktion **„Vom Newsletter abmelden"**. |
| Ungültige E-Mail-Adressen bei Empfängern | Eine Liste der betroffenen Empfänger mit ungültigen E-Mail-Adressen wird angezeigt. | Du kannst den Versand trotzdem fortsetzen. Die betroffenen Empfänger erhalten den Newsletter dann nicht. Korrigiere die E-Mail-Adressen im Bereich **Kontakte**, damit diese Empfänger zukünftige Newsletter erhalten. |
| Versand konnte nicht mehr gestoppt werden | „Der Newsletterversand konnte nicht mehr gestoppt werden, da der Versand zwischenzeitlich bereits begonnen hat." | Der Versand läuft bereits. Die E-Mails werden zugestellt und können nicht zurückgerufen werden. |
| Zu viele Empfänger in der Testphase | „In der Testphase kann eine Newsletter-Kampagne maximal X Empfänger haben." | Kontaktiere den Support, um die Beschränkung der Testphase aufheben zu lassen. |

## Beziehungen zu anderen Bereichen

- **Newsletter-Listen:** Jeder Newsletter ist einer oder mehreren Newsletter-Listen zugeordnet. Die Newsletter-Listen bestimmen, welche Kontakte den Newsletter erhalten. Die Verwaltung der Newsletter-Listen erfolgt in den Newsletter-Einstellungen.
- **Segmente:** Newsletter können optional auf bestimmte Kontakt-Segmente eingeschränkt werden. Segmente werden im Bereich **Kontakte** definiert und ermöglichen es, nur einen Teil der Abonnenten einer Newsletter-Liste anzuschreiben.
- **Kontakte:** Die Empfänger eines Newsletters ergeben sich aus den Kontakten, die die ausgewählten Newsletter-Listen abonniert haben und (falls gewählt) in den ausgewählten Segmenten enthalten sind.
- **Newsletter-Serien:** Newsletter-Kampagnen, die zu einer Newsletter-Serie gehören, werden in der Newsletter-Listenansicht nicht angezeigt. Diese werden ausschließlich über den Bereich **Newsletter-Serien** verwaltet.

---

## resource: App\Filament\App\Resources\FixedAssetResource

**Entity:** App\Filament\App\Resources\FixedAssetResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/FixedAssetResource.php`  
**Updated:** 2026-02-14 14:01:31  

Now I have all the information I need. Let me do the detailed fact-checking. Key findings:

1. **Inventarnummer disabled logic**: `->disabled(! $withTransfer)` — when `$withTransfer = true` (the addExistingFixedAsset action), `disabled(false)` = NOT disabled. So for the "Bestehendes Anlagegut hinzufügen" form, the inventory number IS editable. The doc says "nicht bearbeitbar" — this is **WRONG** for the transfer form.

2. **`is_being_depreciated` toggle**: Uses `->disabled()` not `->visible()`. The doc says "nur bei linearer oder degressiver Abschreibung verfügbar" — it's actually always visible but disabled for non-linear/degressive. This is partially correct but should say "disabled/deaktiviert" instead of "verfügbar".

3. **`keep_memorable_value` toggle**: Uses `->visible()` with `in_array($get('depreciation_mode'), [DepreciationMode::Linear->value, DepreciationMode::Degressive])` — Note: this compares a string value to an enum case (Degressive without ->value). This is intentional PHP behavior where loose comparison might work. The doc says "nur bei linearer oder degressiver Abschreibung sichtbar" — correct.

4. **Depreciation hint text swap**: Line 182 shows `$withTransfer ? __('financials.fixed-assets.depreciation-duration-help') : __('financials.fixed-assets.depreciation-duration-help-transfer')` — when withTransfer is TRUE, it shows the generic help, not the transfer-specific one. This seems like a bug but it's what the code does.

5. **Projekt field**: `->visible($withTransfer && feature('projects'))` — the doc says the project field is shown when the "Projekte" tool is activated. This is correct.

6. **View action**: Shows depreciations table (Date, Amount, Remaining Value). The doc says "Detailansicht des Anlageguts mit allen gespeicherten Informationen und den zugehörigen Abschreibungsbuchungen" — actually the view only shows the depreciation table, NOT all stored information.

7. **Deleting behavior**: Model `deleting` event nullifies `fixed_asset_id` on FinancialEventItems and deletes depreciations. The doc's claim is correct.

8. **Filter**: `SelectFilter::make('purchase_date')->multiple()->preload()` — without explicit options, Filament v4 SelectFilter will try to auto-populate distinct values from the column. The doc says "Mehrfachauswahl möglich" — correct.

9. **canAccess**: `auth()->user()->hasFeature('accounting-extended')` — doc says "Erweiterte Buchhaltung" tool must be activated — correct.

10. **Creating event**: `inventory_number` is overwritten in `creating` boot: `$fixedAsset->inventory_number = FixedAsset::getNextInventoryNumber()` — so regardless of user input, the inventory number is always auto-assigned on creation. The form pre-fills it but the model overwrites it.

11. **Abschreibungskonto**: Uses `->accounts(kontenrahmen()->getDepreciationAccounts())` — not limited to "Anlagekonten" but to depreciation accounts specifically. The doc's claim about Anschaffungskonto only showing "Anlagekonten" is correct (uses `getFixedAssetCategories()`).

12. **Sphäre label**: Translation says `'cost-location' => 'Sphäre'` — the doc uses both "Sphäre" and "Kostenstelle", which matches the code comment.

Now let me output the corrected documentation:

## Übersicht

Die Anlagenverwaltung ermöglicht es dir, Anlagegüter deiner Organisation zu erfassen, zu verwalten und deren Abschreibungen automatisch berechnen zu lassen. Du kannst bestehende Anlagegüter hinzufügen, einsehen, bearbeiten und löschen. Die Anlagenverwaltung ist Teil des Bereichs **Finanzen** und setzt das aktivierte Tool **Erweiterte Buchhaltung** voraus.

## Navigation

- Die Anlagenverwaltung findest du in der Seitenleiste unter der Menügruppe **Finanzen**.
- **Voraussetzung:** Das Tool **Erweiterte Buchhaltung** muss für deine Organisation aktiviert sein, damit die Anlagenverwaltung in der Navigation sichtbar ist. Ist das Tool nicht aktiviert, wird der Menüpunkt nicht angezeigt.

## Formularfelder

### Bestehendes Anlagegut hinzufügen

Über die Header-Aktion **„Bestehendes Anlagegut hinzufügen"** kannst du ein bereits vorhandenes Anlagegut erfassen – etwa bei einer Migration aus einem Vorsystem. Nach dem Speichern werden die zugehörigen Abschreibungsbuchungen automatisch erstellt.

Folgende Felder stehen im Formular zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Inventarnummer | Textfeld | Ja | Wird automatisch vom System vergeben. Du kannst den Wert im Formular zwar sehen und anpassen, beim Speichern wird die Inventarnummer jedoch immer automatisch vom System neu vergeben. |
| Bezeichnung | Textfeld | Ja | Ein aussagekräftiger Name für das Anlagegut (z. B. „Laptop Dell Latitude 5540"). |
| Anschaffungsdatum | Datumsfeld | Ja | Das Datum, an dem deine Organisation das Anlagegut ursprünglich gekauft hat. |
| Anschaffungsbetrag (netto) | Geldbetrag | Ja | Der Nettobetrag, den deine Organisation ursprünglich für das Anlagegut bezahlt hat. Dieser Wert beeinflusst, welche Abschreibungsarten zur Auswahl stehen (z. B. Sofortabschreibung nur bei geringwertigen Wirtschaftsgütern). |
| Übernahmedatum | Datumsfeld | Ja | Das Datum, zu dem das Anlagegut in die Anlagenverwaltung von ngo.tools übernommen wird. |
| Übernahmebetrag (netto) | Geldbetrag | Ja | Der aktuelle Buchwert bei Übernahme aus dem Vorsystem. Dieser entspricht in der Regel den Nettoanschaffungskosten abzüglich aller bisherigen Abschreibungen. |
| Anschaffungskonto | Kontoauswahl | Ja | Das Buchungskonto für die Anschaffung. Es werden nur Anlagekonten zur Auswahl angeboten. Bei Auswahl eines Kontos werden automatisch ein passendes Abschreibungskonto und eine Abschreibungsdauer vorgeschlagen. |
| Anlagegut wird abgeschrieben | Schalter | Nein | Standardmäßig aktiviert. Deaktiviere diesen Schalter, wenn ein Anlagegut nicht abgeschrieben werden soll (z. B. bei Grundstücken oder Wertpapieren). Dieser Schalter ist nur bei linearer oder degressiver Abschreibung bearbeitbar, bei anderen Abschreibungsmodi ist er deaktiviert. |
| Abschreibungskonto | Kontoauswahl | Ja | Das Konto, auf dem die Abschreibungen gebucht werden. Wird automatisch auf Basis des gewählten Anschaffungskontos vorgeschlagen. Dieses Feld ist nur bei linearer oder degressiver Abschreibung bearbeitbar. |
| Abschreibungsdauer (in Monaten) | Ganzzahl | Ja | Die gewöhnliche Nutzungsdauer des Anlageguts in Monaten (i. d. R. laut AfA-Tabelle). Die verbleibende Abschreibungsdauer wird automatisch anhand des Übernahmedatums berechnet. Dieses Feld ist nur bei linearer oder degressiver Abschreibung bearbeitbar. |
| Abschreibungsmodus | Auswahl (Radio) | Ja | Die verfügbaren Optionen hängen vom eingegebenen Anschaffungsbetrag ab: **Linear** – gleichmäßige Verteilung über die Nutzungsdauer. **Degressiv** – höhere Abschreibung in den ersten Jahren. **Sofortabschreibung** – für geringwertige Wirtschaftsgüter (GWG). **Sammelposten** – für Anschaffungen in einem bestimmten Betragsbereich. Dieses Feld wird nur angezeigt, wenn mehr als ein Abschreibungsmodus für den eingegebenen Betrag verfügbar ist. |
| Degressive Abschreibung Prozent | Ganzzahl | Ja | Der prozentuale Abschreibungssatz pro Jahr. Dieses Feld ist nur sichtbar, wenn du als Abschreibungsmodus „Degressiv" gewählt hast. |
| Sphäre | Auswahl | Ja | Zuordnung des Anlageguts zu einer Sphäre deiner Organisation. |
| Projekt | Auswahl | Ja | Zuordnung des Anlageguts zu einem Projekt. Dieses Feld ist nur sichtbar, wenn das Tool **Projekte** für deine Organisation aktiviert ist. |
| Erinnerungswert | Schalter | Nein | Wenn aktiviert, wird das Anlagegut nach vollständiger Abschreibung mit einem Erinnerungswert von 1 € im Anlagevermögen behalten. Standardmäßig aktiviert. Dieses Feld ist nur bei linearer oder degressiver Abschreibung sichtbar. |

### Bearbeiten

Beim Bearbeiten eines bestehenden Anlageguts in der Anlagenverwaltung kann ausschließlich die **Bezeichnung** geändert werden. Alle anderen Felder (z. B. Anschaffungsdatum, Beträge, Abschreibungsmodus) sind nach dem Anlegen nicht mehr änderbar, da sie Auswirkungen auf bereits erstellte Abschreibungsbuchungen hätten.

## Tabellenansicht / Listenansicht

Die Listenansicht der Anlagenverwaltung zeigt alle erfassten Anlagegüter deiner Organisation in einer Tabelle.

Folgende Spalten werden angezeigt:

| Spalte | Beschreibung |
|--------|--------------|
| Inventarnummer | Die vom System automatisch vergebene, fortlaufende Nummer des Anlageguts. |
| Bezeichnung | Der Name bzw. die Beschreibung des Anlageguts. |
| Abschreibungsart | Die gewählte Art der Abschreibung (Linear, Degressiv, Sofortabschreibung oder Sammelposten). |
| Anschaffungsdatum | Das Datum, an dem das Anlagegut ursprünglich gekauft wurde. |
| Anschaffungsbetrag (netto) | Der ursprüngliche Nettobetrag der Anschaffung in der Organisationswährung. |
| Restwert | Der aktuelle Buchwert des Anlageguts nach Abzug aller bisherigen Abschreibungen. |

### Filter

In der Listenansicht der Anlagenverwaltung steht folgender Filter zur Verfügung:

- **Anschaffungsdatum**: Du kannst nach einem oder mehreren Anschaffungsdaten filtern (Mehrfachauswahl möglich).

## Aktionen

### Header-Aktionen

- **Bestehendes Anlagegut hinzufügen**: Öffnet ein Formular zur Erfassung eines bereits vorhandenen Anlageguts (z. B. bei Migration aus einem Vorsystem). Nach dem erfolgreichen Anlegen werden die Abschreibungsbuchungen automatisch vom System erstellt. Das neue Anlagegut erscheint anschließend in der Listenansicht der Anlagenverwaltung.

### Zeilen-Aktionen

Für jedes Anlagegut in der Listenansicht der Anlagenverwaltung stehen folgende Aktionen zur Verfügung:

- **Anzeigen**: Öffnet eine Detailansicht mit den zugehörigen Abschreibungsbuchungen (Datum, Betrag, Restwert).
- **Bearbeiten**: Öffnet ein Formular, in dem du die Bezeichnung des Anlageguts ändern kannst. Alle anderen Felder sind nicht bearbeitbar.
- **Löschen**: Entfernt das Anlagegut aus der Anlagenverwaltung. **Achtung:** Zugehörige Abschreibungsbuchungen werden ebenfalls unwiderruflich gelöscht. Falls das Anlagegut mit Positionen von Finanzereignissen verknüpft ist, wird nur die Verknüpfung aufgelöst – die Finanzereignisse selbst bleiben bestehen.

### Bulk-Aktionen

- **Löschen**: Du kannst mehrere Anlagegüter in der Listenansicht der Anlagenverwaltung auswählen und gleichzeitig löschen. Es gelten dieselben Auswirkungen wie beim Löschen einzelner Anlagegüter (Abschreibungsbuchungen werden gelöscht, Verknüpfungen zu Finanzereignissen werden aufgelöst).

## Berechtigungen

- Das Tool **Erweiterte Buchhaltung** muss für deine Organisation aktiviert sein, damit die Anlagenverwaltung zugänglich ist. Ohne dieses Tool ist der Menüpunkt in der Seitenleiste nicht sichtbar und die Anlagenverwaltung kann nicht verwendet werden.

## Beziehungen

Die Anlagenverwaltung steht in Verbindung mit folgenden Bereichen:

- **Finanzereignisse**: Anlagegüter können mit Positionen von Finanzereignissen verknüpft sein. Beim Löschen eines Anlageguts wird lediglich die Verknüpfung aufgelöst – das Finanzereignis und seine Positionen bleiben bestehen.
- **Abschreibungen**: Zu jedem Anlagegut werden automatisch Abschreibungsbuchungen erstellt und verwaltet. Diese werden beim Anlegen des Anlageguts generiert und beim Löschen mit entfernt.
- **Anschaffungskonto / Abschreibungskonto**: Jedes Anlagegut ist mit Konten aus dem Kontenrahmenplan verknüpft – einem Anschaffungskonto und (bei linearer oder degressiver Abschreibung) einem Abschreibungskonto.
- **Sphäre**: Jedes Anlagegut ist einer Sphäre zugeordnet.
- **Projekte**: Anlagegüter können optional einem Projekt zugeordnet werden, sofern das Tool **Projekte** für deine Organisation aktiviert ist.
- **Sammelposten**: Bei der Abschreibungsart „Sammelposten" werden mehrere Anlagegüter eines Anschaffungsjahres in einem gemeinsamen Pool zusammengefasst und über einen festen Zeitraum abgeschrieben.

## Häufige Hinweise und Validierung

- **Anschaffungsbetrag bestimmt Abschreibungsmodus**: Der verfügbare Abschreibungsmodus hängt vom eingegebenen Netto-Anschaffungsbetrag ab. Wenn du den Betrag änderst, kann sich die Auswahl der verfügbaren Modi ändern. Wird nur ein Modus unterstützt, wird das Auswahlfeld nicht angezeigt.
- **Pflichtfelder**: Alle als „Pflicht" gekennzeichneten Felder müssen ausgefüllt werden.
- **Automatische Vorschläge**: Wenn du ein Anschaffungskonto auswählst, werden Abschreibungskonto und Abschreibungsdauer automatisch vorgeschlagen. Du kannst diese Vorschläge bei Bedarf anpassen.
- **Verbleibende Abschreibungsdauer**: Die verbleibende Abschreibungsdauer wird automatisch aus der Gesamtdauer und dem Übernahmedatum berechnet. Du musst sie nicht manuell eingeben.
- **Löschen ist endgültig**: Das Löschen eines Anlageguts kann nicht rückgängig gemacht werden. Alle zugehörigen Abschreibungsbuchungen werden ebenfalls gelöscht.

---

## resource: App\Filament\App\Resources\LotteryResource

**Entity:** App\Filament\App\Resources\LotteryResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/LotteryResource.php`  
**Updated:** 2026-02-14 13:56:31  

Now I have all the information I need to do a thorough fact-check. Let me compile the verified documentation.

Key findings to correct:
1. **Status "Ausgelost"** does NOT exist in the enum. There are only 3 statuses: InPreparation, Running, Finished. The "drawn" state is tracked by `drawn_at` timestamp.
2. **"Losnummer von/bis"** in offline tickets form is actually **"Ticketnummer von/bis"**.
3. **Permission model**: The code uses `can('update', $record)` which maps to `hasPermissionTo('write lottery')` - not "Bearbeiten" permission. The permission is **write lottery**.
4. **"Confirm" order action** does NOT check permissions explicitly in the code.
5. **"Send tickets" order action** does NOT check permissions explicitly.
6. **Export in RangesRelationManager** is a **record action**, not a header action.
7. **"Einbindung in Webseite"** is an EditAction on an Embedding record, not just "showing configuration options".
8. **"Lotterie starten" prerequisite**: The action is **disabled** (not hidden) when print_areas is null. The doc says "kann nicht gestartet werden" which is correct.
9. **"Auslosung durchführen"** button label comes from translation `miscellaneous.lotteries.run-draw.title` = "Auslosung durchführen" - correct.
10. **Table `tickets_count`** counts tickets with `lottery_ticket_order_id` not null - these are tickets assigned to confirmed orders (sold), described as "Berechtigte Lose" in the translation.
11. **"Lotterie erstellen"** opens in a modal (7xl) - correct per ListLotteries code.
12. **No "Ausgelost" status** means the doc's lifecycle is wrong. After "Beendet", there's no separate status, just `drawn_at` gets set.

## Übersicht

Die Lotterie-Funktion ermöglicht es, Lotterien zu erstellen und vollständig zu verwalten. Du kannst Lotterien anlegen, Losnummern-Bereiche definieren, Lose generieren und verteilen, Bestellungen verwalten und Auslosungen durchführen. Die Funktion befindet sich im Bereich **Fundraising** der Anwendung.

Eine Lotterie durchläuft folgende Status: **In Vorbereitung** → **Laufend** (Lose können bestellt werden) → **Beendet** (keine weiteren Bestellungen möglich). Zusätzlich wird bei der Auslosung ein Ziehungsdatum gesetzt (`drawn_at`), das anzeigt, dass die Auslosung durchgeführt wurde. Je nach Status stehen unterschiedliche Aktionen zur Verfügung.

## Navigation

- **Seitenleiste → Fundraising → Lotterien**
- Die Funktion ist in der Menügruppe „Fundraising" zu finden.
- **Voraussetzung:** Das Feature **lottery** muss für den Benutzer aktiviert sein, damit der Menüpunkt sichtbar ist.

## Formularfelder

Das Formular zum Erstellen und Bearbeiten einer Lotterie ist in mehrere Tabs unterteilt. Beim Erstellen wird zunächst nur der Tab „Grundeinstellungen" angezeigt. Die weiteren Tabs stehen nach dem Speichern zur Verfügung.

### Tab „Grundeinstellungen"

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name der Lotterie | Textfeld | Ja | Der Name wird z. B. in E-Mails, Links und in der Listenansicht verwendet. |
| Spendenseite | Textfeld (URL) | Nein | URL der Spendenseite aus dem Twingle-Projekt. |
| Mail-Adresse | Auswahl (Mail-Adresse) | Nein | Absender-E-Mail-Adresse für alle Lotterie-Mails. Nur beim Bearbeiten sichtbar. |
| Los-Vorlage | Dateiupload (PDF) | Nein | PDF-Vorlage, in die die Losnummern eingetragen werden. Nur beim Bearbeiten sichtbar. Über den Button „Losnummern-Bereich auswählen" kannst du den Bereich in der Vorlage markieren, in dem die Losnummern gedruckt werden sollen. Der Button ist nur aktiv, wenn eine PDF-Vorlage hochgeladen wurde. **Hinweis:** Der Losnummern-Bereich muss markiert sein, bevor die Lotterie gestartet werden kann. |

### Tab „Verlosung"

**Bereich „Lose":**

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Anzahl der Lose | Zahleneingabe | Ja | Gesamtanzahl der Lose für diese Lotterie. |
| Anzahl der Preise | Zahleneingabe | Ja | Gesamtanzahl der Preise, die bei der Auslosung verlost werden. |

**Bereich „Losbestellungen":**

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Maximale Anzahl | Zahleneingabe | Ja | Maximale Anzahl an Losen, die pro Bestellung bestellt werden können. |
| Vorschlag Anzahl | Zahleneingabe | Ja | Voreingestellte Anzahl zu kaufender Lose. Der Teilnehmer kann diesen Wert ändern. |
| Spendenbetrag | Geldbetrag | Ja | Vorgeschlagener Spendenbetrag je Los. |
| Newsletter | Mehrfachauswahl | Nein | Auswahl, welche Newsletter abonniert werden können. Nur sichtbar, wenn das Feature „Newsletter" aktiviert ist. |

### Tab „Textbausteine"

Dieser Tab ist nur beim Bearbeiten einer bestehenden Lotterie sichtbar. Hier kannst du alle Texte anpassen, die den Teilnehmern auf der Verlosungsseite und in E-Mails angezeigt werden. Alle Textfelder unterstützen Formatierungen (fett, kursiv, Listen, Überschriften, Links).

**Unter-Tab „Allgemein":**

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Lotterie noch nicht gestartet | Rich-Text-Editor | Nein | Dieser Text erscheint, wenn die Lotterie noch nicht gestartet wurde. |
| Lotterie bereits abgeschlossen | Rich-Text-Editor | Nein | Dieser Text erscheint, wenn die Lotterie bereits abgeschlossen wurde. |
| Keine Lose (mehr) verfügbar | Rich-Text-Editor | Nein | Dieser Text erscheint, wenn keine Lose mehr zur Verfügung stehen. |

**Unter-Tab „Verlosungsseite":**

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Intro | Rich-Text-Editor | Nein | Dieser Text erscheint unterhalb der Anzahl der Lose. |
| Einleitung Spendenbetrag | Rich-Text-Editor | Nein | Dieser Text erscheint vor dem Eingabefeld für den Spendenbetrag. |
| Newsletter | Rich-Text-Editor | Nein | Dieser Text erscheint oberhalb der Auswahl der Newsletter. |

**Unter-Tab „Spendenseite":**

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Spendenseite Intro | Rich-Text-Editor | Nein | Dieser Text erscheint oberhalb des Spendenformulars. |

**Unter-Tab „Bestätigungsseite":**

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Bestätigung erfolgreich | Rich-Text-Editor | Nein | Dieser Text erscheint, wenn die Bestätigung erfolgreich war. |
| Keine Lose mehr verfügbar | Rich-Text-Editor | Nein | Dieser Text erscheint, wenn zum Zeitpunkt der Bestätigung keine Lose mehr verfügbar waren. |
| Bestätigung fehlgeschlagen | Rich-Text-Editor | Nein | Dieser Text erscheint, wenn die Bestätigung fehlgeschlagen ist. |

**Unter-Tab „Emails":**

Hier kannst du die E-Mail-Vorlagen für die Lotterie anpassen. In Betreff und Text stehen folgende Platzhalter zur Verfügung:

| Platzhalter | Beschreibung |
|-------------|--------------|
| `{lottery}` | Name der Lotterie |
| `{clientName}` | Name des Bestellers |
| `{clientEmail}` | Email-Adresse des Bestellers |
| `{ticketNumbers}` | Losnummern (kommagetrennt) |
| `{organizationName}` | Name des Vereins |
| `{confirmButton}` | Button zum Bestätigen |

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Opt-In-Email – Betreff | Textfeld | Nein | Betreff der Bestätigungs-E-Mail. Platzhalter können verwendet werden. |
| Opt-In-Email – Text | Rich-Text-Editor | Nein | Inhalt der Bestätigungs-E-Mail. Diese E-Mail wird nach der Bestellung verschickt, damit der Teilnehmer seine E-Mail-Adresse bestätigt. |
| Text des Bestätigungs-Buttons | Textfeld | Nein | Beschriftung des Bestätigungs-Buttons in der Opt-In-Email. |
| Email mit Losen – Betreff | Textfeld | Nein | Betreff der E-Mail, die nach erfolgreicher E-Mail-Bestätigung mit den zugewiesenen Losen verschickt wird. |
| Email mit Losen – Text | Rich-Text-Editor | Nein | Inhalt der E-Mail mit den Losen. Diese E-Mail wird nach der erfolgreichen E-Mail-Bestätigung verschickt und enthält die zugewiesenen Losnummern. |

## Tabellenansicht / Listenansicht

Die Listenansicht der Lotterien zeigt alle angelegten Lotterien mit folgenden Spalten:

| Spalte | Beschreibung |
|--------|--------------|
| Datum | Erstellungsdatum der Lotterie. |
| Name | Name der Lotterie. |
| Anzahl der Lose | Gesamtanzahl der definierten Lose. |
| Berechtigte Lose | Anzahl der Lose, die einer Bestellung zugeordnet sind. |
| Ziehungsdatum | Datum und Uhrzeit der Auslosung. Bleibt leer, solange noch keine Auslosung durchgeführt wurde. |

Es sind keine Filter oder Suchoptionen in der Listenansicht vorhanden.

## Aktionen

### Aktionen in der Listenansicht

- **Lotterie erstellen**: Über den Button in der Kopfzeile kannst du eine neue Lotterie anlegen. Das Formular öffnet sich in einem Modal-Fenster.
- **Lotterie anzeigen**: Durch Klick auf eine Zeile in der Tabelle wird die Detailansicht der Lotterie geöffnet.

### Aktionen in der Detailansicht

- **Statistiken**: Öffnet ein Modal mit folgenden Kennzahlen: Lose insgesamt, gültige produzierte Lose, verkaufte Lose (online), verfügbare Lose (online), reservierte („unabgeholte") Lose, Bestellungen, ausgeschlossene Lose.
- **Bearbeiten**: Öffnet das Bearbeitungsformular im Modal-Fenster. Diese Aktion ist nur sichtbar, solange die Auslosung noch nicht durchgeführt wurde (`drawn_at` ist leer). Nach der Auslosung können keine Änderungen mehr vorgenommen werden.
- **Einbindung in Webseite**: Öffnet ein Bearbeitungsformular für die Einbindungskonfiguration der Lotterie-Seite in eine externe Webseite.
- **Vorschau**: Öffnet eine Vorschau der Lotterie-Seite, so wie sie für Teilnehmer aussehen wird.
- **Lotterie starten**: Setzt die Lotterie auf den Status „Laufend", sodass Teilnehmer Lose bestellen können. Diese Aktion ist nur sichtbar, wenn die Lotterie den Status „In Vorbereitung" hat und der Benutzer die Schreibberechtigung für Lotterien besitzt. Es wird eine Bestätigung abgefragt. **Voraussetzung:** Der Losnummern-Bereich muss in der PDF-Vorlage markiert sein – andernfalls ist die Aktion deaktiviert.
- **Lotterie beenden**: Setzt die Lotterie auf den Status „Beendet", sodass keine weiteren Lose bestellt werden können. Diese Aktion ist nur sichtbar, wenn die Lotterie den Status „Laufend" hat und der Benutzer die Schreibberechtigung für Lotterien besitzt. Es wird eine Bestätigung abgefragt.
- **Auslosung durchführen**: Führt die Auslosung durch. Es wird eine Bestätigungs-Meldung angezeigt, die die Anzahl der Preise, Gesamtlose und ausgegebenen Lose enthält. Diese Aktion ist nur sichtbar, wenn noch keine Auslosung stattgefunden hat (`drawn_at` ist leer) und der Benutzer die Schreibberechtigung für Lotterien besitzt. Die Auslosung ist deaktiviert, solange die Lotterie noch den Status „In Vorbereitung" hat. **Achtung:** Die Auslosung kann nicht rückgängig gemacht werden.

## Beziehungen

Die Detailansicht einer Lotterie enthält drei verknüpfte Bereiche, die als separate Tabellen unterhalb der Stammdaten angezeigt werden.

### Bestellungen

Der Bestellungen-Bereich der Lotterie zeigt alle eingegangenen Losbestellungen.

**Spalten:**

| Spalte | Beschreibung |
|--------|--------------|
| Bestellnummer | Eindeutige Nummer der Bestellung. Sortierbar und durchsuchbar. |
| Datum | Zeitpunkt der Bestellung. Sortierbar. |
| Bestätigt | Zeitpunkt der E-Mail-Bestätigung durch den Teilnehmer. Bleibt leer, wenn die E-Mail noch nicht bestätigt wurde. Sortierbar. |
| Name | Name des Bestellers. Sortierbar und durchsuchbar. |
| E-Mail | E-Mail-Adresse des Bestellers. |
| Angekündigte Spende | Vom Besteller angegebener Spendenbetrag. Sortierbar. |
| Anzahl Lose | Anzahl der bestellten Lose. Sortierbar. |
| Newsletter-Anmeldungen | Vom Besteller ausgewählte Newsletter. Nur sichtbar, wenn Newsletter für die Lotterie konfiguriert sind. Durchsuchbar. |

**Filter:** Du kannst nach dem Bestätigungsstatus filtern (Bestätigt: Ja / Nein / Alle).

**Aktionen pro Bestellung:**

- **Teilnahme bestätigen**: Bestätigt die Bestellung manuell, ohne dass der Teilnehmer den E-Mail-Link klicken muss. Nur sichtbar bei unbestätigten Bestellungen.
- **Lose per Email senden**: Versendet die E-Mail mit den Losen erneut an den Besteller. Nur sichtbar bei bestätigten Bestellungen.
- **Download**: Lädt die Losnummern der Bestellung als CSV-Datei herunter. Nur sichtbar bei bestätigten Bestellungen.
- **Download mit Code**: Lädt die Losnummern inklusive zugehörigem Code als CSV-Datei herunter. Nur sichtbar bei bestätigten Bestellungen.

**Kopfzeilen-Aktion:**

- **Export**: Exportiert alle Bestellungen der Lotterie als Excel-Datei.

### Lose

Der Lose-Bereich der Lotterie zeigt alle generierten Lose.

**Spalten:**

| Spalte | Beschreibung |
|--------|--------------|
| Losnummer | Nummer des Loses. Sortierbar und durchsuchbar. |
| Code | Zugehöriger eindeutiger Code des Loses. |
| Online verfügbar | Zeigt an, ob das Los für Online-Bestellungen verfügbar ist (ja/nein). |
| Preis | Preisnummer, die dem Los bei der Auslosung zugewiesen wurde. Nur sichtbar nach der Auslosung. Sortierbar. |
| Bestellung | Bestellnummer, der das Los zugeordnet ist. Bleibt leer, wenn das Los keiner Bestellung zugewiesen ist. Sortierbar. |
| Name | Name des Bestellers, dem das Los zugewiesen ist. Durchsuchbar. |
| E-Mail | E-Mail-Adresse des Bestellers. Durchsuchbar. |
| Ausgeschlossen | Zeigt an, ob das Los von der Ziehung ausgeschlossen ist (ja/nein). |

**Vordefinierte Ansichten:**

- **Alle**: Standardansicht, zeigt alle Lose der Lotterie.
- **Preise**: Zeigt nur Lose, denen bei der Auslosung eine Preisnummer zugewiesen wurde, sortiert nach Preisnummer.

**Kopfzeilen-Aktionen:**

- **Offline-Lose zur Ziehung vorsehen**: Markiert Offline-Lose (nicht online verfügbare Lose) in einem bestimmten Nummernbereich als ziehungsberechtigt. Im Formular musst du die Ticketnummer von/bis und einen Namen angeben. Nur sichtbar, wenn verfügbare Offline-Lose vorhanden sind, die Lotterie den Status „Laufend" hat und der Benutzer die Schreibberechtigung für Lotterien besitzt.
- **Lose erhalten**: Erstellt eine Losbestellung und versendet die Lose per E-Mail an den aktuell angemeldeten Benutzer. Im Formular kannst du Anzahl, Name und E-Mail-Adresse angeben. Nur sichtbar, wenn verfügbare Online-Lose vorhanden sind, die Lotterie den Status „Laufend" hat und der Benutzer die Schreibberechtigung für Lotterien besitzt.
- **Export**: Exportiert alle Lose der Lotterie als Excel-Datei.

**Massenaktionen:**

Du kannst in der Lose-Tabelle mehrere Lose auswählen und folgende Massenaktionen durchführen:

- **Lose von Verlosung ausschließen**: Schließt die ausgewählten Lose von der Ziehung aus. Es wird eine Bestätigung abgefragt.
- **Lose für Verlosung zulassen**: Hebt den Ausschluss der ausgewählten Lose auf, sodass sie wieder an der Ziehung teilnehmen können. Es wird eine Bestätigung abgefragt.

### Losnummern-Bereiche

Im Losnummern-Bereiche-Bereich der Lotterie werden die Nummernbereiche definiert, aus denen die Lose generiert werden. Du kannst mehrere Bereiche mit unterschiedlichen Einstellungen anlegen.

**Formularfelder beim Erstellen/Bearbeiten eines Losnummern-Bereichs:**

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Bezeichnung des Losnummern-Bereichs. |
| Typ | Auswahl | Ja | Art der Nummernvergabe: **Fortlaufend** oder **Zufällig**. Kann nach dem Erstellen nicht mehr geändert werden. |
| von | Zahleneingabe | Ja | Startnummer des Bereichs. Kann nach dem Erstellen nicht mehr geändert werden. |
| bis | Zahleneingabe | Ja | Endnummer des Bereichs. Muss größer als „von" sein. Kann nach dem Erstellen nicht mehr geändert werden. |
| Anzahl | Zahleneingabe | Ja | Anzahl der zu generierenden Lose aus dem Nummernbereich. Nur sichtbar und relevant, wenn der Typ „Zufällig" gewählt wurde. Kann nach dem Erstellen nicht mehr geändert werden. |
| Online verfügbar | Checkbox | Nein | Bestimmt, ob die Lose dieses Bereichs online bestellt werden können. |

**Tabellenspalten:** Name, Typ, von, bis, Anzahl, Online verfügbar.

**Aktionen:**

- **Neuen Bereich erstellen**: Legt einen neuen Losnummern-Bereich an und generiert die zugehörigen Lose.
- **Bereich bearbeiten**: Ermöglicht das Ändern von Name und Online-Verfügbarkeit. Die Felder Typ, von, bis und Anzahl können nach dem Erstellen nicht mehr geändert werden.
- **Export**: Exportiert den Losnummern-Bereich als Excel-Datei (als Aktion pro Zeile verfügbar).

**Validierung und häufige Fehlermeldungen:**

- **Überlappende Nummernbereiche**: Der Nummernbereich (von/bis) darf sich nicht mit bereits bestehenden Bereichen derselben Lotterie überschneiden. Falls doch, wird eine Fehlermeldung angezeigt.
- **Gesamtanzahl überschritten**: Die Summe aller Lose aus allen Bereichen darf die unter „Anzahl der Lose" definierte Gesamtanzahl der Lotterie nicht überschreiten.
- **Anzahl größer als Nummernbereich**: Bei zufälliger Nummernvergabe darf die gewünschte Anzahl an Losen nicht größer sein als die Spanne des Nummernbereichs (bis − von + 1).

## Berechtigungen

- Das Feature **lottery** muss für den Benutzer aktiviert sein, damit der Menüpunkt „Lotterien" unter „Fundraising" sichtbar ist.
- Die Aktionen **Lotterie starten**, **Lotterie beenden**, **Auslosung durchführen**, **Offline-Lose zur Ziehung vorsehen**, **Lose erhalten** und **Bearbeiten** erfordern die Berechtigung **write lottery** (`can('update')`).
- Nach der Auslosung (`drawn_at` ist gesetzt) ist die Aktion „Bearbeiten" nicht mehr sichtbar.

## Häufige Fragen und Hinweise

- **Lotterie kann nicht gestartet werden**: Stelle sicher, dass eine PDF-Vorlage hochgeladen und der Losnummern-Bereich darin markiert wurde (Button „Losnummern-Bereich auswählen" in den Grundeinstellungen). Ohne markierten Bereich ist die Aktion „Lotterie starten" deaktiviert.
- **Teilnehmer hat keine Lose erhalten**: Prüfe in der Bestellungen-Tabelle, ob die Bestellung bestätigt wurde (Spalte „Bestätigt"). Falls nicht, kannst du die Teilnahme manuell bestätigen oder den Teilnehmer bitten, den Bestätigungslink in der Opt-In-Email zu klicken.
- **Keine Lose mehr verfügbar, obwohl die Gesamtzahl nicht erreicht ist**: Prüfe, ob Lose als „Ausgeschlossen" markiert sind oder ob ein Teil der Lose als Offline-Lose konfiguriert ist und daher nicht online bestellt werden kann.
- **Auslosung kann nicht durchgeführt werden**: Die Lotterie darf nicht mehr den Status „In Vorbereitung" haben. Starte die Lotterie zuerst.

---

## resource: App\Filament\App\Resources\UserResource

**Entity:** App\Filament\App\Resources\UserResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/UserResource.php`  
**Updated:** 2026-02-14 13:36:37  

Now I have all the information I need to produce the fact-checked documentation. Let me compile my findings:

**Key corrections needed:**

1. **Warnhinweis "Kein Team zugeordnet"**: The documentation says the warning tells users to assign the user to a "Team" but the actual text says "Dieser Benutzer hat momentan keinerlei freigeschaltete Funktionen." - no mention of Team. Also the condition checks `isMemberOfAtLeastOneTeam()` OR `is_organization_admin`, not team membership alone. The doc's interpretation about "einem Team zuordnen" is editorial guidance not from the code text itself.

2. **Tool-Berechtigungen**: Documentation lists 3 levels (Keine, Anschauen, Bearbeiten) but code has 4 levels including "Verwalten" (configure).

3. **Validation messages**: The unique email message from Laravel's validation.php is `:Attribute ist bereits vergeben.` not "Diese Email-Adresse wird bereits verwendet." The required message is `:Attribute muss ausgefüllt werden.` which matches the doc pattern. Email format validation comes from Laravel standard.

4. **Warning row action**: The doc says clicking the warning leads to the "corresponding permissions page" - but there are TWO separate warning actions (one for projects, one for tools), each linking to the specific page.

5. **"Administrator entfernen" validation**: The code disables the toggle (doesn't show a validation error), and the helper text is "Es muss mindestens ein Administator vorhanden sein." (note: typo in code - "Administator" vs "Administrator").

6. **"Eigene Admin-Rechte entfernen"**: This is a helper text on the toggle, not a validation error.

7. **Delete user**: The code uses `canBeDeleted()` to disable the button, and shows tooltip text. It's not a validation error.

8. **Email uniqueness scope**: The code uses `->unique(ignoreRecord: true)` without scoping to organization, so it's globally unique, not per-organization.

9. **Impersonate action**: Present in code but should not be in user documentation.

10. **"Projekt-Berechtigungen" has Checkbox, not Toggle** for "Zugriff auf alle Projekte".

11. **"Zeiterfassung" has Checkbox, not Toggle**.

Now let me output the corrected documentation:

## Übersicht
In der Benutzerverwaltung können Organisations-Administratoren die Benutzer ihrer Organisation anlegen, bearbeiten, einladen und deren Zugriffsrechte auf Tools und Projekte verwalten. Jeder Benutzer kann per Email eingeladen werden, sich bei der ngo.tools-Plattform anzumelden. Die Benutzerverwaltung ist der zentrale Ort, um festzulegen, wer auf welche Funktionen und Daten innerhalb der Organisation Zugriff hat.

## Navigation
Die Benutzerverwaltung ist über die Einstellungen der Organisation erreichbar. In der Navigation wird sie mit einem Personengruppen-Icon dargestellt.

## Formularfelder

Die folgenden Felder stehen beim Anlegen und Bearbeiten eines Benutzers zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Der vollständige Name des Benutzers. |
| Email | Textfeld | Ja | Die Email-Adresse des Benutzers. Muss eindeutig sein. |
| Ist Administrator der Organisation | Schalter | Nein | Bestimmt, ob der Benutzer Administrator der Organisation ist. Administratoren haben automatisch Zugriff auf alle Tools und Projekte. Dieses Feld ist nur beim Bearbeiten sichtbar (nicht beim Erstellen). Der Schalter kann nicht deaktiviert werden, wenn es sich um den letzten verbleibenden Administrator handelt. |
| Hat einen Nextcloud-Zugang | Schalter | Nein | Legt fest, ob der Benutzer einen Zugang zur verbundenen Nextcloud erhält. Dieses Feld ist nur sichtbar, wenn das Tool „Nextcloud" für die Organisation aktiviert ist. Der Schalter ist deaktiviert (nicht anklickbar), solange die Nextcloud-Konfiguration noch nicht abgeschlossen ist. |
| Benutzergruppen | Mehrfachauswahl | Nein | Ordnet den Benutzer einer oder mehreren Benutzergruppen zu. Benutzergruppen dienen der organisatorischen Gliederung. |
| Zugeordneter Kontakt | Auswahl (durchsuchbar) | Nein | Verknüpft den Benutzer mit einem bestehenden Kontakt aus der Kontaktverwaltung. So lassen sich Benutzer und Kontaktdaten miteinander verbinden. |

### Warnhinweise beim Bearbeiten

Beim Bearbeiten eines Benutzers können zusätzliche Warnhinweise erscheinen, die auf fehlende Berechtigungen aufmerksam machen:

- **Keine freigeschalteten Funktionen:** Falls der Benutzer kein Administrator ist und keinem Team zugeordnet ist, erscheint der Hinweis: „Dieser Benutzer hat momentan keinerlei freigeschaltete Funktionen."
- **Keine Tool-Berechtigungen:** Falls der Benutzer kein Administrator ist und keine Tool-Berechtigungen besitzt, erscheint ein Hinweis mit einem Verweis auf die Unterseite „Tool-Berechtigungen".
- **Fehlende Projekt-Berechtigungen:** Falls dem Benutzer Projekt-Berechtigungen fehlen, erscheint ein Hinweis mit einem Verweis auf die Unterseite „Projekt-Berechtigungen".

## Tabellenansicht / Listenansicht

Die Listenansicht der Benutzerverwaltung zeigt alle Benutzer der Organisation in einer übersichtlichen Tabelle.

**Spalten:**

| Spalte | Beschreibung |
|--------|--------------|
| Name | Name des Benutzers (durchsuchbar, sortierbar). |
| Email | Email-Adresse des Benutzers mit Kopierfunktion und Mailto-Link (durchsuchbar, sortierbar). |
| Benutzergruppen | Zugeordnete Benutzergruppen, dargestellt als farbige Badges. Falls keine Benutzergruppen zugeordnet sind, bleibt die Spalte leer. |
| Administrator | Zeigt über ein Icon an, ob der Benutzer ein Administrator der Organisation ist. |
| Administrator in Team | Zeigt an, in welchen Teams der Benutzer die Rolle eines Team-Administrators hat. Diese Spalte ist nur sichtbar, wenn mehrere Teams in der Organisation vorhanden sind. |
| Nextcloud | Zeigt über ein Icon an, ob der Benutzer einen Nextcloud-Zugang hat. Diese Spalte ist nur sichtbar, wenn das Tool „Nextcloud" für die Organisation aktiviert ist. |

**Standardsortierung:** Alphabetisch nach Name.

**Filter:**
- **Administrator:** Filtert die Liste nach Administratoren, Nicht-Administratoren oder zeigt alle Benutzer an.

**Warnhinweise in der Kopfzeile der Listenansicht:**
- Falls es Benutzer gibt, die keinen Zugriff auf Projekte haben, wird eine Warnung mit der Anzahl betroffener Benutzer angezeigt.
- Falls es Benutzer gibt, die keinen Zugriff auf Tools haben, wird eine Warnung mit der Anzahl betroffener Benutzer angezeigt.

Diese Warnhinweise helfen dir dabei, schnell zu erkennen, ob Benutzer noch korrekt eingerichtet werden müssen.

## Aktionen

### Aktionen in der Listenansicht (Kopfzeile)

- **Benutzer erstellen:** Öffnet ein Formular zum Anlegen eines neuen Benutzers. Es werden Name und Email abgefragt. Nach dem Erstellen wird der Benutzer in der Liste angezeigt, hat aber noch keine Berechtigungen und wurde noch nicht eingeladen.
- **Aus Kontakt übernehmen:** Erstellt einen neuen Benutzer basierend auf einem bestehenden Kontakt. Es öffnet sich ein Dialog, in dem du einen Kontakt (Person mit Email-Adresse) auswählen kannst. Name und Email werden automatisch vom Kontakt übernommen.
- **Benutzergruppen:** Navigiert zur Verwaltung der Benutzergruppen, wo du Gruppen erstellen, bearbeiten und löschen kannst.
- **Exportieren:** Exportiert die aktuelle Benutzerliste als Datei.

### Aktionen pro Benutzer (Zeilenaktionen)

- **Benutzer einladen:** Sendet eine Einladungs-Email an den Benutzer, damit dieser sich bei der Plattform anmelden kann. Diese Aktion ist nur sichtbar, wenn sich der Benutzer noch nie angemeldet hat. Sie ist deaktiviert, wenn der Benutzer weder einem Team zugeordnet noch Administrator ist – in diesem Fall müssen zuerst Berechtigungen vergeben werden. Vor dem Versand erscheint ein Bestätigungsdialog.
- **Bearbeiten:** Öffnet die Bearbeitungsseite des Benutzers mit allen Unterseiten (Grundeinstellungen, Tool-Berechtigungen, Projekt-Berechtigungen, Zeiterfassung).
- **Warnung (Dreieck-Icon):** Dieses Icon erscheint bei Benutzern, denen Projekt-Berechtigungen fehlen, und verlinkt auf die Unterseite „Projekt-Berechtigungen". Ein weiteres Dreieck-Icon erscheint bei Benutzern ohne Tool-Berechtigungen und verlinkt auf die Unterseite „Tool-Berechtigungen".

### Aktionen auf der Bearbeitungsseite

- **Einladen:** Sendet eine Einladungs-Email an den Benutzer (identisch zur Einladen-Aktion in der Listenansicht). Nur sichtbar, wenn sich der Benutzer noch nie angemeldet hat.
- **Benutzer löschen:** Löscht den Benutzer aus der Organisation. Diese Aktion ist deaktiviert, wenn der Benutzer nicht gelöscht werden darf – zum Beispiel, weil er der letzte Administrator ist oder weil du dich selbst nicht löschen kannst.

## Unterseiten (Tabs beim Bearbeiten)

Beim Bearbeiten eines Benutzers stehen mehrere Unterseiten als Tabs zur Verfügung. Du erreichst sie über die Navigation innerhalb der Bearbeitungsansicht.

### Grundeinstellungen
Auf dieser Unterseite bearbeitest du die Stammdaten des Benutzers – also die oben unter „Formularfelder" beschriebenen Felder wie Name, Email, Administrator-Status, Nextcloud-Zugang, Benutzergruppen und den zugeordneten Kontakt.

### Tool-Berechtigungen
Auf dieser Unterseite der Benutzerverwaltung verwaltest du, welche Tools der Benutzer nutzen darf. Es wird eine Liste aller aktiven Tools der Organisation angezeigt. Für jedes Tool kannst du eine der folgenden Berechtigungsstufen wählen:

- **Keine** – Der Benutzer hat keinen Zugriff auf dieses Tool.
- **Anschauen** – Der Benutzer kann die Inhalte des Tools einsehen, aber nichts verändern (nur Lesezugriff).
- **Bearbeiten** – Der Benutzer kann die Inhalte des Tools einsehen und verändern (Lese- und Schreibzugriff).
- **Verwalten** – Der Benutzer kann die Inhalte des Tools verwalten.

Die Änderungen werden sofort übernommen – ein separates Speichern über einen Button ist nicht notwendig. Administratoren haben automatisch vollen Zugriff auf alle Tools; die Tool-Berechtigungen gelten daher nur für Nicht-Administratoren.

### Projekt-Berechtigungen
Auf dieser Unterseite der Benutzerverwaltung legst du fest, auf welche Projekte der Benutzer Zugriff hat. Diese Unterseite ist nur verfügbar, wenn in den Projekteinstellungen der Organisation die Projekt-Berechtigungsverwaltung aktiviert ist. Ist sie deaktiviert, haben alle Benutzer automatisch Zugriff auf alle Projekte.

- **Zugriff auf alle Projekte:** Wenn diese Checkbox aktiviert ist, hat der Benutzer Zugriff auf sämtliche Projekte – auch auf zukünftig erstellte.
- **Projekte:** Wenn „Zugriff auf alle Projekte" deaktiviert ist, kannst du hier einzelne Projekte auswählen, auf die der Benutzer Zugriff erhalten soll.

### Zeiterfassung
Auf dieser Unterseite der Benutzerverwaltung kannst du die Zeiterfassung für den Benutzer aktivieren oder deaktivieren. Diese Unterseite ist nur verfügbar, wenn das Tool „Zeiterfassung" für die Organisation aktiviert ist. Ist die Zeiterfassung für einen Benutzer aktiviert, kann dieser seine Arbeitszeiten in der Plattform erfassen.

## Validierung & Fehlermeldungen

Die folgende Tabelle zeigt die Validierungsregeln der Benutzerverwaltung sowie die zugehörigen Fehlermeldungen und Lösungshinweise:

| Feld / Aktion | Regel | Fehlermeldung | Lösung |
|----------------|-------|---------------|--------|
| Name | Pflichtfeld | „Name muss ausgefüllt werden." | Trage einen vollständigen Namen ein. |
| Email | Pflichtfeld | „Email muss ausgefüllt werden." | Trage eine Email-Adresse ein. |
| Email | Gültiges Email-Format | „Email muss eine gültige Email-Adresse sein." | Überprüfe die Email-Adresse auf Tippfehler (z. B. fehlendes @-Zeichen). |
| Email | Muss eindeutig sein | „Email ist bereits vergeben." | Verwende eine andere Email-Adresse oder suche den bestehenden Benutzer mit dieser Adresse. |
| Einladung versenden | Email muss zustellbar sein | „Die Einladung konnte nicht versendet werden. Bitte überprüfe die Email-Adresse des Benutzers." | Prüfe, ob die Email-Adresse korrekt geschrieben ist und ob das Postfach existiert. |
| Administrator entfernen | Mindestens ein Administrator muss bestehen bleiben | „Es muss mindestens ein Administator vorhanden sein." | Ernenne zuerst einen anderen Benutzer zum Administrator, bevor du diesem Benutzer die Administratorrechte entziehst. |
| Eigene Admin-Rechte entfernen | Warnung bei Selbst-Herabstufung | „Achtung: du nimmst dir selbst die Administrator-Rechte. Nach dem Speichern wird diese Seite nicht mehr verfügbar sein." | Stelle sicher, dass du dir bewusst bist, dass du danach keinen Zugriff mehr auf die Einstellungen hast. Ein anderer Administrator kann dir die Rechte wieder geben. |
| Benutzer löschen | Bestimmte Benutzer dürfen nicht gelöscht werden | „Dieser Benutzer kann nicht gelöscht werden. (Mögliche Gründe sind: Ein Benutzer darf sich nicht selbst löschen; der letzte Administrator darf nicht gelöscht werden.)" | Ernenne ggf. zuerst einen anderen Administrator. |

## Beziehungen

Die Benutzerverwaltung steht in Verbindung mit mehreren anderen Bereichen der ngo.tools-Plattform:

- **Benutzergruppen:** Benutzer können einer oder mehreren Benutzergruppen zugeordnet werden. Die Verwaltung der Benutzergruppen ist über die Kopfzeilen-Aktion „Benutzergruppen" in der Listenansicht der Benutzerverwaltung erreichbar.
- **Kontakte:** Ein Benutzer kann mit einem bestehenden Kontakt aus der Kontaktverwaltung verknüpft werden. Neue Benutzer können auch direkt aus einem Kontakt erstellt werden (über die Aktion „Aus Kontakt übernehmen").
- **Projekte:** Über die Unterseite „Projekt-Berechtigungen" in der Benutzerverwaltung wird gesteuert, auf welche Projekte ein Benutzer Zugriff hat.
- **Tools:** Über die Unterseite „Tool-Berechtigungen" in der Benutzerverwaltung wird gesteuert, welche Tools ein Benutzer in welcher Stufe (Keine, Anschauen, Bearbeiten, Verwalten) nutzen darf.
- **Nextcloud:** Wenn das Tool „Nextcloud" für die Organisation aktiviert ist, kann der Nextcloud-Zugang pro Benutzer in den Grundeinstellungen der Benutzerverwaltung aktiviert oder deaktiviert werden.
- **Zeiterfassung:** Wenn das Tool „Zeiterfassung" für die Organisation aktiviert ist, kann die Zeiterfassung pro Benutzer über die gleichnamige Unterseite der Benutzerverwaltung ein- oder ausgeschaltet werden.

---

## resource: App\Filament\App\Resources\DonationResource

**Entity:** App\Filament\App\Resources\DonationResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/DonationResource.php`  
**Updated:** 2026-02-14 13:29:41  

Now I have all the information I need. Let me check one more thing — the label for the Name column: `__('contact.fields.name')` = 'Name' (from contact.php line 11). And the documentation says the column header is "Name" — correct.

Let me now verify the "Adresse" column: it's `toggleable()` but NOT `toggleable(isToggledHiddenByDefault: true)`, so it's shown by default and can be hidden. The documentation says "Ein-/Ausblendbar: Ja" which is correct.

Now let me verify the `send_receipt` ToggleColumn — it is `toggleable()` and `disabled(fn () => ! auth()->user()->can('write donations'))`. The documentation says it's only editable with "Bearbeiten" permission for Spendenverwaltung. The code uses `can('write donations')` — this aligns with edit/write permissions for the donations tool.

The documentation says the address column is "Sortierbar: Nein" — confirmed, the address column has no `->sortable()`.

Let me verify one important claim: the documentation says the Name column is NOT ein-/ausblendbar. In the code, `TableColumn::contactName()` does NOT call `->toggleable()`, so this is correct.

Now about the import — the documentation lists these fields: Vorname, Nachname, Straße, E-Mail-Adresse, PLZ, Stadt, Land, Datum, Ursprünglicher Betrag, Ursprüngliche Währung, Betrag. But the importer also has a `type` field (line 87-96). The documentation is missing the `type` field.

Wait, I should NOT add new information. I should only remove or correct existing statements. The documentation lists import fields — it doesn't mention `type`, but since I'm told to not add new things, I'll just leave that as-is (the listed fields are all correct, it's just incomplete).

Let me now also verify the "Betrag" column description says "Am Ende der Tabelle wird eine Gesamtsumme angezeigt" — confirmed by the `->summarize(Sum::make()...)` on line 100.

The ExportAction on line 141 is a table header action. The documentation says "Export: Exportiert die aktuell angezeigte Tabellenansicht. Aktive Filter werden dabei berücksichtigt." — This is a `pxlrbt\FilamentExcel\Actions\ExportAction` which works on the table data. The documentation claim about filters being applied is a standard behavior of ExportAction. This is reasonable.

The "Bescheinigung" column description says "Sortierbar: Nein" — confirmed, the ToggleColumn has no `->sortable()`.

Let me verify the "Bescheinigung" filter: TernaryFilter on `send_receipt` — the documentation says "Filtert nach Spenden mit oder ohne Bescheinigungsvermerk (Ja / Nein / Alle)" — correct for a TernaryFilter.

Let me now verify the "Projekt" filter. Looking at line 118-124:
- `SelectFilter::make('project')` with `->visible(feature('projects'))` — correct: only visible when Projects tool is active
- `->relationship('project', 'name', fn (Builder $query) => $query->where('use_in_donations', true))` — the documentation says "Es werden nur Projekte angezeigt, die für die Spendenverwaltung vorgesehen sind." — confirmed by the `where('use_in_donations', true)` filter.
- `->multiple()` — "Filtert nach einem oder mehreren Projekten" — confirmed.

The documentation says "Typ: Filtert nach Spendenart: Geldzuwendung, Sachzuwendung oder Mitgliedsbeitrag. Mehrfachauswahl möglich." — confirmed by `SelectFilter::make('type')->options(DonationType::class)->multiple()`.

The documentation says "Datum: Filtert nach einem Datumsbereich (Von–Bis)" — confirmed by `DateRangeFilter::make('date')`.

Now let me verify the "Klick auf eine Zeile" section. Line 145: `->recordUrl(fn (Donation $record) => tenantRoute('filament.enchio.resources.financial-events.view', $record->financial_event_id))` — "Ein Klick auf eine Spendenzeile öffnet das zugehörige Finanzereignis in der Detailansicht" — confirmed.

The empty state description from the code: `'Um Spenden anzuzeigen, müssen sie entweder in der Spendenerfassung erfasst oder über die „Import"-Funktion importiert werden.'`

The documentation quotes: `Um Spenden anzuzeigen, müssen sie entweder in der Spendenerfassung erfasst oder über die ‚Import'-Funktion importiert werden.`

The quotes are slightly different (German „" vs ‚') but the text matches.

Now for the action labels: 
- `CreateSingleDonationReceiptAction` tooltip: `__('donations.receipts.single.create-help')` = "Einzelspendenbestätigung erstellen" — matches documentation.
- `ShowDonationReceiptAction` tooltip: `__('donations.receipts.show-receipt-help')` = "Spendenbescheinigung anzeigen" — matches documentation.
- `DownloadDonationReceiptAction` tooltip: `__('donations.receipts.download-receipt-help')` = "Spendenbescheinigung herunterladen" — matches documentation.

Now let me verify the visibility of CreateSingleDonationReceiptAction. From the explore agent: the `canCreateReceipt` method checks:
1. `$record->send_receipt` is true
2. `$record->donation_receipt_id` is null
3. `$record->contact?->address?->isValid()` returns true

The documentation says: "Nur sichtbar, wenn **alle** drei Bedingungen erfüllt sind: Der Bescheinigungsvermerk ist gesetzt, es wurde noch keine Bescheinigung erstellt und der zugehörige Kontakt hat eine gültige Adresse hinterlegt."

This matches, although the code checks `donation_receipt_id` is null (not "keine Bescheinigung erstellt"). But `donation_receipt_id` being null means no receipt has been created yet, so this is semantically correct.

Wait — let me double-check. The code checks `$record->contact?->address?->isValid()` — but it's the contact's `address` relationship, not the donation's address. Let me verify what this refers to.

Actually, looking at CreateSingleDonationReceiptAction from the explore agent, it checks `$record->contact?->address?->isValid()`. The `contact` has an `address` relationship. This is checking the contact's address, not the donation's address. The documentation says "der zugehörige Kontakt hat eine gültige Adresse hinterlegt" — this is correct.

Now let me check whether the Import action is in the header actions or table header actions. Looking at the code:

- **Export** is in `$table->headerActions([ExportAction::make()])` — this is a TABLE header action (above the table).
- **Import** is in `ListDonations::getHeaderActions()` — this is a PAGE header action (in the page header, above the table).

The documentation groups them both as "Kopfzeilen-Aktionen" — this is technically acceptable since both appear above the table, even though they're in different parts of the page.

Now let me also check: the Import action has `->hidden(fn () => filled($import) && empty($import->completed_at))` — the doc says "Nur sichtbar, wenn du die Berechtigung ‚Bearbeiten' für das Tool Spendenverwaltung hast und aktuell kein Import läuft." This is confirmed:
- Permission: `auth()->user()->can('write donations')` — matches
- Hidden when import is running: `filled($import) && empty($import->completed_at)` — matches

The documentation says "Solange ein Import läuft, ist der Import-Button in der Spendenübersicht nicht sichtbar." — confirmed.

Now let me think about the navigation. The doc says "im Menü unter **Spendenverwaltung → Spendenübersicht** (erster Eintrag in der Gruppe ‚Spendenverwaltung')". `$navigationSort = 1` confirms it's the first entry. The navigation group is `NavigationGroup::Donations` which translates to "Spendenverwaltung" (from `donations.donations.navigation-group`). The navigation label is `__('donations.donations.navigation-label')` = "Spendenübersicht". Confirmed.

The doc says "Das Tool **Spendenverwaltung** muss aktiviert sein" — confirmed by `auth()->user()->hasFeature('donations')`.
"du musst Zugriff auf alle Projekte haben" — confirmed by `auth()->user()->canAccessAllProjects()`.

Now let me check the import fields. The documentation describes the "Betrag" field as "Betrag in der Organisationswährung". The translation has `'amount' => 'Betrag in :currency'` and in the code it's hardcoded to `'EUR'`. The doc says "Organisationswährung" but code says "EUR". However, the label is dynamic — `__('donations.donations.import.fields.amount', ['currency' => 'EUR'])`. The "EUR" may be hardcoded or could be the actual org currency. Let me not change this — the intent is "organization currency" even if hardcoded.

Actually wait — the label literally says "Betrag in EUR", not "Betrag in der Organisationswährung". But the doc says "Betrag in der Organisationswährung". This might be misleading but it's the description, not the label. The description is documenting the purpose of the field, not the literal label. I'll leave this as-is since it's describing the semantics.

Let me now carefully go through the full documentation and verify every claim:

1. **Overview section**: "Die Spendenübersicht zeigt alle erfassten Spenden deiner Organisation" — correct, it's a list of Donations.
2. "in einer Listenansicht" — confirmed, it's a `ListRecords` page.
3. "Hier kannst du Spenden einsehen, filtern, exportieren und Spendenbescheinigungen erstellen, anzeigen sowie herunterladen" — all confirmed.
4. "im Menü unter Spendenverwaltung → Spendenübersicht (erster Eintrag)" — confirmed.
5. "Das Tool Spendenverwaltung muss aktiviert sein" — confirmed via `hasFeature('donations')`.
6. "du musst Zugriff auf alle Projekte haben" — confirmed via `canAccessAllProjects()`.

7. **Spalten section**:
   - Datum: sortable yes, toggleable no — confirmed.
   - Typ: label is `__('general.type')` = "Typ", sortable yes, toggleable no — confirmed. The doc says "Art der Spende: Geldzuwendung, Sachzuwendung oder Mitgliedsbeitrag" — correct.
   - Name: label is `__('contact.fields.name')` = "Name", sortable yes, toggleable no — confirmed.
   - Adresse: label is `__('donations.donations.table.address')` = "Adresse", sortable no, toggleable yes — confirmed.
   - Betrag: label is `__('donations.donations.table.amount')` = "Betrag", sortable yes, toggleable no, has Sum summarizer — confirmed.
   - Projekt: label is `__('contact.fields.project-name')` = "Projekt", sortable yes, toggleable yes, visible when `feature('projects')`, has URL — confirmed.
   - Bescheinigung: label is `__('donations.donations.table.receipt')` = "Bescheinigung", sortable no, toggleable yes, disabled unless `can('write donations')` — confirmed.

Wait, the documentation says the Name column is "Sortierbar: Ja" — confirmed by `TableColumn::contactName()` which has `->sortable()`.

The documentation says Bescheinigung is "Sortierbar: Nein" — correct, ToggleColumn doesn't have `->sortable()`.
The documentation says Bescheinigung is "Ein-/Ausblendbar: Ja" — confirmed by `->toggleable()`.

8. **Filter section**:
   - Bescheinigung: TernaryFilter — confirmed.
   - Projekt: SelectFilter, visible when projects feature active, filtered by `use_in_donations` — confirmed.
   - Typ: SelectFilter, options from DonationType, multiple — confirmed.
   - Datum: DateRangeFilter — confirmed.

9. **Leerer Zustand**: The quoted text matches the translation with minor quote style differences — confirmed.

10. **Zeilenaktionen**:
    - Einzelspendenbestätigung erstellen: visibility requires send_receipt, no existing receipt, valid address — confirmed.
    - Spendenbescheinigung anzeigen: visible when receipt has media — confirmed. Documentation says "Nur sichtbar, wenn bereits eine Bescheinigung erstellt wurde" — this is close enough (`receipt?->hasMedia('receipt')` = receipt exists with media).
    - Spendenbescheinigung herunterladen: same visibility as anzeigen — confirmed.

11. The "Hinweis" about checking Bescheinigungsvermerk and address — this is guidance, not a code claim, but it's correct.

12. **Kopfzeilen-Aktionen**:
    - Export: confirmed as table header action.
    - Import: confirmed as page header action, with permission check and hidden when import running.

13. **Klick auf eine Zeile**: Opens financial event view — confirmed.

14. **Import**: max 10000 rows — confirmed.

15. **Import fields**: All 11 fields listed match the importer columns. But there's also a `type` column in the importer that's not documented. Since I should not add new info, I'll leave it.

Actually wait — the documentation lists specific import fields and says those are the "Unterstützte Felder beim Import". The `type` field IS supported but not listed. This is incomplete documentation, but per instructions I should only remove or correct, not add. So I'll leave it.

16. **Import Ablauf**: Steps 1-5 seem reasonable based on the code. The widget shows progress. The hint says you can close the page. The failed rows info is shown after completion. All confirmed via translations.

17. **Fehlerhafte Zeilen**: "Du kannst die Datei korrigieren und erneut hochladen – bereits erfolgreich importierte Spenden werden dabei nicht dupliziert." — confirmed by `resolveRecord()` which checks for duplicates.

18. **Berechtigungen**: All permission claims match the code.

19. **Beziehungen**: All relationships described are confirmed by the model and resource code.

The documentation states the import section mentions "Fortschritt angezeigt: Prozent, Gesamtanzahl, bereits importierte und fehlerhafte Zeilen" — from the translation: `':percentage% (Gesamt: :total, Importiert: :imported, Fehlerhaft: :failed)'` — confirmed.

One thing to verify: the documentation says "Beschreibung" of the Typ column is "Art der Spende: Geldzuwendung, Sachzuwendung oder Mitgliedsbeitrag". The enum labels from enums.php are: 'Geldzuwendung', 'Sachzuwendung', 'Mitgliedsbeitrag' — confirmed.

I believe the documentation is accurate based on my thorough review. The only potential issue is the `type` field missing from the import fields list, but since I shouldn't add new content, I'll leave it. Let me also double-check one more claim: "Am Ende der Tabelle wird eine Gesamtsumme angezeigt" for Betrag — confirmed by `->summarize(Sum::make()...)`.

The documentation is accurate. I'll output it with only minimal corrections needed.

Actually, let me re-check one claim: the "Bescheinigung" column description says "Umschalter, ob für diese Spende eine Spendenbescheinigung erstellt werden soll." This is a `ToggleColumn` for `send_receipt` — it's about whether a receipt *should be* created, not whether one *has been* created. The translation says "Bescheinigung" for the label. The doc description is accurate.

Let me also check: "Nur bearbeitbar, wenn du die Berechtigung ‚Bearbeiten' für das Tool Spendenverwaltung hast." — The code says `->disabled(fn () => ! auth()->user()->can('write donations'))`. So if the user does NOT have 'write donations' permission, it's disabled (not editable). The doc says it's only editable WITH the permission — confirmed.

One more check: the documentation says "Betrag der Spende in der jeweiligen Währung" — confirmed, the table uses `->money(fn ($record) => $record->currency, 100, ...)`.

Everything checks out. The documentation is accurate. I'll output it as-is.

## Übersicht

Die Spendenübersicht zeigt alle erfassten Spenden deiner Organisation in einer Listenansicht. Hier kannst du Spenden einsehen, filtern, exportieren und Spendenbescheinigungen erstellen, anzeigen sowie herunterladen.

Die Spendenübersicht findest du im Menü unter **Spendenverwaltung → Spendenübersicht** (erster Eintrag in der Gruppe „Spendenverwaltung").

**Voraussetzungen:** Das Tool **Spendenverwaltung** muss aktiviert sein und du musst Zugriff auf alle Projekte haben.

## Tabellenansicht / Listenansicht

Die Spendenübersicht zeigt alle Spenden in einer Tabelle. Standardmäßig ist die Tabelle nach **Datum absteigend** sortiert, sodass die neuesten Spenden zuerst erscheinen.

### Spalten

| Spalte | Beschreibung | Sortierbar | Ein-/Ausblendbar |
|--------|-------------|------------|-------------------|
| Datum | Datum der Spende | Ja | Nein |
| Typ | Art der Spende: Geldzuwendung, Sachzuwendung oder Mitgliedsbeitrag | Ja | Nein |
| Name | Name des Kontakts bzw. Spenders | Ja | Nein |
| Adresse | Adresse des Spenders | Nein | Ja |
| Betrag | Betrag der Spende in der jeweiligen Währung. Am Ende der Tabelle wird eine Gesamtsumme angezeigt. | Ja | Nein |
| Projekt | Zugeordnetes Projekt. Klickbar – führt zur Projektübersicht. Nur sichtbar, wenn das Tool **Projekte** aktiviert ist. | Ja | Ja |
| Bescheinigung | Umschalter, ob für diese Spende eine Spendenbescheinigung erstellt werden soll. Nur bearbeitbar, wenn du die Berechtigung „Bearbeiten" für das Tool **Spendenverwaltung** hast. | Nein | Ja |

### Filter

In der Spendenübersicht stehen dir folgende Filter zur Verfügung, um die angezeigte Liste einzuschränken:

| Filter | Beschreibung |
|--------|-------------|
| Bescheinigung | Filtert nach Spenden mit oder ohne Bescheinigungsvermerk (Ja / Nein / Alle) |
| Projekt | Filtert nach einem oder mehreren Projekten. Nur sichtbar, wenn das Tool **Projekte** aktiviert ist. Es werden nur Projekte angezeigt, die für die Spendenverwaltung vorgesehen sind. |
| Typ | Filtert nach Spendenart: Geldzuwendung, Sachzuwendung oder Mitgliedsbeitrag. Mehrfachauswahl möglich. |
| Datum | Filtert nach einem Datumsbereich (Von–Bis) |

### Leerer Zustand

Wenn in der Spendenübersicht noch keine Spenden vorhanden sind, erscheint folgender Hinweis:

> „Um Spenden anzuzeigen, müssen sie entweder in der Spendenerfassung erfasst oder über die „Import"-Funktion importiert werden."

Du hast also zwei Möglichkeiten, Spenden hinzuzufügen: über die **Spendenerfassung** oder über den **Import** (siehe Abschnitt „Import" weiter unten).

## Aktionen in der Spendenübersicht

### Zeilenaktionen (pro Spende)

Für jede einzelne Spende stehen dir – je nach Status – folgende Aktionen zur Verfügung:

| Aktion | Beschreibung | Sichtbarkeit |
|--------|-------------|-------------|
| Einzelspendenbestätigung erstellen | Erstellt eine Spendenbescheinigung für diese einzelne Spende. Nach dem Klick wird die Bescheinigung generiert und steht anschließend zum Anzeigen und Herunterladen bereit. | Nur sichtbar, wenn **alle** drei Bedingungen erfüllt sind: Der Bescheinigungsvermerk ist gesetzt, es wurde noch keine Bescheinigung erstellt und der zugehörige Kontakt hat eine gültige Adresse hinterlegt. |
| Spendenbescheinigung anzeigen | Zeigt die bereits erstellte Spendenbescheinigung in einer Vorschau an. | Nur sichtbar, wenn bereits eine Bescheinigung erstellt wurde. |
| Spendenbescheinigung herunterladen | Lädt die erstellte Spendenbescheinigung als Datei herunter. | Nur sichtbar, wenn bereits eine Bescheinigung erstellt wurde. |

**Hinweis:** Wenn du bei einer Spende keine Aktion zum Erstellen einer Bescheinigung siehst, prüfe, ob der Bescheinigungsvermerk gesetzt ist und ob der Kontakt eine vollständige Adresse hat.

### Kopfzeilen-Aktionen

Oberhalb der Tabelle in der Spendenübersicht stehen dir folgende Aktionen zur Verfügung:

| Aktion | Beschreibung |
|--------|-------------|
| Export | Exportiert die aktuell angezeigte Tabellenansicht. Aktive Filter werden dabei berücksichtigt – es werden also nur die gefilterten Spenden exportiert. |
| Import | Öffnet den Import-Dialog zum Hochladen einer Spendenliste (siehe Abschnitt „Import"). Nur sichtbar, wenn du die Berechtigung „Bearbeiten" für das Tool **Spendenverwaltung** hast und aktuell kein Import läuft. |

### Klick auf eine Zeile

Ein Klick auf eine Spendenzeile in der Spendenübersicht öffnet das zugehörige Finanzereignis in der Detailansicht. Dort findest du weitere Informationen zur Spende.

## Import von Spenden

Über die Import-Funktion in der Spendenübersicht kannst du Spenden aus einer Datei hochladen. Pro Import sind maximal **10.000 Zeilen** zulässig.

### Unterstützte Felder beim Import

| Feld | Beschreibung |
|------|-------------|
| Vorname | Vorname des Spenders |
| Nachname | Nachname des Spenders |
| Straße | Straße des Spenders |
| E-Mail-Adresse | E-Mail-Adresse des Spenders |
| PLZ | Postleitzahl |
| Stadt | Stadt |
| Land | Land |
| Datum | Datum der Spende |
| Ursprünglicher Betrag | Betrag in der Originalwährung |
| Ursprüngliche Währung | Originalwährung der Spende |
| Betrag | Betrag in der Organisationswährung |

### Ablauf des Imports

1. Klicke auf **Import** in der Kopfzeile der Spendenübersicht.
2. Lade deine Datei hoch.
3. Während der Import läuft, wird dir der Fortschritt angezeigt: Prozent, Gesamtanzahl, bereits importierte und fehlerhafte Zeilen.
4. Du kannst die Seite während des Imports schließen und später wieder öffnen – der Import läuft im Hintergrund weiter.
5. Nach Abschluss werden die Ergebnisse angezeigt, einschließlich eventuell fehlerhafter Zeilen mit Fehlerdetails.

### Fehlerhafte Zeilen beim Import

Wenn einzelne Zeilen beim Import fehlschlagen, werden diese nach Abschluss des Imports aufgelistet. Du kannst die Datei korrigieren und erneut hochladen – bereits erfolgreich importierte Spenden werden dabei **nicht dupliziert**.

**Hinweis:** Solange ein Import läuft, ist der Import-Button in der Spendenübersicht nicht sichtbar. Warte, bis der laufende Import abgeschlossen ist, bevor du einen neuen Import startest.

## Berechtigungen in der Spendenübersicht

| Aktion | Erforderliche Berechtigung |
|--------|---------------------------|
| Spendenübersicht aufrufen | Tool **Spendenverwaltung** aktiviert + Zugriff auf alle Projekte |
| Bescheinigungsvermerk umschalten | Berechtigung „Bearbeiten" für das Tool **Spendenverwaltung** |
| Spenden importieren | Berechtigung „Bearbeiten" für das Tool **Spendenverwaltung** |
| Spenden exportieren | Zugriff auf die Spendenübersicht (keine zusätzliche Berechtigung erforderlich) |
| Spendenbescheinigung erstellen | Zugriff auf die Spendenübersicht + Bescheinigungsvermerk gesetzt + gültige Adresse beim Kontakt |

## Beziehungen zu anderen Bereichen

Die Spendenübersicht ist mit folgenden Bereichen der Plattform verknüpft:

- **Kontakte:** Jede Spende ist einem Kontakt (Spender/in) zugeordnet. Der Name des Kontakts wird in der Tabelle angezeigt.
- **Projekte:** Spenden können einem Projekt zugeordnet sein, wenn das Tool **Projekte** aktiviert ist. Das Projekt ist in der Tabelle als Link zur Projektübersicht dargestellt.
- **Finanzereignisse:** Jede Spende ist mit einem Finanzereignis verknüpft. Ein Klick auf eine Zeile in der Spendenübersicht öffnet das zugehörige Finanzereignis in der Detailansicht.
- **Spendenbescheinigungen:** Für Spenden mit gesetztem Bescheinigungsvermerk können Einzelspendenbestätigungen erstellt werden. Bereits erstellte Bescheinigungen lassen sich direkt in der Spendenübersicht anzeigen und herunterladen.
- **Adressen:** Die Adresse des Spenders wird in der Tabelle angezeigt und ist Voraussetzung für die Erstellung von Spendenbescheinigungen. Fehlt eine gültige Adresse beim Kontakt, kann keine Bescheinigung erstellt werden.

---

## resource: App\Filament\App\Resources\ContactResource

**Entity:** App\Filament\App\Resources\ContactResource  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Resources/ContactResource.php`  
**Updated:** 2026-02-13 02:13:06  

# Kontakte (ContactResource)

## Beschreibung

Die Komponente **Kontakte** (`App\Filament\App\Resources\ContactResource`) verwaltet alle Kontakte der Organisation. Kontakte können natürliche Personen, Organisationen oder Ehepaare sein. Die Ressource bietet eine Listenansicht mit umfangreichen Filter-, Such- und Exportfunktionen, eine Detailansicht (Übersicht), sowie Formulare zum Anlegen und Bearbeiten von Kontakten.

Das zugrunde liegende Model ist `App\Models\Contact`.

---

## Zugriffsberechtigung

Der Zugriff auf die Kontakte-Ressource erfordert **beide** Bedingungen:

1. Der Benutzer muss das Feature `contacts` freigeschaltet haben.
2. Der Benutzer muss Zugriff auf alle Projekte haben (`canAccessAllProjects()`).

Die Ressource ist **nicht** auf einen einzelnen Tenant beschränkt (`$isScopedToTenant = false`).

---

## Kontakttypen

| Wert           | Bedeutung    |
|----------------|--------------|
| `person`       | Person       |
| `organization` | Organisation |
| `couple`       | Ehepaar      |

Beim Anlegen können alle drei Typen gewählt werden. Der Typ kann nach dem Erstellen nicht mehr geändert werden.

---

## Formular (Erstellen / Bearbeiten)

Das Formular ist in Tabs unterteilt:

### Tab „Allgemein"

| Feld | Label (de) | Typ | Hinweise |
|------|-----------|-----|----------|
| Avatar | — | Bild-Upload | Spatie Media Library, runder Bildausschnitt |
| Kontaktnummer | Kontaktnummer | Text (deaktiviert) | Wird automatisch vergeben, nicht editierbar |
| Typ | Typ | Auswahl | Person, Organisation, Ehepaar. Beim Bearbeiten deaktiviert |
| Titel | Titel | Text | Nur sichtbar bei Typ „Person" |
| Name | Name | Text | Nur sichtbar bei Typ „Organisation" und „Ehepaar" |
| Vorname | Vorname | Text | Nur bei Typ „Person" (und Ehepaar-Erstellung) |
| Nachname | Nachname | Text | Nur bei Typ „Person" (und Ehepaar-Erstellung) |
| Rufname | Rufname | Text | Nur bei Typ „Person", sichtbar je nach Einstellung |
| Zweiter Vorname | Zweiter Vorname | Text | Nur bei Typ „Person", sichtbar je nach Einstellung |
| Geburtsname | Geburtsname | Text | Nur bei Typ „Person", sichtbar je nach Einstellung |
| Vorname (Person 2) | Vorname (Person 2) | Text | Nur bei Ehepaar-Erstellung |
| Nachname (Person 2) | Nachname (Person 2) | Text | Nur bei Ehepaar-Erstellung |
| Geburtstag | Geburtstag | Datum | Maximal heutiges Datum |
| Sterbedatum | Sterbedatum | Datum | Optional |
| Sterbedatum ist geschätzt | Sterbedatum ist geschätzt | Checkbox | Nur sichtbar wenn Sterbedatum gesetzt |
| Geschlecht | Geschlecht | Auswahl | Aus Gender-Enum |
| Sprache | Sprache | Auswahl | Symfony-Sprachen, nicht bei Organisationen |
| Spendenbescheinigungen | Spendenbescheinigungzustellung | Auswahl | Zustellungsmethode |
| Segmente | Segmente | Mehrfachauswahl | Segmente ohne Newsletter-Listen. Hinweis: „Ein Segment ist eine Gruppe, zu der beliebig viele Kontakte gehören können." |
| Email-Adresse | Email-Adresse | Email | Mit Live-Validierung |
| Webseite | Webseite | URL | — |
| Kommunikationskanäle | Kommunikationskanäle | Repeater | Telefon, Email, Post mit Validierung |
| Beziehungen | Beziehungen | Repeater | Nur beim Bearbeiten sichtbar |
| Anrede | Anrede | Text | — |
| Umsatzsteuer-ID | Umsatzsteuer-ID | Text | Sichtbar je nach Einstellung |
| Eigene Felder | — | Dynamisch | Benutzerdefinierte Felder (CustomFields) |

### Tab „Mitgliedschaft"

Dieser Tab ist nur sichtbar, wenn:
- Der Kontakt bereits existiert (nicht beim Erstellen)
- Der Kontakttyp **nicht** „Ehepaar" ist
- Das Feature `members` aktiviert ist

| Feld | Label (de) | Typ | Hinweise |
|------|-----------|-----|----------|
| Mitgliedsnummer | Mitgliedsnummer | Text | — |
| Mitgliedszeiten | Mitgliedszeiten | Repeater | Start, Ende, geschätzt-Flags. Überlappende Zeiträume werden verhindert |

---

## Tabellenansicht (Liste)

### Spalten

| Spalte | Label (de) | Standardmäßig sichtbar | Inline-Bearbeitung | Hinweise |
|--------|-----------|------------------------|---------------------|----------|
| Kontaktnummer | Kontaktnummer | Ja | Ja | Numerische Sortierung |
| Typ | Typ | Ja | Nein | — |
| Titel | Titel | Ja | Ja | — |
| Name | Name | Ja | Ja | Durchsuchbar |
| Vorname | Vorname | Ja | Ja | Durchsuchbar |
| Nachname | Nachname | Ja | Ja | Durchsuchbar |
| Mitgliedsnummer | Mitgliedsnummer | Ja | Nein | — |
| Rufname | Rufname | Ja | Ja | — |
| Zweiter Vorname | Zweiter Vorname | Ja | Ja | — |
| Geburtsname | Geburtsname | Ja | Ja | — |
| Anrede | Anrede | Ja | Ja | — |
| Segmente | Segmente | Ja | Nein | Als farbige Tags dargestellt |
| Newsletter-Listen | Newsletter-Listen | Ja | Nein | Nur wenn Newsletter-Feature aktiv |
| Email-Adresse | Email-Adresse | Ja | Nein | — |
| Webseite | Webseite | Ja | Nein | Öffnet in neuem Tab |
| Geburtstag | Geburtstag | Umschaltbar | Nein | Format: Datum |
| Sterbedatum | Sterbedatum | Umschaltbar | Nein | Format: Datum |
| Geschlecht | Geschlecht | Ja | Nein | — |
| Adresszeile 1 | Adresszeile 1 | Bedingt | Nein | Nur ohne Preset-Ansicht |
| PLZ | PLZ | Bedingt | Nein | Nur ohne Preset-Ansicht |
| Ort | Ort | Bedingt | Nein | Nur ohne Preset-Ansicht |
| Land | Land | Ja | Nein | — |
| Sprache | Sprache | Ja | Nein | — |
| Kommunikationskanäle | Kommunikationskanäle | Ja | Nein | Nur Telefonnummern |
| Postweg gesperrt | Postweg gesperrt | Ja | Nein | Icon-Spalte |
| Anmerkungen | Anmerkungen | Ja | Nein | Anzahl als Badge, Tooltip mit Inhalt |
| Mitglieds-Status | Mitglieds-Status | Bedingt | Nein | Nur in Mitglieder-Preset, benötigt Feature `members` |
| Mitglied seit | Mitglied seit | Bedingt | Nein | Nur in Mitglieder-Preset |
| Mitglied bis | Mitglied bis | Bedingt | Nein | Nur in Mitglieder-Preset |
| Spenden (Summe) | Spenden | Ja | Nein | Geldbetrag mit Summe |
| Umsatzsteuer-ID | Umsatzsteuer-ID | Ja | Nein | Sichtbar je nach Einstellung |
| Erstellt am | Erstellt am | Ja | Nein | Datum und Uhrzeit |

Die Tabelle ist standardmäßig nach **Name** sortiert. Filter, Sortierung, Spaltensuche und Suche werden in der Session gespeichert.

Seitenoptionen: 5, 10, 25, 50, 100, 200 Einträge pro Seite.

### Filter

| Filter | Label (de) | Hinweise |
|--------|-----------|----------|
| Mitglieds-Status | Mitglieds-Status | Nur in Mitglieder-Preset-Ansicht |
| Spenden | Spenden | Kontakte mit/ohne Spenden |
| Einzelpersonen von Paaren ausblenden | Einzelpersonen von Paaren ausblenden | Standardmäßig aktiv |
| Segmente | Segmente | Mehrfachauswahl |
| Newsletter-Listen | Newsletter-Listen | Mehrfachauswahl, nur wenn Newsletter-Feature aktiv |
| Geschlecht | Geschlecht | Mehrfachauswahl |
| Typ | Typ | Mehrfachauswahl (Person, Organisation, Ehepaar) |
| Postweg gesperrt | Postweg gesperrt | Ja/Nein/Alle |

### Preset-Ansichten

- **Mitglieder**: Vordefinierte Ansicht, die zusätzliche Mitgliedschafts-Spalten einblendet. Nur verfügbar wenn Feature `members` aktiv ist.

---

## Aktionen

### Einzelaktionen (pro Zeile)

| Aktion | Label (de) | Beschreibung |
|--------|-----------|-------------|
| Anschauen | Kontakt ansehen | Öffnet die Übersichtsseite des Kontakts |
| Bearbeiten | Kontakt bearbeiten | Öffnet das Bearbeitungsformular |

### Header-Aktionen

| Aktion | Label (de) | Beschreibung |
|--------|-----------|-------------|
| Export | CSV Export | Exportiert die gefilterte Kontaktliste als Excel-Datei |

### Massenaktionen (Bulk)

| Aktion | Label (de) | Beschreibung |
|--------|-----------|-------------|
| Zu Segment hinzufügen | Zu Segment hinzufügen | Fügt ausgewählte Kontakte einem Segment hinzu |
| Aus Segment entfernen | Aus Segment entfernen | Entfernt ausgewählte Kontakte aus einem Segment |
| Zu Newsletter-Liste hinzufügen | Zu Newsletter-Liste hinzufügen | Fügt Kontakte einer Newsletter-Liste hinzu, mit Begründungsauswahl |
| Löschen | Löschen | Löscht ausgewählte Kontakte mit Bestätigungsdialog |

### Aktionen auf der Bearbeiten-Seite

| Aktion | Beschreibung |
|--------|-------------|
| Löschen | Löscht den Kontakt. Bei Ehepaaren erscheint ein Dialog, ob die einzelnen Partner ebenfalls gelöscht werden sollen. Optional: E-Mail-Adresse auf Sperrliste setzen (DSGVO). |

---

## Unterseiten (Sub-Navigation)

Nach dem Öffnen eines Kontakts stehen folgende Unterseiten zur Verfügung:

| Seite | Immer sichtbar | Feature-Abhängigkeit |
|-------|----------------|---------------------|
| Übersicht | Ja | — |
| Adressen | Ja | — |
| Anmerkungen | Ja | — |
| Finanzereignisse | Nein | `accounting` |
| Spenden | Nein | `donations` |
| Spendenbescheinigungen | Nein | `donations` |
| Zeiterfassung | Nein | `time-tracking` (und `time_tracking_active` am Kontakt) |
| Newsletter | Nein | `newsletter` |
| Persönliche Seite | Nein | Nur für Organisations-Admins |
| Briefsendungen | Ja | — |

---

## Kontakt anlegen

Beim Anlegen eines neuen Kontakts wird eine **Dublettenprüfung** durchgeführt. Wenn ein ähnlicher Kontakt gefunden wird, erscheint eine Warnung:

> „Dieser Kontakt scheint schon vorhanden zu sein. Du kannst ihn hier überprüfen: [Name] (in neuem Fenster öffnen). Willst du ihn trotzdem anlegen?"

Bei Ehepaaren werden automatisch zwei Partner-Kontakte angelegt und mit dem Ehepaar verknüpft.

---

## Validierung

### Pflichtfelder

- **Person**: Mindestens eines der Felder Vorname, Nachname oder Email-Adresse muss ausgefüllt sein.
- **Organisation**: Mindestens Name oder Email-Adresse muss ausgefüllt sein.

### Fehlermeldungen

| Kontext | Meldung (de) |
|---------|-------------|
| Alle Pflichtfelder leer | „Mindestens eines der Felder muss ausgefüllt sein" |
| Überlappende Mitgliedszeiten | „Überlappende Mitgliedszeiten sind nicht möglich." |
| Anmerkung ohne Inhalt | „Überschrift oder Anmerkungen müssen ausgefüllt werden." |

### Lösch-Fehlermeldungen

| Kontext | Meldung (de) |
|---------|-------------|
| Kontakt nicht löschbar | „Dieser Kontakt kann nicht gelöscht werden. [Gründe]" |
| Partner in Massenaktion | „Partner können in diesem Kontext nicht gelöscht werden." |
| Partner nicht löschbar | „Nicht alle Partner können gelöscht werden." |
| Nur für Paare | „Diese Aktion ist nur für Paare verfügbar." |
| Partner blockiert | „Ein oder mehrere Partner können nicht gelöscht werden: [Namen]." |
| Ungültige Partner | „Die als Partner angegebenen Kontakte sind ungültig." |

---

## Import

Über die Listenseite können Kontakte aus einer **NGO.Tools-Vorlage** (Excel) importiert werden. Der Import bietet:

- Download einer Vorlage
- Datei-Upload
- Strategie zur Erkennung bestehender Kontakte
- Option: Segment erstellen wenn nicht vorhanden
- Option: Newsletter-Liste erstellen wenn nicht vorhanden

Bei mehr als einer bestimmten Anzahl von Kontakten läuft der Import im Hintergrund, und der Benutzer erhält eine E-Mail mit dem Ergebnis.

### Import-Fehlermeldungen

| Fehlertyp | Meldung (de) |
|-----------|-------------|
| Unbekanntes Feld | „Wir kennen das Feld '[Feldname]' nicht." |
| Ungültiger Wert | Die jeweilige Validierungsmeldung |

---

## Dublettenmanagement

Über die Listenseite erreichbar. Ermöglicht das Finden und Zusammenführen von doppelten Kontakten.

- **Suchmethoden**: Nach Email, Name, Vorname, Nachname
- **Exakte Suche**: Optional — wenn aktiviert, werden nur exakte Übereinstimmungen gefunden
- **Aktionen für Dubletten**:
  - Weitere Kontakte löschen (nur Hauptkontakt behalten)
  - Hauptkontakt zu Segment hinzufügen; andere entfernen
  - Ignorieren/Ausblenden

---

## Eager Loading

Die Ressource lädt folgende Beziehungen automatisch vor (zur Vermeidung von N+1-Problemen):

- Segmente (ohne Newsletter)
- Abonnierte Newsletter
- Anmerkungen
- Segment-Zugehörigkeiten
- Kommunikationskanäle
- Adressen
- Kontaktbeziehungen (mit Gegenpart)
- Mitgliedszeiten (sortiert nach Startdatum)
- Benutzerdefinierte Feldwerte (mit Feld, Optionen und Abschnitt)
- Spendenanzahl und Spendensumme

---

# STANDALONE_PAGE

## standalone_page: HasComputedValues

**Entity:** HasComputedValues  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Traits/HasComputedValues.php`  
**Updated:** 2026-02-14 22:27:20  

# Berechnete Werte bei Geschäftsvorfällen

## Übersicht

Bei der Bearbeitung von Geschäftsvorfällen (z. B. Eingangs- und Ausgangsrechnungen, interne Umbuchungen) werden verschiedene Zusammenfassungswerte automatisch berechnet und angezeigt. Diese berechneten Werte geben dir auf einen Blick die wichtigsten Informationen zum jeweiligen Geschäftsvorfall: den Kontaktnamen, die Beschreibung, das Datum, das Leistungsdatum, den Gesamtbetrag mit Währung sowie den Zahlungsstatus.

## Angezeigte berechnete Werte im Geschäftsvorfall

| Wert | Beschreibung |
|------|-------------|
| **Kontaktname** | Der Name des zugeordneten Kontakts zum Geschäftsvorfall. |
| **Beschreibung** | Die Beschreibung bzw. Rechnungsnummer des Geschäftsvorfalls. |
| **Datum** | Das Rechnungsdatum des Geschäftsvorfalls. Ist kein Rechnungsdatum vorhanden, wird stattdessen das Zahlungsdatum der ersten Position angezeigt. |
| **Leistungsdatum** | Das Leistungsdatum der ersten Position des Geschäftsvorfalls. |
| **Betrag** | Der Gesamtbetrag des Geschäftsvorfalls, formatiert mit Währung. Bei internen Umbuchungen wird immer der Absolutbetrag (positiver Wert) angezeigt. |
| **Zahlungsstatus** | Der aktuelle Zahlungsstatus des Geschäftsvorfalls, farblich gekennzeichnet. |

## Besonderheiten bei berechneten Werten

### Betragsermittlung bei Geschäftsvorfällen

Der **Gesamtbetrag** eines Geschäftsvorfalls wird bei internen Umbuchungen aus der ersten Position ermittelt. In allen anderen Fällen wird der Betrag bevorzugt aus den hochgeladenen Belegen übernommen. Ist kein Beleg vorhanden, wird stattdessen der Betrag aus den Positionen verwendet.

### Interne Umbuchungen

Bei **internen Umbuchungen** wird der Gesamtbetrag immer als positiver Wert (Absolutbetrag) angezeigt, unabhängig davon, ob es sich um eine Zu- oder Abbuchung handelt.

### Datumsermittlung

Das **Datum** des Geschäftsvorfalls wird in folgender Reihenfolge ermittelt:

1. Rechnungsdatum der ersten Position – wird bevorzugt verwendet.
2. Zahlungsdatum der ersten Position – wird als Fallback herangezogen, wenn kein Rechnungsdatum vorhanden ist.

---

## standalone_page: HasActions

**Entity:** HasActions  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Traits/HasActions.php`  
**Updated:** 2026-02-14 22:26:21  

# Aktionen für Finanzereignisse

## Übersicht

Diese Komponente stellt verschiedene Aktionen bereit, die dir beim Bearbeiten und Verwalten von Finanzereignissen zur Verfügung stehen. Dazu gehören das Zurücksetzen, Festschreiben und Stornieren von Buchungen, das Verwalten von Kontakten und Leistungsdaten, das Hinzufügen von Teilbuchungen sowie die Erfassung von Anlagegütern. Die Aktionen erscheinen kontextabhängig auf der Detailseite eines Finanzereignisses – das bedeutet, dass dir nur diejenigen Aktionen angezeigt werden, die im aktuellen Zustand des Finanzereignisses sinnvoll und zulässig sind.

## Aktionen

### Buchung zurücksetzen

Mit dieser Aktion setzt du eine bestehende Buchung eines Finanzereignisses zurück in den Ausgangszustand. Dabei werden alle zugehörigen Positionen (Teilbuchungen) gelöscht.

**Verfügbarkeit:** Diese Aktion ist nur verfügbar, wenn das Finanzereignis bearbeitbar ist und es sich nicht um eine Spende handelt.

**Was passiert nach dem Klick?**
- Alle bestehenden Positionen des Finanzereignisses werden gelöscht.
- Das Finanzereignis wird in den Ausgangszustand zurückversetzt und kann neu bebucht werden.

### Buchung festschreiben

Mit dieser Aktion schreibst du eine bestätigte Buchung eines Finanzereignisses fest. Nach dem Festschreiben kann die Buchung nicht mehr verändert werden – dies dient der Unveränderbarkeit für die Buchhaltung.

**Verfügbarkeit:** Diese Aktion ist nur verfügbar, wenn sich das Finanzereignis im Status „Bestätigt" befindet.

**Was passiert nach dem Klick?**
- Die Buchung wird als festgeschrieben markiert.
- Um eine festgeschriebene Buchung zu korrigieren, musst du stattdessen die Aktion „Buchung stornieren" verwenden.

### Teilbuchung hinzufügen

Mit dieser Aktion fügst du dem Finanzereignis eine weitere Teilbuchung (Position) hinzu. Die neue Teilbuchung wird als Kopie der letzten vorhandenen Position erstellt, wobei der Betrag auf 0,00 € gesetzt wird. So kannst du schnell weitere Positionen anlegen, ohne alle Felder erneut ausfüllen zu müssen.

**Verfügbarkeit:** Diese Aktion ist nur verfügbar, wenn das Finanzereignis bearbeitbar ist.

**Was passiert nach dem Klick?**
- Eine neue Position wird dem Finanzereignis hinzugefügt.
- Die neue Position übernimmt die Einstellungen der letzten vorhandenen Position.
- Der Betrag der neuen Position wird auf 0,00 € gesetzt und muss von dir angepasst werden.
- Das Finanzereignis wird automatisch validiert, um sicherzustellen, dass die Buchung weiterhin korrekt ist.

### Finanzereignis löschen

Mit dieser Aktion löschst du das gesamte Finanzereignis. Vor dem Löschen wird dir eine Bestätigungsabfrage angezeigt, damit du das Löschen nicht versehentlich auslöst.

**Verfügbarkeit:** Diese Aktion ist nur verfügbar, wenn das Finanzereignis löschbar ist.

**Was passiert nach dem Klick?**
- Dir wird zunächst eine Bestätigungsabfrage angezeigt.
- Je nach Situation können zusätzliche Optionen erscheinen.
- Nach Bestätigung wird das Finanzereignis gelöscht.

### Buchung stornieren

Mit dieser Aktion erstellst du eine Stornobuchung für ein bereits festgeschriebenes Finanzereignis. Die ursprüngliche Buchung bleibt dabei erhalten – es wird eine neue Gegenbuchung erzeugt.

**Verfügbarkeit:** Diese Aktion ist nur verfügbar, wenn die Buchung festgeschrieben ist und noch keine Stornierung für dieses Finanzereignis existiert und das Finanzereignis nicht selbst eine Stornobuchung ist.

**Was passiert nach dem Klick?**
- Es wird automatisch ein neues Finanzereignis mit einer Stornobuchung erstellt.
- Das ursprüngliche Finanzereignis wird als storniert markiert.

### Belege anzeigen

Mit dieser Aktion öffnest du eine seitliche Ansicht, in der alle dem Finanzereignis zugeordneten Belege angezeigt werden. So kannst du Rechnungen, Quittungen oder andere Dokumente direkt einsehen, ohne die Detailseite zu verlassen.

**Was passiert nach dem Klick?**
- Eine seitliche Ansicht (Seitenleiste) öffnet sich mit einer Übersicht aller zugeordneten Belege.

### Kontakt verwalten

Mit dieser Aktion öffnest du ein Dialogfenster, in dem du den zugeordneten Kontakt des Finanzereignisses ändern kannst. Der Kontakt ist z. B. der Lieferant, Spender oder Empfänger, der mit dem Finanzereignis verknüpft ist.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Kontakt | Kontaktauswahl | Nein | Auswahl eines bestehenden Kontakts aus deiner Kontaktliste. |

**Was passiert nach dem Speichern?**
- Der ausgewählte Kontakt wird dem Finanzereignis zugeordnet.

### Leistungsdatum verwalten

Mit dieser Aktion öffnest du ein Dialogfenster zum Setzen oder Ändern des Leistungsdatums eines Finanzereignisses. Das Leistungsdatum gibt an, wann die Leistung erbracht oder die Lieferung erfolgt ist – es kann vom Rechnungsdatum abweichen.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Lieferdatum | Datumsauswahl | Nein | Das Datum der erbrachten Leistung oder Lieferung. |

**Was passiert nach dem Speichern?**
- Das Leistungsdatum der ersten Position des Finanzereignisses wird auf das gewählte Datum gesetzt oder aktualisiert.

### Zahlungen verwalten

Mit dieser Aktion öffnest du ein großes Dialogfenster zur Verwaltung der zugewiesenen Zahlungen (Bankvorgänge) des Finanzereignisses. Hier kannst du sehen, welche Bankvorgänge dem Finanzereignis zugeordnet sind.

**Was passiert nach dem Klick?**
- Ein Dialogfenster öffnet sich mit einer Übersicht aller dem Finanzereignis zugeordneten Bankvorgänge.

### Neuen Kontakt anlegen

Mit dieser Aktion erstellst du einen neuen Kontakt direkt aus dem Finanzereignis heraus, ohne zur Kontaktverwaltung wechseln zu müssen. Die Felder werden nach Möglichkeit automatisch mit Daten aus dem zugeordneten Beleg vorausgefüllt (z. B. Name und Adresse des Rechnungsstellers).

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Name | Textfeld | Ja | Name des Kontakts (z. B. Firmenname oder Personenname) |
| Adresszeile 1 | Textfeld | Nein | Straße und Hausnummer |
| Adresszeile 2 | Textfeld | Nein | Zusätzliche Adressangaben |
| PLZ | Textfeld | Nein | Postleitzahl |
| Ort | Textfeld | Nein | Stadt bzw. Ort |
| Land | Auswahl | Nein | Land (Standardwert: Deutschland) |

**Was passiert nach dem Speichern?**
- Ein neuer Kontakt wird in deiner Kontaktliste angelegt.
- Falls Adressdaten angegeben wurden, wird dem Kontakt eine Adresse zugeordnet.
- Der neu erstellte Kontakt wird automatisch dem Finanzereignis zugeordnet.

**Validierung:**
- Das Feld „Name" ist ein Pflichtfeld. Ohne Angabe eines Namens kann der Kontakt nicht gespeichert werden.

### Anlagegut erfassen

Diese Aktion wird angezeigt, wenn das gewählte Buchungskonto einer Position ein Anlagekonto ist. Je nach Situation wird automatisch entschieden, welche Variante angezeigt wird. Es gibt drei Varianten:

#### Reguläres Anlagegut erfassen

Wenn die Voraussetzungen zur Erfassung eines Anlageguts erfüllt sind und keine Sofortabschreibung erforderlich ist, wird ein Formular zur Erfassung des Anlageguts geöffnet. Ein Hinweis informiert dich darüber, dass es sich um ein Anlagekonto handelt und das Anlagegut direkt erfasst werden kann.

#### Sofortabschreibung GWG

Wird automatisch vorgeschlagen, wenn es sich um ein geringwertiges Wirtschaftsgut (GWG) handelt, das eine Sofortabschreibung erfordert. Der gesamte Betrag wird sofort als Betriebsausgabe verbucht, eine Verteilung über mehrere Jahre entfällt.

#### Erfassung nicht möglich

Falls die erforderlichen Angaben (z. B. Kostenstelle oder Steuerschlüssel) bei der Position des Finanzereignisses noch fehlen, erscheint ein Hinweis, dass die Erfassung des Anlageguts derzeit nicht möglich ist. Du kannst die fehlenden Angaben zuerst in der Position ergänzen und die Anlagegut-Erfassung anschließend nachholen.

**Was passiert nach dem Speichern?**
- Ein neues Anlagegut wird in der Anlagenverwaltung erstellt.
- Das Anlagegut wird mit der entsprechenden Position des Finanzereignisses verknüpft.
- Bei Pool-Abschreibung wird das Anlagegut einem Sammelposten zugeordnet.

## Validierung und Fehlermeldungen

Die Aktionen für Finanzereignisse führen verschiedene Prüfungen durch, um die Korrektheit der Daten sicherzustellen:

- **Teilbuchung hinzufügen:** Nach dem Hinzufügen wird das Finanzereignis automatisch validiert.
- **Finanzereignis löschen:** Die Löschaktion zeigt dir eine Bestätigungsabfrage und kontextabhängige Informationen an, damit du eine informierte Entscheidung treffen kannst.
- **Neuen Kontakt anlegen:** Das Feld „Name" ist ein Pflichtfeld. Wenn du es leer lässt, wird dir eine Fehlermeldung angezeigt und der Kontakt kann nicht gespeichert werden.
- **Anlagegut erfassen:** Wenn bei der Position noch erforderliche Angaben fehlen, wird ein Hinweis angezeigt, dass die Erfassung derzeit nicht möglich ist. Ergänze die fehlenden Angaben in der Position und versuche es dann erneut.
- **Buchung festschreiben:** Die Aktion ist nur im Status „Bestätigt" verfügbar. Ist das Finanzereignis in einem anderen Status, wird die Schaltfläche nicht angezeigt.

## Beziehungen zu anderen Bereichen

- **Belege:** Finanzereignisse können Belegen (z. B. Rechnungen, Quittungen) zugeordnet sein. Über die Aktion „Belege anzeigen" kannst du diese direkt einsehen.
- **Kontakte:** Jedem Finanzereignis kann ein Kontakt (z. B. Lieferant, Spender, Empfänger) zugeordnet werden. Du kannst bestehende Kontakte zuweisen oder über „Neuen Kontakt anlegen" direkt einen neuen erstellen.
- **Bankvorgänge:** Finanzereignisse sind mit Bankvorgängen (Zahlungen) verknüpft. Über die Aktion „Zahlungen verwalten" kannst du die Zuordnung einsehen.
- **Anlagenverwaltung:** Aus Positionen eines Finanzereignisses können über die Aktion „Anlagegut erfassen" Wirtschaftsgüter erstellt werden, die anschließend in der Anlagenverwaltung weitergeführt und abgeschrieben werden.
- **Kostenstellen und Projekte:** Zuordnungen zu Kostenstellen und Projekten werden bei der Anlagegut-Erfassung automatisch übernommen.

---

## standalone_page: FiltersFinancialEvents

**Entity:** FiltersFinancialEvents  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Traits/FiltersFinancialEvents.php`  
**Updated:** 2026-02-14 22:23:37  

# Finanzereignisse filtern

## Übersicht

Die Filterfunktion ermöglicht es dir, die Liste der Finanzereignisse nach verschiedenen Kriterien einzugrenzen. Zusätzlich kannst du über ein Suchfeld nach Beschreibung oder Kontaktname suchen.

## Filterfelder

Beim Klick auf das Trichter-Symbol öffnet sich ein Filterdialog mit folgenden Optionen. Alle Felder sind optional — du kannst beliebig viele Filter kombinieren, um die Ergebnisse gezielt einzugrenzen.

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| Datum von | Datumsauswahl | Zeigt nur Finanzereignisse an, deren Zahlungsdatum ab diesem Datum liegt |
| Datum bis | Datumsauswahl | Zeigt nur Finanzereignisse an, deren Zahlungsdatum bis zu diesem Datum liegt |
| Kategorie | Mehrfachauswahl | Filtert nach Kategorie |
| Status | Mehrfachauswahl | Filtert nach Status |
| Projekt | Mehrfachauswahl | Filtert nach zugeordnetem Projekt |
| Buchungstyp | Mehrfachauswahl | Filtert nach dem Buchungstyp der Positionen eines Finanzereignisses |
| Kostenstelle | Mehrfachauswahl | Filtert nach der Kostenstelle der Positionen eines Finanzereignisses |
| Konto | Mehrfachauswahl | Filtert nach dem verknüpften Bankkonto. Die Option „unbekannt" zeigt Finanzereignisse an, denen kein Bankkonto zugeordnet ist |
| Ohne Belege | Schalter | Wenn aktiviert, werden nur Finanzereignisse angezeigt, denen kein Beleg zugeordnet ist |
| Automatisch bestätigt | Schalter | Wenn aktiviert, werden nur Finanzereignisse angezeigt, die automatisch bestätigt wurden |

## Suche

Zusätzlich zum Filterdialog gibt es ein Suchfeld. Du kannst damit Finanzereignisse anhand folgender Kriterien finden:

- **Beschreibung** des Finanzereignisses
- **Name** des verknüpften Kontakts

Die Suche funktioniert unabhängig von den gesetzten Filtern — beide werden gleichzeitig angewendet. Wenn du also Filter gesetzt hast und zusätzlich einen Suchbegriff eingibst, werden nur Finanzereignisse angezeigt, die sowohl den Filtern als auch dem Suchbegriff entsprechen.

## Aktionen

Im Filterdialog und im Kopfbereich der Seite stehen dir folgende Aktionen zur Verfügung:

- **Filter anwenden**: Bestätigt die gewählten Filtereinstellungen und schließt den Dialog. Die Ergebnisliste wird aktualisiert und zeigt nur noch die Finanzereignisse an, die deinen Kriterien entsprechen.
- **Filter zurücksetzen**: Setzt alle Filterfelder auf ihre Standardwerte zurück. Diese Aktion ist sowohl als Button im Filterdialog als auch als Link-Aktion verfügbar. Der Link wird nur angezeigt, wenn mindestens ein Filter aktiv ist.

Das Trichter-Symbol zeigt die Anzahl der aktiven Filter als Badge an. Solange mindestens ein Filter aktiv ist, wird das Symbol ausgefüllt dargestellt, damit du auf einen Blick erkennst, dass die Liste gefiltert ist.

## Beziehungen

- **Kontakte**: Finanzereignisse sind mit Kontakten verknüpft. Über das Suchfeld kannst du Finanzereignisse anhand des Kontaktnamens finden.
- **Belege**: Der Filter „Ohne Belege" bezieht sich auf die einem Finanzereignis zugeordneten Belege. So findest du schnell Finanzereignisse, bei denen noch Belege fehlen.
- **Projekte, Kostenstellen, Buchungstypen**: Diese Zuordnungen erfolgen auf Ebene der einzelnen Positionen eines Finanzereignisses. Ein Finanzereignis wird angezeigt, wenn mindestens eine seiner Positionen dem gewählten Filterkriterium entspricht.
- **Bankkonten**: Der Kontofilter filtert nach dem über Kontoumsätze verknüpften Bankkonto. Die Option „unbekannt" zeigt Finanzereignisse ohne zugeordnetes Bankkonto an.

---

## standalone_page: UploadAction

**Entity:** UploadAction  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Actions/UploadAction.php`  
**Updated:** 2026-02-14 22:21:26  

# Belege hochladen

## Übersicht

Mit der Funktion „Belege hochladen" kannst du Belege wie Quittungen, Rechnungen oder andere Nachweise hochladen und einem Geschäftsvorfall zuordnen. Du kannst dabei mehrere Belege gleichzeitig hochladen oder bereits vorhandene Belege aus dem System verwenden.

## Belege hochladen – So funktioniert's

Die Upload-Aktion wird als Button ohne sichtbares Label dargestellt. Wenn du auf den Button klickst, öffnet sich ein Upload-Bereich mit folgenden Möglichkeiten:

- **Neue Belege hochladen:** Du kannst mehrere Dateien gleichzeitig auswählen und hochladen.
- **Vorhandene Belege verwenden:** Über die Option „Beleg verwenden" kannst du bereits im System vorhandene Belege auswählen und dem Geschäftsvorfall zuordnen, ohne sie erneut hochladen zu müssen.

---

## standalone_page: SearchAction

**Entity:** SearchAction  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Actions/SearchAction.php`  
**Updated:** 2026-02-14 22:20:48  

# Suche (Geschäftsvorfälle)

## Übersicht
Die Suchfunktion ermöglicht es, die Liste der Geschäftsvorfälle zu filtern. Sie befindet sich im Kopfbereich der Geschäftsvorfälle-Seite.

## Navigation
Die Suchfunktion für Geschäftsvorfälle ist direkt auf der Seite **Geschäftsvorfälle** verfügbar.

## Beziehungen
- Die Suchfunktion ist Teil der Seite **Geschäftsvorfälle** und filtert die dort angezeigte Liste.

---

## standalone_page: RecordDonationInKindAction

**Entity:** RecordDonationInKindAction  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Actions/RecordDonationInKindAction.php`  
**Updated:** 2026-02-14 22:18:16  

# Sachspende erfassen

## Übersicht

Mit der Funktion „Sachspende erfassen" dokumentierst du, welche Gegenstände oder Güter deine Organisation als Spende erhalten hat. Du ordnest die Sachspende einem Kontakt (Spender) und einem Projekt zu, gibst den Wert an und legst fest, ob eine Spendenbescheinigung erstellt werden soll.

## Navigation

Die Funktion „Sachspende erfassen" befindet sich im Bereich **Finanzen** und ist dort als Aktion auf der Seite der Finanzereignisse verfügbar.

## Formularfelder der Sachspende

### Kopfbereich

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Datum | Datumsauswahl | Ja | Das Datum, an dem die Sachspende eingegangen ist. |
| Kontakt | Auswahl | Ja | Der Spender bzw. die Spenderin der Sachspende. Es können nur Kontakte mit einem hinterlegten Namen ausgewählt werden. Über die Suche lassen sich Kontakte finden. Du kannst auch direkt im Dialog einen neuen Kontakt anlegen (mit Name und Typ). |
| Beschreibung | Rich-Text-Editor | Nein | Freitextfeld für eine allgemeine Beschreibung der Sachspende, z. B. Anlass oder Hintergrund der Zuwendung. |

### Artikel (Positionen)

Eine Sachspende kann aus mehreren Artikeln (Positionen) bestehen. Mindestens ein Artikel muss angegeben werden. Für jeden Artikel stehen folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Projekt | Projektauswahl | Ja | Das Projekt, dem diese Position der Sachspende zugeordnet wird. Das ausgewählte Projekt muss zum eingetragenen Datum der Sachspende aktiv sein. |
| Typ | Auswahl | Ja | Der Typ der Position (z. B. Direktaufwand). Ist standardmäßig vorausgewählt. |
| Artikel | Auswahl | Ja | Der konkrete Artikel bzw. Gegenstand. Du kannst einen bestehenden Artikel auswählen oder direkt im Dialog einen neuen Artikel anlegen (mit SKU, Name und Einheit). |
| Menge | Zahleneingabe | Ja | Die Menge des gespendeten Artikels. Der Standardwert ist 1. Die Einheit wird automatisch vom ausgewählten Artikel übernommen und hinter dem Feld angezeigt. |
| Einzelwert | Geldbetrag | Ja | Der Wert eines einzelnen Artikels in der Währung deiner Organisation. |
| Wert ist geschätzt | Schalter | Nein | Aktiviere diesen Schalter, wenn der angegebene Wert nur eine Schätzung ist. Standardmäßig deaktiviert. |
| mit Spendenbescheinigung | Schalter | Nein | Legt fest, ob für diese Position eine Spendenbescheinigung erstellt werden soll. Standardmäßig aktiviert. |
| Herkunft der Sachzuwendung | Auswahl (Optionsfelder) | Nein | Gibt an, ob die Sachspende aus dem Betriebsvermögen oder dem Privatvermögen stammt, oder ob keine Angabe gemacht wird. Dieses Feld ist nur sichtbar, wenn „mit Spendenbescheinigung" aktiviert ist. |
| Unterlagen zur Wertermittlung liegen vor (z. B. Rechnung, Gutachten) | Checkbox | Nein | Gibt an, ob Belege zur Wertermittlung vorliegen. Dieses Feld ist nur sichtbar, wenn „mit Spendenbescheinigung" aktiviert ist. |
| Zustiftung (Vermögensstock) | Schalter | Nein | Gibt an, ob die Zuwendung in das zu erhaltende Vermögen (Vermögensstock) der Stiftung erfolgt. Dieses Feld ist nur sichtbar, wenn deine Organisation eine Stiftung ist (Rechtsform: Stiftung, Stiftung öffentlichen Rechts oder Treuhandstiftung) **und** „mit Spendenbescheinigung" aktiviert ist. |

## Was passiert nach dem Speichern?

Wenn du die Sachspende erfasst und das Formular speicherst, geschieht Folgendes:

- Die Sachspende wird als **Inventarbewegung** vom Typ „Sachspende" mit Richtung „Eingang" angelegt.
- Die Methode `processAsDonation()` wird auf der angelegten Inventarbewegung ausgeführt.

## Validierung & Fehlermeldungen

Beim Speichern der Sachspende prüft das System die eingegebenen Daten. Die folgende Tabelle zeigt mögliche Fehler, ihre Ursache und wie du sie beheben kannst:

| Regel | Fehlermeldung / Hinweis | Lösung |
|-------|------------------------|--------|
| Datum ist Pflichtfeld | Das Feld muss ausgefüllt werden. | Trage das Datum ein, an dem die Sachspende eingegangen ist. |
| Kontakt ist Pflichtfeld | Ein Kontakt muss ausgewählt werden. | Wähle einen bestehenden Kontakt aus oder lege direkt im Dialog einen neuen Kontakt an. |
| Mindestens ein Artikel erforderlich | Es muss mindestens eine Position angelegt werden. | Füge mindestens einen Artikel als Position hinzu. |
| Projekt muss zum Datum aktiv sein | „Das ausgewählte Projekt muss am [Datum] aktiv sein." | Wähle ein Projekt, das zum Zeitpunkt der Sachspende noch nicht beendet war, oder passe das Datum der Sachspende an. |
| Artikel ist Pflichtfeld | Das Feld muss ausgefüllt werden. | Wähle einen bestehenden Artikel aus oder lege einen neuen an. |
| Menge ist Pflichtfeld | Das Feld muss ausgefüllt werden. | Gib die Menge des gespendeten Artikels ein. |
| Einzelwert ist Pflichtfeld | Das Feld muss ausgefüllt werden. | Gib den Wert eines einzelnen Artikels ein. |
| Typ ist Pflichtfeld | Das Feld muss ausgefüllt werden. | Wähle den Typ der Position aus. In der Regel ist dieser bereits vorausgewählt. |

## Beziehungen der Sachspende zu anderen Bereichen

- **Kontakte**: Die Sachspende wird einem bestehenden Kontakt zugeordnet. Neue Kontakte können direkt im Dialog angelegt werden, ohne die Eingabe zu verlassen.
- **Projekte**: Jede Position der Sachspende wird einem Projekt zugeordnet. Das Projekt muss zum Datum der Sachspende aktiv sein. So ist sichergestellt, dass die Zuordnung zeitlich korrekt ist.
- **Artikel (Lagerbestand)**: Die gespendeten Gegenstände werden als Inventarartikel erfasst. Neue Artikel können direkt im Dialog angelegt werden (mit SKU, Name und Einheit).
- **Spendenverwaltung**: Positionen mit aktivierter Spendenbescheinigung werden für die spätere Erstellung einer Spendenbescheinigung vorgemerkt.

## Häufige Fragen zur Sachspende

**Was ist der Unterschied zwischen „Wert ist geschätzt" und einem belegten Wert?**
Wenn du den Schalter „Wert ist geschätzt" aktivierst, wird dokumentiert, dass der angegebene Wert nicht durch Belege nachgewiesen ist. Für Spendenbescheinigungen kann die Angabe zur Wertermittlung relevant sein – nutze dafür die Checkbox „Unterlagen zur Wertermittlung liegen vor".

**Wann wird das Feld „Zustiftung (Vermögensstock)" angezeigt?**
Dieses Feld erscheint nur, wenn deine Organisation als Stiftung (Stiftung, Stiftung öffentlichen Rechts oder Treuhandstiftung) eingetragen ist und bei der jeweiligen Position „mit Spendenbescheinigung" aktiviert ist.

---

## standalone_page: FilterAction

**Entity:** FilterAction  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Actions/FilterAction.php`  
**Updated:** 2026-02-14 22:16:25  

# Finanzereignisse filtern

## Übersicht

Mit der Filterfunktion kannst du die Liste der Finanzereignisse nach verschiedenen Kriterien eingrenzen. Du kannst nach Kategorie, Status, Projekt, Typ, Sphäre, Konto, Zeitraum und weiteren Eigenschaften filtern, um gezielt bestimmte Buchungen zu finden.

## Formularfelder

Die folgenden Filterfelder stehen dir zur Verfügung, um die Liste der Finanzereignisse einzugrenzen. Alle Felder sind optional – du kannst beliebig viele Filter kombinieren.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Kategorie | Mehrfachauswahl | Nein | Filtert nach der finanziellen Kategorie des Finanzereignisses (z. B. Einnahme, Ausgabe). Du kannst mehrere Kategorien gleichzeitig auswählen. |
| Status | Mehrfachauswahl | Nein | Filtert nach dem aktuellen Bearbeitungsstatus des Finanzereignisses. Du kannst mehrere Status gleichzeitig auswählen. |
| Projekt | Mehrfachauswahl | Nein | Filtert nach zugeordnetem Projekt. Dieses Filterfeld ist nur sichtbar, wenn das Tool „Projekte" aktiviert ist. Du kannst mehrere Projekte gleichzeitig auswählen. |
| Typ | Mehrfachauswahl | Nein | Filtert nach dem Typ des Finanzereignisses. Die verfügbaren Typen entsprechen den Finanzereignistypen, die in deiner Organisation angelegt wurden. Du kannst mehrere Typen gleichzeitig auswählen. |
| Sphäre | Mehrfachauswahl | Nein | Filtert nach der buchhalterischen Sphäre. Dieses Filterfeld wird ausgeblendet, wenn in den Einstellungen nur der ideelle Bereich verwendet wird. Du kannst mehrere Sphären gleichzeitig auswählen. |
| Konto | Mehrfachauswahl | Nein | Filtert nach dem Bankkonto, über das der Vorgang lief. Dieses Filterfeld ist nur sichtbar, wenn mehr als ein Bankkonto vorhanden ist. Die Auswahl enthält auch die Option „Konto unbekannt / gelöscht" für Bankvorgänge, bei denen kein Konto zugeordnet ist oder das ursprüngliche Konto gelöscht wurde. |
| von | Datum | Nein | Filtert Finanzereignisse ab diesem Datum. |
| bis | Datum | Nein | Filtert Finanzereignisse bis zu diesem Datum. Du kannst „von" und „bis" kombinieren, um einen bestimmten Zeitraum einzugrenzen. |
| Ohne Beleg | Checkbox | Nein | Wenn aktiviert, werden nur Finanzereignisse angezeigt, denen kein Beleg zugeordnet ist. |
| Automatische Buchungen | Checkbox | Nein | Wenn aktiviert, werden nur Finanzereignisse angezeigt, die automatisch erstellt wurden. |

## Sichtbarkeit der Filterfelder

Nicht alle Filterfelder sind immer sichtbar. Die Anzeige hängt von der Konfiguration deiner Organisation ab:

- **Projekt**: Dieses Filterfeld erscheint nur, wenn das Tool „Projekte" aktiviert ist. Ist das Tool nicht aktiviert, wird das Feld ausgeblendet.
- **Sphäre**: Dieses Filterfeld wird ausgeblendet, wenn in den Einstellungen festgelegt ist, dass nur der ideelle Bereich verwendet wird.
- **Konto**: Dieses Filterfeld erscheint nur, wenn mehr als ein Bankkonto in der Organisation vorhanden ist.

## Beziehungen

- **Finanzereignisse**: Die Filterfunktion wirkt direkt auf die Liste der Finanzereignisse.
- **Projekte**: Über den Projektfilter können Finanzereignisse nach Projektzuordnung gefiltert werden. Voraussetzung ist, dass das Tool „Projekte" aktiviert ist.
- **Bankkonten**: Der Kontofilter bezieht sich auf die verbundenen Bankkonten.
- **Belege**: Über die Checkbox „Ohne Beleg" kannst du gezielt Finanzereignisse finden, denen noch kein Beleg zugeordnet ist.

## Tipps zur Verwendung

- Du kannst mehrere Filter gleichzeitig setzen, um die Ergebnisse weiter einzugrenzen.
- Innerhalb eines Mehrfachauswahl-Filters (z. B. Kategorie oder Status) werden Finanzereignisse angezeigt, die mindestens einem der ausgewählten Werte entsprechen.

---

## standalone_page: CreateInternalTransferAction

**Entity:** CreateInternalTransferAction  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Actions/CreateInternalTransferAction.php`  
**Updated:** 2026-02-14 22:15:07  

# Umbuchung erstellen

## Übersicht

Mit der Funktion „Umbuchung erstellen" kannst du interne Umbuchungen zwischen zwei deiner Bankkonten erstellen. Eine Umbuchung bildet einen Geldtransfer zwischen eigenen Konten ab – zum Beispiel von einem Girokonto auf ein anderes oder zwischen einem Bankkonto und einer Handkasse. Dabei werden jeweils ein ausgehender und ein eingehender Bankvorgang miteinander verknüpft und als Finanzereignis vom Typ „Interne Umbuchung" gespeichert.

## Navigation

Die Funktion „Umbuchung erstellen" findest du im Bereich **Finanzen → Finanzereignisse**. Dort steht sie als Aktion zur Verfügung.

## Voraussetzungen

Damit du eine Umbuchung erstellen kannst, müssen folgende Bedingungen erfüllt sein:

- Es müssen **mindestens zwei Bankkonten** angelegt sein, zwischen denen umgebucht werden kann.
- Auf dem Quellkonto muss mindestens ein **noch nicht gebuchter ausgehender Bankvorgang** (mit negativem Betrag) vorhanden sein – es sei denn, das Konto ist eine Handkasse.
- Auf dem Zielkonto muss mindestens ein **noch nicht gebuchter eingehender Bankvorgang** (mit positivem Betrag) vorhanden sein – es sei denn, das Konto ist eine Handkasse.

Wenn keine passenden Bankvorgänge vorhanden sind, stehen in den Auswahlfeldern für Zahlungsvorgänge keine Einträge zur Verfügung.

## Formularfelder

Beim Erstellen einer Umbuchung füllst du folgende Felder aus:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| von | Kontoauswahl | Ja | Das Bankkonto, von dem der Betrag abgeht. Es kann nicht dasselbe Konto wie beim „an"-Feld gewählt werden. |
| Zahlungsvorgang (von) | Transaktionsauswahl | Ja | Der ausgehende Bankvorgang (Ausgabe) auf dem „von"-Konto. Es werden nur noch nicht gebuchte Vorgänge mit negativem Betrag angezeigt. Dieses Feld ist **nicht sichtbar**, wenn das „von"-Konto eine Handkasse ist. |
| an | Kontoauswahl | Ja | Das Bankkonto, auf das der Betrag eingeht. Es kann nicht dasselbe Konto wie beim „von"-Feld gewählt werden. |
| Zahlungsvorgang (an) | Transaktionsauswahl | Ja | Der eingehende Bankvorgang (Einnahme) auf dem „an"-Konto. Es werden nur noch nicht gebuchte Vorgänge mit positivem Betrag angezeigt. Dieses Feld ist **nicht sichtbar**, wenn das „an"-Konto eine Handkasse ist. |
| Betrag | Geldbetrag | Ja | Nur sichtbar, wenn **beide** Konten Handkassen sind. Der Betrag darf das aktuelle Guthaben der „von"-Handkasse nicht überschreiten. Mindestwert: 1. |
| Datum | Datumsauswahl | Ja | Nur sichtbar, wenn **beide** Konten Handkassen sind. |
| Beschreibung | Textfeld | Ja | Beschreibung der Umbuchung. Wird standardmäßig mit „Umbuchung" vorausgefüllt. Du kannst den Text frei anpassen. |

### Abhängigkeiten zwischen Feldern bei der Umbuchung

Die Formularfelder der Umbuchung reagieren aufeinander, um dir die Eingabe zu erleichtern:

- Wenn du das **„von"-Konto** wechselst, wird der zugehörige Zahlungsvorgang zurückgesetzt, da die bisherige Auswahl nicht mehr zum neuen Konto passt.
- Wenn du einen **Zahlungsvorgang auf dem „von"-Konto** auswählst und bereits ein „an"-Konto gewählt ist, versucht das System automatisch, den passenden Gegenvorgang auf dem „an"-Konto zu finden und vorzubelegen.
- Wenn du das **„an"-Konto** wechselst und bereits ein Zahlungsvorgang auf dem „von"-Konto ausgewählt ist, wird ebenfalls versucht, den passenden Gegenvorgang automatisch zu finden.
- Die Felder **Betrag** und **Datum** erscheinen nur, wenn sowohl das „von"- als auch das „an"-Konto eine Handkasse ist. In diesem Fall werden keine bestehenden Bankvorgänge ausgewählt, sondern neue automatisch erzeugt.

## Warnhinweise bei der Umbuchung

Während der Eingabe können folgende Warnhinweise erscheinen. Diese dienen als Hinweis – die Umbuchung kann trotzdem erstellt werden:

| Warnhinweis | Bedeutung |
|---|---|
| „Die Beträge der beiden ausgewählten Bankvorgänge stimmen nicht überein." | Die Beträge des ausgehenden und eingehenden Zahlungsvorgangs passen nicht zusammen. Prüfe, ob du die richtigen Vorgänge ausgewählt hast. Dieser Hinweis erscheint nur, wenn keines der beiden Konten eine Handkasse ist. |
| „Der Betrag auf dem ‚Von'-Konto sollte negativ sein." | Der Zahlungsvorgang auf dem „von"-Konto hat einen positiven Betrag. Bei einer Umbuchung sollte der ausgehende Vorgang einen negativen Betrag (Ausgabe) haben. |
| „Der Betrag auf dem ‚An'-Konto sollte negativ sein." | Der Zahlungsvorgang auf dem „an"-Konto hat einen negativen Betrag. Bei einer Umbuchung sollte der eingehende Vorgang einen positiven Betrag (Einnahme) haben. |

## Was passiert nach dem Erstellen einer Umbuchung?

Wenn du das Formular ausgefüllt und die Umbuchung bestätigt hast, passiert Folgendes:

- Es wird ein **Finanzereignis** vom Typ „Interne Umbuchung" angelegt, das die beiden Zahlungsvorgänge miteinander verknüpft.
- Die Beschreibung des Finanzereignisses wird automatisch als „Umbuchung von [Kontoname] zu [Kontoname]" generiert, unabhängig davon, was du im Beschreibungsfeld eingetragen hast.
- Wenn eines der Konten eine **Handkasse** ist, wird automatisch ein entsprechender Bankvorgang (Einzahlung oder Auszahlung) auf der Handkasse erstellt.
- Wenn **beide Konten Handkassen** sind, werden auf beiden Seiten automatisch Bankvorgänge erstellt.
- Das Finanzereignis wird automatisch **bestätigt** (Status wechselt zu „Bestätigt").
- Bei erfolgreicher Erstellung erscheint eine **Erfolgsmeldung** mit dem Betrag und den beteiligten Konten.

## Validierung & Fehlermeldungen bei der Umbuchung

Beim Erstellen einer Umbuchung können folgende Fehlermeldungen auftreten:

| Fehlermeldung | Ursache | Lösung |
|---|---|---|
| „Mindestens einer der beiden ausgewählten Bankvorgänge ist bereits gebucht. Bitte lade die Seite neu und versuche es erneut." | Ein oder beide Zahlungsvorgänge wurden zwischenzeitlich von einem anderen Benutzer oder Prozess einem anderen Finanzereignis zugeordnet. | Lade die Seite neu und wähle andere, noch nicht gebuchte Zahlungsvorgänge aus. |
| „Mindestens einer der ausgewählten Bankvorgänge wurde nicht mehr gefunden. Bitte lade die Seite neu und versuche es erneut." | Ein Bankvorgang wurde nicht ausgewählt, obwohl das zugehörige Konto keine Handkasse ist. | Lade die Seite neu und wähle gültige Zahlungsvorgänge aus. |

## Beziehungen der Umbuchung zu anderen Bereichen

- **Bankkonten**: Die Umbuchung verknüpft zwei deiner Bankkonten miteinander. Beide Konten müssen vorab angelegt sein.
- **Bankvorgänge**: Je ein ausgehender und ein eingehender Bankvorgang werden der Umbuchung zugeordnet. Wenn eines oder beide Konten eine Handkasse ist, werden die entsprechenden Bankvorgänge automatisch erstellt.
- **Handkasse**: Wenn eines oder beide der Konten eine Handkasse ist, wird automatisch ein passender Bankvorgang auf der Handkasse erzeugt. Du musst diesen nicht manuell anlegen.
- **Finanzereignisse**: Die Umbuchung erzeugt ein neues Finanzereignis vom Typ „Interne Umbuchung", das in der Liste der Finanzereignisse unter **Finanzen → Finanzereignisse** erscheint.

---

## standalone_page: ChooseColumnsAction

**Entity:** ChooseColumnsAction  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Actions/ChooseColumnsAction.php`  
**Updated:** 2026-02-14 22:13:04  

# Spalten auswählen

## Übersicht
Mit der Funktion „Spalten auswählen" kannst du festlegen, welche Spalten in der Tabelle der Finanzereignisse angezeigt werden. So passt du die Ansicht individuell an deine Bedürfnisse an und blendest nur die für dich relevanten Informationen ein.

## Navigation
Die Funktion „Spalten auswählen" findest du auf der Seite „Finanzereignisse". In der Kopfzeile der Tabelle befindet sich ein Icon-Button mit einem Spalten-Symbol. Ein Klick darauf öffnet den Dialog zur Spaltenauswahl.

## Ablauf

1. Klicke auf den Icon-Button mit dem Spalten-Symbol in der Kopfzeile der Finanzereignisse-Tabelle.
2. Es öffnet sich ein Dialog mit der Überschrift „Spalten".
3. Im Dialog siehst du eine Liste aller verfügbaren Spalten als Checkboxen, angeordnet in zwei Spalten.
4. Setze die Häkchen bei den Spalten, die du sehen möchtest, und entferne die Häkchen bei Spalten, die du ausblenden willst.
5. Klicke auf „Speichern", um deine Auswahl zu übernehmen.
6. Die Tabelle der Finanzereignisse wird sofort aktualisiert und zeigt nur noch die von dir ausgewählten Spalten an.

## Formularfelder

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Spalten | Checkbox-Liste | Ja | Wähle die gewünschten Spalten aus, die in der Tabelle der Finanzereignisse angezeigt werden sollen. Es werden nur die Spalten zur Auswahl angeboten, die aktuell verfügbar sind. Mindestens eine Spalte muss ausgewählt bleiben. |

## Aktionen

- **Spalten auswählen (Icon-Button):** Öffnet den Dialog „Spalten", in dem du per Checkbox die gewünschten Spalten an- oder abwählen kannst.
- **Speichern:** Übernimmt deine Auswahl und aktualisiert die Tabelle der Finanzereignisse sofort mit der neuen Spaltenauswahl.

## Validierung & Fehlermeldungen

| Fehlermeldung / Situation | Ursache | Lösung |
|---------------------------|---------|--------|
| Die Auswahl kann nicht gespeichert werden | Es ist keine Spalte ausgewählt. Es muss mindestens eine Spalte aktiv sein. | Setze mindestens ein Häkchen bei einer der verfügbaren Spalten und klicke dann erneut auf „Speichern". |

## Häufige Fragen

- **Kann ich alle Spalten gleichzeitig einblenden?** Ja, setze einfach bei allen verfügbaren Spalten ein Häkchen und klicke auf „Speichern".
- **Welche Spalten stehen zur Auswahl?** Es werden nur die Spalten angeboten, die für die Tabelle der Finanzereignisse aktuell verfügbar sind. Die genaue Auswahl kann je nach Konfiguration variieren.

## Beziehungen

- Die Funktion „Spalten auswählen" gehört zur Seite **Finanzereignisse** und beeinflusst ausschließlich, welche Spalten in der dortigen Tabellenansicht sichtbar sind. Die zugrunde liegenden Daten werden durch die Spaltenauswahl nicht verändert – es ändert sich nur die Darstellung.

---

## standalone_page: BookPettyCashAction

**Entity:** BookPettyCashAction  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Actions/BookPettyCashAction.php`  
**Updated:** 2026-02-14 22:12:10  

# Handkassenvorgang erfassen

## Übersicht

Mit der Funktion „Handkassenvorgang erfassen" kannst du Barein- und Barauszahlungen über deine Handkasse buchen. Du wählst aus, ob es sich um eine Einnahme oder Ausgabe handelt, gibst den Betrag und Verwendungszweck an, ordnest den Vorgang einem Projekt und einer Sphäre zu und kannst optional einen Kontakt verknüpfen sowie Belege hochladen. Nach dem Speichern wird automatisch ein Bankvorgang auf der Handkasse erstellt und ein zugehöriges Finanzereignis erzeugt und bestätigt.

## Navigation

Die Funktion „Handkassenvorgang erfassen" ist als Aktion auf der Seite der Finanzereignisse verfügbar. Sie wird nur angezeigt, wenn mindestens ein Bankkonto vom Typ „Handkasse" angelegt ist. Ist keine Handkasse vorhanden, erscheint die Aktion nicht.

## Formularfelder

Beim Erfassen eines Handkassenvorgangs stehen dir folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Handkasse (Kontoauswahl) | Dropdown | Ja (vorausgewählt) | Auswahl der Handkasse, auf die gebucht wird. Dieses Feld wird nur angezeigt, wenn mehr als eine Handkasse existiert. Gibt es nur eine Handkasse, wird diese automatisch verwendet. Standardmäßig ist die erste Handkasse vorausgewählt. |
| Aktueller Stand | Anzeige | – | Zeigt den aktuellen Kontostand der ausgewählten Handkasse an. Wenn du die Handkasse wechselst, aktualisiert sich dieser Wert automatisch. |
| Einnahme / Ausgabe | Umschaltknöpfe | Ja | Bestimmt die Richtung des Vorgangs: „Einnahme" (Geld kommt in die Handkasse) oder „Ausgabe" (Geld wird aus der Handkasse entnommen). Standardmäßig ist „Ausgabe" ausgewählt. Wenn du zwischen Einnahme und Ausgabe wechselst, wird das Feld „Typ" zurückgesetzt, da sich die verfügbaren Typen je nach Richtung unterscheiden. |
| Typ | Dropdown | Ja | Art des Handkassenvorgangs. Die verfügbaren Optionen ändern sich je nachdem, ob du „Einnahme" oder „Ausgabe" gewählt hast. |
| Betrag | Geldbetrag | Ja | Der Betrag des Vorgangs. Muss mindestens 1 betragen. Bei Ausgaben darf der Betrag den aktuellen Kontostand der Handkasse nicht überschreiten. |
| Kontakt | Kontaktauswahl | Nein | Optionale Zuordnung eines Kontakts zum Vorgang. Du kannst einen bestehenden Kontakt auswählen oder direkt einen neuen Kontakt anlegen. Hinweis bei erweiterter Buchhaltung: Wenn du keinen Kontakt auswählst, wird automatisch ein Sammelkonto verwendet. |
| Verwendungszweck | Textfeld | Ja | Beschreibung des Vorgangs, z. B. „Büromaterial" oder „Bareinzahlung Spende". |
| Datum | Datumsauswahl | Ja | Datum des Vorgangs. Standardmäßig ist das heutige Datum eingetragen. Das gewählte Datum beeinflusst, welche Projekte zur Auswahl stehen. |
| Projekt | Projektauswahl | Ja | Zuordnung zu einem Projekt. Standardmäßig ist das Standardprojekt vorausgewählt. Die verfügbaren Projekte richten sich nach dem gewählten Datum – es werden nur Projekte angezeigt, die zum Buchungsdatum aktiv sind. |
| Sphäre | Dropdown | Ja | Zuordnung zu einer Sphäre (Kostenstelle). |
| Belege | Datei-Upload | Nein | Du kannst einen oder mehrere Belege (z. B. Quittungen, Rechnungen) hochladen. Diese werden dem erzeugten Finanzereignis zugeordnet. |

## Aktionen

### Handkassenvorgang speichern

Wenn du den Handkassenvorgang speicherst, passiert Folgendes:

1. Ein Bankvorgang wird auf der ausgewählten Handkasse erstellt (Einnahme oder Ausgabe je nach Auswahl).
2. Ein zugehöriges Finanzereignis wird automatisch erzeugt und direkt bestätigt.
3. Falls du Belege hochgeladen hast, werden diese dem Finanzereignis zugeordnet.

## Validierung und Fehlermeldungen

Beim Erfassen eines Handkassenvorgangs werden folgende Prüfungen durchgeführt. Wenn eine Prüfung fehlschlägt, wird der Vorgang nicht gespeichert und du erhältst eine Fehlermeldung:

| Regel | Fehlermeldung | Lösung |
|-------|---------------|--------|
| Betrag überschreitet bei Ausgaben das Handkassen-Guthaben | „Der Betrag überschreitet das aktuelle Guthaben von [Betrag]." | Reduziere den Betrag, sodass er den angezeigten aktuellen Stand der Handkasse nicht übersteigt. |
| Betrag ist nicht ausgefüllt oder kleiner als 1 | Standard-Pflichtfeldmeldung | Gib einen Betrag von mindestens 1 ein. |
| Typ ist nicht ausgewählt | Standard-Pflichtfeldmeldung | Wähle einen Typ aus dem Dropdown aus. Die verfügbaren Typen hängen davon ab, ob du „Einnahme" oder „Ausgabe" gewählt hast. |
| Verwendungszweck ist nicht ausgefüllt | Standard-Pflichtfeldmeldung | Gib eine Beschreibung des Vorgangs ein, z. B. „Büromaterial". |
| Datum ist nicht ausgefüllt | Standard-Pflichtfeldmeldung | Wähle ein Datum für den Vorgang aus. |
| Projekt ist nicht ausgewählt | Standard-Pflichtfeldmeldung | Wähle ein Projekt aus. Falls keine Projekte zur Auswahl stehen, prüfe, ob zum gewählten Datum aktive Projekte vorhanden sind. |
| Sphäre ist nicht ausgewählt | Standard-Pflichtfeldmeldung | Wähle eine Sphäre aus dem Dropdown aus. |

## Beziehungen zu anderen Bereichen

Die Funktion „Handkassenvorgang erfassen" steht in Verbindung mit folgenden Bereichen:

- **Bankkonten (Handkasse):** Es muss mindestens ein Bankkonto vom Typ „Handkasse" angelegt sein, damit die Funktion verfügbar ist. Der Vorgang wird auf der ausgewählten Handkasse gebucht.
- **Finanzereignisse:** Jeder gespeicherte Handkassenvorgang erzeugt automatisch ein bestätigtes Finanzereignis. Du findest es anschließend in der Liste der Finanzereignisse.
- **Bankvorgänge:** Für jeden Handkassenvorgang wird ein Bankvorgang auf der gewählten Handkasse erstellt.
- **Belege:** Hochgeladene Belege werden dem erzeugten Finanzereignis zugeordnet und können dort eingesehen werden.
- **Kontakte:** Optional kann ein Kontakt dem Handkassenvorgang zugeordnet werden. Ohne Kontakt wird bei erweiterter Buchhaltung ein Sammelkonto genutzt.
- **Projekte:** Der Handkassenvorgang wird einem Projekt zugeordnet. Die verfügbaren Projekte hängen vom gewählten Datum ab.
- **Sphären:** Der Handkassenvorgang wird einer Sphäre (Kostenstelle) zugeordnet.

## Häufige Fragen

**Die Aktion „Handkassenvorgang erfassen" wird nicht angezeigt – woran liegt das?**
Die Funktion ist nur sichtbar, wenn mindestens ein Bankkonto vom Typ „Handkasse" angelegt ist. Prüfe unter den Bankkonten, ob eine Handkasse existiert, und lege gegebenenfalls eine an.

**Warum kann ich den Betrag bei einer Ausgabe nicht eingeben?**
Bei Ausgaben darf der Betrag den aktuellen Kontostand der Handkasse nicht überschreiten. Prüfe den angezeigten „Aktuellen Stand" und stelle sicher, dass genügend Guthaben vorhanden ist.

**Warum ändert sich die Auswahl beim Feld „Typ", wenn ich zwischen Einnahme und Ausgabe wechsle?**
Die verfügbaren Typen unterscheiden sich je nach Richtung des Vorgangs. Wenn du zwischen „Einnahme" und „Ausgabe" wechselst, wird das Feld „Typ" zurückgesetzt und zeigt die passenden Optionen an.

**Warum stehen keine Projekte zur Auswahl?**
Die verfügbaren Projekte richten sich nach dem gewählten Datum. Stelle sicher, dass zum ausgewählten Buchungsdatum mindestens ein aktives Projekt vorhanden ist.

---

## standalone_page: AddFinancialEventAction

**Entity:** AddFinancialEventAction  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Actions/AddFinancialEventAction.php`  
**Updated:** 2026-02-14 22:10:20  

# Finanzereignis ohne Beleg erstellen

## Übersicht

Mit der Funktion **„Finanzereignis ohne Beleg erstellen"** kannst du ein neues Finanzereignis anlegen, ohne dass ein Beleg zugeordnet wird. Das Finanzereignis wird automatisch als Ausgabe angelegt.

## Navigation

Den Button zum Erstellen eines Finanzereignisses ohne Beleg findest du auf der Übersichtsseite der Finanzereignisse. Er ist als Icon-Button mit einem **Plus-Symbol** dargestellt. Wenn du mit der Maus darüberfährst, erscheint der Tooltip **„Finanzereignis ohne Beleg erstellen"**.

## Aktionen

| Aktion | Beschreibung |
|---|---|
| **Finanzereignis ohne Beleg erstellen** | Erstellt ein neues Finanzereignis in der Kategorie „Ausgabe" ohne zugeordneten Beleg. Es wird kein Formular angezeigt – nach dem Klick auf den Button wird das Finanzereignis direkt angelegt. |

## Beziehungen

- **Finanzereignisse**: Das neu erstellte Finanzereignis erscheint in der Liste der Finanzereignisse auf der Übersichtsseite und kann dort jederzeit weiter bearbeitet werden.
- **Belege**: Im Gegensatz zur Funktion „Beleg nutzen" wird beim Erstellen eines Finanzereignisses ohne Beleg bewusst kein Beleg zugeordnet.

## Gut zu wissen

- Es wird automatisch die Kategorie **„Ausgabe"** gesetzt.
- Pro Klick wird genau ein Finanzereignis erstellt. Wenn du mehrere Finanzereignisse ohne Beleg anlegen möchtest, klicke den Button erneut.

---

## standalone_page: KeycloakMigrationLogin

**Entity:** KeycloakMigrationLogin  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/Auth/KeycloakMigrationLogin.php`  
**Updated:** 2026-02-14 22:09:34  

# Anmeldung

## Übersicht

Auf der Anmeldeseite kannst du dich mit deinen Zugangsdaten (E-Mail-Adresse und Passwort) bei der ngo.tools-Plattform anmelden.

## Formularfelder

Die Anmeldeseite enthält folgende Eingabefelder:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| E-Mail | E-Mail-Eingabefeld | Ja | Die E-Mail-Adresse, mit der dein Benutzerkonto registriert ist |
| Passwort | Passwort-Eingabefeld | Ja | Das Passwort, das zu deinem Benutzerkonto gehört |

## Aktionen

- **Anmelden**: Nachdem du deine E-Mail-Adresse und dein Passwort eingegeben hast, klickst du auf „Anmelden". Bei korrekten Zugangsdaten wirst du in die ngo.tools-Plattform weitergeleitet und kannst mit der Arbeit beginnen.

---

## standalone_page: UserHasNoRolesInAnyTeam

**Entity:** UserHasNoRolesInAnyTeam  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/UserHasNoRolesInAnyTeam.php`  
**Updated:** 2026-02-14 22:08:52  

# Kein Zugriff – Keine Rolle zugewiesen

## Übersicht

Die Seite „Kein Zugriff – Keine Rolle zugewiesen" wird angezeigt, wenn du dich zwar erfolgreich angemeldet hast, dir aber in keinem Team der Organisation eine Rolle zugewiesen wurde. Ohne eine Rollenzuweisung kannst du die Plattform nicht nutzen. Auf dieser Seite findest du Informationen dazu, an wen du dich wenden kannst, um Zugriff zu erhalten.

## Navigation

Die Seite „Kein Zugriff" wird **automatisch** nach der Anmeldung angezeigt, wenn dir in keinem Team eine Rolle zugewiesen ist. Du kannst diese Seite nicht über die reguläre Navigation aufrufen – sie erscheint ausschließlich in diesem Sonderfall.

Wenn dir bereits mindestens eine Rolle in einem Team zugewiesen ist, wirst du automatisch zur normalen Anwendung weitergeleitet.

## Angezeigte Informationen

Auf der Seite „Kein Zugriff" werden dir die **Administratoren deiner Organisation** aufgelistet, an die du dich wenden kannst. Dabei werden folgende Personen angezeigt:

- **Organisations-Administratoren** – Personen, die als Organisations-Admin markiert sind
- **Team-Administratoren** – Personen, die die Rolle „Admin" in einem beliebigen Team innehaben

Kontaktiere eine dieser Personen und bitte darum, dass dir eine Rolle in einem Team zugewiesen wird.

## Häufige Ursachen

Die Seite „Kein Zugriff" erscheint typischerweise in folgenden Situationen:

- **Neues Benutzerkonto**: Du hast dich gerade erst registriert oder wurdest neu zur Organisation hinzugefügt, aber es wurde dir noch keine Rolle zugewiesen.
- **Rolle entzogen**: Ein Administrator hat deine bisherige Rollenzuweisung in allen Teams entfernt.
- **Teamzuordnung aufgehoben**: Du wurdest aus allen Teams entfernt, denen du zuvor zugeordnet warst.

## Beziehungen zu anderen Bereichen

- **Teams**: Du musst mindestens einem Team zugeordnet sein, um die Plattform nutzen zu können. Teams bilden die grundlegende Organisationseinheit für den Zugriff.
- **Rollen & Berechtigungen**: Innerhalb eines Teams benötigst du eine zugewiesene Rolle, damit du auf die jeweiligen Tools zugreifen kannst.

---

## standalone_page: Translator

**Entity:** Translator  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/Translator.php`  
**Updated:** 2026-02-14 22:08:01  

# Übersetzer

## Übersicht

Der Übersetzer ermöglicht es dir, Dokumente automatisch in eine gewählte Zielsprache zu übersetzen. Die Übersetzung wird über den Dienst DeepL durchgeführt. Nach der Übersetzung wird die übersetzte Datei direkt zum Download angeboten. Der Dateiname der heruntergeladenen Datei entspricht dabei dem Originalnamen.

## Navigation

Die Funktion „Übersetzer" befindet sich in der Seitenleiste unter der Menügruppe **Verschiedenes**.

## Voraussetzungen

Das Tool **Übersetzer** muss für deine Organisation aktiviert sein. Ist das Tool nicht aktiviert, erscheint der Menüpunkt nicht in der Seitenleiste.

## Formularfelder

Der Übersetzer stellt dir folgende Felder zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Datei | Datei-Upload | Ja | Das Dokument, das übersetzt werden soll. |
| Zielsprache | Auswahl (durchsuchbar) | Ja | Die Sprache, in die das Dokument übersetzt werden soll. Standardmäßig ist „Deutsch" (DE) vorausgewählt. Die verfügbaren Sprachen werden von DeepL bereitgestellt. Du kannst im Auswahlfeld nach Sprachen suchen, indem du den Namen eingibst. |
| Förmlichkeit | Auswahl | Nein | Bestimmt den Grad der Förmlichkeit in der Übersetzung. Optionen: **Weniger** (informell), **Normal** (Standard), **Mehr** (förmlich). Dieses Feld wird nur angezeigt, wenn die gewählte Zielsprache Förmlichkeitsstufen unterstützt. |

## Aktionen

### Übersetzen

Über die Schaltfläche **Übersetzen** startest du die Übersetzung des hochgeladenen Dokuments in die gewählte Zielsprache mit den eingestellten Optionen. Nach Abschluss der Übersetzung wird die übersetzte Datei automatisch zum Download angeboten. Der Dateiname der heruntergeladenen Datei entspricht dem Originalnamen.

## Validierung und Fehlermeldungen

Beim Übersetzer können folgende Validierungsfehler auftreten:

| Fehler | Ursache | Lösung |
|--------|---------|--------|
| Datei ist erforderlich | Es wurde keine Datei hochgeladen. | Lade eine Datei über das Upload-Feld hoch, bevor du auf „Übersetzen" klickst. |

## Häufige Fragen

### Welche Sprachen stehen im Übersetzer zur Verfügung?

Die Liste der verfügbaren Zielsprachen wird direkt von DeepL bereitgestellt. Du kannst im Auswahlfeld nach dem gewünschten Sprachnamen suchen.

### Was bedeutet die Einstellung „Förmlichkeit" im Übersetzer?

Die Förmlichkeit steuert, ob die Übersetzung eher informell oder förmlich formuliert wird. Diese Option ist nur bei Sprachen verfügbar, die eine solche Unterscheidung kennen. Bei Sprachen, die keine Förmlichkeitsstufen unterstützen, wird die Option nicht angezeigt.

---

## standalone_page: ResourceBookings

**Entity:** ResourceBookings  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/ResourceBookings.php`  
**Updated:** 2026-02-14 22:06:57  

# Ressourcen

## Übersicht
Auf der Seite **Ressourcen** kannst du Buchungsanfragen für die dir zugewiesenen Ressourcen verwalten. Du siehst hier alle Buchungen, die für deine autorisierten Ressourcen erstellt wurden, und kannst diese genehmigen oder löschen. Die Ansicht lässt sich zwischen einer Kalender- und einer Tabellenansicht umschalten.

## Navigation
Die Seite **Ressourcen** findest du in der Seitenleiste unter der Menügruppe **Verschiedenes**.

## Tabellenansicht der Ressourcenbuchungen

### Spalten

| Spalte | Beschreibung |
|---|---|
| Benutzer | Name des Benutzers, der die Buchung erstellt hat |
| Kontakt | Name des zugehörigen Kontakts |
| Ressourcen | Die gebuchten Ressourcen, dargestellt als Badges |
| Start | Startdatum und -uhrzeit der Buchung |
| Ende | Enddatum und -uhrzeit der Buchung |
| Wiederholung | Informationen zur Wiederholungsregel, falls die Buchung wiederkehrend ist |
| Status | Aktueller Status der Buchungsanfrage, dargestellt als farbiges Badge |

### Filter der Ressourcenbuchungen

| Filter | Typ | Beschreibung |
|---|---|---|
| Kontakt | Auswahlliste (durchsuchbar) | Filtert die Buchungen nach einem bestimmten Kontakt |
| Ressourcen | Mehrfachauswahl (durchsuchbar) | Filtert die Buchungen nach einer oder mehreren Ressourcen |
| Status | Auswahlliste | Filtert die Buchungen nach ihrem aktuellen Status |

Du kannst mehrere Filter gleichzeitig verwenden, um die Ergebnisse weiter einzugrenzen.

### Suche
Über das Suchfeld kannst du die Ressourcenbuchungen nach **Benutzer** und **Kontakt** durchsuchen.

### Sortierung
Standardmäßig werden die Ressourcenbuchungen nach **Start** absteigend sortiert, sodass die neuesten Buchungen zuerst angezeigt werden. Die Spalten **Benutzer**, **Kontakt**, **Start** und **Ende** sind sortierbar – klicke auf die jeweilige Spaltenüberschrift, um die Sortierung zu ändern.

## Aktionen für Ressourcenbuchungen

### Ansicht umschalten
Über die Schaltfläche in der Kopfzeile der Seite **Ressourcen** kannst du zwischen der **Kalenderansicht** und der **Tabellenansicht** wechseln.

### Genehmigen
Einzelne Buchungsanfragen kannst du über die Aktion **Genehmigen** bestätigen. Diese Aktion ist nur sichtbar, wenn die Buchung noch nicht genehmigt wurde und ein Übergang in den Status „Genehmigt" möglich ist.

### Löschen
Über die Löschen-Aktion kannst du eine Buchungsanfrage entfernen.

## Berechtigungen für Ressourcenbuchungen
Damit du die Seite **Ressourcen** nutzen kannst, müssen folgende Voraussetzungen erfüllt sein:

- Das Tool **Ressourcen** muss aktiviert sein.
- Du benötigst die Berechtigung **write resources**.
- Dir müssen Ressourcen zugewiesen sein – du siehst ausschließlich Buchungen für die Ressourcen, die dir zugeordnet sind.

Wenn eine dieser Voraussetzungen nicht erfüllt ist, wird die Seite nicht in der Navigation angezeigt.

## Beziehungen der Ressourcenbuchungen
- **Kontakte**: Jede Buchungsanfrage ist mit einem Kontakt verknüpft. Der zugehörige Kontakt wird in der Tabelle angezeigt und kann als Filter verwendet werden.
- **Ressourcen**: Jede Buchungsanfrage ist mit einer oder mehreren Ressourcen verknüpft. Die zugehörigen Ressourcen werden als Badges in der Tabelle dargestellt.
- **Benutzer**: Der Benutzer, der die Buchungsanfrage erstellt hat, wird in der Tabelle angezeigt.

---

## standalone_page: PublicationScheduler

**Entity:** PublicationScheduler  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/PublicationScheduler.php`  
**Updated:** 2026-02-14 22:05:52  

# Veröffentlichungs-Zuweisung

## Übersicht

Die Veröffentlichungs-Zuweisung ermöglicht es dir als Koordinator eines Veröffentlichungskanals, eingehende Veröffentlichungs-Anfragen für Veranstaltungen deinen Kanälen zuzuweisen oder die Zuweisung wieder aufzuheben. Die Seite zeigt eine Übersicht aller zukünftigen Veranstaltungen mit ihren verfügbaren Veröffentlichungskanälen und offenen Anfragen.

## Navigation

Die Veröffentlichungs-Zuweisung findest du in der Seitenleiste im Bereich **Kommunikation** unter dem Menüpunkt **Veröffentlichungs-Zuweisung**. Der Menüpunkt ist nur sichtbar, wenn du die erforderlichen Berechtigungen hast (siehe Abschnitt „Berechtigungen").

## Funktionsweise

Die Veröffentlichungs-Zuweisung zeigt zukünftige Veranstaltungen und die Veröffentlichungskanäle, für die du als Koordinator eingetragen bist. Für jede Kombination aus Veranstaltung, Veröffentlichungs-Anfrage und Kanal kannst du die Zuweisung per Klick ein- oder ausschalten (Toggle-Prinzip).

Es werden nur zukünftige Veranstaltungen angezeigt, deren Veranstaltungstyp mit mindestens einem deiner koordinierten Kanäle verknüpft ist. Kanäle, die du nicht koordinierst, werden nicht angezeigt.

Wenn eine Veranstaltung zeitnah bevorsteht, werden bei der Zuweisung automatisch die zugehörigen Anhänge der Veröffentlichungs-Anfrage mit Nextcloud synchronisiert.

Sind für einen Kanal keine offenen Anfragen vorhanden, wird der Hinweis **„keine offenen Anfragen"** angezeigt.

## Aktionen

| Aktion | Beschreibung |
|---|---|
| **Zuweisung aktivieren** | Klicke auf eine Kombination aus Veranstaltung, Anfrage und Kanal, um die Veröffentlichungs-Anfrage dem Kanal für diese Veranstaltung zuzuweisen. Die Zuweisung wird sofort gespeichert. Bei zeitnahen Veranstaltungen werden dabei automatisch die Anhänge mit Nextcloud synchronisiert. |
| **Zuweisung deaktivieren** | Klicke erneut auf eine bereits zugewiesene Kombination, um die Zuweisung wieder zu entfernen. Die Änderung wird sofort gespeichert. |

## Berechtigungen

Damit du die Veröffentlichungs-Zuweisung nutzen kannst, müssen folgende Voraussetzungen erfüllt sein:

- Das Tool **Veröffentlichungs-Management** muss aktiviert sein.
- Du musst als **Koordinator** mindestens eines Veröffentlichungskanals eingetragen sein.

Es werden dir nur die Kanäle angezeigt, die du koordinierst. Ohne diese Voraussetzungen ist die Seite in der Navigation nicht sichtbar und nicht erreichbar.

## Sonderfälle und Hinweise

- **Keine zukünftigen Veranstaltungen vorhanden:** Wenn es keine zukünftigen Veranstaltungen gibt, die mit deinen koordinierten Kanälen verknüpft sind, wird die Veröffentlichungs-Zuweisung keine Einträge anzeigen.
- **Keine offenen Anfragen:** Wenn für einen Kanal keine offenen Veröffentlichungs-Anfragen vorliegen, siehst du den Hinweis **„keine offenen Anfragen"**.

## Beziehungen zu anderen Bereichen

- **Veröffentlichungskanäle:** Die verfügbaren Kanäle und deren Koordinatoren werden an anderer Stelle konfiguriert.
- **Veranstaltungen:** Es werden nur zukünftige Veranstaltungen in der Veröffentlichungs-Zuweisung angezeigt, deren Veranstaltungstyp mit mindestens einem deiner koordinierten Kanäle verknüpft ist.
- **Nextcloud:** Bei zeitnahen Veranstaltungen werden Anhänge der zugewiesenen Veröffentlichungs-Anfragen automatisch mit Nextcloud synchronisiert.

---

## standalone_page: PrerequisitesManager

**Entity:** PrerequisitesManager  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/PrerequisitesManager.php`  
**Updated:** 2026-02-14 22:04:40  

# Voraussetzungen vervollständigen

## Übersicht

Die Seite „Voraussetzungen vervollständigen" erscheint automatisch, wenn für einen bestimmten Vorgang noch wichtige Daten deiner Organisation fehlen – beispielsweise beim Erstellen einer Rechnung. Hier kannst du die fehlenden Angaben direkt nachtragen, damit der ursprüngliche Vorgang anschließend fortgesetzt werden kann. Du rufst diese Seite nicht selbst auf – sie wird dir automatisch angezeigt, wenn das System fehlende Pflichtdaten erkennt.

## Navigation

Die Seite „Voraussetzungen vervollständigen" ist nicht über die Seitenleiste erreichbar. Sie wird automatisch eingeblendet, wenn ein Vorgang (z. B. die Rechnungserstellung) fehlende Organisationsdaten erkennt und eine Ergänzung erforderlich ist. Nach dem erfolgreichen Speichern wirst du automatisch zur ursprünglich aufgerufenen Seite weitergeleitet.

## Formularfelder

Die auf der Seite „Voraussetzungen vervollständigen" angezeigten Felder hängen davon ab, welche Daten deiner Organisation aktuell fehlen. Es werden nur die Felder angezeigt, die tatsächlich noch ergänzt oder korrigiert werden müssen. Mögliche Felder sind:

| Feld | Beschreibung |
|------|-------------|
| **Formeller Name** | Der formelle Name deines Vereins inklusive Rechtsform, z. B. „Fit für die Zukunft e.V." |
| **Straße** | Die Straße der offiziellen Adresse deiner Organisation |
| **Ort** | Der Ort der offiziellen Adresse deiner Organisation |
| **Postleitzahl** | Die Postleitzahl der offiziellen Adresse deiner Organisation |
| **Rechnungsadresse** | Die Rechnungsadresse deiner Organisation |

Wenn alle relevanten Daten bereits vorhanden sind, wird diese Seite nicht angezeigt.

## Aktionen

### Speichern

Über die Schaltfläche **Speichern** auf der Seite „Voraussetzungen vervollständigen" werden die eingegebenen Daten übernommen:

- **Erfolg:** Wenn alle erforderlichen Angaben vollständig und korrekt sind, erscheint die Meldung „Vielen Dank! – und schon geht's weiter." Du wirst automatisch zur ursprünglich aufgerufenen Seite weitergeleitet.
- **Fehler:** Falls die Daten noch nicht vollständig oder nicht korrekt ausgefüllt sind, erscheint die Meldung „Da hat leider etwas nicht geklappt."

## Berechtigungen

Die Seite „Voraussetzungen vervollständigen" kann nur von Organisations-Administratoren aufgerufen werden.

Wenn du kein Administrator bist, wird dir stattdessen ein Hinweis angezeigt, dass du dich an die Administratoren deiner Organisation wenden sollst, damit diese die fehlenden Daten eingeben.

## Beziehungen

- Die auf der Seite „Voraussetzungen vervollständigen" angezeigten fehlenden Daten betreffen die **Organisationseinstellungen** (formeller Name, Adresse, Rechnungsadresse). Du kannst diese Daten auch direkt in den Organisationseinstellungen pflegen.
- Diese Seite wird typischerweise im Zusammenhang mit der **Rechnungserstellung** aufgerufen, wenn die Rechnungsadresse oder andere Pflichtdaten der Organisation unvollständig sind.

---

## standalone_page: OptigemImport

**Entity:** OptigemImport  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Pages/OptigemImport.php`  
**Updated:** 2026-02-14 22:03:41  

# Optigem-Import

## Übersicht

Der Optigem-Import ermöglicht es, Daten aus der Optigem-Software in ngo.tools zu übertragen. Der Prozess besteht aus zwei Schritten: Zuerst werden die Optigem-Daten hochgeladen und konvertiert, anschließend wählst du die gewünschten Einstellungen für den eigentlichen Import aus.

## Navigation

Die Funktion „Optigem-Import" befindet sich in der Navigationsgruppe **Sonstiges** in der Seitenleiste.

## Ablauf

Der Optigem-Import läuft in zwei aufeinanderfolgenden Phasen ab. Du musst Phase 1 abschließen, bevor du zu Phase 2 gelangst.

### Phase 1: Daten hochladen und konvertieren

In der ersten Phase lädst du deine Optigem-Daten als ZIP-Datei hoch und gibst deine Optigem-Zugangsdaten (Benutzername und Passwort) ein. Nach dem Klick auf **Konvertierung starten** werden die Daten im Hintergrund konvertiert.

Falls die Zugangsdaten falsch sind, erscheint die Meldung: *„Die angegebenen Benutzerdaten sind nicht korrekt. Bitte probiere es erneut."* Du kannst deine Zugangsdaten dann korrigieren und die Konvertierung erneut starten.

### Phase 2: Import-Einstellungen festlegen und Import starten

Sobald die Konvertierung abgeschlossen ist, erscheint die Meldung: *„Die Optigem-Daten wurden konvertiert. Bitte wähle jetzt die entsprechenden Einstellungen, um den Import durchzuführen."*

In dieser Phase wählst du aus, welcher Mandant, welche Jahre und welche Datentypen importiert werden sollen. Nach dem Klick auf **Import starten** läuft der Import im Hintergrund weiter – du erhältst eine E-Mail, sobald der Import abgeschlossen ist.

## Formularfelder

### Upload-Formular des Optigem-Imports (Phase 1)

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Optigem-Daten (als Zip-Datei) | Datei-Upload | Ja | Deine Optigem-Daten als ZIP-Datei. Es werden ausschließlich Dateien im ZIP-Format akzeptiert. Dieses Feld wird ausgeblendet, wenn bereits Daten hochgeladen wurden. |
| Optigem-Benutzername | Textfeld | Ja | Dein Benutzername für die Optigem-Datenbank. |
| Optigem-Passwort | Passwortfeld | Ja | Dein Passwort für die Optigem-Datenbank. Das Passwort kann über ein Augen-Symbol sichtbar gemacht werden. |

### Einstellungen-Formular des Optigem-Imports (Phase 2)

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Mandanten | Einzelauswahl (Radio) | Ja | Auswahl des zu importierenden Mandanten. Dieses Feld wird nur angezeigt, wenn die Optigem-Daten mehr als einen Mandanten enthalten (Mandant 99 wird dabei nicht mitgezählt). |
| Zu importierende Jahre | Checkbox-Liste | Ja (mind. 1) | Auswahl der Jahre, die importiert werden sollen. Die verfügbaren Jahre hängen vom gewählten Mandanten ab. Über eine Option kannst du alle Jahre auf einmal an- oder abwählen. |
| Zu importierende Daten | Checkbox-Liste | Ja (mind. 1) | Auswahl der Datentypen, die importiert werden sollen. Über eine Option kannst du alle Datentypen auf einmal an- oder abwählen. |

## Aktionen

### Konvertierung starten

Die Aktion **Konvertierung starten** lädt die ZIP-Datei hoch und startet die Konvertierung der Optigem-Daten. Danach erscheint automatisch das Einstellungen-Formular (Phase 2).

### Import starten

Die Aktion **Import starten** startet den eigentlichen Datenimport im Hintergrund mit den von dir gewählten Einstellungen (Mandant, Jahre, Datentypen). Es erscheint die Meldung: *„Der Import wurde im Hintergrund gestartet. Du erhältst eine Mail, sobald er abgeschlossen wurde."*

### Import zurücksetzen

Die Aktion **Import zurücksetzen** setzt den gesamten Optigem-Import-Vorgang zurück, sodass du von vorne beginnen kannst. Alle bisher hochgeladenen und konvertierten Daten werden dabei gelöscht.

## Berechtigungen

Das Tool **Optigem** muss für den Benutzer aktiviert sein, damit die Seite „Optigem-Import" zugänglich ist.

## Validierung & Fehlermeldungen

Der Optigem-Import prüft deine Eingaben in beiden Phasen:

### Phase 1 – Upload-Formular

| Fehlersituation | Fehlermeldung / Verhalten | Lösung |
|---|---|---|
| Keine ZIP-Datei hochgeladen | Pflichtfeld-Validierung | Lade eine ZIP-Datei mit deinen Optigem-Daten hoch. |
| Falsches Dateiformat (nicht ZIP) | Die Datei wird nicht akzeptiert. | Stelle sicher, dass du eine Datei im ZIP-Format hochlädst. |
| Benutzername nicht ausgefüllt | Pflichtfeld-Validierung | Gib deinen Optigem-Benutzernamen ein. |
| Passwort nicht ausgefüllt | Pflichtfeld-Validierung | Gib dein Optigem-Passwort ein. |
| Falsche Zugangsdaten | *„Die angegebenen Benutzerdaten sind nicht korrekt. Bitte probiere es erneut."* | Überprüfe deinen Optigem-Benutzernamen und dein Passwort und versuche es erneut. |

### Phase 2 – Einstellungen-Formular

| Fehlersituation | Fehlermeldung / Verhalten | Lösung |
|---|---|---|
| Kein Jahr ausgewählt | Pflichtfeld-Validierung (mindestens 1) | Wähle mindestens ein Jahr aus, das importiert werden soll. |
| Kein Datentyp ausgewählt | Pflichtfeld-Validierung (mindestens 1) | Wähle mindestens einen Datentyp aus. |

## Beziehungen

Der Optigem-Import erstellt bzw. aktualisiert Daten in folgenden Bereichen von ngo.tools:

- **Kontakte**: Personen (Spender) aus Optigem werden als Kontakte importiert.
- **Projekte**: Arbeitsbereiche aus Optigem werden als Projekte importiert.
- **Spenden**: Buchungen aus Optigem werden als Spenden importiert.

---

## standalone_page: OptigemImport

**Entity:** OptigemImport  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/OptigemImport.php`  
**Updated:** 2026-02-14 21:29:46  

# Optigem-Import

## Übersicht

Der Optigem-Import ermöglicht es, Daten aus der Optigem-Software in ngo.tools zu übernehmen. Der Prozess besteht aus zwei Schritten: Zuerst werden die Optigem-Daten hochgeladen und konvertiert, anschließend werden die gewünschten Daten importiert.

## Ablauf des Optigem-Imports

Der Optigem-Import läuft in mehreren Phasen ab:

### Phase 1: Daten hochladen und konvertieren

In der ersten Phase lädst du deine Optigem-Daten als ZIP-Datei hoch und gibst deine Optigem-Zugangsdaten (Benutzername und Passwort) ein. Anschließend startest du die Konvertierung.

Falls die Zugangsdaten falsch sind, erscheint die Meldung: *„Die angegebenen Benutzerdaten sind nicht korrekt. Bitte probiere es erneut."*

Wenn bereits Daten hochgeladen wurden, wird das Upload-Feld nicht mehr angezeigt. Du kannst in diesem Fall über die Aktion „Import zurücksetzen" den Vorgang zurücksetzen und eine neue Datei hochladen.

### Phase 2: Import-Einstellungen und Datenimport

Nach erfolgreicher Konvertierung wird das Einstellungs-Formular angezeigt. Hier wählst du aus, welchen Mandanten, welche Jahre und welche Datentypen du importieren möchtest. Anschließend startest du den eigentlichen Import. Der Import läuft im Hintergrund – du erhältst eine E-Mail, sobald er abgeschlossen wurde.

## Formularfelder

### Upload-Formular des Optigem-Imports (Phase 1)

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Optigem-Daten (als Zip-Datei) | Dateiupload | Ja | Die Optigem-Daten als ZIP-Datei. Es werden ausschließlich ZIP-Dateien akzeptiert. Dieses Feld ist nicht mehr sichtbar, wenn bereits Daten hochgeladen wurden. |
| Optigem-Benutzername | Textfeld | Ja | Der Benutzername für die Optigem-Datenbank. |
| Optigem-Passwort | Passwortfeld | Ja | Das Passwort für die Optigem-Datenbank. Das Passwort kann über ein Augen-Symbol sichtbar gemacht werden. |

### Einstellungs-Formular des Optigem-Imports (Phase 2)

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Mandanten | Einfachauswahl | Ja | Auswahl des zu importierenden Mandanten. Dieses Feld wird nur angezeigt, wenn die Optigem-Daten mehr als einen Mandanten enthalten (Mandant Nr. 99 wird dabei nicht mitgezählt). |
| Zu importierende Jahre | Mehrfachauswahl (Checkboxen) | Ja (mind. 1) | Auswahl der Jahre, die importiert werden sollen. Die verfügbaren Jahre hängen vom gewählten Mandanten ab und werden erst nach Auswahl eines Mandanten angezeigt. Es können auch alle Jahre auf einmal ausgewählt werden. |
| Zu importierende Daten | Mehrfachauswahl (Checkboxen) | Ja (mind. 1) | Auswahl der Datentypen, die importiert werden sollen. Es können auch alle Datentypen auf einmal ausgewählt werden. |

## Aktionen

- **Konvertierung starten**: Startet die Konvertierung der hochgeladenen Optigem-Daten. Nach erfolgreicher Konvertierung wird automatisch das Einstellungs-Formular für Phase 2 angezeigt.
- **Import starten**: Startet den eigentlichen Optigem-Datenimport mit den gewählten Einstellungen. Der Import läuft im Hintergrund. Es erscheint die Meldung: *„Der Import wurde im Hintergrund gestartet. Du erhältst eine Mail, sobald er abgeschlossen wurde."*
- **Import zurücksetzen**: Setzt den gesamten Optigem-Import-Vorgang zurück, sodass von vorne begonnen werden kann. Alle hochgeladenen und konvertierten Daten werden gelöscht.

## Berechtigungen

Das Tool **Optigem** muss für die Organisation aktiviert sein, damit die Seite „Optigem-Import" zugänglich ist.

## Validierung und Fehlermeldungen beim Optigem-Import

### Upload-Formular (Phase 1)

| Situation | Fehlermeldung / Verhalten | Lösung |
|-----------|--------------------------|--------|
| Pflichtfeld nicht ausgefüllt (Datei, Benutzername oder Passwort) | Standard-Validierungsfehler: Das Feld ist erforderlich. | Fülle alle Pflichtfelder aus, bevor du die Konvertierung startest. |
| Datei ist keine ZIP-Datei | Die Datei muss eine ZIP-Datei sein. | Lade die Optigem-Daten als ZIP-Datei hoch. |
| Falsche Zugangsdaten | *„Die angegebenen Benutzerdaten sind nicht korrekt. Bitte probiere es erneut."* | Überprüfe deinen Optigem-Benutzernamen und dein Passwort und versuche es erneut. |

### Einstellungs-Formular (Phase 2)

| Situation | Fehlermeldung / Verhalten | Lösung |
|-----------|--------------------------|--------|
| Kein Jahr ausgewählt | Validierungsfehler: Mindestens ein Jahr muss ausgewählt werden. | Wähle mindestens ein Jahr aus, das importiert werden soll. |
| Kein Datentyp ausgewählt | Validierungsfehler: Mindestens ein Datentyp muss ausgewählt werden. | Wähle mindestens einen Datentyp aus. |
| Jahresauswahl nicht verfügbar | Die Jahresauswahl wird erst angezeigt, nachdem ein Mandant ausgewählt wurde. | Wähle zuerst einen Mandanten aus. Danach werden die verfügbaren Jahre geladen. |

---

## standalone_page: Marketplace

**Entity:** Marketplace  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/Marketplace.php`  
**Updated:** 2026-02-14 21:28:07  

# Toolbox

## Übersicht

Die Toolbox ist der zentrale Ort, an dem Organisations-Administratoren die verfügbaren Tools für ihre Organisation aktivieren oder deaktivieren können. Jedes Tool erweitert die ngo.tools-Plattform um zusätzliche Funktionen – von Kontaktverwaltung über Buchhaltung bis hin zu Newsletter-Versand.

Wenn ein Tool aktiviert wird, erscheint es in der Seitenleiste der Organisation und steht allen Benutzern (je nach deren Berechtigungen) zur Verfügung. Wird ein Tool deaktiviert, verschwindet es aus der Seitenleiste. Bereits erfasste Daten gehen beim Deaktivieren nicht verloren – sie sind wieder verfügbar, sobald das Tool erneut aktiviert wird.

## Navigation

Die Toolbox ist nicht direkt in der Seitenleiste sichtbar. Nur Benutzer mit Administratorrechten sehen den Zugang zur Toolbox.

## Verfügbare Tools

Die Toolbox zeigt alle verfügbaren Tools, unterteilt in thematische Gruppen. Jedes Tool hat einen Status, der angibt, ob es bereits nutzbar ist:

- **Verfügbar**: Das Tool kann sofort aktiviert und genutzt werden.
- **Neu**: Das Tool wurde kürzlich hinzugefügt und kann aktiviert werden.
- **Bald**: Das Tool befindet sich noch in Entwicklung und kann noch nicht aktiviert werden.

### Menschen

| Tool | Beschreibung | Status |
|------|-------------|--------|
| Kontakte | Verwalte die Kontakte deiner Organisation. | Verfügbar |
| Mitarbeiter | Verwalte Mitarbeiter, Löhne und Einsatzplanung. | Verfügbar |
| Ehrenamt | Verwalte Ehrenamtliche und deren Einsätze. | Bald |
| Mitgliedschaften | Verwalte Mitgliedschaften und Beiträge. | Neu |

### Veranstaltungen

| Tool | Beschreibung | Status |
|------|-------------|--------|
| Veranstaltungen | Plane und verwalte Veranstaltungen deiner Organisation. | Verfügbar |
| Ticketing | Erstelle und verwalte Tickets für Veranstaltungen. | Neu |

### Finanzen

| Tool | Beschreibung | Status |
|------|-------------|--------|
| Buchhaltung | Verwalte Zahlungskonten, Buchungen und den Kontenplan. | Verfügbar |
| Fundraising | Erfasse Spenden, verwalte Spender und erstelle Berichte. | Verfügbar |
| Spendenbescheinigungen | Erstelle und versende Spendenbescheinigungen. | Verfügbar |
| Rechnungen | Erstelle und verwalte Rechnungen. | Neu |
| Shop | Erstelle und verwalte einen Online-Shop. | Neu |
| Lotterie | Verwalte Lotterien und Lose. | Neu |

### Kommunikation

| Tool | Beschreibung | Status |
|------|-------------|--------|
| Kommunikation | Erstelle Vorlagen, versende Briefe und verwalte Serienbriefe. | Verfügbar |
| Newsletter | Erstelle und versende Newsletter an deine Abonnenten. | Verfügbar |
| Webseite | Erstelle und verwalte deine Webseite. | Verfügbar |
| Email-Postfächer | Erstelle Email-Postfächer für deine Organisation. | Verfügbar |
| Social Media | Verwalte deine Social-Media-Kanäle. | Bald |
| Formulare | Erstelle und verwalte Formulare für deine Organisation. | Neu |

### Zusammenarbeit

| Tool | Beschreibung | Status |
|------|-------------|--------|
| Zeiterfassung | Erfasse Arbeitszeiten und erstelle Berichte. | Verfügbar |
| Projekte | Verwalte Projekte und Aufgaben. | Verfügbar |
| Workflows | Erstelle und verwalte Workflows. | Bald |
| Wiki | Erstelle und verwalte ein Wiki für deine Organisation. | Bald |
| Dokumentenerstellung | Erstelle Dokumente basierend auf Vorlagen. | Neu |
| Automatisierungen | Automatisiere wiederkehrende Aufgaben. | Neu |

## Tool aktivieren oder deaktivieren

In der Toolbox kannst du jedes verfügbare Tool per Klick auf die entsprechende Tool-Karte aktivieren oder deaktivieren. Der aktuelle Zustand wird durch einen Schalter (Toggle) auf der rechten Seite der Karte angezeigt:

- **Eingeschaltet**: Die Karte ist farblich hervorgehoben und der Schalter steht auf aktiv. Das Tool erscheint in der Seitenleiste und ist für Benutzer der Organisation nutzbar.
- **Ausgeschaltet**: Die Karte ist neutral dargestellt und der Schalter steht auf inaktiv. Das Tool wird aus der Seitenleiste entfernt.

Tools mit dem Label **BALD** sind noch nicht verfügbar und können nicht aktiviert werden. Ein Klick auf diese Karten hat keine Wirkung.

**Wichtig**: Wenn du ein Tool deaktivierst, bleiben alle bereits erfassten Daten erhalten. Sie sind sofort wieder zugänglich, sobald du das Tool erneut aktivierst. Andere Benutzer deiner Organisation sehen ein deaktiviertes Tool nicht mehr in ihrer Seitenleiste.

## Suche in der Toolbox

Über das Suchfeld oben links in der Toolbox kannst du nach Tools anhand ihres Namens suchen. Die Ergebnisse werden live gefiltert, während du tippst. Wenn kein Tool zum Suchbegriff passt, wird eine leere Liste angezeigt. Lösche den Suchbegriff, um wieder alle Tools zu sehen.

## Sortierung der Toolbox

Die Tool-Liste in der Toolbox kann über ein Auswahlfeld oben rechts sortiert werden:

- **Vorgeschlagene Tools** (Standard): Neue Tools werden zuerst angezeigt, danach folgen die übrigen Tools alphabetisch.
- **Alphabetisch**: Alle Tools werden rein alphabetisch sortiert.

## Berechtigungen für die Toolbox

Die Toolbox ist ausschließlich für Organisations-Administratoren zugänglich. Du benötigst Administratorrechte auf Organisationsebene, um die Toolbox aufrufen und Tools aktivieren oder deaktivieren zu können.

Benutzer ohne Administratorrechte sehen weder den Zugang zur Toolbox noch können sie darauf zugreifen.

## Häufige Fragen zur Toolbox

**Was passiert, wenn ich ein Tool deaktiviere, das von anderen Benutzern genutzt wird?**
Das Tool verschwindet aus der Seitenleiste aller Benutzer der Organisation. Bereits erfasste Daten bleiben erhalten und sind nach erneuter Aktivierung wieder verfügbar.

**Warum kann ich ein bestimmtes Tool nicht aktivieren?**
Tools mit dem Label „BALD" befinden sich noch in Entwicklung und können noch nicht aktiviert werden. Sobald sie verfügbar sind, ändert sich ihr Status und du kannst sie einschalten.

**Ich finde die Toolbox nicht – wo ist sie?**
Die Toolbox ist nur für Organisations-Administratoren sichtbar. Falls du kein Administrator bist, wende dich an einen Administrator deiner Organisation.

---

## standalone_page: Importer

**Entity:** Importer  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/Importer.php`  
**Updated:** 2026-02-14 21:23:15  

# Importer

## Übersicht

Der Importer ermöglicht es, Daten aus externen Systemen (z. B. CiviCRM oder Optigem) in die ngo.tools-Plattform zu importieren. Dazu werden Dateien hochgeladen, die erkannten Datenquellen ausgewählt und der Import im Hintergrund gestartet. Der aktuelle Status laufender Importe wird direkt auf der Importer-Seite angezeigt.

## Navigation

Der Importer befindet sich im Bereich **Sonstiges** der Seitenleiste.

## Ablauf

Der Import im Importer erfolgt in zwei aufeinanderfolgenden Schritten:

### Schritt 1: Import starten

In diesem ersten Schritt des Importers wählst du das Quellsystem aus und lädst die zu importierenden Dateien hoch.

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Quellsystem | Auswahl (Radio) | Ja | Das externe System, aus dem die Daten stammen (z. B. CiviCRM, Optigem). Die verfügbaren Optionen hängen von der Konfiguration deiner Organisation ab. |
| Dateien | Datei-Upload | Ja (mind. 1) | Eine oder mehrere Dateien, die importiert werden sollen. Es können mehrere Dateien gleichzeitig hochgeladen werden. Dieses Feld wird erst sichtbar, nachdem du ein Quellsystem ausgewählt hast. |

Nach dem Hochladen der Dateien klickst du auf die Schaltfläche **Import starten**. Die hochgeladenen Dateien werden dabei automatisch analysiert und den verfügbaren Datenquellen zugeordnet. Anschließend wechselt der Importer zum nächsten Schritt.

### Schritt 2: Quellen auswählen

Im zweiten Schritt des Importers werden die erkannten Dateien angezeigt und du wählst die zu importierenden Datenquellen aus (z. B. Kontakte, Spenden). Die genauen Auswahlmöglichkeiten und Einstellungen hängen vom gewählten Quellsystem ab.

Nach der Auswahl der gewünschten Datenquellen startest du über die entsprechende Schaltfläche den eigentlichen Import.

## Aktionen

Der Importer bietet folgende Aktionen:

- **Import starten**: Analysiert die hochgeladenen Dateien und wechselt zur Quellenauswahl (Schritt 2).
- **Import verarbeiten**: Startet den Import der ausgewählten Datenquellen im Hintergrund. Es erscheint die Bestätigungsmeldung *„Der Import wurde gestartet."* mit dem Hinweis: *„Du kannst den aktuellen Status auf dieser Seite sehen. Du kannst diese Seite verlassen – der Import läuft im Hintergrund weiter."*
- **Zurücksetzen**: Setzt alle Eingaben im Importer zurück und kehrt zum Anfangsschritt (Schritt 1) zurück.

## Laufende Importe

Auf der Importer-Seite werden die aktuell in der Warteschlange befindlichen Importe angezeigt. So kannst du den Fortschritt laufender Importe verfolgen, auch wenn du die Seite zwischenzeitlich verlassen und wieder aufgerufen hast.

## Berechtigungen

Das Tool **Importer** muss für deine Organisation aktiviert sein. Ohne Aktivierung ist die Importer-Seite nicht zugänglich und wird in der Seitenleiste nicht angezeigt.

## Fehlermeldungen und Problemlösungen

| Problem | Mögliche Ursache | Lösung |
|---|---|---|
| Die Importer-Seite ist nicht sichtbar | Das Tool Importer ist für deine Organisation nicht aktiviert. | Wende dich an eine Person mit Verwaltungsrechten, um das Tool aktivieren zu lassen. |
| Das Datei-Upload-Feld wird nicht angezeigt | Es wurde noch kein Quellsystem ausgewählt. | Wähle zuerst ein Quellsystem (z. B. CiviCRM oder Optigem) aus. |

## Beziehungen

Der Importer steht in Verbindung mit folgenden Bereichen der Plattform:

- **Kontakte**: Importierte Kontaktdaten werden als Kontakte in der Plattform angelegt und sind anschließend im Bereich Kontakte sichtbar.
- **Spenden**: Importierte Spendendaten werden im Bereich Spenden erfasst und den entsprechenden Kontakten zugeordnet.
- Die importierten Daten werden je nach Quellsystem und ausgewählten Datenquellen unterschiedlichen Bereichen der Plattform zugeordnet.

---

## standalone_page: FinanceReports

**Entity:** FinanceReports  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/FinanceReports.php`  
**Updated:** 2026-02-14 21:21:54  

# Berichte

## Übersicht

Auf der Seite **Berichte** kannst du Finanzberichte erstellen und herunterladen. Du wählst einen Berichtstyp aus, konfigurierst bei Bedarf weitere Parameter und generierst anschließend den Bericht. Je nach Typ erhältst du das Ergebnis als direkten Download, als Vorschau auf der Seite oder als Hintergrundaufgabe, deren Ergebnis dir per E-Mail zugestellt wird.

Die Seite **Berichte** befindet sich im Bereich **Finanzen** der Anwendung.

## Navigation

Die Seite **Berichte** findest du in der Seitenleiste unter **Finanzen** → **Berichte**.

## Voraussetzungen

Damit die Seite **Berichte** angezeigt wird, müssen folgende Bedingungen erfüllt sein:

- Das Tool **Buchhaltung** oder **Buchhaltung (erweitert)** muss aktiviert sein.
- Du musst Zugriff auf alle Projekte haben.
- Es müssen bereits Finanzereignisse mit mindestens einer Position vorhanden sein.

Wenn keine Finanzereignisse mit Positionen existieren, wird die Seite nicht in der Navigation angezeigt.

## Formularfelder

Die Seite **Berichte** besteht aus zwei Formularbereichen: der Berichtsauswahl und der berichtsspezifischen Konfiguration.

### Berichtsauswahl

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Typ | Auswahlliste | Ja | Wähle den gewünschten Berichtstyp aus. Die verfügbaren Optionen hängen von den aktivierten Tools und deinen Berechtigungen ab. Vorausgewählt ist „Finanzereignisse". |

### Berichtsspezifische Konfiguration

Nach Auswahl des Berichtstyps auf der Seite **Berichte** erscheinen weitere Felder, die vom jeweiligen Bericht abhängen.

Welche Felder genau angezeigt werden, wird dynamisch vom gewählten Berichtstyp bestimmt. Pflichtfelder müssen ausgefüllt sein, bevor du den Bericht erstellen kannst.

## Verfügbare Berichtstypen

Je nach aktivierten Tools und deinen Berechtigungen stehen auf der Seite **Berichte** unter anderem folgende Berichtstypen zur Verfügung:

- **Finanzereignisse** – Export der Finanzereignisse, optional mit den zugehörigen Belegen.
- **Einnahmen-Überschuss-Rechnung** – EÜR für einen frei wählbaren Zeitraum.
- **Projektsaldenliste** – Übersicht der Salden je Projekt.
- **Buchungen** – Auflistung der erzeugten Buchungssätze.
- **SuSa** – Summen- und Saldenliste.
- **Umsatzsteuer-Voranmeldung** – Aufstellung der Umsatzsteuer für den gewählten Zeitraum.

Nicht alle Berichtstypen sind für jede Organisation verfügbar. Berichte, für die die Voraussetzungen nicht erfüllt sind, werden automatisch ausgeblendet und erscheinen nicht in der Auswahlliste.

## Aktionen

### Bericht erstellen

Über die Schaltfläche **Bericht erstellen** auf der Seite **Berichte** wird der gewählte Bericht generiert. Je nach Berichtstyp gibt es drei mögliche Verhaltensweisen:

- **Download**: Der Bericht wird direkt als Datei heruntergeladen.
- **Vorschau**: Der Bericht wird in einem seitlichen Fenster (Slide-Over) als Vorschau angezeigt. Über die Schaltfläche **Schließen** kannst du die Vorschau wieder schließen und einen neuen Bericht konfigurieren.
- **Hintergrundverarbeitung**: Bei aufwändigen Berichten wird die Erstellung im Hintergrund gestartet. Du erhältst auf der Seite eine Benachrichtigung mit dem Hinweis, dass die Erstellung begonnen wurde und du den Bericht per E-Mail erhältst, sobald er abgeschlossen ist. Du kannst in der Zwischenzeit normal weiterarbeiten.

**Wann ist die Schaltfläche deaktiviert?**
Die Schaltfläche **Bericht erstellen** ist deaktiviert, wenn:
- kein Berichtstyp ausgewählt ist, oder
- die Eingabevalidierung des gewählten Berichts nicht erfolgreich ist.

## Hinweise und Warnungen

Auf der Seite **Berichte** können je nach gewähltem Berichtstyp und Zustand der Organisation Hinweise erscheinen.

### Fehlende Einstellungen

Für bestimmte Berichte müssen zunächst organisationsweite Einstellungen korrekt gepflegt sein. Ist das nicht der Fall, wird eine Liste der fehlenden Einstellungen angezeigt. Du musst diese Einstellungen zuerst vervollständigen, bevor du den Bericht erstellen kannst.

**Lösung**: Gehe in die Organisationseinstellungen und pflege die aufgelisteten Felder nach. Anschließend kannst du zur Seite **Berichte** zurückkehren und den Bericht erstellen.

### Formeller Name nicht gesetzt

Falls der formelle Name der Organisation in den Einstellungen noch nicht hinterlegt ist, erscheint ein entsprechender Hinweis mit einem direkten Link zu den Einstellungen.

**Lösung**: Klicke auf den Link im Hinweis, um zu den Einstellungen zu gelangen, und trage dort den formellen Namen der Organisation ein.

## Typische Fragen und Problemlösungen

### Warum wird die Seite „Berichte" nicht angezeigt?
Die Seite **Berichte** wird nur angezeigt, wenn das Tool **Buchhaltung** oder **Buchhaltung (erweitert)** aktiviert ist, du Zugriff auf alle Projekte hast und bereits Finanzereignisse mit Positionen vorhanden sind. Prüfe, ob alle drei Voraussetzungen erfüllt sind.

### Warum fehlt ein bestimmter Berichtstyp in der Auswahlliste?
Berichtstypen werden nur angezeigt, wenn die dafür notwendigen Voraussetzungen erfüllt sind. Wenn ein Berichtstyp fehlt, wende dich an eine Person mit Verwaltungsrechten in deiner Organisation.

## Beziehungen

Die Seite **Berichte** steht in engem Zusammenhang mit folgenden Bereichen:

- **Finanzereignisse**: Die Berichte basieren auf den gebuchten Finanzereignissen und deren Positionen. Ohne vorhandene Finanzereignisse können keine Berichte erstellt werden.
- **Belege**: Der Export „Finanzereignisse" kann optional die zugehörigen Belege enthalten.
- **Buchungen**: Der Bericht „Buchungen" zeigt die aus den Finanzereignissen erzeugten Buchungssätze.
- **Einstellungen**: Einige Berichte erfordern, dass bestimmte organisationsweite Einstellungen (z. B. formeller Name) korrekt gepflegt sind. Fehlende Einstellungen werden auf der Seite **Berichte** als Hinweis angezeigt.

---

## standalone_page: Events

**Entity:** Events  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/Events.php`  
**Updated:** 2026-02-14 21:20:24  

# Veranstaltungen (Kalender)

## Übersicht

Die Seite „Veranstaltungen" zeigt alle Veranstaltungen deiner Organisation in einer interaktiven Kalenderansicht. Du kannst Veranstaltungen anzeigen, nach Kalendern filtern und neue Veranstaltungen erstellen – entweder über eine Schaltfläche oder direkt durch Klick auf ein Datum im Kalender.

**Voraussetzungen:** Das Tool **Veranstaltungen** muss aktiviert sein. Es muss außerdem mindestens ein Kalender vorhanden sein, auf den du Zugriff hast.

## Navigation

Die Seite „Veranstaltungen" findest du in der Seitenleiste unter der Menügruppe **Veranstaltungen**.

## Kalenderansicht

Die Hauptansicht der Seite „Veranstaltungen" zeigt einen interaktiven Kalender. Folgende Funktionen stehen dir zur Verfügung:

- **Kalenderfilter:** Über der Kalenderansicht befinden sich Checkboxen für jeden verfügbaren Kalender. Durch An- oder Abwählen kannst du Veranstaltungen bestimmter Kalender ein- oder ausblenden. Standardmäßig sind alle Kalender ausgewählt. Die Auswahl wird in der Sitzung gespeichert.
- **Farbcodierung:** Jeder Kalender hat eine eigene Farbe. Veranstaltungen werden in der Farbe ihres zugehörigen Kalenders dargestellt, sodass du auf einen Blick erkennst, zu welchem Kalender eine Veranstaltung gehört.
- **Veranstaltungen anzeigen:** Alle Veranstaltungen der ausgewählten Kalender werden im Kalender mit Titel, Datum und Uhrzeit angezeigt.
- **Datum anklicken:** Ein Klick auf ein Datum im Kalender öffnet direkt das Formular zum Erstellen einer neuen Veranstaltung. Das gewählte Datum wird automatisch als Beginn vorausgefüllt.
- **Veranstaltung anklicken:** Ein Klick auf eine bestehende Veranstaltung öffnet die Bearbeitungsseite der Veranstaltung.

## Veranstaltung erstellen

Über die Schaltfläche zum Erstellen oder durch Klick auf ein Datum im Kalender öffnet sich ein Formular als Dialog mit dem Titel „Veranstaltung erstellen". Die Schaltfläche ist nur sichtbar, wenn du die Berechtigung **Bearbeiten** für das Tool Veranstaltungen hast.

Nach dem Speichern wird die Veranstaltung sofort im Kalender angezeigt. Bei wiederkehrenden Veranstaltungen werden alle Termine der Serie auf einmal erstellt.

### Formularfelder beim Erstellen einer Veranstaltung

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| Vorlage | Auswahl | Nein | Wählt eine Veranstaltungsvorlage aus. Bei Auswahl werden die übrigen Felder automatisch mit den Vorlagenwerten befüllt (Kalender, Ganztägig, Uhrzeiten, Dienste, Anmeldung). Dieses Feld ist nur sichtbar, wenn Vorlagen vorhanden sind. |
| Kalender | Auswahl | Ja | Der Kalender, dem die Veranstaltung zugeordnet wird. Es werden nur Kalender angezeigt, auf die du Zugriff hast. Die Auswahl des Kalenders beeinflusst, welche Dienste zur Verfügung stehen und ob die Anmeldung aktiviert werden kann. |
| Titel | Textfeld | Ja | Der Name der Veranstaltung (max. 255 Zeichen). |
| Ganztägig | Schalter | Nein | Wenn aktiviert, werden bei Beginn und Ende nur das Datum (ohne Uhrzeit) angezeigt und gespeichert. |
| Beginn | Datum/Uhrzeit | Ja | Startdatum und -uhrzeit der Veranstaltung. Wird beim Klick auf ein Datum im Kalender automatisch vorausgefüllt. |
| Ende | Datum/Uhrzeit | Ja | Enddatum und -uhrzeit der Veranstaltung. |
| Bemerkungen | Rich-Text-Editor | Nein | Optionale Bemerkungen zur Veranstaltung. |
| Wiederholung | Wiederholungsregel | Nein | Konfiguration für wiederkehrende Veranstaltungen. Mögliche Intervalle: Keine Wiederholung, Täglich, Wöchentlich, Monatlich, Jährlich. Je nach Intervall können weitere Einstellungen vorgenommen werden (z. B. Wochentage bei wöchentlicher Wiederholung oder ein Enddatum für die Serie). |
| Dienste | Auswahl (pro Dienst) | Nein | Für jeden verfügbaren Dienst wird ein eigenes Auswahlfeld angezeigt. Dort kannst du eine oder mehrere Personen aus den einteilbaren Mitarbeitern zuweisen. Welche Dienste angezeigt werden, hängt vom gewählten Kalender ab. |
| Anmeldung geöffnet | Schalter | Nein | Aktiviert die Anmeldung für diese Veranstaltung. Dieses Feld ist nur sichtbar, wenn das Tool **Veranstaltungs-Anmeldungen** aktiviert ist **und** der gewählte Kalender Anmeldungen unterstützt. |

## Veranstaltungsvorlagen

Veranstaltungsvorlagen erleichtern das Erstellen wiederkehrender Veranstaltungstypen auf der Seite „Veranstaltungen". Eine Vorlage enthält vordefinierte Werte für Kalender, Ganztägig-Einstellung, Uhrzeiten, Dienste und Anmeldungsstatus.

Wenn du beim Erstellen einer Veranstaltung eine Vorlage auswählst, werden alle zugehörigen Felder automatisch befüllt. Du kannst die vorausgefüllten Werte anschließend noch anpassen. Der Name der gewählten Vorlage wird im Formular als Hinweis angezeigt.

Vorlagen sind immer einem bestimmten Kalender zugeordnet und werden in der Auswahlliste im Format „Kalendername: Vorlagenname" dargestellt.

## Berechtigungen für Veranstaltungen

Der Zugriff auf die Seite „Veranstaltungen" wird über das Berechtigungssystem gesteuert:

- **Bearbeiten** (Tool Veranstaltungen): Du kannst Veranstaltungen erstellen, bearbeiten und löschen. Die Schaltfläche zum Erstellen ist nur mit dieser Berechtigung sichtbar.

Zusätzlich siehst du nur Kalender und Veranstaltungen, für die du autorisiert bist. Kalender ohne Zugriffsberechtigung werden weder im Filter noch im Erstellformular angezeigt.

## Beziehungen zu anderen Bereichen

- **Kalender:** Jede Veranstaltung gehört zu genau einem Kalender. Der Kalender bestimmt die Farbcodierung in der Kalenderansicht und ob Anmeldungen für Veranstaltungen möglich sind.
- **Veranstaltungsvorlagen:** Vorlagen sind Kalendern zugeordnet und erleichtern das Erstellen von Veranstaltungen mit vordefinierten Werten (siehe Abschnitt „Veranstaltungsvorlagen").
- **Diensteinteilung:** Über die Dienste-Felder im Erstellformular kannst du Personen direkt für bestimmte Dienste einteilen.
- **Veranstaltungs-Anmeldungen:** Wenn das Tool Veranstaltungs-Anmeldungen aktiviert ist und der Kalender Anmeldungen unterstützt, können Teilnehmer sich für Veranstaltungen anmelden.

---

## standalone_page: EventServiceCoordination

**Entity:** EventServiceCoordination  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/EventServiceCoordination.php`  
**Updated:** 2026-02-14 21:12:49  

# Diensteinteilung

## Übersicht

Die Diensteinteilung ermöglicht es dir als Koordinator, die Einteilung von Personen oder Teams für Veranstaltungsdienste zu verwalten. Hier kannst du Verfügbarkeiten einsehen, Einladungen zur Verfügbarkeitspflege versenden und die Verteilung der Dienste auf Personen oder Teams organisieren.

Die Diensteinteilung befindet sich im Bereich **Veranstaltungen**.

## Navigation zur Diensteinteilung

- **Seitenleiste → Veranstaltungen → Diensteinteilung**
- Die Diensteinteilung ist nur sichtbar, wenn du als Koordinator mindestens einem Veranstaltungsdienst zugeordnet bist. Bist du keinem Dienst als Koordinator zugeordnet, erscheint der Menüpunkt nicht in der Navigation.

## Filterbereich der Diensteinteilung

Die Diensteinteilung enthält einen Filterbereich, mit dem du den angezeigten Zeitraum und den Dienst auswählst:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Dienst-Auswahl | Dropdown | Ja | Auswahl des Veranstaltungsdienstes, den du koordinierst. Es werden nur Dienste angezeigt, für die du als Koordinator eingetragen bist. |
| Von | Datumsfeld | Ja | Startdatum des angezeigten Zeitraums. Kann nicht in der Vergangenheit liegen. Standardwert: heute. |
| Bis | Datumsfeld | Ja | Enddatum des angezeigten Zeitraums. Kann nicht in der Vergangenheit liegen. Standardwert: 3 Monate ab heute. |

Der gewählte Dienst und der Zeitraum werden in der URL gespeichert und bleiben beim Neuladen der Seite erhalten. So kannst du den Link auch mit anderen teilen oder als Lesezeichen speichern.

## Veranstaltungsliste in der Diensteinteilung

Die Diensteinteilung zeigt eine Liste aller Veranstaltungen im gewählten Zeitraum, die dem ausgewählten Dienst zugeordnet sind. Die Veranstaltungen werden nach Startdatum aufsteigend sortiert. Zu jeder Veranstaltung werden die aktuellen Einteilungen (wer ist diesem Dienst bei dieser Veranstaltung zugewiesen) und die gemeldeten Verfügbarkeiten angezeigt.

## Aktionen in der Diensteinteilung

### Gesamtübersicht

- **Label:** „Gesamtübersicht"
- Öffnet eine seitliche Übersicht (Slide-Over) mit einer Gesamtansicht der Verfügbarkeiten für den ausgewählten Dienst.

### Einladung senden, Verfügbarkeiten einzutragen

- **Label:** „Einladung senden, Verfügbarkeiten einzutragen"
- Öffnet ein Dialogfenster, in dem du die Empfänger der Einladungsmail auswählst.
- **Bei Team-Diensten:** Die Empfänger werden nach Team gruppiert angezeigt.
- **Bei Nicht-Team-Diensten:** Es wird eine einfache Liste der einteilbaren Personen angezeigt.
- Alle Empfänger sind standardmäßig ausgewählt. Du kannst einzelne Empfänger abwählen. Es gibt eine Funktion zum An-/Abwählen aller Empfänger auf einmal.
- **Zusätzliche Empfänger:** Über ein weiteres Dropdown-Feld kannst du weitere Personen als Empfänger hinzufügen, die nicht zu den regulären einteilbaren Personen gehören. Diese Personen werden dann automatisch als zusätzliche einteilbare Personen für den Dienst registriert.
- **Ergebnis nach dem Absenden:** An alle ausgewählten Empfänger, die eine E-Mail-Adresse hinterlegt haben, wird eine individuelle Mail verschickt mit der Bitte, ihre Verfügbarkeiten einzutragen.
- **Sonderfall – fehlende E-Mail-Adresse:** Falls Empfänger keine E-Mail-Adresse hinterlegt haben, wird nach dem Absenden eine Warnmeldung angezeigt, die die betroffenen Personen namentlich auflistet. An alle anderen ausgewählten Empfänger wird die Mail dennoch verschickt.

### Verteilung anzeigen

- **Label:** „Verteilung anzeigen"
- Öffnet ein schwebendes Panel, das die aktuelle Verteilung der Diensteinteilungen visualisiert.

### Einteilbare Personen verwalten (nur bei Nicht-Team-Diensten)

- **Label:** „Einteilbare Personen verwalten"
- Diese Aktion ist nur bei Diensten sichtbar, die **nicht** als Team-Dienst konfiguriert sind.
- Öffnet ein Dialogfenster, in dem du die Personen auswählst, die für diesen Dienst eingeteilt werden können.
- Mehrfachauswahl aus allen Kontakten möglich.
- **Ergebnis nach dem Speichern:** Die Liste der einteilbaren Personen für diesen Dienst wird aktualisiert.

### Einteilbare Teams verwalten (nur bei Team-Diensten)

- **Label:** „Einteilbare Teams verwalten"
- Diese Aktion ist nur bei Diensten sichtbar, die als Team-Dienst konfiguriert sind.
- Öffnet ein Dialogfenster mit folgenden Feldern:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Team-Typ | Dropdown | Ja | Auswahl des Segment-Typs. Alle Teams dieses Typs können dann eingeteilt werden. Ein Hilfe-Icon erklärt: „Teams dieses Typs können eingeteilt werden." |
| Verantwortliche Rollen | Mehrfachauswahl | Ja | Nur sichtbar, wenn ein Team-Typ ausgewählt wurde. Auswahl der Rollen innerhalb der Teams. Ein Hilfe-Icon erklärt: „Personen in den Teams, die eine dieser Rollen innehaben, werden automatisch dem jeweiligen E-Mail-Verteiler der Veranstaltung hinzugefügt und können – etwa bei Musikdiensten – auch direkt die Lieder auswählen." Die verfügbaren Rollen hängen vom gewählten Team-Typ ab. |

- **Ergebnis nach dem Speichern:** Der Dienst wird mit dem gewählten Team-Typ und den verantwortlichen Rollen aktualisiert. Alle Segmente des gewählten Typs werden als einteilbare Einheiten hinterlegt.

## Berechtigungen für die Diensteinteilung

- Das Tool **Veranstaltungen** muss aktiviert sein.
- Du musst als **Koordinator** mindestens einem Veranstaltungsdienst zugeordnet sein. Ohne diese Zuordnung erscheint die Diensteinteilung nicht in der Navigation und ist nicht aufrufbar.
- Du siehst in der Dienst-Auswahl nur die Dienste, für die du als Koordinator eingetragen bist. Beim Versuch, auf einen Dienst zuzugreifen, den du nicht koordinierst (z. B. über eine manipulierte URL), wird der Zugriff verweigert.

## Validierung und Fehlermeldungen in der Diensteinteilung

| Situation | Verhalten / Fehlermeldung | Lösung |
|-----------|--------------------------|--------|
| Vergangenes Datum im Feld „Von" oder „Bis" eingegeben | Das Datum wird automatisch auf das heutige Datum korrigiert. | Kein Handlungsbedarf – das System korrigiert den Wert automatisch. |
| Kein Empfänger beim Mail-Versand ausgewählt | Der Versand kann nicht durchgeführt werden, wenn weder reguläre noch zusätzliche Empfänger ausgewählt sind. | Wähle mindestens einen Empfänger aus oder füge über das Zusatzfeld weitere Empfänger hinzu. |
| Empfänger ohne E-Mail-Adresse | Nach dem Versand wird eine Warnmeldung angezeigt, die die betroffenen Personen namentlich auflistet. | Hinterlege bei den betroffenen Kontakten eine E-Mail-Adresse und sende die Einladung erneut. |
| Team-Typ oder verantwortliche Rollen nicht ausgefüllt | Das Speichern ist nicht möglich, da beide Felder Pflichtfelder sind. | Wähle einen Team-Typ und mindestens eine verantwortliche Rolle aus. |

## Beziehungen der Diensteinteilung zu anderen Bereichen

- **Veranstaltungen:** Die in der Diensteinteilung angezeigten Veranstaltungen stammen aus dem Veranstaltungskalender und sind dem jeweiligen Dienst zugeordnet. Nur Veranstaltungen, die dem gewählten Dienst zugewiesen sind, erscheinen in der Liste.
- **Kontakte:** Einteilbare Personen und Teams werden aus den Kontakten bezogen. Änderungen an Kontaktdaten (z. B. E-Mail-Adressen) wirken sich direkt auf die Diensteinteilung aus.
- **Segmente / Segment-Typen:** Bei Team-Diensten werden Kontakt-Segmente und deren Rollen verwendet, um die Team-Struktur abzubilden. Der in der Team-Verwaltung gewählte Segment-Typ bestimmt, welche Teams einteilbar sind.
- **Verfügbarkeiten:** Die Verfügbarkeiten, die Personen über den Link in der Einladungsmail eintragen, werden in der Diensteinteilung bei der jeweiligen Veranstaltung angezeigt.

---

## standalone_page: DonationAccounting

**Entity:** DonationAccounting  
**Type:** auto_generated  
**Version:** 4  
**File:** `app/Filament/App/Pages/DonationAccounting.php`  
**Updated:** 2026-02-14 21:10:55  

# Spendenerfassung

## Übersicht

Die Spendenerfassung ermöglicht es, eingehende Bankvorgänge als Spenden zu verbuchen. Dabei werden Banktransaktionen nacheinander angezeigt, einem Spender oder einer Spenderin und einem Projekt zugeordnet und bestätigt. Das System schlägt anhand der Transaktionsdaten automatisch passende Kontakte und Projekte vor, um die Zuordnung zu beschleunigen.

## Navigation

Die Spendenerfassung befindet sich in der Seitenleiste unter der Menügruppe **Spendenverwaltung**. Wenn das Tool „Spenden" nicht aktiviert ist, wird die Spendenerfassung stattdessen unter der Menügruppe **Finanzen** angezeigt.

## Workflow der Spendenerfassung

Die Spendenerfassung arbeitet transaktionsbasiert: Es wird jeweils ein einzelner Bankvorgang angezeigt, der bearbeitet werden muss, bevor der nächste erscheint. In der Überschrift der Seite wird angezeigt, wie viele Transaktionen noch offen sind. Bis zu vier weitere anstehende Transaktionen werden unterhalb des aktuellen Bankvorgangs abgeblendet dargestellt, damit du einen Überblick über die nächsten Einträge hast.

### Schritt-für-Schritt-Anleitung

1. **Bankvorgang prüfen** – Die aktuelle Transaktion wird mit Überweisungstext und Betrag angezeigt. Prüfe, ob es sich um eine Spende handelt.
2. **Spender/in zuordnen** – Das System schlägt automatisch einen Kontakt vor, sortiert nach Ähnlichkeit zum Namen in der Transaktion. Du kannst alternativ einen anderen Kontakt aus der Auswahlliste wählen oder über die Schaltfläche „Neu…" einen neuen Kontakt erstellen.
3. **Projekt zuordnen** – Ein Projekt wird vorgeschlagen. Nur Projekte, die für Spenden freigegeben und zum Buchungsdatum aktiv sind, stehen zur Auswahl.
4. **Optionen festlegen** – Gib an, ob eine Spendenbescheinigung erstellt werden soll und ob es sich um einen Mitgliedsbeitrag handelt.
5. **Bestätigen** – Klicke auf „Bestätigen", um die Spende zu verbuchen. Die Transaktion wird als Finanzereignis gespeichert und der nächste offene Bankvorgang wird automatisch geladen.

### Kontakt wurde eindeutig erkannt

Wenn der Bankvorgang einen Identifikator enthält (z. B. eine Kontonummer), der bereits in der Vergangenheit einem Kontakt zugeordnet wurde, wird dieser Kontakt automatisch ausgewählt und das Auswahlfeld gesperrt. Es erscheint der Hinweis: *„Der Kontakt ist bereits bekannt und konnte eindeutig zugeordnet werden."* Du musst in diesem Fall keinen Kontakt manuell auswählen.

## Formularfelder der Spendenerfassung

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Spender/in | Auswahl (durchsuchbar) | Ja (außer bei Barspende) | Der Kontakt, dem die Spende zugeordnet wird. Wird automatisch nach Ähnlichkeit zum Transaktionsnamen vorsortiert. Du kannst den Namen im Suchfeld eingeben, um den passenden Kontakt zu finden. |
| Projekt | Auswahl (durchsuchbar) | Ja | Das Projekt, dem die Spende zugeordnet wird. Es werden nur aktive, für Spenden freigegebene Projekte angezeigt. |
| mit Spendenbescheinigung | Checkbox | Nein | Legt fest, ob später für diese Spende eine Spendenbescheinigung erstellt werden soll. Die Bescheinigung wird nicht automatisch erzeugt, sondern kann bei Bedarf in der Spendenverwaltung generiert werden. |
| Mitgliedsbeitrag | Checkbox | Nein | Markiert die Spende als Mitgliedsbeitrag. |

### Neuen Kontakt erstellen

Wenn kein passender Kontakt in der Auswahlliste gefunden wird, kannst du direkt über die Schaltfläche „Neu…" einen neuen Kontakt anlegen. Das Formular enthält Felder für Name, Vorname, Nachname, Typ (Person/Organisation/Ehepaar) sowie Adressdaten. Wenn ein KI-Dienst aktiviert ist, werden die Kontaktdaten automatisch aus dem Transaktionsnamen und dem Überweisungstext vorgeschlagen.

## Sortierung der Bankvorgänge

Über die Schaltflächen in der Kopfzeile der Spendenerfassung kannst du die Reihenfolge der angezeigten Bankvorgänge ändern:

- **Älteste zuerst** – Zeigt die ältesten Transaktionen zuerst an. Dies ist die Standardeinstellung.
- **Neueste zuerst** – Zeigt die neuesten Transaktionen zuerst an.

## Aktionen in der Spendenerfassung

| Aktion | Beschreibung |
|--------|--------------|
| **Bestätigen** | Verbucht die aktuelle Transaktion als Spende (Finanzereignis) und lädt automatisch den nächsten offenen Bankvorgang. |
| **Erstmal überspringen** | Überspringt den aktuellen Bankvorgang und zeigt den nächsten an. Der übersprungene Vorgang wird mit einem Zeitstempel markiert und kann später erneut bearbeitet werden. |
| **Keine Spende** | Markiert den Bankvorgang als „Keine Spende". Anschließend wird ein Link angezeigt, über den du die Einnahme direkt als Finanzereignis (z. B. eine sonstige Einnahme) buchen kannst. |
| **Neu…** | Öffnet das Formular zum Erstellen eines neuen Kontakts direkt innerhalb der Spendenerfassung, ohne die Seite zu verlassen. |

## Berechtigungen für die Spendenerfassung

Um die Spendenerfassung nutzen zu können, müssen folgende Voraussetzungen erfüllt sein:

- Das Tool **Buchhaltung** muss aktiviert sein.
- Berechtigung **Bearbeiten** für das Tool **Buchhaltung** oder Berechtigung **Bearbeiten** für das Tool **Erweiterte Buchhaltung** ist erforderlich.
- Berechtigung **Bearbeiten** für das Tool **Kontakte** ist erforderlich (da Spenden Kontakten zugeordnet werden und neue Kontakte erstellt werden können).
- Der Benutzer muss Zugriff auf alle Projekte haben.

Wenn eine dieser Voraussetzungen nicht erfüllt ist, wird die Spendenerfassung in der Seitenleiste nicht angezeigt.

## Validierung und Fehlermeldungen in der Spendenerfassung

| Fehlermeldung | Ursache | Lösung |
|---------------|---------|--------|
| *Projekt muss ausgefüllt werden* | Es wurde kein Projekt ausgewählt. | Wähle ein Projekt aus der Auswahlliste. Falls keine Projekte angezeigt werden, prüfe, ob aktive und für Spenden freigegebene Projekte vorhanden sind. |
| *Spender/in muss ausgefüllt werden* | Es wurde kein Kontakt ausgewählt und es handelt sich nicht um eine Barspende. | Wähle einen Kontakt aus der Auswahlliste oder erstelle über „Neu…" einen neuen Kontakt. |
| *Spender/in konnte nicht gefunden werden. Bitte versuche es erneut.* | Der zuvor ausgewählte Kontakt wurde zwischenzeitlich gelöscht oder ist nicht mehr verfügbar. | Wähle einen anderen Kontakt aus der Auswahlliste aus. |
| *Diese Transaktion wurde bereits erfasst.* | Der Bankvorgang wurde bereits als Spende verbucht, z. B. durch einen anderen Benutzer. | Du wirst automatisch zum zugehörigen Finanzereignis weitergeleitet. Es ist keine weitere Aktion nötig. |
| *Ein Fehler ist aufgetreten. Bitte versuche es erneut.* | Ein allgemeiner Fehler ist bei der Verbuchung aufgetreten. | Lade die Seite neu und versuche es erneut. Tritt der Fehler weiterhin auf, wende dich an den Support. |

## Voraussetzungen für die Spendenerfassung

Bevor du die Spendenerfassung nutzen kannst, müssen Bankvorgänge importiert worden sein. Wenn noch keine Bankvorgänge vorhanden sind, zeigt die Spendenerfassung folgenden Hinweis an: *„Es sind noch keine Bankvorgänge vorhanden. Importiere zuerst Bankvorgänge, damit du danach Spenden buchen kannst."*

Wenn alle vorhandenen Bankvorgänge bereits bearbeitet wurden (bestätigt, übersprungen oder als „Keine Spende" markiert), sind keine weiteren offenen Transaktionen vorhanden. In diesem Fall zeigt die Spendenerfassung an, dass keine offenen Bankvorgänge mehr vorliegen.

## Beziehungen zu anderen Bereichen

- **Kontakte** – Jede Spende wird in der Spendenerfassung einem Kontakt zugeordnet. Neue Kontakte können direkt aus der Spendenerfassung heraus erstellt werden, ohne den Bereich wechseln zu müssen.
- **Projekte** – Jede Spende wird einem Projekt zugeordnet. Nur aktive Projekte, die für Spenden freigegeben sind, stehen in der Spendenerfassung zur Auswahl.
- **Bankvorgänge** – Die Spendenerfassung arbeitet auf importierten Banktransaktionen. Ohne importierte Bankvorgänge kann die Spendenerfassung nicht genutzt werden.
- **Finanzereignisse** – Jede bestätigte Spende wird als Finanzereignis verbucht. Wird ein Bankvorgang als „Keine Spende" markiert, kann er über einen Link direkt als sonstiges Finanzereignis erfasst werden.
- **Spendenbescheinigungen** – Über die Checkbox „mit Spendenbescheinigung" in der Spendenerfassung wird festgelegt, ob später eine Bescheinigung generiert werden soll. Die eigentliche Erstellung der Spendenbescheinigung erfolgt in der Spendenverwaltung.

---

## standalone_page: BusinessEvents

**Entity:** BusinessEvents  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Pages/BusinessEvents.php`  
**Updated:** 2026-02-14 21:09:03  

# Finanzereignisse

## Übersicht

Auf der Seite „Finanzereignisse" verwaltest du alle finanziellen Vorgänge deiner Organisation. Du kannst Belege hochladen und automatisch auslesen lassen, Bankvorgänge zuordnen und Buchungen auf Gesamtebene oder auf Positionsebene erfassen. Die Seite befindet sich im Bereich **Finanzen** der Seitenleiste.

## Navigation zur Seite „Finanzereignisse"

- **Seitenleiste → Finanzen → Finanzereignisse**
- Die Seite erscheint an oberster Stelle in der Navigationsgruppe „Finanzen".
- **Voraussetzung:** Das Tool **Erweiterte Buchhaltung** muss für die Organisation aktiviert sein, damit der Menüpunkt „Finanzereignisse" sichtbar ist.

## Ansichten der Finanzereignisse

Die Seite „Finanzereignisse" bietet zwei Ansichten, zwischen denen du wechseln kannst:

- **Detailansicht**: Zeigt jedes Finanzereignis als Karte mit direkter Bearbeitungsmöglichkeit. Neue Finanzereignisse werden hier als bearbeitbare Karten angezeigt. Diese Ansicht eignet sich besonders, wenn du einzelne Buchungen detailliert bearbeiten möchtest.
- **Tabellenansicht**: Klassische Tabellenübersicht. Besonders geeignet für den schnellen Überblick über viele Finanzereignisse.

**Wenn noch keine Finanzereignisse vorhanden sind**, wird ein Leerstand-Hinweis angezeigt, der dich darauf hinweist, wie du dein erstes Finanzereignis erstellen kannst.

## Filter in der Detailansicht der Finanzereignisse

In der Detailansicht stehen folgende Filteroptionen zur Verfügung, um die angezeigten Finanzereignisse einzugrenzen:

| Filter | Beschreibung |
|---|---|
| **Kategorie** | Filtert nach Einnahme oder Ausgabe |
| **Typ** | Filtert nach der Art des Finanzereignisses (z. B. Spende, Sachspende, Mitgliedsbeitrag etc.) |
| **Bereich** (Sphäre) | Filtert nach der zugeordneten Sphäre/Kostenstelle |
| **Wirtschaftsjahr** | Zeigt nur Finanzereignisse des gewählten Wirtschaftsjahres |
| **Projekt** | Zeigt nur Finanzereignisse, die einem bestimmten Projekt zugeordnet sind |
| **Suche** | Freitextsuche über Beschreibung, Belegnummer und Kontaktname |
| **Ohne Beleg** | Umschalter – zeigt nur Finanzereignisse, denen kein Beleg zugeordnet ist |
| **Automatische Buchungen** | Umschalter – zeigt nur automatisch erstellte Buchungen |

## Tabellenansicht der Finanzereignisse

In der Tabellenansicht werden Finanzereignisse in einer klassischen Tabelle dargestellt. Diese Ansicht eignet sich besonders für den Überblick über größere Mengen an Buchungen.

### Spalten der Finanzereignis-Tabelle

| Spalte | Beschreibung |
|---|---|
| **Kategorie** | Einnahme oder Ausgabe |
| **Belegnummer** | Die vergebene Belegnummer des Finanzereignisses |
| **Beschreibung** | Beschreibung des Finanzereignisses |
| **Rechnungsdatum** | Datum der Rechnung |
| **Zahlungsdatum** | Datum der Zahlung |
| **Lieferdatum** | Datum der Leistungserbringung |
| **Betrag** | Der Betrag des Finanzereignisses |
| **Steuersatz** | Der geltende Steuersatz |
| **Enthaltene Steuer** | Der in der Buchung enthaltene Steuerbetrag |
| **Typ** | Art des Finanzereignisses |
| **Bereich** (Sphäre) | Zugeordnete Sphäre/Kostenstelle |
| **Kontakt** | Zugeordneter Kontakt oder Lieferant |
| **Projekt** | Zugeordnetes Projekt |
| **Beleg** | Zeigt an, ob dem Finanzereignis ein Beleg zugeordnet ist |
| **Bankvorgang** | Zeigt den zugeordneten Bankvorgang an |

### Suche in der Finanzereignis-Tabelle

Eine Volltextsuche ist über die Suchleiste möglich.

## Formularfelder beim Bearbeiten eines Finanzereignisses

In der Detailansicht wird jedes Finanzereignis als Karte mit Bearbeitungsformular dargestellt. Die folgenden Felder stehen zur Verfügung:

| Feld | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| **Kategorie** | Umschalter | Ja | Einnahme oder Ausgabe. |
| **Typ** | Auswahl | Ja | Art des Finanzereignisses. Die verfügbaren Optionen hängen von der gewählten Kategorie (Einnahme/Ausgabe) ab. |
| **Bereich** (Sphäre) | Auswahl | Ja | Sphäre/Kostenstelle, der das Finanzereignis zugeordnet wird. |
| **Beschreibung** | Textfeld | Nein | Freitextbeschreibung des Finanzereignisses. |
| **Belegnummer** | Textfeld | Nein | Nummer des zugehörigen Belegs. |
| **Rechnungsdatum** | Datum | Ja | Datum der Rechnung. |
| **Zahlungsdatum** | Datum | Nein | Datum der Zahlung. |
| **Lieferdatum** | Datum | Nein | Datum der Leistungserbringung. |
| **Betrag** | Betrag | Ja | Gesamtbetrag des Finanzereignisses. Bei Bearbeitung auf Positionsebene wird dieser automatisch aus den Einzelpositionen berechnet und kann nicht manuell geändert werden. |
| **Steuerschlüssel** | Auswahl | Nein | Steuersatz für die Buchung. Wenn kein Steuerschlüssel gewählt wird, gilt „Ohne USt./VSt." |
| **Kontakt / Lieferant** | Auswahl | Bedingt | Zugeordneter Kontakt. **Bei Spenden ist ein Kontakt Pflichtfeld.** Du kannst einen bestehenden Kontakt auswählen, ein Sammelkonto verwenden oder direkt einen neuen Kontakt anlegen. |
| **Bankvorgang** | Auswahl | Nein | Zuordnung zu einem importierten Bankvorgang. |
| **Beleg** | Datei/Auswahl | Nein | Zugeordneter Beleg. Du kannst einen neuen Beleg hochladen oder einen bereits vorhandenen, noch nicht zugeordneten Beleg auswählen. |
| **Projekt** | Auswahl | Nein | Zuordnung zu einem Projekt. |

### Bearbeitung auf Positionsebene

Finanzereignisse können wahlweise auf **Gesamtebene** oder auf **Positionsebene** bearbeitet werden. Du wechselst zwischen den beiden Modi über die Aktion „Auf Positionsebene bearbeiten" bzw. „Auf Gesamtebene bearbeiten".

Bei der **Positionsebene** erfasst du einzelne Positionen mit jeweils eigenem Betrag, Steuerschlüssel, Typ, Bereich und Projekt. Das ist nützlich, wenn eine Rechnung mehrere unterschiedliche Posten enthält (z. B. verschiedene Steuersätze oder unterschiedliche Sphären).

**Wichtig:** Die Summe der Positionen muss dem Gesamtbetrag entsprechen. Ist ein Bankvorgang zugeordnet, muss die Summe auch mit dem Betrag des Bankvorgangs übereinstimmen.

| Feld (pro Position) | Typ | Pflicht | Beschreibung |
|---|---|---|---|
| **Betrag** | Betrag | Ja | Betrag dieser einzelnen Position |
| **Steuerschlüssel** | Auswahl | Nein | Steuersatz für diese Position |
| **Typ** | Auswahl | Ja | Art dieser Position |
| **Bereich** (Sphäre) | Auswahl | Ja | Sphäre/Kostenstelle dieser Position |
| **Projekt** | Auswahl | Nein | Projekt, dem diese Position zugeordnet wird |

## Aktionen auf der Seite „Finanzereignisse"

### Kopfzeilen-Aktionen

| Aktion | Beschreibung |
|---|---|
| **Finanzereignis erstellen** | Erstellt ein neues Finanzereignis. In der Detailansicht wird eine neue bearbeitbare Karte angelegt. Du wählst zuerst, ob es eine Einnahme oder eine Ausgabe ist. |
| **Beleg hochladen** | Lädt einen Beleg (z. B. eine Rechnung als PDF oder Foto) hoch. Wenn die automatische Belegerkennung aktiviert ist, werden die Belegdaten automatisch ausgelesen und ein neues Finanzereignis mit vorausgefüllten Daten erstellt. Andernfalls wird der Beleg hochgeladen und kann manuell einem Finanzereignis zugeordnet werden. |
| **Sachspende erfassen** | Öffnet ein Formular zur Erfassung einer Sachspende. Nach dem Speichern wird ein neues Finanzereignis vom Typ „Sachspende" erstellt. |
| **Handkassenvorgang erfassen** | Erfasst einen Vorgang aus der Handkasse (Einzahlung oder Auszahlung). Der Betrag darf das aktuelle Guthaben der Handkasse nicht überschreiten. |
| **Umbuchung erstellen** | Erstellt eine interne Umbuchung zwischen zwei verbundenen Bankkonten. Du wählst zwei Bankvorgänge aus, die den gleichen Betrag haben müssen – einer davon muss eine Ausgabe und der andere eine Einnahme sein. |
| **Ansicht wechseln** | Wechselt zwischen Detailansicht und Tabellenansicht. |

### Aktionen pro Finanzereignis (Detailansicht)

| Aktion | Beschreibung |
|---|---|
| **Buchung festschreiben** | Schreibt die Buchung fest. Danach ist das Finanzereignis nicht mehr bearbeitbar. |
| **Buchung zurücksetzen** | Setzt eine festgeschriebene Buchung wieder zurück, sodass sie erneut bearbeitbar wird. |
| **Buchung stornieren** | Erstellt automatisch eine Stornobuchung, die das ursprüngliche Finanzereignis mit einer Gegenbuchung rückgängig macht. |
| **Finanzereignis löschen** | Löscht das Finanzereignis. Wenn ein Beleg zugeordnet ist, wirst du gefragt, ob der Beleg ebenfalls gelöscht werden soll. Ist eine zugehörige PayPal-Gebühr vorhanden, wirst du ebenfalls gefragt, ob diese mitgelöscht werden soll. |
| **Zugehörigen Beleg anzeigen** | Öffnet den zugeordneten Beleg zur Ansicht. Diese Aktion ist nur verfügbar, wenn dem Finanzereignis ein Beleg zugeordnet ist. |
| **Auf Positionsebene bearbeiten** | Wechselt von der Gesamtebene zur Bearbeitung auf Positionsebene. |
| **Auf Gesamtebene bearbeiten** | Wechselt von der Positionsebene zurück zur Gesamtebene. |
| **Kategorie umschalten** | Wechselt die Kategorie des Finanzereignisses zwischen Einnahme und Ausgabe. |

## Berechtigungen für Finanzereignisse

- Das Tool **Erweiterte Buchhaltung** muss für die Organisation aktiviert sein, damit die Seite „Finanzereignisse" im Menü sichtbar und zugänglich ist.

## Validierung und Fehlermeldungen bei Finanzereignissen

| Fehlermeldung | Ursache | Lösung |
|---|---|---|
| **„Bitte den Bankvorgang auswählen."** | Es wurde kein Bankvorgang zugeordnet, obwohl einer erforderlich ist. | Wähle einen passenden Bankvorgang aus der Liste aus. |
| **„Der Bankvorgang wurde bereits zugeordnet."** | Der gewählte Bankvorgang ist bereits einem anderen Finanzereignis zugewiesen und kann nicht doppelt verwendet werden. | Wähle einen anderen, noch nicht zugeordneten Bankvorgang aus, oder bearbeite das Finanzereignis, dem der Bankvorgang bereits zugeordnet ist. |
| **„Der Betrag des Finanzereignisses stimmt nicht mit dem Betrag der Transaktion überein."** | Der eingegebene Betrag weicht vom Betrag des zugeordneten Bankvorgangs ab. | Passe den Betrag des Finanzereignisses so an, dass er mit dem Bankvorgang übereinstimmt, oder nutze die Bearbeitung auf Positionsebene, um den Betrag aufzuteilen. |
| **„Die Summe der Beträge der Positionen stimmt nicht mit dem Gesamtbetrag überein."** | Bei Bearbeitung auf Positionsebene stimmt die Summe der Einzelpositionen nicht mit dem Gesamtbetrag (bzw. dem Betrag des Bankvorgangs) überein. | Korrigiere die Beträge der einzelnen Positionen, sodass die Summe den Gesamtbetrag ergibt. |
| **„Einer Spende muss immer ein Kontakt zugeordnet sein."** | Du hast ein Finanzereignis vom Typ „Spende" gespeichert, ohne einen Kontakt zuzuordnen. | Wähle einen bestehenden Kontakt aus, verwende ein Sammelkonto, oder lege einen neuen Kontakt an. |
| **„Der Betrag überschreitet das aktuelle Guthaben von [Betrag]."** | Bei einem Handkassenvorgang (Auszahlung) hast du einen Betrag eingegeben, der höher ist als das aktuelle Guthaben der Handkasse. | Gib einen kleineren Betrag ein, der das Handkassen-Guthaben nicht übersteigt. |
| **„Die Beträge der beiden ausgewählten Bankvorgänge stimmen nicht überein."** | Bei einer Umbuchung hast du zwei Bankvorgänge mit unterschiedlichen Beträgen ausgewählt. | Wähle zwei Bankvorgänge aus, die den gleichen Betrag haben (einer als Ausgabe, einer als Einnahme). |
| **Hinweis „Falsche Beleg-Zuordnung?"** | Die automatische Beleganalyse hat auf dem Beleg einen Betrag erkannt, der nicht mit dem zugeordneten Bankvorgang übereinstimmt. Dies ist ein Warnhinweis, kein Fehler. | Prüfe, ob der richtige Beleg dem richtigen Bankvorgang zugeordnet ist. Falls die Zuordnung korrekt ist, kannst du den Hinweis ignorieren. |

## Beziehungen der Finanzereignisse zu anderen Bereichen

- **Bankvorgänge**: Finanzereignisse können mit importierten Bankvorgängen verknüpft werden. Von der Seite „Bankvorgänge" aus kannst du auch direkt ein neues Finanzereignis erstellen – die Daten des Bankvorgangs (Betrag, Datum) werden dabei automatisch vorausgefüllt.
- **Belege**: Belege können hochgeladen, automatisch ausgelesen und Finanzereignissen zugeordnet werden. In der Belegauswahl stehen nur noch nicht zugeordnete sowie als mehrfach verwendbar markierte Belege zur Verfügung.
- **Kontakte**: Jedem Finanzereignis kann ein Kontakt (z. B. Lieferant oder Spender) zugeordnet werden. Bei Finanzereignissen vom Typ „Spende" ist die Zuordnung eines Kontakts verpflichtend.
- **Projekte**: Finanzereignisse können einem Projekt zugeordnet werden – entweder auf Gesamtebene für das komplette Finanzereignis oder pro einzelne Position bei der Bearbeitung auf Positionsebene.
- **Handkasse**: Handkassenvorgänge (Einzahlung/Auszahlung) werden als eigene Finanzereignisse erfasst.
- **Anlagenverwaltung**: Wenn du bei einem Finanzereignis ein Anlagekonto auswählst, wird dir automatisch angeboten, ein Anlagegut zu erfassen. Bei geringwertigen Wirtschaftsgütern (GWG) erfolgt eine Sofortabschreibung.
- **PayPal-Gebühren**: Bei PayPal-Transaktionen können zugehörige Gebühren automatisch als separates Finanzereignis mitgebucht werden. Beim Löschen eines solchen Finanzereignisses wirst du gefragt, ob die zugehörige Gebühren-Buchung ebenfalls gelöscht werden soll.
- **Nextcloud**: Wenn die Nextcloud-Integration für deine Organisation aktiviert ist, werden hochgeladene Belege automatisch mit der Nextcloud synchronisiert.

---

## standalone_page: Segments

**Entity:** Segments  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/Personal/Pages/Segments.php`  
**Updated:** 2026-02-14 20:22:28  

# Gruppen

## Übersicht

Auf der Seite „Gruppen" siehst du alle Gruppen (auch Segmente genannt), die in deiner Organisation verfügbar sind – ausgenommen Newsletter-Gruppen, die auf einer eigenen Seite verwaltet werden.

Die Seite „Gruppen" befindet sich im persönlichen Bereich der Anwendung.

## Navigation

Die Seite „Gruppen" ist über die Unternavigation im persönlichen Bereich erreichbar.

Die Seite „Gruppen" ist nur sichtbar, wenn mindestens eine Gruppe (die kein Newsletter ist) vorhanden ist. Ist keine solche Gruppe vorhanden, erscheint der Reiter „Gruppen" nicht in der Unternavigation.

## Berechtigungen

Die Seite „Gruppen" ist für alle angemeldeten Benutzer im persönlichen Bereich zugänglich, sofern mindestens eine Gruppe (die kein Newsletter ist) vorhanden ist.

## Sonderfälle

- **Keine Gruppen vorhanden**: Wenn keine Gruppen (ohne Newsletter) vorhanden sind, wird die Seite „Gruppen" nicht in der Unternavigation angezeigt und ist nicht erreichbar.
- **Nur Newsletter-Gruppen vorhanden**: Newsletter-Gruppen werden auf der Seite „Gruppen" grundsätzlich nicht angezeigt. Sind ausschließlich Newsletter-Gruppen vorhanden, ist die Seite „Gruppen" ebenfalls nicht sichtbar.

## Beziehungen

- **Newsletter**: Newsletter-Gruppen werden auf der Seite „Gruppen" nicht angezeigt. Sie werden auf der separaten Seite „Newsletter" im persönlichen Bereich verwaltet.

---

## standalone_page: ResourceBookingRequests

**Entity:** ResourceBookingRequests  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/Personal/Pages/ResourceBookingRequests.php`  
**Updated:** 2026-02-14 20:19:03  

# Ressourcen-Buchungsanfragen

## Übersicht

Auf der Seite „Ressourcen-Buchungsanfragen" kannst du deine eigenen Buchungsanfragen für Ressourcen einsehen und verwalten. Es werden alle deine persönlichen Buchungsanfragen angezeigt, deren Startdatum nicht länger als eine Woche zurückliegt. Die Seite befindet sich im persönlichen Bereich der Anwendung.

**Voraussetzung:** Das Tool **Ressourcen** muss aktiviert sein, damit diese Seite verfügbar ist.

## Navigation

Die Seite „Ressourcen-Buchungsanfragen" findest du im persönlichen Bereich („Personal") der Anwendung. Der Menüpunkt ist nur sichtbar, wenn das Tool **Ressourcen** aktiviert ist.

## Buchungsanfrage erstellen und bearbeiten

### Formularfelder

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Titel | Textfeld | Ja | Der Titel der Buchungsanfrage. |
| Ressourcen | Mehrfachauswahl | Ja (mind. 1) | Wähle eine oder mehrere Ressourcen aus, die du buchen möchtest. |
| Ganztägig | Schalter | Nein | Wenn aktiviert, werden bei Start und Ende keine Uhrzeiten angezeigt – es zählt nur das Datum. |
| Start | Datum/Uhrzeit | Ja | Startzeitpunkt der Buchung (ohne Sekunden-Auswahl). Bei aktiviertem Schalter „Ganztägig" wird nur das Datum angezeigt. Nach Änderung des Starts wird das Ende automatisch auf 2 Stunden nach dem Start gesetzt. Bei ganztägigen Buchungen wird das Ende auf dasselbe Datum gesetzt. |
| Ende | Datum/Uhrzeit | Ja | Endzeitpunkt der Buchung (ohne Sekunden-Auswahl). Bei aktiviertem Schalter „Ganztägig" wird nur das Datum angezeigt. |
| Wiederholung | Wiederholungsregel | Nein | Ermöglicht die Definition einer Wiederholungsregel (z. B. wöchentlich, monatlich). Dieses Feld ist nur beim **Erstellen** einer neuen Anfrage als Eingabefeld verfügbar. Beim **Bearbeiten** wird die Wiederholungsregel nur als Text angezeigt, sofern eine vorhanden ist – sie kann dann nicht mehr geändert werden. |
| Details | Rich-Text-Editor | Nein | Hier kannst du zusätzliche Informationen oder Anmerkungen zur Buchungsanfrage hinterlegen. |

## Tabellenansicht / Listenansicht

Die Tabelle auf der Seite „Ressourcen-Buchungsanfragen" zeigt alle deine eigenen Buchungsanfragen, deren Startdatum maximal eine Woche in der Vergangenheit liegt. Ältere Buchungsanfragen werden nicht mehr angezeigt. Die Sortierung erfolgt nach Startdatum absteigend (neueste zuerst).

| Spalte | Beschreibung |
|--------|--------------|
| Titel | Der Titel der Buchungsanfrage. |
| Titel (Ressourcen) | Die Namen der zugeordneten Ressourcen, die gebucht werden sollen. |
| Ganztägig | Zeigt ein Icon an, wenn die Buchung als ganztägig markiert ist. |
| Start | Startdatum und -uhrzeit der Buchung. Bei ganztägigen Buchungen wird nur das Datum angezeigt. |
| Ende | Enddatum und -uhrzeit der Buchung. Bei ganztägigen Buchungen wird nur das Datum angezeigt. |
| Status | Der aktuelle Bearbeitungsstatus der Anfrage, farblich als Badge hervorgehoben. |

Die Tabelle wird ohne Seitenumbruch (Paginierung) angezeigt – alle zutreffenden Einträge erscheinen auf einer Seite.

## Aktionen

Nach dem erfolgreichen Erstellen einer neuen Buchungsanfrage aktualisiert sich die Seite „Ressourcen-Buchungsanfragen" automatisch, sodass der neue Eintrag sofort in der Tabelle sichtbar ist.

Die Wiederholungsregel kann nach dem Erstellen nicht mehr geändert werden.

## Beziehungen

- **Ressourcen**: Jede Buchungsanfrage auf der Seite „Ressourcen-Buchungsanfragen" ist mit einer oder mehreren Ressourcen verknüpft. Die ausgewählten Ressourcen bestimmen, welche Räume, Geräte oder sonstigen Ressourcen für den angegebenen Zeitraum gebucht werden sollen.

---

## standalone_page: Forms

**Entity:** Forms  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/Personal/Pages/Forms.php`  
**Updated:** 2026-02-14 20:17:49  

# Formulare

## Übersicht

Auf der Seite „Formulare" kannst du Formulare einsehen, die dir zugewiesen wurden. Die Seite befindet sich im persönlichen Bereich der Anwendung und zeigt alle Formulare, die für dich bereitstehen.

## Navigation

Die Seite „Formulare" findest du im persönlichen Bereich. Sie wird nur in der Navigation angezeigt, wenn dir mindestens ein Formular zugewiesen ist. Sind dir keine Formulare zugewiesen, erscheint der Menüpunkt nicht.

## Formulare auswählen

Auf der Seite „Formulare" werden dir alle verfügbaren Formulare angezeigt. Du kannst ein Formular auswählen, um es zu öffnen.

## Keine Formulare vorhanden

Wenn dir aktuell keine Formulare zugewiesen sind, wird die Seite „Formulare" nicht im persönlichen Bereich angezeigt.

## Berechtigungen

Die Seite „Formulare" ist nur zugänglich, wenn dir im persönlichen Bereich Formulare zugeordnet sind.

---

## standalone_page: Chat

**Entity:** Chat  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/Personal/Pages/Chat.php`  
**Updated:** 2026-02-14 20:17:21  

# Chat

## Übersicht

Der Chat ist eine eigenständige Seite im persönlichen Bereich der ngo.tools-Plattform.

## Navigation

Die Chat-Funktion findest du im persönlichen Bereich der Anwendung. Klicke dort auf den Menüpunkt **Chat**, um die Chat-Seite zu öffnen.

## Voraussetzungen

Damit du den Chat nutzen kannst, müssen folgende Bedingungen erfüllt sein:

- Das Tool **Chat** muss für deine Organisation aktiviert sein. Ist das Tool nicht aktiviert, erscheint der Menüpunkt **Chat** nicht in der Navigation.

## Häufige Fragen und Hinweise

### Was passiert, wenn das Tool Chat nicht aktiviert ist?

Wenn das Tool **Chat** für deine Organisation nicht aktiviert ist, steht dir der Menüpunkt nicht zur Verfügung. Wende dich in diesem Fall an eine Person mit Verwaltungsrechten in deiner Organisation, um das Tool aktivieren zu lassen.

---

## standalone_page: Calendar

**Entity:** Calendar  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/Personal/Pages/Calendar.php`  
**Updated:** 2026-02-14 20:16:42  

# Kalender

## Übersicht

Der Kalender ist eine eigenständige Seite im persönlichen Bereich der Anwendung.

Diese Funktion ist derzeit noch nicht verfügbar. Der Kalender wird in einer zukünftigen Version freigeschaltet.

---

## standalone_page: Availabilities

**Entity:** Availabilities  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/Personal/Pages/Availabilities.php`  
**Updated:** 2026-02-14 20:16:23  

# Verfügbarkeiten

## Übersicht

Auf der Seite **Verfügbarkeiten** kannst du angeben, ob du für bevorstehende Veranstaltungen und deren Dienste zur Verfügung stehst. Die Seite zeigt nur zukünftige Veranstaltungen und nur die Dienste an, denen du zugeordnet bist.

## Navigation

Die Seite **Verfügbarkeiten** befindet sich im persönlichen Bereich („Personal"-Panel) der Anwendung. Die Seite wird nur angezeigt, wenn das Tool **Veranstaltungen** für deine Organisation aktiviert ist.

## Filteroptionen auf der Verfügbarkeiten-Seite

| Feld | Typ | Beschreibung |
|------|-----|--------------|
| Dienste-Filter | Umschalt-Buttons (Mehrfachauswahl) | Ermöglicht das Ein- und Ausblenden einzelner Dienste in der Verfügbarkeitsmatrix. Standardmäßig sind alle dir zugeordneten Dienste ausgewählt. Die Auswahl wird sofort übernommen (Live-Aktualisierung). |

Mit dem Dienste-Filter kannst du die Verfügbarkeitsmatrix auf bestimmte Dienste einschränken, um die Übersicht zu verbessern – besonders nützlich, wenn du vielen Diensten zugeordnet bist.

## Verfügbarkeitsmatrix

Die Verfügbarkeiten werden als Matrix dargestellt. Jede Zeile entspricht einer zukünftigen Veranstaltung, jede Spalte einem Dienst.

### Angezeigte Informationen in der Verfügbarkeitsmatrix

- **Veranstaltungen**: Alle zukünftigen Veranstaltungen, die mindestens einen Dienst enthalten, der dir zugeordnet ist. Die Veranstaltungen sind chronologisch nach Startdatum sortiert.
- **Dienste**: Nur die Dienste, die du über direkte Zuordnung oder Gruppenzugehörigkeit (Segmente) bedienen kannst und die auch bei mindestens einer zukünftigen Veranstaltung vorkommen.

## Voraussetzungen für die Verfügbarkeiten-Seite

- Das Tool **Veranstaltungen** muss für deine Organisation aktiviert sein, damit die Seite im persönlichen Bereich sichtbar ist.
- Du musst mindestens einem Dienst zugeordnet sein (direkt oder über Gruppenzugehörigkeit/Segmente), damit die Seite Inhalte anzeigt.

## Beziehungen der Verfügbarkeiten zu anderen Bereichen

- **Veranstaltungen**: Deine Verfügbarkeiten beziehen sich auf konkrete zukünftige Veranstaltungen und deren Dienste.
- **Dienste**: Die in der Matrix angezeigten Dienste entsprechen den Diensten, denen du zugeordnet bist.

---

## standalone_page: ListensToEvents

**Entity:** ListensToEvents  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Traits/ListensToEvents.php`  
**Updated:** 2026-02-14 20:09:35  

# Automatische Aktualisierung bei Finanzereignissen

## Übersicht

Die automatische Aktualisierung bei Finanzereignissen sorgt dafür, dass die Ansicht von Finanzereignissen (z. B. Buchungen) immer auf dem neuesten Stand bleibt. Wenn du ein Finanzereignis erstellst, bearbeitest oder löschst, reagiert die Seite automatisch – ohne dass du die Seite manuell neu laden musst.

## Verhalten der automatischen Aktualisierung

Die automatische Aktualisierung bei Finanzereignissen greift in drei Situationen:

- **Finanzereignis erstellt:** Nachdem du ein neues Finanzereignis angelegt hast, wechselt die Ansicht automatisch zur Detailansicht.
- **Finanzereignis bearbeitet:** Wenn du ein bestehendes Finanzereignis änderst und speicherst, wird die Ansicht automatisch aktualisiert.
- **Finanzereignis gelöscht:** Nach dem Löschen eines Finanzereignisses wird die Ansicht automatisch aktualisiert und der gelöschte Eintrag verschwindet.

---

## standalone_page: InteractsWithReceipts

**Entity:** InteractsWithReceipts  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Traits/InteractsWithReceipts.php`  
**Updated:** 2026-02-14 20:09:01  

# Beleg einem Geschäftsvorfall zuordnen

## Übersicht

Mit dieser Funktion kannst du aus einem vorhandenen Beleg direkt einen neuen Geschäftsvorfall erstellen. Wenn du einen Beleg auswählst und die Zuordnung startest, leitet dich das System automatisch zur Seite für die Erstellung eines Geschäftsvorfalls weiter.

## Navigation

Die Funktion „Beleg einem Geschäftsvorfall zuordnen" wird nicht direkt über die Seitenleiste aufgerufen. Stattdessen startest du sie aus dem Kontext eines einzelnen Belegs heraus – zum Beispiel über eine entsprechende Aktion in der Belegansicht. Das System leitet dich dann automatisch zur Erstellungsseite für **Geschäftsvorfälle** weiter.

## Aktionen

### Geschäftsvorfall aus Beleg erstellen

Wenn du diese Aktion bei einem Beleg auslöst, passiert Folgendes:

1. Das System merkt sich den ausgewählten Beleg in der Sitzung.
2. Du wirst automatisch zur Erstellungsseite für Geschäftsvorfälle weitergeleitet.

**Hinweis:** Wenn du die Erstellungsseite verlässt, ohne zu speichern, wird der gemerkte Beleg aus der Sitzung entfernt und kann jederzeit erneut für eine Zuordnung verwendet werden.

## Beziehungen

- **Belege**: Der Ausgangspunkt für die Zuordnung ist immer ein vorhandener Beleg. Von dort aus startest du die Erstellung eines neuen Geschäftsvorfalls.
- **Geschäftsvorfälle**: Der Zielbereich, in dem der neue Geschäftsvorfall auf Basis des Belegs erstellt wird.

---

## standalone_page: InteractsWithItems

**Entity:** InteractsWithItems  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Traits/InteractsWithItems.php`  
**Updated:** 2026-02-14 20:08:16  

# Positionen eines Finanzereignisses bearbeiten

## Übersicht

Innerhalb eines Finanzereignisses (z. B. einer Einnahme oder Ausgabe) kannst du einzelne Positionen anlegen und deren Beträge anpassen. Die Positionen teilen den Gesamtbetrag des Finanzereignisses auf verschiedene Kategorien oder Zwecke auf. Die erste Position wird dabei automatisch als Restbetrag berechnet, sodass die Summe aller Positionen immer dem Gesamtbetrag entspricht.

Wenn ein Finanzereignis nur eine einzige Position enthält, entspricht deren Betrag automatisch dem Gesamtbetrag des Finanzereignisses.

## Formularfelder

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Betrag (je Position) | Geldbetrag | Ja | Der Betrag der jeweiligen Position. Du kannst sowohl Komma als auch Punkt als Dezimaltrennzeichen verwenden (z. B. „12,50" oder „12.50"). |

**Hinweis:** Die erste Position kann nicht direkt bearbeitet werden. Ihr Betrag ergibt sich automatisch aus dem Gesamtbetrag abzüglich aller weiteren Positionen.

## Aktionen

### Betrag einer Position ändern

Wenn du den Betrag einer Position (außer der ersten) änderst, passt sich der Betrag der ersten Position automatisch an. Die erste Position enthält immer den Restbetrag, der sich aus dem Gesamtbetrag abzüglich aller weiteren Positionen ergibt.

Solange du noch tippst und der eingegebene Wert noch kein gültiger Geldbetrag ist (z. B. nur ein Komma oder eine unvollständige Zahl), wird die Eingabe ignoriert und nicht gespeichert. Erst wenn ein vollständiger, gültiger Betrag erkannt wird, erfolgt die Übernahme.

### Position entfernen

Du kannst eine einzelne Position aus dem Finanzereignis entfernen. Nach dem Entfernen werden die verbleibenden Beträge automatisch neu berechnet, sodass die erste Position wieder den korrekten Restbetrag enthält. Enthält das Finanzereignis danach nur noch eine Position, entspricht deren Betrag dem Gesamtbetrag.

## Validierung & Fehlermeldungen

| Fehler | Ursache | Lösung |
|--------|---------|--------|
| Restbetrag unter 0 | Die Summe der manuell eingegebenen Positionen übersteigt den Gesamtbetrag des Finanzereignisses. | Reduziere die Beträge der einzelnen Positionen, sodass ihre Summe den Gesamtbetrag nicht überschreitet. |

**Automatische Restberechnung:** Die erste Position kann nicht direkt bearbeitet werden. Ihr Betrag wird automatisch aus dem Gesamtbetrag abzüglich aller weiteren Positionen berechnet. Der Betrag der ersten Position kann nicht unter 0 fallen.

Nach jeder Änderung an den Positionen wird das gesamte Finanzereignis erneut validiert, um sicherzustellen, dass alle Werte korrekt sind.

## Beziehungen

- **Finanzereignis:** Jede Position gehört zu genau einem Finanzereignis. Der Gesamtbetrag des Finanzereignisses bestimmt die Summe aller Positionen. Änderst du den Gesamtbetrag des Finanzereignisses, wirkt sich das auf die automatische Berechnung der ersten Position aus.
- **Positionen (Finanzereignis-Positionen):** Einem Finanzereignis können mehrere Positionen zugeordnet sein, um den Gesamtbetrag auf verschiedene Kategorien oder Zwecke aufzuschlüsseln.

---

## standalone_page: HasTourActions

**Entity:** HasTourActions  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Traits/HasTourActions.php`  
**Updated:** 2026-02-14 20:07:16  

# Interaktive Tour – Geschäftsvorfälle erfassen

## Übersicht

Die interaktive Tour führt dich Schritt für Schritt durch den Prozess der Erfassung eines Geschäftsvorfalls. Dabei wird ein Beispiel-Beleg automatisch erstellt, und du lernst, wie du einen Kontakt zuordnest, eine Kostenstelle auswählst und den Geschäftsvorfall bestätigst. Alle während der Tour erstellten Beispieldaten werden nach Abschluss oder Neustart automatisch wieder entfernt – deine echten Daten bleiben unberührt.

## Voraussetzungen

Damit die interaktive Tour vollständig durchlaufen werden kann, muss mindestens eine Kostenstelle angelegt sein. Ist keine Kostenstelle vorhanden, kann der Schritt „Kostenstelle auswählen" nicht abgeschlossen werden.

## Ablauf der Tour

Die interaktive Tour durchläuft die folgenden vier Schritte in fester Reihenfolge:

1. **Geschäftsvorfall anlegen** – Ein Beispiel-Beleg (Rechnung Nr. B25100) wird automatisch hochgeladen, und ein zugehöriger Geschäftsvorfall wird als Tour-Beispiel erstellt. Die Kategorie wird anhand des Belegs automatisch ermittelt.
2. **Kontakt zuordnen** – Ein Beispiel-Kontakt („Gründerhelfer Gmbh" mit Adresse in Brigachtal) wird erstellt und dem Geschäftsvorfall zugeordnet.
3. **Kostenstelle auswählen** – Dem Geschäftsvorfall wird die erste verfügbare Kostenstelle zugewiesen.
4. **Bestätigen** – Der Geschäftsvorfall wird in den nächsten Bearbeitungsstatus überführt.

## Aktionen im Detail

### Geschäftsvorfall erstellen

Beim Start der interaktiven Tour wird automatisch ein Beispiel-Beleg (Rechnung Nr. B25100) importiert. Auf Basis dieses Belegs wird ein Geschäftsvorfall als Tour-Beispiel angelegt. Die Kategorie des Geschäftsvorfalls wird automatisch anhand des Belegs ermittelt. Falls bereits ein Tour-Geschäftsvorfall existiert, werden die alten Tour-Daten zuerst aufgeräumt, bevor neue erstellt werden.

### Kontakt zuordnen

Ein Beispiel-Kontakt mit dem Namen „Gründerhelfer Gmbh" und einer Adresse in Brigachtal (Enchioweg 12, 78086) wird angelegt und dem Geschäftsvorfall der interaktiven Tour zugewiesen. Dieser Kontakt dient ausschließlich als Demonstrationsobjekt und wird nach Abschluss der Tour wieder gelöscht.

### Kostenstelle setzen

Die erste verfügbare Kostenstelle in deiner Organisation wird dem Geschäftsvorfall der Tour automatisch zugeordnet. Falls keine Kostenstelle vorhanden ist, kann dieser Schritt nicht abgeschlossen werden. In diesem Fall solltest du die Tour abbrechen und zunächst eine Kostenstelle anlegen.

### Geschäftsvorfall bestätigen

Im letzten Schritt wird der Geschäftsvorfall in den nächsten Bearbeitungsstatus überführt.

## Beziehungen zu anderen Bereichen

Die interaktive Tour erstellt und verwendet Daten aus mehreren Bereichen:

- **Geschäftsvorfälle**: Die Tour erstellt einen Geschäftsvorfall vom Typ „TourDummy". Dieser wird nach Abschluss oder Neustart der Tour automatisch gelöscht.
- **Belege**: Ein Beispiel-Beleg wird hochgeladen und dem Geschäftsvorfall zugeordnet. Auch dieser wird bei Abschluss der Tour entfernt.
- **Kontakte**: Ein Beispiel-Kontakt („Gründerhelfer Gmbh") wird für die Tour erstellt und danach wieder gelöscht.
- **Kostenstellen**: Eine bereits bestehende Kostenstelle wird dem Geschäftsvorfall zugewiesen. Diese wird **nicht** gelöscht, da sie nicht von der Tour erstellt wurde.

## Aufräumen und Neustart

Beim Abschluss oder Neustart der interaktiven Tour werden alle tour-spezifischen Daten automatisch bereinigt. Das betrifft den erstellten Geschäftsvorfall, den Beispiel-Beleg und den Beispiel-Kontakt. Bestehende Kostenstellen bleiben unverändert. Falls beim Erstellen eines neuen Tour-Geschäftsvorfalls bereits ein bestehender erkannt wird, werden die alten Tour-Daten automatisch aufgeräumt, bevor neue Beispieldaten erstellt werden.

## Häufige Probleme und Lösungen

| Problem | Ursache | Lösung |
|---|---|---|
| Der Schritt „Kostenstelle setzen" kann nicht abgeschlossen werden | Es ist keine Kostenstelle in deiner Organisation angelegt. | Brich die Tour ab und lege zunächst eine neue Kostenstelle an. Starte die Tour danach erneut. |
| Nach Abbruch der Tour sind noch Beispieldaten sichtbar | Die Tour wurde unerwartet unterbrochen, bevor die Bereinigung stattfinden konnte. | Starte die Tour erneut – beim Neustart werden alte Tour-Daten automatisch entfernt. |

---

## standalone_page: HasTableView

**Entity:** HasTableView  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Traits/HasTableView.php`  
**Updated:** 2026-02-14 20:05:52  

# Finanzereignisse – Tabellenansicht

## Übersicht

Die Tabellenansicht der Finanzereignisse zeigt alle gebuchten Finanzereignisse in einer übersichtlichen Tabelle an. Hier kannst du deine Finanzereignisse filtern, sortieren und einzelne Einträge einsehen oder löschen. Wenn Filter aktiv sind und Finanzereignisse existieren, wird in der Tabellenüberschrift angezeigt, dass es sich um gefilterte Ergebnisse handelt.

## Spalten der Tabellenansicht

Die Tabelle der Finanzereignisse zeigt folgende Spalten an, wobei einzelne Spalten über die Spaltenauswahl ein- und ausgeblendet werden können:

| Spalte | Beschreibung | Sortierbar | Besonderheiten |
|--------|-------------|------------|----------------|
| Datum | Das Zahlungsdatum des Finanzereignisses | Ja | Standardmäßig absteigend sortiert (neueste zuerst) |
| Status | Der aktuelle Status des Finanzereignisses | Ja | – |
| Kategorie | Die Finanzkategorie (z. B. Einnahme/Ausgabe) | Ja | – |
| Konto | Das zugeordnete Bankkonto | Ja | Wird nur angezeigt, wenn mehr als ein Bankkonto vorhanden ist |
| Name | Der zugeordnete Kontakt oder Lieferant | Ja | Klickbar – führt zur Kontaktübersicht des jeweiligen Kontakts |
| Beschreibung | Beschreibungstext des Finanzereignisses | Ja | Wird nach einer konfigurierten Zeichenlänge abgeschnitten; wenn du mit der Maus über den Text fährst, wird der vollständige Text angezeigt |
| Projekt | Zugeordnete Projekte | Nein | Wird nur angezeigt, wenn das Tool „Projekte" aktiviert ist; die Projekte werden als Badges dargestellt |
| Bereich | Die zugeordnete Sphäre bzw. Kostenstelle | Nein | Wird nur angezeigt, wenn mehr als ein Bereich verwendet wird |
| Typ | Der Finanzereignistyp | Nein | – |
| Betrag | Der Gesamtbetrag in Euro | Ja | Negative Beträge werden rot dargestellt; am Tabellenende wird eine Summe über alle angezeigten Beträge eingeblendet |

### Spaltenauswahl

Die sichtbaren Spalten der Finanzereignis-Tabelle können individuell konfiguriert werden. So kannst du dir genau die Informationen anzeigen lassen, die du benötigst. Diese Funktion steht nur in der Tabellenansicht zur Verfügung.

## Filterverhalten in der Finanzereignis-Tabelle

Wenn du nach Projekt, Typ oder Bereich filterst, wechselt die Tabelle intern auf eine Positionsebene. Das bedeutet: Statt der Finanzereignisse als Ganzes werden die einzelnen Positionen der Finanzereignisse angezeigt. Dadurch werden korrekte Filterergebnisse geliefert, da ein Finanzereignis mehrere Positionen mit unterschiedlichen Projekten, Typen oder Bereichen enthalten kann.

**Auswirkung:** In dieser gefilterten Ansicht steht die Massenlöschung nicht zur Verfügung.

## Leere Tabelle – Hinweise

Je nach Situation werden in der Finanzereignis-Tabelle unterschiedliche Hinweise angezeigt:

- **Keine Bankvorgänge vorhanden:** „Es sind noch keine Bankvorgänge vorhanden. Importiere zuerst Bankvorgänge, damit du sie danach buchen kannst." – Zusätzlich wird ein Button „Bankvorgänge" angezeigt, der dich zur Bankvorgang-Übersicht führt.
- **Keine Finanzereignisse gebucht (mit Bearbeitungsrecht):** „Es sind noch keine Finanzereignisse gebucht. Fange an, indem du oben rechts auf ‚Finanzereignis erstellen' klickst oder einen Beleg hochlädst."
- **Keine Finanzereignisse gebucht (ohne Bearbeitungsrecht):** „Es sind noch keine Finanzereignisse gebucht. Das kannst du auch nicht selbst tun, weil du keine Bearbeitungs-Rechte für die Buchhaltung hast."
- **Filter ergeben keine Treffer:** „Es sind keine Finanzereignisse vorhanden, die den Filterkriterien entsprechen. Entferne die Filter, um alle Finanzereignisse anzuzeigen."

## Aktionen in der Finanzereignis-Tabelle

### Zeilenaktionen

Für jedes Finanzereignis in der Tabelle stehen folgende Aktionen zur Verfügung:

| Aktion | Beschreibung |
|--------|-------------|
| **Beleg anzeigen** | Öffnet den zugeordneten Beleg in einem Modal-Fenster. Diese Aktion ist nur sichtbar, wenn dem Finanzereignis ein Beleg zugeordnet ist. |
| **Finanzereignis ansehen** | Öffnet die Detailseite des Finanzereignisses. |

### Massenaktionen

| Aktion | Beschreibung |
|--------|-------------|
| **Löschen** | Ermöglicht das gleichzeitige Löschen mehrerer ausgewählter Finanzereignisse. Diese Aktion ist nur in der normalen Ansicht verfügbar – wenn ein Filter nach Projekt, Typ oder Bereich aktiv ist, steht die Massenlöschung nicht zur Verfügung. Diese Aktion ist nur sichtbar, wenn du die Berechtigung „write accounting" hast. |

## Berechtigungen für die Finanzereignis-Tabelle

| Berechtigung | Funktion |
|-------------|----------|
| Berechtigung „write accounting" | Du kannst die Massenlöschung nutzen, um mehrere Finanzereignisse gleichzeitig zu löschen. Ohne diese Berechtigung ist die Lösch-Aktion nicht sichtbar. |

## Beziehungen zu anderen Bereichen

Die Finanzereignis-Tabelle ist mit mehreren anderen Bereichen der Plattform verknüpft:

- **Bankvorgänge:** Wenn noch keine Finanzereignisse existieren, verlinkt die Tabelle direkt auf die Bankvorgang-Übersicht.
- **Kontakte:** Der Kontaktname in der Spalte „Name" ist ein Link zur jeweiligen Kontaktübersicht.
- **Belege:** Zugeordnete Belege können direkt aus der Finanzereignis-Tabelle heraus über die Zeilenaktion „Beleg anzeigen" in einem Dialogfenster angezeigt werden.
- **Projekte:** Finanzereignis-Positionen können Projekten zugeordnet sein. Voraussetzung: Das Tool „Projekte" muss aktiviert sein. Die zugeordneten Projekte werden in der Spalte „Projekt" als Badges angezeigt.
- **Bereiche (Sphären):** Finanzereignis-Positionen sind Bereichen (Sphären/Kostenstellen) zugeordnet. Die Spalte „Bereich" wird nur angezeigt, wenn mehr als ein Bereich in der Organisation verwendet wird.
- **Bankkonten:** Die Spalte „Konto" zeigt das zugeordnete Bankkonto an. Diese Spalte wird nur eingeblendet, wenn mehr als ein Bankkonto vorhanden ist.

---

## standalone_page: HasHeaderActions

**Entity:** HasHeaderActions  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Traits/HasHeaderActions.php`  
**Updated:** 2026-02-14 20:03:50  

# Aktionsleiste der Finanzereignisse

## Übersicht

Die Aktionsleiste am oberen Rand der Finanzereignisse-Seite bietet schnellen Zugriff auf alle wichtigen Funktionen zur Verwaltung von Finanzereignissen. Über die Aktionsleiste kannst du zwischen verschiedenen Ansichten wechseln, neue Finanzereignisse erstellen, Belege hochladen, Umbuchungen anlegen, Sachspenden erfassen und Handkassenvorgänge buchen.

Die Aktionsleiste ist nur sichtbar, wenn du die Berechtigung **„write accounting-extended"** besitzt. Ohne diese Berechtigung werden keine Aktionen angezeigt.

## Ansicht wechseln

Auf der Finanzereignisse-Seite kannst du zwischen zwei Ansichten umschalten:

- **Detailansicht** (Symbol: drei horizontale Striche): Zeigt ausführliche Informationen zu jedem Finanzereignis.
- **Tabellenansicht** (Symbol: vier horizontale Striche): Zeigt eine kompakte Übersicht aller Finanzereignisse in Tabellenform. In dieser Ansicht kannst du zusätzlich die angezeigten Spalten konfigurieren (siehe Abschnitt „Spalten auswählen").

## Suche

Über die Suchfunktion in der Aktionsleiste kannst du gezielt nach bestimmten Finanzereignissen suchen.

## Finanzereignis erstellen

Über die Schaltfläche **Finanzereignis erstellen** in der Aktionsleiste legst du ein neues Finanzereignis an. Nach dem Erstellen passiert Folgendes:

- Eventuell gesetzte Filter werden automatisch zurückgesetzt, damit das neu erstellte Finanzereignis sichtbar ist.
- Die Ansicht wechselt automatisch in die **Detailansicht**, falls du dich nicht bereits dort befindest, sodass du die Details des neuen Finanzereignisses direkt sehen und bearbeiten kannst.

## Beleg hochladen

Mit der Upload-Funktion in der Aktionsleiste kannst du einen Beleg hochladen.

## Filter

Du kannst die angezeigten Finanzereignisse nach verschiedenen Kriterien filtern, um nur die relevanten Einträge zu sehen. Gesetzte Filter lassen sich über die Aktion **Filter zurücksetzen** wieder entfernen, sodass wieder alle Finanzereignisse angezeigt werden.

## Spalten auswählen

Die Funktion **Spalten auswählen** ermöglicht dir, die angezeigten Tabellenspalten individuell zu konfigurieren.

**Wichtig:** Diese Funktion ist nur in der **Tabellenansicht** verfügbar. Wenn du dich in der Detailansicht befindest, ist die Schaltfläche deaktiviert. In diesem Fall wird folgender Hinweis angezeigt:

> *„Um die Tabellenspalten auswählen zu können, musst du dich in der Tabellenansicht befinden."*

Wechsle zuerst in die Tabellenansicht, um die Spaltenauswahl nutzen zu können.

## Weitere Aktionen

Unter dem Menü **Weitere Aktionen** findest du zusätzliche Funktionen:

### Umbuchung erstellen

Erstellt eine interne Umbuchung zwischen zwei verbundenen Bankkonten.

### Sachspende erfassen

Ermöglicht die Erfassung einer Sachspende als Finanzereignis.

### Handkassenvorgang erfassen

Bucht einen Vorgang über die Handkasse.

## Berechtigungen

Die gesamte Aktionsleiste – einschließlich aller beschriebenen Aktionen – ist nur sichtbar, wenn du die Berechtigung **„write accounting-extended"** besitzt.

| Berechtigung | Zugriff auf die Aktionsleiste |
|---|---|
| Keine / nicht vorhanden | Kein Zugriff, Aktionsleiste nicht sichtbar |
| write accounting-extended | Voller Zugriff auf alle Aktionen |

## Beziehungen zu anderen Bereichen

Die Aktionsleiste der Finanzereignisse steht in Verbindung mit mehreren anderen Bereichen der Plattform:

- **Finanzereignisse**: Die Aktionsleiste steuert die Darstellung, Filterung und Erstellung von Finanzereignissen.
- **Belege**: Über die Upload-Funktion werden Belege hochgeladen, die anschließend Finanzereignissen zugeordnet werden können.
- **Bankvorgänge**: Für die Erstellung von Umbuchungen werden Bankvorgänge aus verbundenen Bankkonten benötigt.
- **Handkasse**: Handkassenvorgänge werden über die Aktionsleiste erfasst.

---

## standalone_page: HasForms

**Entity:** HasForms  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents/Traits/HasForms.php`  
**Updated:** 2026-02-14 20:02:23  

# Formulare zur Erfassung von Finanzereignissen

## Übersicht

Die Formulare zur Erfassung von Finanzereignissen werden bei der Erstellung und Bearbeitung von Finanzereignissen im Bereich **Finanzen** verwendet. Sie führen dich schrittweise durch die Eingabe aller relevanten Daten:

1. **Allgemeine Daten** – Betrag, Datum, Währung und Beschreibung
2. **Kontaktauswahl** – Zuordnung eines bestehenden Kontakts oder Verwendung eines Sammelkontos
3. **Buchungsdetails** – Konto, Steuerschlüssel, Projekt und Sphäre (Kostenstelle)

Nach Abschluss der Eingabe wird das Finanzereignis gespeichert und die zugehörige Buchungsposition automatisch erstellt.

## Navigation

Die Formulare zur Erfassung von Finanzereignissen erreichst du über **Finanzen → Finanzereignisse**. Dort kannst du ein neues Finanzereignis erstellen oder ein bestehendes bearbeiten.

## Formularfelder – Allgemeine Daten

Im ersten Schritt erfasst du die grundlegenden Informationen zum Finanzereignis.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Gesamtbetrag | Geldbetrag | Ja | Der Gesamtbetrag des Finanzereignisses. |
| Währung | Auswahl | Ja | Auswahl zwischen EUR und USD. Die Währung ist standardmäßig vorausgewählt. |
| Steuersatz | Auswahl | Nein | Prozentsatz der Steuer. Dieses Feld ist nur sichtbar, wenn das Tool **Steuerverwaltung** aktiviert ist. Es zeigt alle verfügbaren Steuersätze in Prozent an. |
| Datum | Datumsauswahl | Ja | Das Zahlungsdatum des Finanzereignisses. |
| Leistungsdatum | Datumsauswahl | Nein | Das Datum, an dem die Leistung erbracht wurde. Kann vom Zahlungsdatum abweichen. |
| Beschreibung | Textfeld | Nein | Freitextbeschreibung des Finanzereignisses (z. B. Verwendungszweck oder Anmerkungen). |

**Hinweis zur automatischen Belegerkennung:** Unterhalb der Felder erscheint der Hinweis **„Beleg automatisch auslesen"**, wenn der externe Dienst **Mindee** aktiviert ist. Ein Tooltip erklärt: *„Um Belege automatisch auszulesen, aktiviere in den Einstellungen unter ‚Externe Dienste' Mindee."* Ist Mindee nicht aktiviert, wird dieser Hinweis nicht angezeigt.

## Formularfelder – Kontaktauswahl (Kreditor/Debitor)

Im Bereich Kontaktauswahl legst du fest, welchem Kontakt das Finanzereignis zugeordnet wird.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Kontaktart | Radio-Buttons | Nein | Auswahl zwischen **„Bestehender Kontakt"** und **„Sammelkonto"**. Wähle „Bestehender Kontakt", um einen konkreten Lieferanten oder Spender zuzuordnen. Wähle „Sammelkonto", wenn kein bestimmter Kontakt zugeordnet werden soll. |
| Kontakt | Auswahl mit Suchfunktion | Ja (wenn „Bestehender Kontakt" gewählt) | Auswahl eines bestehenden Kontakts aus der Liste. Das Feld ist durchsuchbar – tippe den Namen ein, um Vorschläge zu erhalten. Dieses Feld wird nur angezeigt, wenn „Bestehender Kontakt" als Kontaktart gewählt wurde. |

**Automatische Kontaktvorschläge:** Das System versucht automatisch, einen passenden Kontakt vorzuschlagen. Dies geschieht auf Basis eines verknüpften Bankvorgangs oder anhand der Belegdaten. Wird ein Kontakt mit ausreichender Übereinstimmung gefunden, wird dieser vorausgewählt. Wird kein passender Kontakt gefunden, wird stattdessen das Sammelkonto vorgeschlagen.

**Neuen Kontakt anlegen:** Über den Link **„Neuen Kontakt anlegen"** kannst du direkt aus dem Buchungsprozess heraus einen neuen Kontakt erstellen, ohne den aktuellen Vorgang zu verlassen.

## Formularfelder – Kontoauswahl

In diesem Bereich ordnest du dem Finanzereignis ein Buchungskonto zu.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Finanzereignistyp | Kontoauswahl | Ja | Auswahl des Buchungskontos für das Finanzereignis. Wenn ein **Anlagekonto** gewählt wird, öffnet sich automatisch ein zusätzlicher Dialog zur Erfassung eines Anlageguts. |

**Automatische Übernahme:** Wenn du einen bestehenden Kontakt ausgewählt hast, wird das zuletzt für diesen Kontakt verwendete Buchungskonto automatisch vorgeschlagen.

## Formularfelder – Steuerschlüssel

Der Steuerschlüssel legt fest, wie die Umsatzsteuer bzw. Vorsteuer für das Finanzereignis behandelt wird.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Steuerschlüssel | Auswahl | Nein | Auswahl des Steuerschlüssels. |

**Wichtige Hinweise zum Steuerschlüssel:**
- Das Feld ist **deaktiviert**, solange noch keine Sphäre (Kostenstelle) zugeordnet wurde. Wähle zuerst eine Sphäre, um den Steuerschlüssel bearbeiten zu können.
- Unterhalb des Feldes wird die **Kurzbezeichnung** des gewählten Steuerschlüssels angezeigt.
- Ist kein Steuerschlüssel gewählt, erscheint der Hinweis *„Ohne USt./VSt."*.

## Formularfelder – Projekt

Du kannst das Finanzereignis optional einem Projekt zuordnen.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Projekt | Auswahl mit Suchfunktion | Nein | Zuordnung des Finanzereignisses zu einem Projekt. Das Feld ist durchsuchbar. Wenn du einen bestehenden Kontakt ausgewählt hast, wird das zuletzt für diesen Kontakt verwendete Projekt automatisch vorgeschlagen. |

## Formularfelder – Sphäre (Kostenstelle)

Die Sphäre (Kostenstelle) ordnet das Finanzereignis einem bestimmten Bereich deiner Organisation zu.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Bereich | Auswahl mit Suchfunktion | Nein | Zuordnung des Finanzereignisses zu einer Sphäre (Kostenstelle). Das Feld ist durchsuchbar. Wenn du einen bestehenden Kontakt ausgewählt hast, wird die zuletzt für diesen Kontakt verwendete Sphäre automatisch vorgeschlagen. |

**Hinweis:** Die Änderung der Sphäre löst eine Aktualisierung der verknüpften Buchungsdaten aus.

## Aktionen

### Weiter / Bestätigen

Nach Eingabe der allgemeinen Daten und Kontaktauswahl klickst du auf **„Weiter"** bzw. **„Bestätigen"**, um das Finanzereignis zu speichern. Dabei passiert Folgendes automatisch:

- Die zugehörige Buchungsposition wird erstellt.
- Der Betrag wird korrekt berechnet (positiv für Einnahmen, negativ für Ausgaben).
- Das Finanzereignis wird dem passenden **Wirtschaftsjahr** zugeordnet, basierend auf dem eingegebenen Zahlungsdatum.
- Falls ein bestehender Kontakt gewählt wurde, werden das zuletzt verwendete **Buchungskonto**, die **Sphäre** und das **Projekt** dieses Kontakts automatisch übernommen.
- Falls ein **Bankvorgang** verknüpft ist, wird die Verknüpfung automatisch hergestellt.

### Neuen Kontakt anlegen

Über den Link **„Neuen Kontakt anlegen"** öffnet sich ein separates Formular zur Erstellung eines neuen Kontakts. Der aktuelle Buchungsprozess bleibt dabei erhalten.

## Validierung und Fehlermeldungen

| Feld | Fehlermeldung | Ursache | Lösung |
|------|---------------|---------|--------|
| Gesamtbetrag | Pflichtfeld-Fehler | Das Feld „Gesamtbetrag" wurde nicht ausgefüllt. | Trage einen gültigen Geldbetrag ein. |
| Datum | Pflichtfeld-Fehler | Das Feld „Datum" wurde nicht ausgefüllt. | Wähle ein Zahlungsdatum aus. |
| Kontakt | Pflichtfeld-Fehler | Es wurde „Bestehender Kontakt" als Kontaktart gewählt, aber kein Kontakt ausgewählt. | Wähle einen Kontakt aus der Liste aus oder wechsle zu „Sammelkonto", wenn kein bestimmter Kontakt zugeordnet werden soll. |
| Steuerschlüssel | Feld ist deaktiviert | Es wurde noch keine Sphäre (Kostenstelle) zugeordnet. | Wähle zuerst eine Sphäre im Feld „Bereich" aus. Danach wird das Steuerschlüssel-Feld aktiviert. |

## Beziehungen zu anderen Bereichen

Das Formular zur Erfassung von Finanzereignissen steht in Verbindung mit mehreren anderen Bereichen der Anwendung:

- **Kontakte:** Über die Kontaktauswahl wird ein Lieferant oder Spender mit dem Finanzereignis verknüpft. Das System schlägt automatisch einen passenden Kontakt vor, wenn ein verknüpfter Bankvorgang oder Beleg vorhanden ist.
- **Bankvorgänge:** Ein Finanzereignis kann mit einem Bankvorgang (Einzelvorgang) verknüpft werden. Die Verknüpfung erfolgt automatisch während der Erstellung.
- **Projekte:** Die Buchungsposition eines Finanzereignisses kann einem Projekt zugeordnet werden. Das zuletzt verwendete Projekt des gewählten Kontakts wird als Vorschlag übernommen.
- **Sphären (Kostenstellen):** Die Buchungsposition kann einer Sphäre zugeordnet werden. Die zuletzt verwendete Sphäre des gewählten Kontakts wird automatisch vorgeschlagen.
- **Wirtschaftsjahre:** Das Finanzereignis wird automatisch dem Wirtschaftsjahr zugeordnet, das zum eingegebenen Zahlungsdatum passt.
- **Steuerschlüssel:** Das Feld ist erst aktiv, wenn eine Sphäre zugeordnet wurde.
- **Anlagenverwaltung:** Wird ein Anlagekonto als Buchungskonto gewählt, öffnet sich automatisch ein Dialog zur Erfassung eines Anlageguts.
- **Externe Dienste (Mindee):** Ist der Dienst Mindee in den Einstellungen unter „Externe Dienste" aktiviert, können Belege automatisch ausgelesen werden.

---

## standalone_page: BusinessEvents

**Entity:** BusinessEvents  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/BusinessEvents.php`  
**Updated:** 2026-02-14 19:58:07  

# Finanzereignisse

## Übersicht

Die Seite „Finanzereignisse" ist die zentrale Buchungsansicht der erweiterten Buchhaltung. Hier kannst du Einnahmen, Ausgaben, Sachspenden, Umbuchungen, Handkassenvorgänge und Abschreibungen erfassen, bearbeiten und verwalten. Belege können hochgeladen und den Finanzereignissen zugeordnet werden – wahlweise manuell oder automatisch per Belegauswertung. Wenn noch keine Finanzereignisse vorhanden sind, wird eine leere Ansicht mit Hinweisen zum Einstieg angezeigt.

## Navigation

- **Seitenleiste → Finanzen → Finanzereignisse**
- Die Seite befindet sich in der Menügruppe „Finanzen" und ist dort ganz oben positioniert.

## Voraussetzungen

- Das Tool **Erweiterte Buchhaltung** muss in der Toolbox aktiviert sein.
- Die Organisation muss die erweiterte Buchhaltung nutzen (nicht die einfache Buchhaltung).

## Ansichtstypen

Die Seite „Finanzereignisse" bietet zwei verschiedene Ansichten, die über einen Umschalter oben auf der Seite gewechselt werden können:

1. **Detailansicht (Karten)**: Zeigt jedes Finanzereignis als einzelne Karte mit allen Details inklusive Beleg-Vorschau und direkten Bearbeitungsmöglichkeiten. Dies ist die Standard-Ansicht und eignet sich besonders zum Arbeiten mit einzelnen Buchungen.
2. **Tabellenansicht (Übersicht)**: Zeigt die Finanzereignisse in einer klassischen Tabellenstruktur, ähnlich einer herkömmlichen Buchhaltungssoftware. Besonders nützlich, wenn du dir einen schnellen Überblick über viele Buchungen verschaffen möchtest.

Beim Wechsel zwischen den Ansichten bleiben deine gesetzten Filter erhalten.

## Tabellenansicht der Finanzereignisse

### Spalten

Die Tabellenansicht der Finanzereignisse zeigt folgende Spalten:

| Spalte | Beschreibung |
|---|---|
| Kategorie | Einnahme oder Ausgabe |
| Typ | Art des Finanzereignisses (z. B. Einnahme, Ausgabe, Sachspende, Gutschrift, Umbuchung) |
| Bereich (Sphäre) | Zugeordnete Sphäre (z. B. Ideeller Bereich, Zweckbetrieb, Vermögensverwaltung, Wirtschaftlicher Geschäftsbetrieb) |
| Datum | Datum des Finanzereignisses |
| Rechnungsdatum | Datum der Rechnung |
| Zahlungsdatum | Datum der Zahlung |
| Lieferdatum | Datum der Leistungserbringung |
| Belegnummer | Nummer des zugehörigen Belegs |
| Beschreibung | Beschreibungstext des Finanzereignisses |
| Betrag | Geldbetrag des Finanzereignisses |
| Enthaltene Steuer | Im Betrag enthaltener Steuerbetrag |
| Steuersatz | Angewandter Steuersatz (z. B. 19 %, 7 % oder ohne USt./VSt.) |
| Lieferant | Zugeordneter Kontakt bzw. Lieferant |
| Bankvorgang | Zugeordneter Bankvorgang |
| Beleg | Zugehöriger Beleg |

Die angezeigten Spalten kannst du über einen Spaltenauswahl-Dialog individuell anpassen. Diese Spaltenauswahl ist nur in der Tabellenansicht verfügbar.

### Filter in der Tabellenansicht

In der Tabellenansicht der Finanzereignisse stehen folgende Filter zur Verfügung:

| Filter | Beschreibung |
|---|---|
| Kategorie | Zeigt nur Einnahmen oder nur Ausgaben an |
| Wirtschaftsjahr | Zeigt nur Finanzereignisse eines bestimmten Wirtschaftsjahres an |
| Sphäre (Bereich) | Zeigt nur Finanzereignisse einer bestimmten Sphäre bzw. Kostenstelle an |
| Ohne Beleg | Zeigt nur Finanzereignisse an, denen noch kein Beleg zugeordnet ist – nützlich, um fehlende Belege nachzupflegen |
| Automatische Buchungen | Zeigt nur automatisch erstellte Buchungen an (z. B. durch Belegauswertung oder PayPal-Gebühren) |

Zusätzlich steht eine Volltextsuche zur Verfügung, mit der du Finanzereignisse nach Beschreibung und Belegnummer durchsuchen kannst.

### Sortierung

Die Tabelle der Finanzereignisse kann nach verschiedenen Spalten sortiert werden (aufsteigend oder absteigend). Standardmäßig wird nach Datum sortiert, wobei die neuesten Finanzereignisse zuerst angezeigt werden.

## Detailansicht (Karten) der Finanzereignisse

### Filter in der Detailansicht

Auch in der Detailansicht der Finanzereignisse kannst du die angezeigten Einträge filtern:

| Filter | Beschreibung |
|---|---|
| Kategorie | Zeigt nur Einnahmen oder nur Ausgaben an |
| Wirtschaftsjahr | Zeigt nur Finanzereignisse eines bestimmten Geschäftsjahres an |
| Sphäre (Bereich) | Zeigt nur Finanzereignisse einer bestimmten Sphäre bzw. Kostenstelle an |

### Bearbeitung eines Finanzereignisses in der Detailansicht

Jede Karte in der Detailansicht zeigt alle Informationen eines Finanzereignisses und bietet die Möglichkeit, es direkt zu bearbeiten. Änderungen werden beim Speichern übernommen. Die bearbeitbaren Felder umfassen:

| Feld | Typ | Beschreibung |
|---|---|---|
| Kategorie | Auswahl | Einnahme oder Ausgabe |
| Typ | Auswahl | Art des Finanzereignisses (z. B. Einnahme, Ausgabe, Sachspende, Gutschrift) |
| Bereich (Sphäre) | Auswahl | Zuordnung zur Sphäre bzw. Kostenstelle |
| Datum | Datumsfeld | Datum des Finanzereignisses |
| Rechnungsdatum | Datumsfeld | Datum der Rechnung |
| Zahlungsdatum | Datumsfeld | Datum der Zahlung |
| Lieferdatum | Datumsfeld | Datum der Leistungserbringung |
| Belegnummer | Text | Belegnummer zur eindeutigen Identifikation |
| Beschreibung | Text | Beschreibung des Finanzereignisses |
| Betrag | Zahl | Geldbetrag in Euro |
| Steuersatz | Auswahl | Steuerschlüssel (z. B. „Ohne USt./VSt.", „19 % USt.", „7 % USt.") |
| Lieferant / Kontakt | Auswahl | Zuordnung zu einem bestehenden Kontakt, einem Sammelkonto oder Anlage eines neuen Kontakts direkt aus dem Feld heraus |
| Bankvorgang | Auswahl | Zuordnung zu einem importierten Bankvorgang aus der Liste der verfügbaren Bankvorgänge |
| Beleg | Datei | Hochladen eines neuen Belegs oder Zuordnung eines bereits vorhandenen Belegs |
| Projekt | Auswahl | Zuordnung zu einem Projekt (sofern die Projektverwaltung aktiviert ist) |

Festgeschriebene Finanzereignisse können nicht bearbeitet werden. Du musst sie zuerst zurücksetzen, bevor Änderungen möglich sind.

### Positionen bei Finanzereignissen

Ein Finanzereignis kann entweder auf Gesamtebene oder auf Positionsebene bearbeitet werden:

- **Gesamtebene**: Das Finanzereignis hat einen einzigen Betrag, eine Sphäre und einen Steuersatz. Dies ist die Standardeinstellung.
- **Positionsebene**: Du kannst einzelne Positionen hinzufügen, wenn z. B. eine Rechnung mehrere Posten mit unterschiedlichen Sphären oder Steuersätzen enthält. Jede Position hat einen eigenen Betrag, eine eigene Sphäre und einen eigenen Steuersatz.

Die Summe aller Positionen muss mit dem Gesamtbetrag des Finanzereignisses übereinstimmen. Ist ein Bankvorgang zugeordnet, muss die Summe der Positionen dem Betrag des Bankvorgangs entsprechen.

### Teilbuchungen bei Finanzereignissen

Finanzereignisse unterstützen Teilbuchungen. Damit kannst du einen Bankvorgang auf mehrere separate Finanzereignisse aufteilen, wenn z. B. eine Banküberweisung mehrere verschiedene Rechnungen abdeckt.

## Aktionen auf der Seite Finanzereignisse

### Kopfzeilen-Aktionen (oben auf der Seite)

| Aktion | Beschreibung |
|---|---|
| **Finanzereignis erstellen** | Erstellt ein neues, leeres Finanzereignis. In der Detailansicht wird eine neue Karte angelegt, die du sofort befüllen kannst. In der Tabellenansicht wechselt die Ansicht zur Detailansicht, damit du das neue Finanzereignis bearbeiten kannst. |
| **Beleg hochladen** | Über ein Upload-Feld kannst du einen Beleg (z. B. eine Rechnung als PDF oder Bild) hochladen. Wenn die automatische Belegauswertung aktiviert ist, wird der Beleg automatisch ausgelesen und die erkannten Daten in ein neues Finanzereignis übernommen. Andernfalls wird ein leeres Finanzereignis mit dem Beleg erstellt. |
| **Beleg nutzen** | Zeigt eine Liste von nicht zugeordneten Belegen und mehrfach verwendbaren Belegen an. Du kannst einen dieser Belege auswählen und damit ein neues Finanzereignis erstellen, ohne den Beleg erneut hochladen zu müssen. |
| **Sachspende erfassen** | Öffnet ein Formular zur Erfassung einer Sachspende. Du gibst eine Beschreibung, den Wert und optional an, ob es sich um einen geschätzten Wert handelt. Nach dem Speichern wird ein neues Finanzereignis vom Typ „Sachspende" erstellt. |
| **Handkassenvorgang erfassen** | Erfasst eine Einzahlung in die oder eine Auszahlung aus der Handkasse. Der Auszahlungsbetrag darf das aktuelle Handkassen-Guthaben nicht überschreiten. Nach dem Speichern wird ein entsprechendes Finanzereignis erstellt und das Handkassen-Guthaben aktualisiert. Diese Aktion ist nur verfügbar, wenn die Handkasse eingerichtet ist. |
| **Umbuchung erstellen** | Erstellt eine interne Umbuchung zwischen zwei verbundenen Bankkonten. Du wählst zwei Bankvorgänge aus – einen als Ausgabe und einen als Einnahme. Beide müssen den gleichen Betrag haben. Nach dem Erstellen werden beide Bankvorgänge als Umbuchung verknüpft. |

### Aktionen pro Finanzereignis (auf der Karte)

| Aktion | Beschreibung |
|---|---|
| **Buchung festschreiben** | Schreibt das Finanzereignis fest. Danach kann es nicht mehr bearbeitet oder gelöscht werden. Diese Aktion dient der Buchhaltungssicherheit und verhindert nachträgliche Änderungen an abgeschlossenen Buchungen. |
| **Buchung zurücksetzen** | Setzt ein zuvor festgeschriebenes Finanzereignis zurück, sodass es wieder bearbeitbar wird. Diese Aktion ist nur bei festgeschriebenen Buchungen verfügbar. |
| **Buchung stornieren** | Erstellt automatisch eine Stornobuchung, die das Finanzereignis betragsmäßig aufhebt. Die Beschreibung der Stornobuchung wird automatisch mit „Stornierung" und der ursprünglichen Beschreibung befüllt. Das ursprüngliche Finanzereignis bleibt bestehen, wird aber durch die Gegenbuchung neutralisiert. Diese Aktion ist nur bei festgeschriebenen Buchungen verfügbar. |
| **Finanzereignis löschen** | Löscht das Finanzereignis. Beim Löschen wirst du gefragt, ob der zugehörige Beleg ebenfalls gelöscht oder beibehalten werden soll. Mehrfach verwendbare Belege werden dabei nicht gelöscht. Bei PayPal-Gebühren wirst du zusätzlich gefragt, ob die zugehörige Gebühren-Buchung ebenfalls gelöscht werden soll. Festgeschriebene Finanzereignisse können nicht gelöscht werden. |
| **Zugehörigen Beleg anzeigen** | Öffnet eine Vorschau des zugeordneten Belegs. Diese Aktion ist nur verfügbar, wenn dem Finanzereignis ein Beleg zugeordnet ist. |

### Tabellenaktionen bei Finanzereignissen

In der Tabellenansicht der Finanzereignisse stehen zusätzlich folgende Aktionen zur Verfügung:

- **Zeilen-Aktionen**: Über ein Menü am Ende jeder Zeile kannst du das Finanzereignis anzeigen, bearbeiten oder löschen.
- **Massenaktionen (Bulk)**: Du kannst mehrere Finanzereignisse gleichzeitig auswählen und gesammelt löschen.

## Beleg-Verarbeitung bei Finanzereignissen

Wenn du einen Beleg hochlädst und die automatische Belegauswertung (Mindee) in den Einstellungen unter „Externe Dienste" aktiviert ist, wird der Beleg automatisch ausgelesen. Während der Auswertung wird in der Detailansicht eine Karte mit dem Hinweis „Beleg wird ausgewertet..." angezeigt. Nach Abschluss der Auswertung wird ein neues Finanzereignis mit den erkannten Daten (Betrag, Datum, Beschreibung, Lieferant etc.) erstellt. Du solltest die erkannten Daten anschließend prüfen und gegebenenfalls korrigieren.

Falls die automatische Belegauswertung nicht aktiviert ist, wird beim Hochladen eines Belegs ein Hinweis angezeigt, der die Aktivierung von Mindee in den Einstellungen unter „Externe Dienste" empfiehlt. Der Beleg wird trotzdem hochgeladen und dem Finanzereignis zugeordnet, die Felder müssen aber manuell ausgefüllt werden.

### Duplikat-Erkennung bei Belegen

Beim Hochladen eines Belegs zu einem Finanzereignis wird geprüft, ob ein identischer Beleg bereits im System existiert. Je nach Status des vorhandenen Belegs erscheint eine entsprechende Meldung:

- **Mehrfach verwendbarer Beleg**: Der Beleg ist als mehrfach verwendbar markiert. Es wird empfohlen, stattdessen die Funktion „Beleg nutzen" zu verwenden.
- **Noch nicht verwendeter Beleg**: Der Beleg existiert bereits im System, ist aber noch keinem Finanzereignis zugeordnet. Du kannst ihn über „Beleg nutzen" zuordnen.
- **Bereits verwendeter Beleg**: Der Beleg wird bereits in einem anderen Finanzereignis verwendet. Ein Link zum betreffenden Finanzereignis wird angezeigt, damit du prüfen kannst, ob eine Doppelbuchung vorliegt.

## Validierung und Fehlermeldungen bei Finanzereignissen

| Fehlermeldung | Ursache | Lösung |
|---|---|---|
| „Bitte den Bankvorgang auswählen." | Es wurde kein Bankvorgang zugeordnet, obwohl einer erwartet wird. | Wähle einen Bankvorgang aus den importierten Transaktionen unter „Finanzen → Bankvorgänge" aus. |
| „Der Bankvorgang wurde bereits zugeordnet." | Der ausgewählte Bankvorgang ist bereits einem anderen Finanzereignis zugeordnet. | Wähle einen anderen, noch nicht zugeordneten Bankvorgang aus oder bearbeite das Finanzereignis, dem der Bankvorgang bereits zugeordnet ist. |
| „Der Betrag des Finanzereignisses stimmt nicht mit dem Betrag der Transaktion überein." | Bei der Buchung auf Gesamtebene weicht der eingegebene Betrag vom Betrag des zugeordneten Bankvorgangs ab. | Korrigiere den Betrag, sodass er mit dem Betrag des Bankvorgangs übereinstimmt, oder verwende Teilbuchungen, wenn der Bankvorgang mehrere Buchungen abdeckt. |
| „Die Summe der Beträge der Positionen stimmt nicht mit dem Betrag der Transaktion überein." | Bei der Buchung auf Positionsebene stimmt die Summe der Einzelpositionen nicht mit dem Gesamtbetrag des zugeordneten Bankvorgangs überein. | Passe die Beträge der einzelnen Positionen an, sodass ihre Summe dem Betrag des Bankvorgangs entspricht. |
| „Einer Spende muss immer ein Kontakt zugeordnet sein." | Ein Finanzereignis vom Typ „Spende" wurde ohne Kontaktzuordnung gespeichert. | Ordne dem Finanzereignis einen Kontakt (Spender) zu. Du kannst einen bestehenden Kontakt auswählen oder direkt einen neuen anlegen. |
| „Die Beträge der beiden ausgewählten Bankvorgänge stimmen nicht überein." | Bei einer Umbuchung wurden zwei Bankvorgänge mit unterschiedlichen Beträgen ausgewählt. | Wähle zwei Bankvorgänge aus, deren Beträge identisch sind (einer als Einnahme, einer als Ausgabe). |
| „Der Betrag überschreitet das aktuelle Guthaben von [Betrag]." | Bei einem Handkassenvorgang (Auszahlung) wurde ein Betrag eingegeben, der höher ist als das aktuelle Handkassen-Guthaben. | Gib einen Betrag ein, der das angezeigte Guthaben nicht übersteigt, oder zahle zunächst Geld in die Handkasse ein. |

### Hinweise zur Belegzuordnung bei Finanzereignissen

Wenn die automatische Beleganalyse einen Betrag auf dem Beleg erkennt, der nicht mit dem Betrag des zugeordneten Bankvorgangs übereinstimmt, erscheint ein Warnhinweis „Falsche Beleg-Zuordnung?". In diesem Fall solltest du prüfen, ob der richtige Bankvorgang zugeordnet wurde, oder ob der erkannte Betrag korrekt ist.

## Beziehungen der Finanzereignisse zu anderen Bereichen

- **Belege**: Finanzereignisse können mit hochgeladenen Belegen (z. B. Rechnungen, Quittungen) verknüpft werden. Alle Belege werden zentral unter „Finanzen → Belege" verwaltet. Ein Beleg kann entweder genau einem Finanzereignis zugeordnet sein oder als mehrfach verwendbarer Beleg mehreren Finanzereignissen zugewiesen werden.
- **Bankvorgänge**: Finanzereignisse können Bankvorgängen zugeordnet werden, die zuvor unter „Finanzen → Bankvorgänge" importiert wurden. Ein Bankvorgang kann in der Regel nur einem Finanzereignis zugeordnet werden (Ausnahme: Teilbuchungen).
- **Kontakte**: Finanzereignisse können einem Kontakt (Lieferant, Spender oder Sammelkonto) zugeordnet werden. Bei Spenden ist die Zuordnung eines Kontakts verpflichtend.
- **Projekte**: Finanzereignisse können einem Projekt zugeordnet werden, um projektbezogene Finanzen nachzuverfolgen (sofern die Projektverwaltung aktiviert ist).
- **Anlagenverwaltung**: Wenn ein Finanzereignis auf ein Anlagekonto gebucht wird, kann direkt aus dem Finanzereignis heraus ein Anlagegut erfasst werden. Bei geringwertigen Wirtschaftsgütern (GWG) wird automatisch eine Sofortabschreibung vorgeschlagen. Bei Beträgen im mittleren Bereich wird eine Sammelposten-Abschreibung über 5 Jahre vorgeschlagen.
- **Handkasse**: Handkassenvorgänge werden über die Handkassen-Funktion innerhalb der Finanzereignisse erfasst. Einzahlungen erhöhen das Handkassen-Guthaben, Auszahlungen verringern es.
- **Bankkonten**: Umbuchungen verknüpfen jeweils zwei Bankvorgänge von verschiedenen verbundenen Bankkonten miteinander.
- **PayPal-Gebühren**: Bei PayPal-Transaktionen können zugehörige Gebühren automatisch als separates Finanzereignis (Ausgabe) erfasst werden. Beim Löschen des Haupt-Finanzereignisses wirst du gefragt, ob die Gebühren-Buchung ebenfalls gelöscht werden soll.

## Tutorial für Finanzereignisse

Für den Einstieg in die Arbeit mit Finanzereignissen steht ein interaktives Tutorial zur Verfügung. Das Tutorial führt dich Schritt für Schritt durch die wichtigsten Funktionen. Du kannst das Tutorial direkt auf der Seite „Finanzereignisse" starten.

---

## standalone_page: Dashboard

**Entity:** Dashboard  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/Dashboard.php`  
**Updated:** 2026-02-14 19:53:49  

# Dashboard

## Übersicht

Das Dashboard ist die Startseite, die dir nach dem Login bei NGO.Tools angezeigt wird.

## Navigation zum Dashboard

Das Dashboard wird automatisch nach dem Login angezeigt. Es ist nicht über die Hauptnavigation erreichbar, da die Navigation für das Dashboard deaktiviert ist.

## Willkommens-Dialog

Beim allerersten Besuch des Dashboards wird dir ein Willkommens-Dialog mit dem Titel **„Willkommen bei NGO.Tools!"** angezeigt. Dieser Dialog erscheint nur einmalig und wird bei späteren Besuchen nicht mehr eingeblendet.

Der Willkommens-Dialog enthält folgende Hinweise:

- **Lesezeichen**: Dies ist deine persönliche NGO.Tools-Umgebung. Es wird empfohlen, die Seite als Lesezeichen zu speichern (Strg + D bzw. Cmd + D).
- **Benutzermenü**: Oben rechts findest du dein Benutzermenü, erreichbar über einen Klick auf deine Initialen. Dort kannst du alle Einstellungen vornehmen und Tools aktivieren.
- **Hauptnavigation**: Die aktivierten Tools findest du in der Navigation am oberen Bildschirmrand.
- **Tools aktivieren**: Wenn du noch keine Tools aktiviert hast, ist die Navigation leer. Es wird empfohlen, im Benutzermenü auf **„Toolbox"** zu klicken, um Tools zu aktivieren. Falls bei der Ersteinrichtung bereits Tools aktiviert wurden, werden diese im Dialog aufgelistet – einschließlich automatisch aktivierter Abhängigkeiten.
- **Hilfe**: Über den Hilfe-Button rechts oben erreichst du jederzeit die Dokumentation zur aktuellen Seite.
- **Support**: Über die Sprechblase unten rechts kannst du jederzeit den Support kontaktieren.

Du schließt den Willkommens-Dialog über den **„OK"**-Button. Zusätzlich steht ein Button **„English, please!"** zur Verfügung, um die Sprache zu wechseln.

## Automatische Weiterleitung zur Projektübersicht

Wenn du keinen Zugriff auf alle Projekte hast und dir genau ein Projekt zugeordnet ist, wirst du beim Aufrufen des Dashboards automatisch zur Übersicht dieses Projekts weitergeleitet. Das Tool **Projekte** muss dafür aktiviert sein. Hast du Zugriff auf mehrere Projekte oder auf alle Projekte, bleibst du auf dem Dashboard.

## Beziehungen zu anderen Bereichen

- **Projekte**: Wenn das Tool „Projekte" aktiviert ist und dir genau ein Projekt zugeordnet wurde, leitet dich das Dashboard automatisch zur Übersicht dieses Projekts weiter.

---

## standalone_page: Billing

**Entity:** Billing  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/Billing.php`  
**Updated:** 2026-02-14 19:42:55  

# Abrechnung

## Übersicht

Auf der Seite „Abrechnung" kannst du als Organisations-Administrator alle aktivierten oder kürzlich gekündigten Tools (Marketplace-Apps) mit ihren Kosten und ihrem Status einsehen. Hier lassen sich einzelne Tools kündigen, reaktivieren oder alle gleichzeitig kündigen. Außerdem kannst du die Zahlungseinstellungen (Bankverbindung, SEPA-Mandat, Rechnungsadresse, E-Mail-Adresse) konfigurieren.

**Berechtigung:** Die Seite „Abrechnung" ist ausschließlich für Organisations-Administratoren zugänglich.

## Navigation

Die Seite „Abrechnung" ist nicht in der Seitenleiste sichtbar. Du erreichst sie über andere Bereiche der Anwendung, z. B. über die Toolbox oder die Kontoeinstellungen.

## Zahlungseinstellungen

Über die Schaltfläche **„Zahlungseinstellungen"** in der Kopfzeile der Abrechnungsseite öffnet sich ein Dialogfenster mit vier Bereichen. Änderungen werden erst gespeichert, wenn du das Dialogfenster bestätigst.

### Bankverbindung

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Bankverbindung aus Einstellungen nutzen | Checkbox | Nein | Wenn aktiviert, wird die IBAN aus den allgemeinen Organisationseinstellungen übernommen. Die manuelle IBAN-Eingabe wird ausgeblendet. |
| IBAN | Textfeld | Ja (wenn obige Checkbox deaktiviert) | Eigene IBAN für die Abrechnung. Wird auf gültiges IBAN-Format geprüft. Nur sichtbar, wenn die Checkbox „Bankverbindung aus Einstellungen nutzen" nicht aktiviert ist. |

### SEPA-Mandat

Im Bereich „SEPA-Mandat" der Zahlungseinstellungen findest du Informationen zur SEPA-Lastschriftermächtigung:

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Erläuterungstext | Hinweis | – | Beschreibt die SEPA-Lastschriftermächtigung zugunsten der Help NGO gGmbH mit Angabe der Gläubiger-ID. Enthält auch den Hinweis zum 8-Wochen-Erstattungsrecht. |
| Ich erteile das SEPA-Lastschriftmandat | Checkbox | Nein | Erteilt die Einzugsermächtigung per SEPA-Lastschrift. |
| Download des aktuellen SEPA-Mandats | Link | – | Nur sichtbar, wenn bereits ein aktives SEPA-Mandat vorliegt. Ermöglicht den Download des Mandats als Datei. |

**Wichtig:** Wenn du die Bankverbindung (IBAN) änderst, wird ein bereits erteiltes SEPA-Mandat automatisch zurückgesetzt und muss neu bestätigt werden. Es erscheint ein Warnhinweis: *„Wenn die Bankverbindung geändert wird, muss das SEPA Mandat neu bestätigt werden."*

### Rechnungsadresse

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Adresse aus Einstellungen nutzen | Checkbox | Nein | Wenn aktiviert, wird die Adresse aus den allgemeinen Organisationseinstellungen übernommen (formaler Name, Adresszeilen, PLZ, Ort). Die manuelle Eingabe wird ausgeblendet. |
| Rechnungsadresse | Textbereich | Ja (wenn obige Checkbox deaktiviert) | Eigene Rechnungsadresse für Rechnungen. Nur sichtbar, wenn die Checkbox „Adresse aus Einstellungen nutzen" nicht aktiviert ist. |

### E-Mail-Adresse

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| E-Mail-Adresse aus Einstellungen nutzen | Checkbox | Nein | Wenn aktiviert, wird die E-Mail-Adresse aus den allgemeinen Organisationseinstellungen übernommen. Die manuelle Eingabe wird ausgeblendet. |
| E-Mail-Adresse | Textfeld | Ja (wenn obige Checkbox deaktiviert) | Eigene E-Mail-Adresse für den Rechnungsversand. Muss ein gültiges E-Mail-Format haben. Nur sichtbar, wenn die Checkbox „E-Mail-Adresse aus Einstellungen nutzen" nicht aktiviert ist. |

## Tabellenansicht der aktivierten Tools

Die Tabelle auf der Abrechnungsseite zeigt alle derzeit aktivierten oder kürzlich gekündigten Tools an.

| Spalte | Beschreibung |
|--------|--------------|
| Tool | Name des Tools (Marketplace-App) |
| Kosten (netto) | Aktuelle Kosten des Tools. Zeigt „Kostenlos" an, wenn keine Kosten anfallen. |
| Status | Aktueller Status des Tools. Mögliche Werte: „aktiv", „Probezeit bis [Datum]", „Gekündigt zum [Datum]", „Verfügbar bis [Datum]", „Deaktiviert am [Datum]" |
| Aktiv seit | Datum, seit dem das Tool aktiviert ist |

Die Tabelle ist nicht paginiert – alle Einträge werden auf einer Seite angezeigt.

## Aktionen pro Tool

Je nach Status des Tools wird in der Tabelle der Abrechnungsseite genau eine der folgenden Aktionen angezeigt:

### Kündigen (Probezeit)

- **Wann sichtbar:** Das Tool befindet sich in der kostenlosen Probezeit und wurde noch nicht gekündigt.
- **Was passiert:** Der kostenlose Probezeitraum läuft bis zum angegebenen Datum weiter. Danach steht das Tool nicht mehr zur Verfügung. Es werden keine Kosten berechnet (bei Tools ohne Einmalkosten). Bei Tools mit Einmalkosten werden die Einmalkosten in Rechnung gestellt, weitere Kosten jedoch nicht. Es erscheint ein Hinweis, dass die Testphase über den Support verlängert werden kann.
- **Bestätigung:** Ein Dialogfenster fragt dich vor der Kündigung um Bestätigung.

### Reaktivieren (nach Kündigung in Probezeit)

- **Wann sichtbar:** Das Tool wurde während der Probezeit gekündigt.
- **Was passiert:** Die Kündigung wird zurückgenommen. Der Probezeitraum läuft weiter, danach wird die Nutzung kostenpflichtig. Die Abrechnung erfolgt monatlich im Voraus.

### Kündigen (aktives Abo)

- **Wann sichtbar:** Das Tool ist aktiv, kostenpflichtig und nicht in der Probezeit.
- **Was passiert:** Das Tool kann noch bis zum Ende des bereits bezahlten Zeitraums genutzt werden. Weitere Kosten entstehen nach der Kündigung nicht mehr.
- **Bestätigung:** Ein Dialogfenster fragt dich vor der Kündigung um Bestätigung.

### Reaktivieren (gekündigtes Abo)

- **Wann sichtbar:** Das Tool wurde gekündigt und befindet sich noch in der Restlaufzeit des bezahlten Zeitraums.
- **Was passiert:** Die Kündigung wird zurückgenommen. Die Nutzung wird wie gewohnt am Monatsanfang in Rechnung gestellt.

### Deaktivieren (kostenloses Tool)

- **Wann sichtbar:** Das Tool ist kostenlos und derzeit aktiv.
- **Was passiert:** Das Tool wird sofort deaktiviert und kann nicht mehr genutzt werden. Es kann jederzeit wieder aktiviert werden.
- **Bestätigung:** Ein Dialogfenster fragt dich vor der Deaktivierung um Bestätigung.

### Reaktivieren (kostenloses Tool)

- **Wann sichtbar:** Das Tool ist kostenlos und derzeit deaktiviert.
- **Was passiert:** Das Tool wird sofort wieder aktiviert und kann unmittelbar genutzt werden.

### Einschränkungen bei Aktionen

- **Abhängige Tools verhindern Deaktivierung/Kündigung:** Ein Tool kann nicht deaktiviert oder gekündigt werden, wenn andere aktivierte Tools davon abhängen. Es erscheint der Hinweis: *„Dieses Tool kann nicht deaktiviert werden, da folgende aktivierte Tools davon abhängen: [Tool-Namen]"*. Lösung: Deaktiviere oder kündige zuerst die abhängigen Tools.
- **Fehlende Abhängigkeit verhindert Reaktivierung:** Ein Tool kann nicht reaktiviert werden, wenn es von einem anderen Tool abhängt, das noch nicht aktiviert ist. Es erscheint der Hinweis: *„Dieses Tool hängt vom folgenden Tool ab, das zuerst aktiviert werden muss: [Tool-Namen]"*. Lösung: Aktiviere zuerst das benötigte Tool über die Toolbox.

## Alle Tools kündigen

Über die Schaltfläche **„Alle Tools kündigen"** (bzw. **„Alle Tools kündigen / Testphase beenden"**, wenn sich mindestens ein Tool in der Probezeit befindet) kannst du auf der Abrechnungsseite alle aktivierten Tools auf einmal kündigen:

- Kostenlose Tools werden sofort deaktiviert.
- Kostenpflichtige Tools werden zum Ende des bereits bezahlten Zeitraums gekündigt.
- Die Tools stehen noch bis zum Ende des Testzeitraums bzw. bis zum Ende des bereits gezahlten Zeitraums zur Verfügung.
- Noch nicht bezahlte Zeiträume außerhalb der Testphase werden im nächsten Monat in Rechnung gestellt.

Ein Dialogfenster fragt dich vor der Kündigung aller Tools um Bestätigung.

## Umfrage nach Kündigung

Nach einer Kündigung oder Deaktivierung eines Tools wird auf der Abrechnungsseite automatisch eine Umfrage angezeigt, um Feedback zum Grund der Kündigung zu erfassen. Die Teilnahme ist freiwillig. Die Umfrage wird nicht in der Demo-Umgebung angezeigt.

## Berechtigungen

Die Seite „Abrechnung" ist ausschließlich für **Organisations-Administratoren** zugänglich. Benutzer ohne Administratorrechte können die Seite nicht aufrufen und sehen keinen Zugang dazu.

## Validierung

Bei den Zahlungseinstellungen auf der Abrechnungsseite gelten folgende Validierungsregeln:

| Feld | Regel |
|------|-------|
| IBAN | Pflichtfeld, gültiges IBAN-Format (wenn nicht aus Einstellungen übernommen) |
| Rechnungsadresse | Pflichtfeld (wenn nicht aus Einstellungen übernommen) |
| E-Mail-Adresse | Pflichtfeld, gültiges E-Mail-Format (wenn nicht aus Einstellungen übernommen) |

## Beziehungen zu anderen Bereichen

- **Toolbox (Marketplace):** Die in der Tabelle der Abrechnungsseite angezeigten Tools stammen aus der Toolbox. Dort kannst du neue Tools aktivieren, die dann hier in der Abrechnung erscheinen.
- **Allgemeine Organisationseinstellungen:** Bankverbindung, Adresse und E-Mail-Adresse können aus den allgemeinen Organisationseinstellungen übernommen werden, sodass du sie nicht doppelt pflegen musst.

---

## standalone_page: DonationAccounting

**Entity:** DonationAccounting  
**Type:** auto_generated  
**Version:** 3  
**File:** `app/Filament/App/Pages/DonationAccounting.php`  
**Updated:** 2026-02-14 13:20:15  

## Übersicht

Die Spendenerfassung ist eine Seite, auf der eingehende Bankvorgänge (Überweisungen) als Spenden verbucht werden können. Dabei wird jede Transaktion einem Kontakt (Spender/in) und – sofern das Tool **Projekte** aktiviert ist – einem Projekt zugeordnet und als Spende im System erfasst. Die Transaktionen werden der Reihe nach angezeigt und können einzeln bestätigt, übersprungen oder als „Keine Spende" markiert werden.

## Navigation

- Wenn das Tool **Spendenverwaltung** aktiviert ist, befindet sich die Spendenerfassung in der Menügruppe **Spendenverwaltung**.
- Wenn das Tool **Spendenverwaltung** nicht aktiviert ist, aber das Tool **Buchhaltung** aktiviert ist, wird die Spendenerfassung in der Menügruppe **Finanzen** angezeigt.
- Der Menüeintrag heißt **Spendenerfassung**.

## Voraussetzungen

Um die Spendenerfassung nutzen zu können, müssen folgende Bedingungen erfüllt sein:

- Das Tool **Buchhaltung** muss aktiviert sein.
- Du benötigst die Berechtigung **Bearbeiten** für das Tool **Buchhaltung** oder **Buchhaltung (erweitert)**.
- Du benötigst die Berechtigung **Bearbeiten** für das Tool **Kontakte**.
- Du musst Zugriff auf alle Projekte haben.
- Es müssen bereits Bankvorgänge importiert worden sein.

Wenn noch keine Bankvorgänge vorhanden sind, zeigt die Spendenerfassung folgenden Hinweis an: *„Es sind noch keine Bankvorgänge vorhanden. Importiere zuerst Bankvorgänge, damit du danach Spenden buchen kannst."* In diesem Fall können keine Spenden erfasst werden.

## Seitenaufbau

### Überschrift und Sortierung

Die Seitenüberschrift zeigt **Spendenerfassung** sowie die Anzahl der noch offenen Transaktionen an (z. B. „Spendenerfassung (noch 12)"). Wenn alle Transaktionen abgearbeitet sind, erscheint stattdessen „Spendenerfassung (alles erledigt)".

Oben rechts befinden sich zwei Sortier-Schaltflächen:

- **Neueste zuerst** – zeigt die neuesten Bankvorgänge zuerst.
- **Älteste zuerst** – zeigt die ältesten Bankvorgänge zuerst. Dies ist die Standardeinstellung.

Die gewählte Sortierung beeinflusst, in welcher Reihenfolge die Transaktionen zur Bearbeitung angezeigt werden.

### Transaktionsanzeige

In der Spendenerfassung wird die aktuelle Transaktion hervorgehoben dargestellt. Darunter werden bis zu 4 weitere Transaktionen abgeblendet als Vorschau angezeigt, damit du siehst, welche Transaktionen als Nächstes kommen.

Für jede Transaktion werden in der Spendenerfassung folgende Informationen angezeigt:

- **Buchungsdatum** – das Datum der Überweisung.
- **Betrag** – der Überweisungsbetrag, grün hervorgehoben und mit Währungsangabe.
- **Name** – der Name des Auftraggebers (Absender der Überweisung).
- **Überweisungstext** – der Verwendungszweck der Überweisung.
- **Typ** – der Typ der Transaktion, sofern vorhanden.
- **Konto** – das Bankkonto, auf dem die Überweisung eingegangen ist. Dieses Feld ist nur sichtbar, wenn mehr als ein Bankkonto verbunden ist.

### Aktionsschaltflächen pro Transaktion

Bei der aktuellen Transaktion in der Spendenerfassung stehen zwei Schaltflächen zur Verfügung:

- **Keine Spende** – Markiert den Vorgang als „Keine Spende". Die Transaktion wird damit aus der Spendenerfassung entfernt und taucht nicht mehr auf. Nach dem Klick erscheint ein Hinweis mit einem Link, über den du den Vorgang direkt als Finanzereignis buchen kannst (z. B. für Ausgaben oder sonstige Einnahmen).
- **Erstmal überspringen** – Überspringt die aktuelle Transaktion vorübergehend. Sie wird bei der nächsten Sitzung bzw. beim nächsten Aufruf der Spendenerfassung erneut angezeigt. Dies ist nützlich, wenn du dir bei einer Transaktion unsicher bist und sie später bearbeiten möchtest.

### Spender/in zuordnen

In der Spendenerfassung gibt es ein Auswahlfeld zur Zuordnung eines bestehenden Kontakts als Spender/in. Die Kontakte werden nach Ähnlichkeit zum Absender der Überweisung sortiert – der wahrscheinlichste Treffer wird automatisch vorausgewählt.

Wenn der Kontakt eindeutig über eine bereits bekannte Kontoverbindung (IBAN) identifiziert werden konnte, erscheint der Hinweis: *„Der Kontakt ist bereits bekannt und konnte eindeutig zugeordnet werden."* Das Auswahlfeld wird in diesem Fall gesperrt, da die Zuordnung bereits feststeht.

Weitere Optionen:

- **Neu...** – Über diese Schaltfläche kannst du direkt aus der Spendenerfassung einen neuen Kontakt anlegen (siehe Abschnitt „Neuen Kontakt anlegen").
- **Kontakt bearbeiten** – Ein Link, der dich zum gewählten Kontakt in der Kontaktverwaltung führt, um dort weitere Änderungen vorzunehmen.
- **Adresse aus Überweisung auslesen** – Dieser Link erscheint nur, wenn der ausgewählte Kontakt noch keine Adresse hinterlegt hat. Über diesen Link kannst du eine Adresse aus den Überweisungsdaten übernehmen (siehe Abschnitt „Adresse aus Überweisung auslesen").

### Projekt zuordnen

Das Feld **Projekt** in der Spendenerfassung ist nur sichtbar, wenn das Tool **Projekte** aktiviert ist. Es zeigt eine durchsuchbare Auswahl der für Spenden vorgesehenen Projekte an. Das System versucht, das passende Projekt anhand des Überweisungstexts automatisch vorzuschlagen.

Über den Link **Neues Projekt** kannst du direkt aus der Spendenerfassung ein neues Projekt anlegen.

Wenn das Tool **Projekte** nicht aktiviert ist, entfällt dieses Feld.

### Optionen vor der Bestätigung

Bevor du eine Spende in der Spendenerfassung bestätigst, stehen dir zwei Optionen zur Verfügung:

- **mit Spendenbescheinigung** – Diese Checkbox ist standardmäßig aktiviert. Sie legt fest, ob für diese Spende später eine Spendenbescheinigung erstellt werden kann. Hinweis: Spendenbescheinigungen werden nicht automatisch erstellt, sondern können bei Bedarf in der Spendenverwaltung generiert werden.
- **Mitgliedsbeitrag** – Diese Checkbox ist standardmäßig nicht aktiviert. Wenn du sie aktivierst, wird die Zuwendung als Mitgliedsbeitrag statt als reguläre Spende erfasst.

### Bestätigen

Die Schaltfläche **Bestätigen** bucht die aktuelle Transaktion als Spende in der Spendenerfassung. Dazu müssen mindestens ein Kontakt als Spender/in und – sofern das Tool **Projekte** aktiviert ist – ein Projekt ausgewählt sein.

Bei erfolgreicher Verbuchung geschieht Folgendes:

- Es erscheint die Meldung: *„Die Spende wurde erfolgreich erfasst."*
- Die Spende wird als Finanzereignis im System gespeichert.
- Die nächste offene Transaktion wird automatisch geladen.
- Die Anzahl der noch offenen Transaktionen in der Überschrift wird aktualisiert.

## Neuen Kontakt anlegen

Über die Schaltfläche **Neu...** in der Spendenerfassung öffnet sich ein Dialogfenster mit der Überschrift **Neuen Kontakt anlegen**. Im Dialog werden der Name und der Überweisungstext der aktuellen Transaktion als Referenz angezeigt, damit du die Daten des neuen Kontakts leichter zuordnen kannst.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Typ | Auswahl | Ja | Auswahl zwischen „Person", „Ehepaar" oder „Organisation" |
| Vorname | Textfeld | Nein | Nur sichtbar bei Typ „Person" oder „Ehepaar" |
| Nachname | Textfeld | Nein | Nur sichtbar bei Typ „Person" oder „Ehepaar" |
| Vorname (Person 2) | Textfeld | Nein | Nur sichtbar bei Typ „Ehepaar" |
| Nachname (Person 2) | Textfeld | Nein | Nur sichtbar bei Typ „Ehepaar" |
| Name | Textfeld | Nein | Nur sichtbar bei Typ „Organisation" |
| E-Mail-Adresse | Textfeld | Nein | E-Mail-Adresse des neuen Kontakts |
| Straße | Textfeld | Nein | Adresszeile 1 |
| Adresszeile 2 | Textfeld | Nein | Zusätzliche Adressangabe |
| PLZ | Textfeld | Nein | Postleitzahl |
| Stadt | Textfeld | Nein | Stadt |
| Bundesland | Textfeld | Nein | Bundesland |
| Land | Auswahl | Nein | Länderauswahl, Standardwert: Deutschland |

Wenn der KI-Dienst für Namenserkennung aktiviert ist, werden die Felder (z. B. Vorname, Nachname, Typ) automatisch anhand des Überweisungsabsenders vorausgefüllt. Du kannst die vorausgefüllten Werte bei Bedarf anpassen.

Nach dem Anlegen des Kontakts wird dieser automatisch als Spender/in für die aktuelle Transaktion in der Spendenerfassung ausgewählt.

## Adresse aus Überweisung auslesen

Über den Link **Adresse aus Überweisung auslesen** in der Spendenerfassung öffnet sich ein Dialog, in dem Adressdaten aus dem Überweisungstext für den bereits ausgewählten Kontakt übernommen werden können. Dieser Link ist nur sichtbar, wenn der ausgewählte Kontakt noch keine Adresse hinterlegt hat.

| Feld | Typ | Pflicht | Beschreibung |
|------|-----|---------|--------------|
| Straße | Textfeld | Nein | Adresszeile 1 |
| Adresszeile 2 | Textfeld | Nein | Zusätzliche Adressangabe |
| PLZ | Textfeld | Nein | Postleitzahl |
| Stadt | Textfeld | Nein | Stadt |
| Bundesland | Textfeld | Nein | Bundesland |
| Land | Auswahl | Nein | Länderauswahl, Standardwert: Deutschland |

Die Felder können aus den Überweisungsdaten vorausgefüllt sein. Nach dem Speichern wird die Adresse dem ausgewählten Kontakt zugeordnet.

## Validierung und Fehlermeldungen

Die folgenden Fehlermeldungen können in der Spendenerfassung auftreten:

| Fehlermeldung | Ursache | Lösung |
|---------------|---------|--------|
| *Spender/in muss ausgefüllt werden* | Es wurde kein Kontakt als Spender/in ausgewählt. | Wähle einen bestehenden Kontakt aus oder lege über „Neu..." einen neuen Kontakt an. |
| *Projekt muss ausgefüllt werden* | Es wurde kein Projekt ausgewählt. Dieser Fehler tritt nur auf, wenn das Tool **Projekte** aktiviert ist. | Wähle ein Projekt aus der Liste aus oder lege über „Neues Projekt" ein neues an. |
| *Spender/in konnte nicht gefunden werden. Bitte versuche es erneut.* | Der zuvor ausgewählte Kontakt wurde zwischenzeitlich gelöscht oder ist nicht mehr verfügbar. | Wähle einen anderen Kontakt aus oder lege über „Neu..." einen neuen Kontakt an. |
| *Diese Transaktion wurde bereits erfasst.* | Die Transaktion wurde bereits als Spende verbucht, z. B. weil sie in einer anderen Sitzung bearbeitet wurde. | Es erfolgt eine automatische Weiterleitung zum zugehörigen Finanzereignis. Du musst nichts weiter tun. |
| *Ein Fehler ist aufgetreten. Bitte versuche es erneut.* | Ein allgemeiner Systemfehler ist aufgetreten. | Versuche die Aktion erneut. Wenn der Fehler wiederholt auftritt, wende dich an den Support. |

## Beziehungen zu anderen Bereichen

Die Spendenerfassung steht in Verbindung mit folgenden Bereichen der Plattform:

- **Kontakte**: Jede Spende in der Spendenerfassung wird einem Kontakt als Spender/in zugeordnet. Neue Kontakte können direkt aus der Spendenerfassung angelegt werden.
- **Projekte**: Jede Spende wird einem Projekt zugeordnet, sofern das Tool **Projekte** aktiviert ist. Neue Projekte können direkt aus der Spendenerfassung angelegt werden.
- **Bankvorgänge**: Die Spendenerfassung arbeitet die importierten Bankvorgänge (Transaktionen aus verbundenen Bankkonten) ab. Ohne importierte Bankvorgänge kann die Spendenerfassung nicht genutzt werden.
- **Finanzereignisse**: Jede bestätigte Spende wird als Finanzereignis im System erfasst. Transaktionen, die als „Keine Spende" markiert werden, können ebenfalls als Finanzereignis gebucht werden.
- **Spendenbescheinigungen**: Über die Option „mit Spendenbescheinigung" in der Spendenerfassung wird festgelegt, ob später in der Spendenverwaltung eine Bescheinigung für diese Spende generiert werden kann.

---

## standalone_page: DonationAccounting

**Entity:** DonationAccounting  
**Type:** auto_generated  
**Version:** 2  
**File:** `app/Filament/App/Pages/DonationAccounting.php`  
**Updated:** 2026-02-13 18:30:33  

# Spendenerfassung

## Übersicht
Auf dieser Seite können eingehende Bankvorgänge als Spenden verbucht werden. Jeder Bankvorgang wird einzeln angezeigt und kann einem Kontakt (Spender/in) und einem Projekt zugeordnet werden. Nach der Zuordnung wird die Spende als Finanzereignis erfasst.

Die Seite befindet sich im Bereich **Spendenverwaltung** (wenn das Tool Spendenverwaltung aktiviert ist) oder im Bereich **Finanzen** (wenn nur das Tool Buchhaltung aktiviert ist).

## Navigation
- Die Seite ist in der Seitenleiste unter der Menügruppe **Spendenverwaltung** bzw. **Finanzen** zu finden.
- Der Menüeintrag heißt **Spendenerfassung**.

## Funktionsweise

Die Seite zeigt nacheinander offene Bankvorgänge (Einnahmen) an, die noch nicht als Spende verbucht wurden. Pro Vorgang werden folgende Informationen angezeigt:

- **Buchungsdatum** des Bankvorgangs
- **Betrag** (als grünes Badge hervorgehoben)
- **Name** des Absenders
- **Überweisungstext**
- **Konto** (nur wenn mehr als ein verknüpftes Bankkonto existiert)

In der Überschrift wird in Klammern angezeigt, wie viele Vorgänge noch offen sind (z. B. „noch 5"). Wenn alle Vorgänge erledigt sind, erscheint „alles erledigt".

Unterhalb des aktuellen Vorgangs werden bis zu 4 weitere wartende Vorgänge abgedunkelt angezeigt, um einen Überblick über kommende Einträge zu geben.

## Zuordnung von Spender/in und Projekt

### Spender/in
- Das System versucht automatisch, den passenden Kontakt anhand des Absendernamens zu erraten. Wird ein Kontakt mit hoher Übereinstimmung gefunden, wird er automatisch vorausgewählt.
- Wurde der Kontakt eindeutig über einen Identifikator (z. B. IBAN) erkannt, erscheint der Hinweis: *„Der Kontakt ist bereits bekannt und konnte eindeutig zugeordnet werden."*
- Über das Dropdown-Feld **Spender/in** kann ein anderer Kontakt ausgewählt werden. Die Kontakte sind nach Ähnlichkeit zum Absendernamen sortiert.
- Neben dem Dropdown gibt es einen Link **Kontakt bearbeiten**, der den gewählten Kontakt öffnet.

### Projekt
- Wenn das Tool Projekte aktiviert ist, wird ein Dropdown-Feld **Projekt** angezeigt, in dem ein Spendenprojekt ausgewählt werden muss. Nur Projekte, die für Spenden aktiviert sind und zum Buchungsdatum aktiv waren, werden angezeigt.
- Das System versucht automatisch, das passende Projekt zu erraten.
- Über den Link **Neues Projekt** kann direkt ein neues Projekt angelegt werden (sofern die Berechtigung vorhanden ist).

### Optionen
- **mit Spendenbescheinigung**: Checkbox, standardmäßig aktiviert. Bestimmt, ob für diese Spende später eine Spendenbescheinigung erstellt werden soll. Spendenbescheinigungen werden nicht automatisch erstellt, sondern können bei Bedarf in der Spendenverwaltung generiert werden.
- **Mitgliedsbeitrag**: Checkbox, um den Vorgang als Mitgliedsbeitrag statt als reguläre Spende zu kennzeichnen.

## Aktionen

### Bestätigen
Verbucht den Bankvorgang als Spende. Die Spende wird dem gewählten Kontakt und Projekt zugeordnet und als Finanzereignis erfasst. Es erscheint die Erfolgsmeldung *„Die Spende wurde erfolgreich erfasst"*, und der nächste offene Vorgang wird geladen.

### Keine Spende
Markiert den Bankvorgang als „Keine Spende". Der Vorgang wird aus der Spendenerfassung entfernt. Es erscheint ein Hinweis mit einem Link, um den Vorgang direkt als Finanzereignis zu buchen.

### Erstmal überspringen
Überspringt den aktuellen Bankvorgang vorübergehend. Der Vorgang wird in der aktuellen Sitzung nicht mehr angezeigt, kann aber beim nächsten Aufruf der Seite erneut bearbeitet werden.

### Neueste zuerst / Älteste zuerst
Über die beiden Buttons im Seitenkopf kann die Sortierreihenfolge der Bankvorgänge geändert werden. Standardmäßig werden die ältesten Vorgänge zuerst angezeigt.

### Neuen Kontakt anlegen
Über den Button **Neu...** neben dem Spender/in-Feld öffnet sich ein Formular zum Anlegen eines neuen Kontakts. Wenn ein KI-Dienst konfiguriert ist, werden die Kontaktdaten automatisch aus dem Absendernamen vorausgefüllt. Das Formular enthält Felder für Name, Adresse und Kontakttyp (Person, Organisation, Ehepaar).

### Adresse aus Überweisung auslesen
Wenn ein Kontakt ausgewählt ist, der noch keine Adresse hat, erscheint der Link **Adresse aus Überweisung auslesen**. Darüber kann eine Adresse aus den Überweisungsdaten extrahiert und dem Kontakt hinzugefügt werden.

## Berechtigungen
- Das Tool **Buchhaltung** muss aktiviert sein.
- Berechtigung **Bearbeiten** für das Tool **Buchhaltung** oder **Erweiterte Buchhaltung** ist erforderlich.
- Berechtigung **Bearbeiten** für das Tool **Kontakte** ist erforderlich.
- Zugriff auf alle Projekte muss gewährt sein.

## Validierung & Fehlermeldungen

| Fehlermeldung | Ursache | Lösung |
|---|---|---|
| *Spender/in muss ausgefüllt werden* | Kein Kontakt als Spender/in ausgewählt | Einen Kontakt im Dropdown auswählen oder über „Neu..." anlegen |
| *Projekt muss ausgefüllt werden* | Kein Projekt ausgewählt (nur wenn das Tool Projekte aktiv ist) | Ein Projekt im Dropdown auswählen |
| *Spender/in konnte nicht gefunden werden* | Der ausgewählte Kontakt wurde zwischenzeitlich gelöscht | Die Seite wird neu geladen; einen anderen Kontakt auswählen |
| *Diese Transaktion wurde bereits erfasst* | Der Bankvorgang wurde bereits als Spende verbucht | Es erfolgt eine automatische Weiterleitung zum zugehörigen Finanzereignis |
| *Ein Fehler ist aufgetreten* | Unerwarteter Fehler bei der Verbuchung | Vorgang erneut versuchen |

## Sonderfall: Keine Bankvorgänge vorhanden
Wenn noch keine Bankvorgänge importiert wurden, zeigt die Seite stattdessen den Hinweis: *„Es sind noch keine Bankvorgänge vorhanden. Importiere zuerst Bankvorgänge, damit du danach Spenden buchen kannst."* mit einem Link zur Verwaltung der Bankvorgänge.

## Beziehungen
- **Bankvorgänge**: Die Spendenerfassung arbeitet mit importierten Bankvorgängen (Kontoumsätzen). Diese müssen zuvor über verknüpfte Bankkonten importiert worden sein.
- **Kontakte**: Spenden werden einem Kontakt zugeordnet. Neue Kontakte können direkt aus der Spendenerfassung heraus angelegt werden.
- **Projekte**: Jede Spende wird einem Projekt zugeordnet (wenn das Tool Projekte aktiviert ist).
- **Finanzereignisse**: Jede bestätigte Spende erzeugt ein Finanzereignis in der Buchhaltung.
- **Spendenbescheinigungen**: Über die Option „mit Spendenbescheinigung" wird festgelegt, ob später eine Bescheinigung generiert werden kann.

---

## standalone_page: DonationAccounting

**Entity:** DonationAccounting  
**Type:** auto_generated  
**Version:** 1  
**File:** `app/Filament/App/Pages/DonationAccounting.php`  
**Updated:** 2026-02-13 01:59:29  

## Übersicht

Die **Spendenerfassung** ist eine eigenständige Filament-Seite (Standalone Page), die eingehende Bankvorgänge (Transaktionen mit positivem Betrag) als Spenden verbucht. Sie zeigt unbearbeitete Transaktionsposten nacheinander an und ermöglicht es, diese einem Kontakt (Spender/in) und einem Projekt zuzuordnen.

Die Seite wird in der Navigationsgruppe **Spendenverwaltung** angezeigt, sofern das Feature `donations` aktiviert ist. Andernfalls erscheint sie unter **Finanzen**.

Falls keine Bankvorgänge vorhanden sind, wird eine alternative Ansicht mit dem Hinweis angezeigt:
> „Es sind noch keine Bankvorgänge vorhanden. Importiere zuerst Bankvorgänge, damit du danach Spenden buchen kannst."

## Berechtigungen

Der Zugriff erfordert **alle** folgenden Bedingungen gleichzeitig:

- Feature `accounting` ist aktiviert
- Berechtigung `write accounting` **oder** `write accounting-extended`
- Berechtigung `write contacts`
- Zugriff auf alle Projekte (`canAccessAllProjects()`)

## Workflow

1. Die Seite lädt den nächsten unbearbeiteten Transaktionsposten (bis zu 5 werden geladen, der erste wird aktiv angezeigt, die weiteren 4 ausgegraut).
2. Das System versucht automatisch, einen passenden **Kontakt** anhand der Ähnlichkeit mit dem Transaktions-Absender zu erkennen. Liegt die Ähnlichkeit über einem konfigurierten Schwellenwert (`ngo.guessers.contact-for-transaction.threshold`), wird der Kontakt vorausgewählt. Bei 100 % Übereinstimmung gilt der Kontakt als **eindeutig zugeordnet**.
3. Ist das Feature `projects` aktiv, wird auch ein passendes **Projekt** vorgeschlagen.
4. Der Nutzer prüft die Zuordnung, passt sie ggf. an und bestätigt die Buchung.
5. Nach Bestätigung wird ein `FinancialEvent` (Finanzereignis) vom Typ Spende erstellt und in den Status **Unbestätigt** und dann **Bestätigt** überführt.
6. Danach wird automatisch der nächste Transaktionsposten geladen.

Ein Transaktionsposten kann auch per URL-Parameter `?transaction_item_id=...` direkt aufgerufen werden (z.B. aus der Bankvorgangs-Übersicht heraus).

## Sortierung (Header-Aktionen)

| Aktion | Label | Beschreibung |
|---|---|---|
| `sortAsc` | **Älteste zuerst** | Sortiert die Transaktionen aufsteigend nach Datum (Standard) |
| `sortDesc` | **Neueste zuerst** | Sortiert die Transaktionen absteigend nach Datum |

## Felder / Formulare

### Kontakt-Auswahl (Spender/in)

- **Label:** „Spender/in"
- Durchsuchbares Dropdown (`Select`), das alle Kontakte enthält, sortiert nach Ähnlichkeit zum Transaktions-Absender.
- Wird gesperrt (`disabled`), wenn ein neuer Kontakt erstellt wurde oder der Kontakt eindeutig über ein verknüpftes Konto identifiziert wurde.
- Hinweis bei eindeutiger Zuordnung: „Der Kontakt ist bereits bekannt und konnte eindeutig zugeordnet werden." mit Hilfetext: „Der Bankvorgang hat folgenden Identifikator für die Person: :identifier. Dieser Identifikator wurde in der Vergangenheit bereits für diesen Kontakt verwendet."
- Optional kann die Kontaktnummer eingeblendet werden (Einstellung `donationAccounting.showContactNumber`).

### Projekt-Auswahl

- **Label:** „Projekt"
- Durchsuchbares Dropdown (`Select`), das nur Projekte mit `use_in_donations = true` anzeigt, die zum Buchungsdatum aktiv sind.
- Sortiert nach Projektnummer.
- Nur sichtbar, wenn das Feature `projects` aktiv ist.

### Neuen Kontakt erstellen

Über ein Formular können direkt neue Kontakte angelegt werden. Felder werden aus `CreateContact::schema()` geladen. Unterstützte Kontakttypen: **Person**, **Organisation**, **Ehepaar**.

Wenn der externe Dienst **Ionos AI** aktiv ist, werden Name und Adresse automatisch aus dem Transaktions-Absender vorgeschlagen (KI-basierte Erkennung via `Guess::contact()` und `Guess::address()`). Andernfalls werden die Felder leer angezeigt.

Adressfelder: Straße (line1), PLZ, Bundesland, Stadt, Land (Standard: DE).

### Adresse erstellen

Es kann auch eine neue Adresse für einen bereits ausgewählten Kontakt angelegt werden, mit denselben Adressfeldern.

## Optionen / Toggles

| Option | Label | Beschreibung |
|---|---|---|
| `withDonationReceipt` | **mit Spendenbescheinigung** | Legt fest, ob für diese Spende später eine Spendenbescheinigung erstellt werden soll. Standard: aktiviert. Hilfetext: „Soll später für diese Spende eine Spendenbescheinigung erstellt werden? Spendenbescheinigungen werden nicht automatisch erstellt, sondern können bei Bedarf in der Spendenverwaltung generiert werden." |
| `isMembershipFee` | **Mitgliedsbeitrag** | Kennzeichnet die Spende als Mitgliedsbeitrag (Typ `DonationType::MembershipFee` statt `DonationType::Money`). |
| `isCashDonation` | **Barspende** | Markiert die Spende als Barspende (z.B. bei einer Kollekte). Bei Barspenden kann das Feld Spender/in leer bleiben. Hinweis: „z.B. bei einer Kollekte. Wenn es sich um eine Barspende handelt, kann das Feld Spender/in auch leer bleiben." (Aktuell in der UI deaktiviert, siehe Issue #391.) |

## Aktionen

### Bestätigen

- **Label:** „Bestätigen"
- Erstellt ein Finanzereignis (`FinancialEvent::createDonation`) mit dem gewählten Kontakt, Projekt und den gesetzten Optionen.
- Überführt das Finanzereignis in den Status Bestätigt.
- Erfolgsmeldung: „Die Spende wurde erfolgreich erfasst"
- Löst das Event `EssentialDataUpdated` aus.

### Erstmal überspringen

- **Label:** „Erstmal überspringen"
- Überspringt den aktuellen Transaktionsposten vorübergehend (setzt `skipped_at` auf den aktuellen Zeitpunkt).
- Der Posten wird in der aktuellen Sitzung nicht erneut angezeigt, bleibt aber für spätere Bearbeitung erhalten.

### Keine Spende

- **Label:** „Keine Spende"
- Markiert den Transaktionsposten als „Keine Spende" (`is_no_donation = true`).
- Zeigt eine Benachrichtigung mit Link zum Erstellen eines Finanzereignisses: „Diese Einnahme wurde als 'Keine Spende' markiert. Gleich als Finanzereignis buchen"

## Anzeige im Header

- **Titel:** „Spendenerfassung"
- **Zähler im Heading:** Zeigt die verbleibende Anzahl unbearbeiteter Transaktionen an, z.B. „Spendenerfassung (noch 5)". Bei 0 verbleibenden: „Spendenerfassung (alles erledigt)"
- Wenn mehrere Bankkonten (`ConnectedAccount`) vorhanden sind, wird das Konto im Header der Transaktion angezeigt.

## Fehlermeldungen

| Fehler | Meldung |
|---|---|
| Kein Projekt ausgewählt | „Projekt muss ausgefüllt werden" |
| Kein Spender ausgewählt (bei Nicht-Barspenden) | „Spender/in muss ausgefüllt werden" |
| Spender nicht gefunden (z.B. zwischenzeitlich gelöscht) | „Spender/in konnte nicht gefunden werden. Bitte versuche es erneut." |
| Transaktion bereits gebucht | „Diese Transaktion wurde bereits erfasst. Leite weiter zum zugehörigen Finanzevent..." |
| Allgemeiner Fehler | „Ein Fehler ist aufgetreten. Bitte versuche es erneut." |

## Technische Details

- **Namespace:** `App\Filament\App\Pages\DonationAccounting`
- **Typ:** Filament Standalone Page (`Filament\Pages\Page`)
- **View:** `filament.pages.donation-accounting` (bzw. `filament.pages.no-connected-account-transactions` wenn keine Bankvorgänge vorhanden)
- **Traits:** `HasBreadcrumbs`, `RegistersInNavigation`
- **Query-String-Parameter:** `transaction_item_id` (optional, um einen bestimmten Transaktionsposten direkt aufzurufen)
- **Fehlerberichterstattung:** Bei Ausnahmen werden Kontext-Informationen (Transaktion, Kontakt, Projekt) an Flare gemeldet.

---

